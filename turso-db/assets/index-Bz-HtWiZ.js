(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))t(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&t(a)}).observe(document,{childList:!0,subtree:!0});function o(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function t(n){if(n.ep)return;n.ep=!0;const s=o(n);fetch(n.href,s)}})();function ot(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function st(r){if(Object.prototype.hasOwnProperty.call(r,"__esModule"))return r;var e=r.default;if(typeof e=="function"){var o=function t(){var n=!1;try{n=this instanceof t}catch{}return n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};o.prototype=e.prototype}else o={};return Object.defineProperty(o,"__esModule",{value:!0}),Object.keys(r).forEach(function(t){var n=Object.getOwnPropertyDescriptor(r,t);Object.defineProperty(o,t,n.get?n:{enumerable:!0,get:function(){return r[t]}})}),o}var A={},W={},B={},Me;function Ke(){if(Me)return B;Me=1,Object.defineProperty(B,"__esModule",{value:!0}),B.DefaultSerializer=B.extendSerializer=void 0;function r(t,n){const s=t.deserialize.bind(t),a=t.serialize.bind(t);return{deserialize(u){return n.deserialize(u,s)},serialize(u){return n.serialize(u,a)}}}B.extendSerializer=r;const e={deserialize(t){return Object.assign(Error(t.message),{name:t.name,stack:t.stack})},serialize(t){return{__error_marker:"$$error",message:t.message,name:t.name,stack:t.stack}}},o=t=>t&&typeof t=="object"&&"__error_marker"in t&&t.__error_marker==="$$error";return B.DefaultSerializer={deserialize(t){return o(t)?e.deserialize(t):t},serialize(t){return t instanceof Error?e.serialize(t):t}},B}var Se;function te(){if(Se)return W;Se=1,Object.defineProperty(W,"__esModule",{value:!0}),W.serialize=W.deserialize=W.registerSerializer=void 0;const r=Ke();let e=r.DefaultSerializer;function o(s){e=r.extendSerializer(e,s)}W.registerSerializer=o;function t(s){return e.deserialize(s)}W.deserialize=t;function n(s){return e.serialize(s)}return W.serialize=n,W}var de={},q={},N={},Ee;function it(){if(Ee)return N;Ee=1,Object.defineProperty(N,"__esModule",{value:!0}),N.getBundleURL=N.getBaseURL=void 0;let r;function e(){return r||(r=o()),r}N.getBundleURL=e;function o(){try{throw new Error}catch(n){const s=(""+n.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\/\/[^)\n]+/g);if(s)return t(s[0])}return"/"}function t(n){return(""+n).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\/\/.+)?\/[^/]+(?:\?.*)?$/,"$1")+"/"}return N.getBaseURL=t,N}var Pe;function Ze(){if(Pe)return q;Pe=1,Object.defineProperty(q,"__esModule",{value:!0}),q.isWorkerRuntime=q.getWorkerImplementation=q.defaultPoolSize=void 0;const r=it();q.defaultPoolSize=typeof navigator<"u"&&navigator.hardwareConcurrency?navigator.hardwareConcurrency:4;const e=u=>/^[a-zA-Z][a-zA-Z\d+\-.]*:/.test(u);function o(u){const p=new Blob([u],{type:"application/javascript"});return URL.createObjectURL(p)}function t(){if(typeof Worker>"u")return class{constructor(){throw Error("No web worker implementation available. You might have tried to spawn a worker within a worker in a browser that doesn't support workers in workers.")}};class u extends Worker{constructor(i,c){var h,v;typeof i=="string"&&c&&c._baseURL?i=new URL(i,c._baseURL):typeof i=="string"&&!e(i)&&r.getBundleURL().match(/^file:\/\//i)&&(i=new URL(i,r.getBundleURL().replace(/\/[^\/]+$/,"/")),(!((h=c?.CORSWorkaround)!==null&&h!==void 0)||h)&&(i=o(`importScripts(${JSON.stringify(i)});`))),typeof i=="string"&&e(i)&&(!((v=c?.CORSWorkaround)!==null&&v!==void 0)||v)&&(i=o(`importScripts(${JSON.stringify(i)});`)),super(i,c)}}class p extends u{constructor(i,c){const h=window.URL.createObjectURL(i);super(h,c)}static fromText(i,c){const h=new window.Blob([i],{type:"text/javascript"});return new p(h,c)}}return{blob:p,default:u}}let n;function s(){return n||(n=t()),n}q.getWorkerImplementation=s;function a(){const u=typeof self<"u"&&typeof Window<"u"&&self instanceof Window;return!!(typeof self<"u"&&self.postMessage&&!u)}return q.isWorkerRuntime=a,q}var U={},ne={exports:{}},he,je;function at(){if(je)return he;je=1;var r=1e3,e=r*60,o=e*60,t=o*24,n=t*7,s=t*365.25;he=function(i,c){c=c||{};var h=typeof i;if(h==="string"&&i.length>0)return a(i);if(h==="number"&&isFinite(i))return c.long?p(i):u(i);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(i))};function a(i){if(i=String(i),!(i.length>100)){var c=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(i);if(c){var h=parseFloat(c[1]),v=(c[2]||"ms").toLowerCase();switch(v){case"years":case"year":case"yrs":case"yr":case"y":return h*s;case"weeks":case"week":case"w":return h*n;case"days":case"day":case"d":return h*t;case"hours":case"hour":case"hrs":case"hr":case"h":return h*o;case"minutes":case"minute":case"mins":case"min":case"m":return h*e;case"seconds":case"second":case"secs":case"sec":case"s":return h*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return h;default:return}}}}function u(i){var c=Math.abs(i);return c>=t?Math.round(i/t)+"d":c>=o?Math.round(i/o)+"h":c>=e?Math.round(i/e)+"m":c>=r?Math.round(i/r)+"s":i+"ms"}function p(i){var c=Math.abs(i);return c>=t?l(i,c,t,"day"):c>=o?l(i,c,o,"hour"):c>=e?l(i,c,e,"minute"):c>=r?l(i,c,r,"second"):i+" ms"}function l(i,c,h,v){var T=c>=h*1.5;return Math.round(i/h)+" "+v+(T?"s":"")}return he}var pe,Re;function ut(){if(Re)return pe;Re=1;function r(e){t.debug=t,t.default=t,t.coerce=l,t.disable=u,t.enable=s,t.enabled=p,t.humanize=at(),t.destroy=i,Object.keys(e).forEach(c=>{t[c]=e[c]}),t.names=[],t.skips=[],t.formatters={};function o(c){let h=0;for(let v=0;v<c.length;v++)h=(h<<5)-h+c.charCodeAt(v),h|=0;return t.colors[Math.abs(h)%t.colors.length]}t.selectColor=o;function t(c){let h,v=null,T,P;function M(...b){if(!M.enabled)return;const y=M,m=Number(new Date),g=m-(h||m);y.diff=g,y.prev=h,y.curr=m,h=m,b[0]=t.coerce(b[0]),typeof b[0]!="string"&&b.unshift("%O");let C=0;b[0]=b[0].replace(/%([a-zA-Z%])/g,(k,S)=>{if(k==="%%")return"%";C++;const d=t.formatters[S];if(typeof d=="function"){const w=b[C];k=d.call(y,w),b.splice(C,1),C--}return k}),t.formatArgs.call(y,b),(y.log||t.log).apply(y,b)}return M.namespace=c,M.useColors=t.useColors(),M.color=t.selectColor(c),M.extend=n,M.destroy=t.destroy,Object.defineProperty(M,"enabled",{enumerable:!0,configurable:!1,get:()=>v!==null?v:(T!==t.namespaces&&(T=t.namespaces,P=t.enabled(c)),P),set:b=>{v=b}}),typeof t.init=="function"&&t.init(M),M}function n(c,h){const v=t(this.namespace+(typeof h>"u"?":":h)+c);return v.log=this.log,v}function s(c){t.save(c),t.namespaces=c,t.names=[],t.skips=[];const h=(typeof c=="string"?c:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const v of h)v[0]==="-"?t.skips.push(v.slice(1)):t.names.push(v)}function a(c,h){let v=0,T=0,P=-1,M=0;for(;v<c.length;)if(T<h.length&&(h[T]===c[v]||h[T]==="*"))h[T]==="*"?(P=T,M=v,T++):(v++,T++);else if(P!==-1)T=P+1,M++,v=M;else return!1;for(;T<h.length&&h[T]==="*";)T++;return T===h.length}function u(){const c=[...t.names,...t.skips.map(h=>"-"+h)].join(",");return t.enable(""),c}function p(c){for(const h of t.skips)if(a(c,h))return!1;for(const h of t.names)if(a(c,h))return!0;return!1}function l(c){return c instanceof Error?c.stack||c.message:c}function i(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}return pe=r,pe}var Fe;function Ce(){return Fe||(Fe=1,(function(r,e){var o={};e.formatArgs=n,e.save=s,e.load=a,e.useColors=t,e.storage=u(),e.destroy=(()=>{let l=!1;return()=>{l||(l=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function t(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let l;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(l=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(l[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(l){if(l[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+l[0]+(this.useColors?"%c ":" ")+"+"+r.exports.humanize(this.diff),!this.useColors)return;const i="color: "+this.color;l.splice(1,0,i,"color: inherit");let c=0,h=0;l[0].replace(/%[a-zA-Z%]/g,v=>{v!=="%%"&&(c++,v==="%c"&&(h=c))}),l.splice(h,0,i)}e.log=console.debug||console.log||(()=>{});function s(l){try{l?e.storage.setItem("debug",l):e.storage.removeItem("debug")}catch{}}function a(){let l;try{l=e.storage.getItem("debug")||e.storage.getItem("DEBUG")}catch{}return!l&&typeof process<"u"&&"env"in process&&(l=o.DEBUG),l}function u(){try{return localStorage}catch{}}r.exports=ut()(e);const{formatters:p}=r.exports;p.j=function(l){try{return JSON.stringify(l)}catch(i){return"[UnexpectedJSONParseError]: "+i.message}}})(ne,ne.exports)),ne.exports}var ct=function(r,e,o,t){function n(s){return s instanceof o?s:new o(function(a){a(s)})}return new(o||(o=Promise))(function(s,a){function u(i){try{l(t.next(i))}catch(c){a(c)}}function p(i){try{l(t.throw(i))}catch(c){a(c)}}function l(i){i.done?s(i.value):n(i.value).then(u,p)}l((t=t.apply(r,e||[])).next())})};class ue{constructor(e){this._baseObserver=e,this._pendingPromises=new Set}complete(){Promise.all(this._pendingPromises).then(()=>this._baseObserver.complete()).catch(e=>this._baseObserver.error(e))}error(e){this._baseObserver.error(e)}schedule(e){const o=Promise.all(this._pendingPromises),t=[],n=a=>t.push(a),s=Promise.resolve().then(()=>ct(this,void 0,void 0,function*(){yield o,yield e(n),this._pendingPromises.delete(s);for(const a of t)this._baseObserver.next(a)})).catch(a=>{this._pendingPromises.delete(s),this._baseObserver.error(a)});this._pendingPromises.add(s)}}const Ge=()=>typeof Symbol=="function",re=r=>Ge()&&!!Symbol[r],ke=r=>re(r)?Symbol[r]:"@@"+r;re("asyncIterator")||(Symbol.asyncIterator=Symbol.asyncIterator||Symbol.for("Symbol.asyncIterator"));const lt=ke("iterator"),we=ke("observable"),Xe=ke("species");function ie(r,e){const o=r[e];if(o!=null){if(typeof o!="function")throw new TypeError(o+" is not a function");return o}}function Z(r){let e=r.constructor;return e!==void 0&&(e=e[Xe],e===null&&(e=void 0)),e!==void 0?e:R}function ft(r){return r instanceof R}function V(r){V.log?V.log(r):setTimeout(()=>{throw r},0)}function se(r){Promise.resolve().then(()=>{try{r()}catch(e){V(e)}})}function Ye(r){const e=r._cleanup;if(e!==void 0&&(r._cleanup=void 0,!!e))try{if(typeof e=="function")e();else{const o=ie(e,"unsubscribe");o&&o.call(e)}}catch(o){V(o)}}function _e(r){r._observer=void 0,r._queue=void 0,r._state="closed"}function dt(r){const e=r._queue;if(e){r._queue=void 0,r._state="ready";for(const o of e)if(et(r,o.type,o.value),r._state==="closed")break}}function et(r,e,o){r._state="running";const t=r._observer;try{const n=t?ie(t,e):void 0;switch(e){case"next":n&&n.call(t,o);break;case"error":if(_e(r),n)n.call(t,o);else throw o;break;case"complete":_e(r),n&&n.call(t);break}}catch(n){V(n)}r._state==="closed"?Ye(r):r._state==="running"&&(r._state="ready")}function me(r,e,o){if(r._state!=="closed"){if(r._state==="buffering"){r._queue=r._queue||[],r._queue.push({type:e,value:o});return}if(r._state!=="ready"){r._state="buffering",r._queue=[{type:e,value:o}],se(()=>dt(r));return}et(r,e,o)}}class ht{constructor(e,o){this._cleanup=void 0,this._observer=e,this._queue=void 0,this._state="initializing";const t=new pt(this);try{this._cleanup=o.call(void 0,t)}catch(n){t.error(n)}this._state==="initializing"&&(this._state="ready")}get closed(){return this._state==="closed"}unsubscribe(){this._state!=="closed"&&(_e(this),Ye(this))}}class pt{constructor(e){this._subscription=e}get closed(){return this._subscription._state==="closed"}next(e){me(this._subscription,"next",e)}error(e){me(this._subscription,"error",e)}complete(){me(this._subscription,"complete")}}class R{constructor(e){if(!(this instanceof R))throw new TypeError("Observable cannot be called as a function");if(typeof e!="function")throw new TypeError("Observable initializer must be a function");this._subscriber=e}subscribe(e,o,t){return(typeof e!="object"||e===null)&&(e={next:e,error:o,complete:t}),new ht(e,this._subscriber)}pipe(e,...o){let t=this;for(const n of[e,...o])t=n(t);return t}tap(e,o,t){const n=typeof e!="object"||e===null?{next:e,error:o,complete:t}:e;return new R(s=>this.subscribe({next(a){n.next&&n.next(a),s.next(a)},error(a){n.error&&n.error(a),s.error(a)},complete(){n.complete&&n.complete(),s.complete()},start(a){n.start&&n.start(a)}}))}forEach(e){return new Promise((o,t)=>{if(typeof e!="function"){t(new TypeError(e+" is not a function"));return}function n(){s.unsubscribe(),o(void 0)}const s=this.subscribe({next(a){try{e(a,n)}catch(u){t(u),s.unsubscribe()}},error(a){t(a)},complete(){o(void 0)}})})}map(e){if(typeof e!="function")throw new TypeError(e+" is not a function");const o=Z(this);return new o(t=>this.subscribe({next(n){let s=n;try{s=e(n)}catch(a){return t.error(a)}t.next(s)},error(n){t.error(n)},complete(){t.complete()}}))}filter(e){if(typeof e!="function")throw new TypeError(e+" is not a function");const o=Z(this);return new o(t=>this.subscribe({next(n){try{if(!e(n))return}catch(s){return t.error(s)}t.next(n)},error(n){t.error(n)},complete(){t.complete()}}))}reduce(e,o){if(typeof e!="function")throw new TypeError(e+" is not a function");const t=Z(this),n=arguments.length>1;let s=!1,a=o;return new t(u=>this.subscribe({next(p){const l=!s;if(s=!0,!l||n)try{a=e(a,p)}catch(i){return u.error(i)}else a=p},error(p){u.error(p)},complete(){if(!s&&!n)return u.error(new TypeError("Cannot reduce an empty sequence"));u.next(a),u.complete()}}))}concat(...e){const o=Z(this);return new o(t=>{let n,s=0;function a(u){n=u.subscribe({next(p){t.next(p)},error(p){t.error(p)},complete(){s===e.length?(n=void 0,t.complete()):a(o.from(e[s++]))}})}return a(this),()=>{n&&(n.unsubscribe(),n=void 0)}})}flatMap(e){if(typeof e!="function")throw new TypeError(e+" is not a function");const o=Z(this);return new o(t=>{const n=[],s=this.subscribe({next(u){let p;if(e)try{p=e(u)}catch(i){return t.error(i)}else p=u;const l=o.from(p).subscribe({next(i){t.next(i)},error(i){t.error(i)},complete(){const i=n.indexOf(l);i>=0&&n.splice(i,1),a()}});n.push(l)},error(u){t.error(u)},complete(){a()}});function a(){s.closed&&n.length===0&&t.complete()}return()=>{n.forEach(u=>u.unsubscribe()),s.unsubscribe()}})}[we](){return this}static from(e){const o=typeof this=="function"?this:R;if(e==null)throw new TypeError(e+" is not an object");const t=ie(e,we);if(t){const n=t.call(e);if(Object(n)!==n)throw new TypeError(n+" is not an object");return ft(n)&&n.constructor===o?n:new o(s=>n.subscribe(s))}if(re("iterator")){const n=ie(e,lt);if(n)return new o(s=>{se(()=>{if(!s.closed){for(const a of n.call(e))if(s.next(a),s.closed)return;s.complete()}})})}if(Array.isArray(e))return new o(n=>{se(()=>{if(!n.closed){for(const s of e)if(n.next(s),n.closed)return;n.complete()}})});throw new TypeError(e+" is not observable")}static of(...e){const o=typeof this=="function"?this:R;return new o(t=>{se(()=>{if(!t.closed){for(const n of e)if(t.next(n),t.closed)return;t.complete()}})})}static get[Xe](){return this}}Ge()&&Object.defineProperty(R,Symbol("extensions"),{value:{symbol:we,hostReportError:V},configurable:!0});function H(r){typeof r=="function"?r():r&&typeof r.unsubscribe=="function"&&r.unsubscribe()}var mt=function(r,e,o,t){function n(s){return s instanceof o?s:new o(function(a){a(s)})}return new(o||(o=Promise))(function(s,a){function u(i){try{l(t.next(i))}catch(c){a(c)}}function p(i){try{l(t.throw(i))}catch(c){a(c)}}function l(i){i.done?s(i.value):n(i.value).then(u,p)}l((t=t.apply(r,e||[])).next())})};function bt(r){return e=>new R(o=>{const t=new ue(o),n=e.subscribe({complete(){t.complete()},error(s){t.error(s)},next(s){t.schedule(a=>mt(this,void 0,void 0,function*(){(yield r(s))&&a(s)}))}});return()=>H(n)})}function yt(r){return r&&re("asyncIterator")&&r[Symbol.asyncIterator]}function gt(r){return r&&re("iterator")&&r[Symbol.iterator]}var vt=function(r,e,o,t){function n(s){return s instanceof o?s:new o(function(a){a(s)})}return new(o||(o=Promise))(function(s,a){function u(i){try{l(t.next(i))}catch(c){a(c)}}function p(i){try{l(t.throw(i))}catch(c){a(c)}}function l(i){i.done?s(i.value):n(i.value).then(u,p)}l((t=t.apply(r,e||[])).next())})},wt=function(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],o;return e?e.call(r):(r=typeof __values=="function"?__values(r):r[Symbol.iterator](),o={},t("next"),t("throw"),t("return"),o[Symbol.asyncIterator]=function(){return this},o);function t(s){o[s]=r[s]&&function(a){return new Promise(function(u,p){a=r[s](a),n(u,p,a.done,a.value)})}}function n(s,a,u,p){Promise.resolve(p).then(function(l){s({value:l,done:u})},a)}};function _t(r){return e=>new R(o=>{const t=new ue(o),n=e.subscribe({complete(){t.complete()},error(s){t.error(s)},next(s){t.schedule(a=>vt(this,void 0,void 0,function*(){var u,p;const l=yield r(s);if(gt(l)||yt(l))try{for(var i=wt(l),c;c=yield i.next(),!c.done;){const h=c.value;a(h)}}catch(h){u={error:h}}finally{try{c&&!c.done&&(p=i.return)&&(yield p.call(i))}finally{if(u)throw u.error}}else l.map(h=>a(h))}))}});return()=>H(n)})}function Ct(r){return new R(e=>{let o=0;const t=setInterval(()=>{e.next(o++)},r);return()=>clearInterval(t)})}var kt=function(r,e,o,t){function n(s){return s instanceof o?s:new o(function(a){a(s)})}return new(o||(o=Promise))(function(s,a){function u(i){try{l(t.next(i))}catch(c){a(c)}}function p(i){try{l(t.throw(i))}catch(c){a(c)}}function l(i){i.done?s(i.value):n(i.value).then(u,p)}l((t=t.apply(r,e||[])).next())})};function Tt(r){return e=>new R(o=>{const t=new ue(o),n=e.subscribe({complete(){t.complete()},error(s){t.error(s)},next(s){t.schedule(a=>kt(this,void 0,void 0,function*(){const u=yield r(s);a(u)}))}});return()=>H(n)})}function Mt(...r){return r.length===0?R.from([]):new R(e=>{let o=0;const t=r.map(s=>s.subscribe({error(a){e.error(a),n()},next(a){e.next(a)},complete(){++o===r.length&&(e.complete(),n())}})),n=()=>{t.forEach(s=>H(s))};return n})}class tt extends R{constructor(){super(e=>(this._observers.add(e),()=>this._observers.delete(e))),this._observers=new Set}next(e){for(const o of this._observers)o.next(e)}error(e){for(const o of this._observers)o.error(e)}complete(){for(const e of this._observers)e.complete()}}function St(r){const e=new tt;let o,t=0;return new R(n=>{o||(o=r.subscribe(e));const s=e.subscribe(n);return t++,()=>{t--,s.unsubscribe(),t===0&&(H(o),o=void 0)}})}var Et=function(r,e,o,t){function n(s){return s instanceof o?s:new o(function(a){a(s)})}return new(o||(o=Promise))(function(s,a){function u(i){try{l(t.next(i))}catch(c){a(c)}}function p(i){try{l(t.throw(i))}catch(c){a(c)}}function l(i){i.done?s(i.value):n(i.value).then(u,p)}l((t=t.apply(r,e||[])).next())})};function Pt(r,e){return o=>new R(t=>{let n,s=0;const a=new ue(t),u=o.subscribe({complete(){a.complete()},error(p){a.error(p)},next(p){a.schedule(l=>Et(this,void 0,void 0,function*(){n=yield r(s===0?typeof e>"u"?p:e:n,p,s++),l(n)}))}});return()=>H(u)})}const jt=Object.freeze(Object.defineProperty({__proto__:null,Observable:R,Subject:tt,filter:bt,flatMap:_t,interval:Ct,map:Tt,merge:Mt,multicast:St,scan:Pt,unsubscribe:H},Symbol.toStringTag,{value:"Module"})),ce=st(jt);var G={},Oe;function Rt(){if(Oe)return G;Oe=1,Object.defineProperty(G,"__esModule",{value:!0}),G.allSettled=void 0;function r(e){return Promise.all(e.map(o=>{const t=a=>({status:"fulfilled",value:a}),n=a=>({status:"rejected",reason:a}),s=Promise.resolve(o);try{return s.then(t,n)}catch(a){return Promise.reject(a)}}))}return G.allSettled=r,G}var be={},xe;function Ft(){return xe||(xe=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.PoolEventType=void 0,(function(e){e.initialized="initialized",e.taskCanceled="taskCanceled",e.taskCompleted="taskCompleted",e.taskFailed="taskFailed",e.taskQueued="taskQueued",e.taskQueueDrained="taskQueueDrained",e.taskStart="taskStart",e.terminated="terminated"})(r.PoolEventType||(r.PoolEventType={}))})(be)),be}var X={},O={},ze;function Te(){return ze||(ze=1,Object.defineProperty(O,"__esModule",{value:!0}),O.$worker=O.$transferable=O.$terminate=O.$events=O.$errors=void 0,O.$errors=Symbol("thread.errors"),O.$events=Symbol("thread.events"),O.$terminate=Symbol("thread.terminate"),O.$transferable=Symbol("thread.transferable"),O.$worker=Symbol("thread.worker")),O}var We;function rt(){if(We)return X;We=1,Object.defineProperty(X,"__esModule",{value:!0}),X.Thread=void 0;const r=Te();function e(o){throw Error(o)}return X.Thread={errors(o){return o[r.$errors]||e("Error observable not found. Make sure to pass a thread instance as returned by the spawn() promise.")},events(o){return o[r.$events]||e("Events observable not found. Make sure to pass a thread instance as returned by the spawn() promise.")},terminate(o){return o[r.$terminate]()}},X}var qe;function Ot(){return qe||(qe=1,(function(r){var e=U&&U.__awaiter||function(b,y,m,g){function C(f){return f instanceof m?f:new m(function(k){k(f)})}return new(m||(m=Promise))(function(f,k){function S(_){try{w(g.next(_))}catch(E){k(E)}}function d(_){try{w(g.throw(_))}catch(E){k(E)}}function w(_){_.done?f(_.value):C(_.value).then(S,d)}w((g=g.apply(b,y||[])).next())})},o=U&&U.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(r,"__esModule",{value:!0}),r.Pool=r.Thread=r.PoolEventType=void 0;const t=o(Ce()),n=ce,s=Rt(),a=Ze(),u=Ft();Object.defineProperty(r,"PoolEventType",{enumerable:!0,get:function(){return u.PoolEventType}});const p=rt();Object.defineProperty(r,"Thread",{enumerable:!0,get:function(){return p.Thread}});let l=1;function i(b){const y=[];for(let m=0;m<b;m++)y.push(m);return y}function c(b){return new Promise(y=>setTimeout(y,b))}function h(b,y){return b.reduce((m,g)=>[...m,...y(g)],[])}function v(b){return b.replace(/\W/g," ").trim().replace(/\s+/g,"-")}function T(b,y){return i(y).map(()=>({init:b(),runningTasks:[]}))}class P{constructor(y,m){this.eventSubject=new n.Subject,this.initErrors=[],this.isClosing=!1,this.nextTaskID=1,this.taskQueue=[];const g=typeof m=="number"?{size:m}:m||{},{size:C=a.defaultPoolSize}=g;this.debug=t.default(`threads:pool:${v(g.name||String(l++))}`),this.options=g,this.workers=T(y,C),this.eventObservable=n.multicast(n.Observable.from(this.eventSubject)),Promise.all(this.workers.map(f=>f.init)).then(()=>this.eventSubject.next({type:u.PoolEventType.initialized,size:this.workers.length}),f=>{this.debug("Error while initializing pool worker:",f),this.eventSubject.error(f),this.initErrors.push(f)})}findIdlingWorker(){const{concurrency:y=1}=this.options;return this.workers.find(m=>m.runningTasks.length<y)}runPoolTask(y,m){return e(this,void 0,void 0,function*(){const g=this.workers.indexOf(y)+1;this.debug(`Running task #${m.id} on worker #${g}...`),this.eventSubject.next({type:u.PoolEventType.taskStart,taskID:m.id,workerID:g});try{const C=yield m.run(yield y.init);this.debug(`Task #${m.id} completed successfully`),this.eventSubject.next({type:u.PoolEventType.taskCompleted,returnValue:C,taskID:m.id,workerID:g})}catch(C){this.debug(`Task #${m.id} failed`),this.eventSubject.next({type:u.PoolEventType.taskFailed,taskID:m.id,error:C,workerID:g})}})}run(y,m){return e(this,void 0,void 0,function*(){const g=e(this,void 0,void 0,function*(){const C=()=>{y.runningTasks=y.runningTasks.filter(f=>f!==g)};yield c(0);try{yield this.runPoolTask(y,m)}finally{C(),this.isClosing||this.scheduleWork()}});y.runningTasks.push(g)})}scheduleWork(){this.debug("Attempt de-queueing a task in order to run it...");const y=this.findIdlingWorker();if(!y)return;const m=this.taskQueue.shift();if(!m){this.debug("Task queue is empty"),this.eventSubject.next({type:u.PoolEventType.taskQueueDrained});return}this.run(y,m)}taskCompletion(y){return new Promise((m,g)=>{const C=this.events().subscribe(f=>{f.type===u.PoolEventType.taskCompleted&&f.taskID===y?(C.unsubscribe(),m(f.returnValue)):f.type===u.PoolEventType.taskFailed&&f.taskID===y?(C.unsubscribe(),g(f.error)):f.type===u.PoolEventType.terminated&&(C.unsubscribe(),g(Error("Pool has been terminated before task was run.")))})})}settled(y=!1){return e(this,void 0,void 0,function*(){const m=()=>h(this.workers,f=>f.runningTasks),g=[],C=this.eventObservable.subscribe(f=>{f.type===u.PoolEventType.taskFailed&&g.push(f.error)});return this.initErrors.length>0?Promise.reject(this.initErrors[0]):y&&this.taskQueue.length===0?(yield s.allSettled(m()),g):(yield new Promise((f,k)=>{const S=this.eventObservable.subscribe({next(d){d.type===u.PoolEventType.taskQueueDrained&&(S.unsubscribe(),f(void 0))},error:k})}),yield s.allSettled(m()),C.unsubscribe(),g)})}completed(y=!1){return e(this,void 0,void 0,function*(){const m=this.settled(y),g=new Promise((f,k)=>{const S=this.eventObservable.subscribe({next(d){d.type===u.PoolEventType.taskQueueDrained?(S.unsubscribe(),f(m)):d.type===u.PoolEventType.taskFailed&&(S.unsubscribe(),k(d.error))},error:k})}),C=yield Promise.race([m,g]);if(C.length>0)throw C[0]})}events(){return this.eventObservable}queue(y){const{maxQueuedJobs:m=1/0}=this.options;if(this.isClosing)throw Error("Cannot schedule pool tasks after terminate() has been called.");if(this.initErrors.length>0)throw this.initErrors[0];const g=this.nextTaskID++,C=this.taskCompletion(g);C.catch(k=>{this.debug(`Task #${g} errored:`,k)});const f={id:g,run:y,cancel:()=>{this.taskQueue.indexOf(f)!==-1&&(this.taskQueue=this.taskQueue.filter(k=>k!==f),this.eventSubject.next({type:u.PoolEventType.taskCanceled,taskID:f.id}))},then:C.then.bind(C)};if(this.taskQueue.length>=m)throw Error(`Maximum number of pool tasks queued. Refusing to queue another one.
This usually happens for one of two reasons: We are either at peak workload right now or some tasks just won't finish, thus blocking the pool.`);return this.debug(`Queueing task #${f.id}...`),this.taskQueue.push(f),this.eventSubject.next({type:u.PoolEventType.taskQueued,taskID:f.id}),this.scheduleWork(),f}terminate(y){return e(this,void 0,void 0,function*(){this.isClosing=!0,y||(yield this.completed(!0)),this.eventSubject.next({type:u.PoolEventType.terminated,remainingQueue:[...this.taskQueue]}),this.eventSubject.complete(),yield Promise.all(this.workers.map(m=>e(this,void 0,void 0,function*(){return p.Thread.terminate(yield m.init)})))})}}P.EventType=u.PoolEventType;function M(b,y){return new P(b,y)}M.EventType=u.PoolEventType,r.Pool=M})(U)),U}var I={},Y={},Ie;function xt(){if(Ie)return Y;Ie=1,Object.defineProperty(Y,"__esModule",{value:!0}),Y.createPromiseWithResolver=void 0;const r=()=>{};function e(){let o=!1,t,n=r;return[new Promise(u=>{o?u(t):n=u}),u=>{o=!0,t=u,n(t)}]}return Y.createPromiseWithResolver=e,Y}var ye={},$e;function zt(){return $e||($e=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.WorkerEventType=void 0,(function(e){e.internalError="internalError",e.message="message",e.termination="termination"})(r.WorkerEventType||(r.WorkerEventType={}))})(ye)),ye}var $={},ee={},Le;function Wt(){if(Le)return ee;Le=1,Object.defineProperty(ee,"__esModule",{value:!0}),ee.ObservablePromise=void 0;const r=ce,e=()=>{},o=u=>u,t=u=>Promise.resolve().then(u);function n(u){throw u}function s(u){return u&&typeof u.then=="function"}class a extends r.Observable{constructor(p){super(l=>{const i=this,c=Object.assign(Object.assign({},l),{complete(){l.complete(),i.onCompletion()},error(h){l.error(h),i.onError(h)},next(h){l.next(h),i.onNext(h)}});try{return this.initHasRun=!0,p(c)}catch(h){c.error(h)}}),this.initHasRun=!1,this.fulfillmentCallbacks=[],this.rejectionCallbacks=[],this.firstValueSet=!1,this.state="pending"}onNext(p){this.firstValueSet||(this.firstValue=p,this.firstValueSet=!0)}onError(p){this.state="rejected",this.rejection=p;for(const l of this.rejectionCallbacks)t(()=>l(p))}onCompletion(){this.state="fulfilled";for(const p of this.fulfillmentCallbacks)t(()=>p(this.firstValue))}then(p,l){const i=p||o,c=l||n;let h=!1;return new Promise((v,T)=>{const P=b=>{if(!h){h=!0;try{v(c(b))}catch(y){T(y)}}},M=b=>{try{v(i(b))}catch(y){P(y)}};if(this.initHasRun||this.subscribe({error:P}),this.state==="fulfilled")return v(i(this.firstValue));if(this.state==="rejected")return h=!0,v(c(this.rejection));this.fulfillmentCallbacks.push(M),this.rejectionCallbacks.push(P)})}catch(p){return this.then(void 0,p)}finally(p){const l=p||e;return this.then(i=>(l(),i),()=>l())}static from(p){return s(p)?new a(l=>{const i=h=>{l.next(h),l.complete()},c=h=>{l.error(h)};p.then(i,c)}):super.from(p)}}return ee.ObservablePromise=a,ee}var Q={},De;function ae(){if(De)return Q;De=1,Object.defineProperty(Q,"__esModule",{value:!0}),Q.Transfer=Q.isTransferDescriptor=void 0;const r=Te();function e(n){return!(!n||typeof n!="object")}function o(n){return n&&typeof n=="object"&&n[r.$transferable]}Q.isTransferDescriptor=o;function t(n,s){if(!s){if(!e(n))throw Error();s=[n]}return{[r.$transferable]:!0,send:n,transferables:s}}return Q.Transfer=t,Q}var ge={},Ae;function nt(){return Ae||(Ae=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.WorkerMessageType=r.MasterMessageType=void 0,(function(e){e.cancel="cancel",e.run="run"})(r.MasterMessageType||(r.MasterMessageType={})),(function(e){e.error="error",e.init="init",e.result="result",e.running="running",e.uncaughtError="uncaughtError"})(r.WorkerMessageType||(r.WorkerMessageType={}))})(ge)),ge}var Be;function qt(){if(Be)return $;Be=1;var r=$&&$.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty($,"__esModule",{value:!0}),$.createProxyModule=$.createProxyFunction=void 0;const e=r(Ce()),o=ce,t=te(),n=Wt(),s=ae(),a=nt(),u=e.default("threads:master:messages");let p=1;const l=b=>Array.from(new Set(b)),i=b=>b&&b.type===a.WorkerMessageType.error,c=b=>b&&b.type===a.WorkerMessageType.result,h=b=>b&&b.type===a.WorkerMessageType.running;function v(b,y){return new o.Observable(m=>{let g;const C=(f=>{if(u("Message from worker:",f.data),!(!f.data||f.data.uid!==y)){if(h(f.data))g=f.data.resultType;else if(c(f.data))g==="promise"?(typeof f.data.payload<"u"&&m.next(t.deserialize(f.data.payload)),m.complete(),b.removeEventListener("message",C)):(f.data.payload&&m.next(t.deserialize(f.data.payload)),f.data.complete&&(m.complete(),b.removeEventListener("message",C)));else if(i(f.data)){const k=t.deserialize(f.data.error);m.error(k),b.removeEventListener("message",C)}}});return b.addEventListener("message",C),()=>{if(g==="observable"||!g){const f={type:a.MasterMessageType.cancel,uid:y};b.postMessage(f)}b.removeEventListener("message",C)}})}function T(b){if(b.length===0)return{args:[],transferables:[]};const y=[],m=[];for(const g of b)s.isTransferDescriptor(g)?(y.push(t.serialize(g.send)),m.push(...g.transferables)):y.push(t.serialize(g));return{args:y,transferables:m.length===0?m:l(m)}}function P(b,y){return((...m)=>{const g=p++,{args:C,transferables:f}=T(m),k={type:a.MasterMessageType.run,uid:g,method:y,args:C};u("Sending command to run function to worker:",k);try{b.postMessage(k,f)}catch(S){return n.ObservablePromise.from(Promise.reject(S))}return n.ObservablePromise.from(o.multicast(v(b,g)))})}$.createProxyFunction=P;function M(b,y){const m={};for(const g of y)m[g]=P(b,g);return m}return $.createProxyModule=M,$}var Ne;function It(){if(Ne)return I;Ne=1;var r={},e=I&&I.__awaiter||function(f,k,S,d){function w(_){return _ instanceof S?_:new S(function(E){E(_)})}return new(S||(S=Promise))(function(_,E){function F(z){try{x(d.next(z))}catch(K){E(K)}}function j(z){try{x(d.throw(z))}catch(K){E(K)}}function x(z){z.done?_(z.value):w(z.value).then(F,j)}x((d=d.apply(f,k||[])).next())})},o=I&&I.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(I,"__esModule",{value:!0}),I.spawn=void 0;const t=o(Ce()),n=ce,s=te(),a=xt(),u=Te(),p=zt(),l=qt(),i=t.default("threads:master:messages"),c=t.default("threads:master:spawn"),h=t.default("threads:master:thread-utils"),v=f=>f&&f.type==="init",T=f=>f&&f.type==="uncaughtError",P=typeof process<"u"&&r.THREADS_WORKER_INIT_TIMEOUT?Number.parseInt(r.THREADS_WORKER_INIT_TIMEOUT,10):1e4;function M(f,k,S){return e(this,void 0,void 0,function*(){let d;const w=new Promise((E,F)=>{d=setTimeout(()=>F(Error(S)),k)}),_=yield Promise.race([f,w]);return clearTimeout(d),_})}function b(f){return new Promise((k,S)=>{const d=(w=>{i("Message from worker before finishing initialization:",w.data),v(w.data)?(f.removeEventListener("message",d),k(w.data)):T(w.data)&&(f.removeEventListener("message",d),S(s.deserialize(w.data.error)))});f.addEventListener("message",d)})}function y(f,k){return new n.Observable(S=>{const d=(_=>{const E={type:p.WorkerEventType.message,data:_.data};S.next(E)}),w=(_=>{h("Unhandled promise rejection event in thread:",_);const E={type:p.WorkerEventType.internalError,error:Error(_.reason)};S.next(E)});f.addEventListener("message",d),f.addEventListener("unhandledrejection",w),k.then(()=>{const _={type:p.WorkerEventType.termination};f.removeEventListener("message",d),f.removeEventListener("unhandledrejection",w),S.next(_),S.complete()})})}function m(f){const[k,S]=a.createPromiseWithResolver();return{terminate:()=>e(this,void 0,void 0,function*(){h("Terminating worker"),yield f.terminate(),S()}),termination:k}}function g(f,k,S,d){const w=S.filter(_=>_.type===p.WorkerEventType.internalError).map(_=>_.error);return Object.assign(f,{[u.$errors]:w,[u.$events]:S,[u.$terminate]:d,[u.$worker]:k})}function C(f,k){return e(this,void 0,void 0,function*(){c("Initializing new thread");const S=k&&k.timeout?k.timeout:P,w=(yield M(b(f),S,`Timeout: Did not receive an init message from worker after ${S}ms. Make sure the worker calls expose().`)).exposed,{termination:_,terminate:E}=m(f),F=y(f,_);if(w.type==="function"){const j=l.createProxyFunction(f);return g(j,f,F,E)}else if(w.type==="module"){const j=l.createProxyModule(f,w.methods);return g(j,f,F,E)}else{const j=w.type;throw Error(`Worker init message states unexpected type of expose(): ${j}`)}})}return I.spawn=C,I}var Ue;function $t(){return Ue||(Ue=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.Worker=r.BlobWorker=r.isWorkerRuntime=r.Thread=r.spawn=r.Pool=void 0;const e=Ze();Object.defineProperty(r,"isWorkerRuntime",{enumerable:!0,get:function(){return e.isWorkerRuntime}});var o=Ot();Object.defineProperty(r,"Pool",{enumerable:!0,get:function(){return o.Pool}});var t=It();Object.defineProperty(r,"spawn",{enumerable:!0,get:function(){return t.spawn}});var n=rt();Object.defineProperty(r,"Thread",{enumerable:!0,get:function(){return n.Thread}}),r.BlobWorker=e.getWorkerImplementation().blob,r.Worker=e.getWorkerImplementation().default})(de)),de}var J={},ve,Qe;function Lt(){return Qe||(Qe=1,ve=r=>r?typeof Symbol.observable=="symbol"&&typeof r[Symbol.observable]=="function"?r===r[Symbol.observable]():typeof r["@@observable"]=="function"?r===r["@@observable"]():!1:!1),ve}var oe={},Je;function Dt(){if(Je)return oe;Je=1,Object.defineProperty(oe,"__esModule",{value:!0});const r=function(){const n=typeof self<"u"&&typeof Window<"u"&&self instanceof Window;return!!(typeof self<"u"&&self.postMessage&&!n)},e=function(n,s){self.postMessage(n,s)},o=function(n){const s=u=>{n(u.data)},a=()=>{self.removeEventListener("message",s)};return self.addEventListener("message",s),a};return oe.default={isWorkerRuntime:r,postMessageToMaster:e,subscribeToMasterMessages:o},oe}var He;function At(){return He||(He=1,(function(r){var e=J&&J.__awaiter||function(d,w,_,E){function F(j){return j instanceof _?j:new _(function(x){x(j)})}return new(_||(_=Promise))(function(j,x){function z(D){try{le(E.next(D))}catch(fe){x(fe)}}function K(D){try{le(E.throw(D))}catch(fe){x(fe)}}function le(D){D.done?j(D.value):F(D.value).then(z,K)}le((E=E.apply(d,w||[])).next())})},o=J&&J.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(r,"__esModule",{value:!0}),r.expose=r.isWorkerRuntime=r.Transfer=r.registerSerializer=void 0;const t=o(Lt()),n=te(),s=ae(),a=nt(),u=o(Dt());var p=te();Object.defineProperty(r,"registerSerializer",{enumerable:!0,get:function(){return p.registerSerializer}});var l=ae();Object.defineProperty(r,"Transfer",{enumerable:!0,get:function(){return l.Transfer}}),r.isWorkerRuntime=u.default.isWorkerRuntime;let i=!1;const c=new Map,h=d=>d&&d.type===a.MasterMessageType.cancel,v=d=>d&&d.type===a.MasterMessageType.run,T=d=>t.default(d)||P(d);function P(d){return d&&typeof d=="object"&&typeof d.subscribe=="function"}function M(d){return s.isTransferDescriptor(d)?{payload:d.send,transferables:d.transferables}:{payload:d,transferables:void 0}}function b(){const d={type:a.WorkerMessageType.init,exposed:{type:"function"}};u.default.postMessageToMaster(d)}function y(d){const w={type:a.WorkerMessageType.init,exposed:{type:"module",methods:d}};u.default.postMessageToMaster(w)}function m(d,w){const{payload:_,transferables:E}=M(w),F={type:a.WorkerMessageType.error,uid:d,error:n.serialize(_)};u.default.postMessageToMaster(F,E)}function g(d,w,_){const{payload:E,transferables:F}=M(_),j={type:a.WorkerMessageType.result,uid:d,complete:w?!0:void 0,payload:E};u.default.postMessageToMaster(j,F)}function C(d,w){const _={type:a.WorkerMessageType.running,uid:d,resultType:w};u.default.postMessageToMaster(_)}function f(d){try{const w={type:a.WorkerMessageType.uncaughtError,error:n.serialize(d)};u.default.postMessageToMaster(w)}catch(w){console.error(`Not reporting uncaught error back to master thread as it occured while reporting an uncaught error already.
Latest error:`,w,`
Original error:`,d)}}function k(d,w,_){return e(this,void 0,void 0,function*(){let E;try{E=w(..._)}catch(j){return m(d,j)}const F=T(E)?"observable":"promise";if(C(d,F),T(E)){const j=E.subscribe(x=>g(d,!1,n.serialize(x)),x=>{m(d,n.serialize(x)),c.delete(d)},()=>{g(d,!0),c.delete(d)});c.set(d,j)}else try{const j=yield E;g(d,!0,n.serialize(j))}catch(j){m(d,n.serialize(j))}})}function S(d){if(!u.default.isWorkerRuntime())throw Error("expose() called in the master thread.");if(i)throw Error("expose() called more than once. This is not possible. Pass an object to expose() if you want to expose multiple functions.");if(i=!0,typeof d=="function")u.default.subscribeToMasterMessages(w=>{v(w)&&!w.method&&k(w.uid,d,w.args.map(n.deserialize))}),b();else if(typeof d=="object"&&d){u.default.subscribeToMasterMessages(_=>{v(_)&&_.method&&k(_.uid,d[_.method],_.args.map(n.deserialize))});const w=Object.keys(d).filter(_=>typeof d[_]=="function");y(w)}else throw Error(`Invalid argument passed to expose(). Expected a function or an object, got: ${d}`);u.default.subscribeToMasterMessages(w=>{if(h(w)){const _=w.uid,E=c.get(_);E&&(E.unsubscribe(),c.delete(_))}})}r.expose=S,typeof self<"u"&&typeof self.addEventListener=="function"&&u.default.isWorkerRuntime()&&(self.addEventListener("error",d=>{setTimeout(()=>f(d.error||d),250)}),self.addEventListener("unhandledrejection",d=>{const w=d.reason;w&&typeof w.message=="string"&&setTimeout(()=>f(w),250)})),typeof process<"u"&&typeof process.on=="function"&&u.default.isWorkerRuntime()&&(process.on("uncaughtException",d=>{setTimeout(()=>f(d),250)}),process.on("unhandledRejection",d=>{d&&typeof d.message=="string"&&setTimeout(()=>f(d),250)}))})(J)),J}var Ve;function Bt(){return Ve||(Ve=1,(function(r){var e=A&&A.__createBinding||(Object.create?(function(u,p,l,i){i===void 0&&(i=l),Object.defineProperty(u,i,{enumerable:!0,get:function(){return p[l]}})}):(function(u,p,l,i){i===void 0&&(i=l),u[i]=p[l]})),o=A&&A.__exportStar||function(u,p){for(var l in u)l!=="default"&&!Object.prototype.hasOwnProperty.call(p,l)&&e(p,u,l)};Object.defineProperty(r,"__esModule",{value:!0}),r.Transfer=r.DefaultSerializer=r.expose=r.registerSerializer=void 0;var t=te();Object.defineProperty(r,"registerSerializer",{enumerable:!0,get:function(){return t.registerSerializer}}),o($t(),r);var n=At();Object.defineProperty(r,"expose",{enumerable:!0,get:function(){return n.expose}});var s=Ke();Object.defineProperty(r,"DefaultSerializer",{enumerable:!0,get:function(){return s.DefaultSerializer}});var a=ae();Object.defineProperty(r,"Transfer",{enumerable:!0,get:function(){return a.Transfer}})})(A)),A}var Nt=Bt();const L=ot(Nt);L.registerSerializer;const Ut=L.spawn;L.BlobWorker;L.DefaultSerializer;L.Pool;L.Thread;L.Transfer;const Qt=L.Worker;class Jt{constructor(e,o){this.worker=e,this.id=o}async run(...e){return await this.worker.run(this.id,e)}async all(...e){return await this.worker.all(this.id,e)}async pluck(e){await this.worker.run(this.id,e)}async safeIntegers(e){await this.worker.safeIntegers(this.id,e)}async columns(){return await this.worker.columns(this.id)}async get(...e){return await this.worker.get(this.id,e)}async bind(...e){await this.worker.bind(this.id,e)}}async function Ht(r){let e=new Qt(new URL("/assets/worker-DvJX0ixw.js",import.meta.url),{type:"module"});const o=await Ut(e);return await o.connect(r),{async prepare(t){return new Jt(o,await o.prepare(t))},async pragma(t,n){return await o.pragma(t,n)},async exec(t){await o.exec(t)},async defaultSafeIntegers(t){await o.defaultSafeIntegers(t)},async close(){await o.close()}}}const Vt=await Ht("data.db");(function(){const r=v=>document.querySelector(v),e=r("#sql"),o=r("#run"),t=r("#status"),n=r("#live"),s=r("#meta"),a=r("#error"),u=r("#table thead"),p=r("#table tbody");function l(v){if(v==null)return"NULL";if(typeof v=="object")try{return JSON.stringify(v)}catch{return String(v)}return String(v)}function i(){u.innerHTML="",p.innerHTML=""}function c(v){i();const{columns:T=[],rows:P=[]}=v||{},M=document.createElement("tr");for(const y of T){const m=document.createElement("th");m.textContent=String(y),M.appendChild(m)}u.appendChild(M);const b=document.createDocumentFragment();for(const y of P){const m=document.createElement("tr");for(let g=0;g<T.length;g++){const C=document.createElement("td");C.textContent=l(y[g]??null),m.appendChild(C)}b.appendChild(m)}p.appendChild(b),s.textContent=P.length?`${P.length} row${P.length===1?"":"s"} × ${T.length} column${T.length===1?"":"s"}`:"No rows."}async function h(v){a.hidden=!0,a.textContent="",t.textContent="Running…";const T=performance.now();try{const P=await Vt.prepare(v),M=(await P.columns()).map(C=>C.name),b=await P.all(),y={columns:M,rows:b.map(C=>M.map(f=>C[f]))};console.info(y);const m=performance.now();c(y);const g=Math.max(0,Math.round(m-T));t.textContent=`OK (${g}ms)`,n.textContent=`Query finished in ${g} milliseconds.`}catch(P){i(),t.textContent="ERROR";const M=P&&(P.message||P.toString())||"Unknown error";a.textContent="ERROR: "+M,a.hidden=!1,n.textContent="Query failed."}}o.addEventListener("click",()=>h(e.value)),e.addEventListener("keydown",v=>{(v.ctrlKey||v.metaKey)&&v.key==="Enter"&&(v.preventDefault(),h(e.value))}),h(e.value)})();
