(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const p of document.querySelectorAll('link[rel="modulepreload"]'))l(p);new MutationObserver(p=>{for(const y of p)if(y.type==="childList")for(const h of y.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&l(h)}).observe(document,{childList:!0,subtree:!0});function c(p){const y={};return p.integrity&&(y.integrity=p.integrity),p.referrerPolicy&&(y.referrerPolicy=p.referrerPolicy),p.crossOrigin==="use-credentials"?y.credentials="include":p.crossOrigin==="anonymous"?y.credentials="omit":y.credentials="same-origin",y}function l(p){if(p.ep)return;p.ep=!0;const y=c(p);fetch(p.href,y)}})();const ds="modulepreload",ps=function(u){return"/"+u},et={},dt=function(n,c,l){let p=Promise.resolve();if(c&&c.length>0){let D=function(R){return Promise.all(R.map(W=>Promise.resolve(W).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),T=h?.nonce||h?.getAttribute("nonce");p=D(c.map(R=>{if(R=ps(R),R in et)return;et[R]=!0;const W=R.endsWith(".css"),m=W?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${R}"]${m}`))return;const o=document.createElement("link");if(o.rel=W?"stylesheet":ds,W||(o.as="script"),o.crossOrigin="",o.href=R,T&&o.setAttribute("nonce",T),document.head.appendChild(o),W)return new Promise((g,E)=>{o.addEventListener("load",g),o.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${R}`)))})}))}function y(h){const T=new Event("vite:preloadError",{cancelable:!0});if(T.payload=h,window.dispatchEvent(T),!T.defaultPrevented)throw h}return p.then(h=>{for(const T of h||[])T.status==="rejected"&&y(T.reason);return n().catch(y)})};var pt=typeof WebAssembly<"u"?WebAssembly:typeof WXWebAssembly<"u"?WXWebAssembly:void 0,Ie=typeof process=="object"&&process!==null&&typeof process.versions=="object"&&process.versions!==null&&typeof process.versions.node=="string";function hs(u){return typeof u?.postMessage=="function"?u.postMessage:typeof postMessage=="function"?postMessage:void 0}function _s(u){var n,c,l=new Int32Array(u),p=Atomics.load(l,0);if(p<=1)return null;var y=Atomics.load(l,1),h=Atomics.load(l,2),T=Atomics.load(l,3),D=new Uint8Array(u),R=D.slice(16,16+y),W=D.slice(16+y,16+y+h),m=D.slice(16+y+h,16+y+h+T),o=new TextDecoder().decode(R),g=new TextDecoder().decode(W),E=new TextDecoder().decode(m),w=(n=globalThis[o])!==null&&n!==void 0?n:o==="RuntimeError"&&(c=pt.RuntimeError)!==null&&c!==void 0?c:Error,b=new w(g);return Object.defineProperty(b,"stack",{value:E,writable:!0,enumerable:!1,configurable:!0}),b}function vs(u){return typeof SharedArrayBuffer=="function"&&u instanceof SharedArrayBuffer||Object.prototype.toString.call(u)==="[object SharedArrayBuffer]"}function gs(u){try{return u instanceof pt.RuntimeError}catch{return!1}}function sr(u,n){return{__emnapi__:{type:u,payload:n}}}var ys=536870911;function ht(u){if(u){if(!vs(u.buffer))throw new Error("Multithread features require shared wasm memory. Try to compile with `-matomics -mbulk-memory` and use `--import-memory --shared-memory` during linking, then create WebAssembly.Memory with `shared: true` option")}else if(typeof SharedArrayBuffer>"u")throw new Error("Current environment does not support SharedArrayBuffer, threads are not available!")}function Es(u){var n;if(typeof u=="boolean")return u?{size:0,strict:!1}:!1;if(typeof u=="number"){if(!(u>=0))throw new RangeError("reuseWorker: size must be a non-negative integer");return{size:u,strict:!1}}if(!u)return!1;var c=(n=Number(u.size))!==null&&n!==void 0?n:0,l=!!u.strict;if(!(c>0)&&l)throw new RangeError("reuseWorker: size must be set to positive integer if strict is set to true");return{size:c,strict:l}}var Ke=0,_t=function(){function u(n){var c;if(this.unusedWorkers=[],this.runningWorkers=[],this.pthreads=Object.create(null),this.wasmModule=null,this.wasmMemory=null,this.messageEvents=new WeakMap,!n)throw new TypeError("ThreadManager(): options is not provided");"childThread"in n?this._childThread=!!n.childThread:this._childThread=!1,this._childThread?(this._onCreateWorker=void 0,this._reuseWorker=!1,this._beforeLoad=void 0):(this._onCreateWorker=n.onCreateWorker,this._reuseWorker=Es(n.reuseWorker),this._beforeLoad=n.beforeLoad),this.printErr=(c=n.printErr)!==null&&c!==void 0?c:console.error.bind(console)}return Object.defineProperty(u.prototype,"nextWorkerID",{get:function(){return Ke},enumerable:!1,configurable:!0}),u.prototype.init=function(){this._childThread||this.initMainThread()},u.prototype.initMainThread=function(){this.preparePool()},u.prototype.preparePool=function(){if(this._reuseWorker&&this._reuseWorker.size)for(var n=this._reuseWorker.size;n--;){var c=this.allocateUnusedWorker();Ie&&(c.once("message",function(){}),c.unref())}},u.prototype.shouldPreloadWorkers=function(){return!this._childThread&&this._reuseWorker&&this._reuseWorker.size>0},u.prototype.loadWasmModuleToAllWorkers=function(){for(var n=this,c=Array(this.unusedWorkers.length),l=function(h){var T=p.unusedWorkers[h];Ie&&T.ref(),c[h]=p.loadWasmModuleToWorker(T).then(function(D){return Ie&&T.unref(),D},function(D){throw Ie&&T.unref(),D})},p=this,y=0;y<this.unusedWorkers.length;++y)l(y);return Promise.all(c).catch(function(h){throw n.terminateAllThreads(),h})},u.prototype.preloadWorkers=function(){return this.shouldPreloadWorkers()?this.loadWasmModuleToAllWorkers():Promise.resolve([])},u.prototype.setup=function(n,c){this.wasmModule=n,this.wasmMemory=c},u.prototype.markId=function(n){if(n.__emnapi_tid)return n.__emnapi_tid;var c=Ke+43;return Ke=(Ke+1)%(ys-42),this.pthreads[c]=n,n.__emnapi_tid=c,c},u.prototype.returnWorkerToPool=function(n){var c=n.__emnapi_tid;c!==void 0&&delete this.pthreads[c],this.unusedWorkers.push(n),this.runningWorkers.splice(this.runningWorkers.indexOf(n),1),delete n.__emnapi_tid,Ie&&n.unref()},u.prototype.loadWasmModuleToWorker=function(n,c){var l=this;if(n.whenLoaded)return n.whenLoaded;var p=this.printErr,y=this._beforeLoad,h=this;return n.whenLoaded=new Promise(function(T,D){var R=function(m){var o="worker sent an error!";if(n.__emnapi_tid!==void 0&&(o="worker (tid = "+n.__emnapi_tid+") sent an error!"),"message"in m){if(p(o+" "+m.message),m.message.indexOf("RuntimeError")!==-1||m.message.indexOf("unreachable")!==-1)try{h.terminateAllThreads()}catch{}}else p(o);throw D(m),m},W=function(m){if(m.__emnapi__){var o=m.__emnapi__.type,g=m.__emnapi__.payload;o==="loaded"?(n.loaded=!0,Ie&&!n.__emnapi_tid&&n.unref(),T(n)):o==="cleanup-thread"&&g.tid in l.pthreads&&l.cleanThread(n,g.tid)}};n.onmessage=function(m){W(m.data),l.fireMessageEvent(n,m)},n.onerror=R,Ie&&(n.on("message",function(m){var o,g;(g=(o=n).onmessage)===null||g===void 0||g.call(o,{data:m})}),n.on("error",function(m){var o,g;(g=(o=n).onerror)===null||g===void 0||g.call(o,m)}),n.on("detachedExit",function(){})),typeof y=="function"&&y(n);try{n.postMessage(sr("load",{wasmModule:l.wasmModule,wasmMemory:l.wasmMemory,sab:c}))}catch(m){throw ht(l.wasmMemory),m}}),n.whenLoaded},u.prototype.allocateUnusedWorker=function(){var n=this._onCreateWorker;if(typeof n!="function")throw new TypeError("`options.onCreateWorker` is not provided");var c=n({type:"thread",name:"emnapi-pthread"});return this.unusedWorkers.push(c),c},u.prototype.getNewWorker=function(n){if(this._reuseWorker){if(this.unusedWorkers.length===0){if(this._reuseWorker.strict&&!Ie){var c=this.printErr;c(`Tried to spawn a new thread, but the thread pool is exhausted.
This might result in a deadlock unless some threads eventually exit or the code explicitly breaks out to the event loop.`);return}var l=this.allocateUnusedWorker();this.loadWasmModuleToWorker(l,n)}return this.unusedWorkers.pop()}var p=this.allocateUnusedWorker();return this.loadWasmModuleToWorker(p,n),this.unusedWorkers.pop()},u.prototype.cleanThread=function(n,c,l){if(!l&&this._reuseWorker)this.returnWorkerToPool(n);else{delete this.pthreads[c];var p=this.runningWorkers.indexOf(n);p!==-1&&this.runningWorkers.splice(p,1),this.terminateWorker(n),delete n.__emnapi_tid}},u.prototype.terminateWorker=function(n){var c=this,l,p=n.__emnapi_tid;n.terminate(),(l=this.messageEvents.get(n))===null||l===void 0||l.clear(),this.messageEvents.delete(n),n.onmessage=function(y){if(y.data.__emnapi__){var h=c.printErr;h('received "'+y.data.__emnapi__.type+'" command from terminated worker: '+p)}}},u.prototype.terminateAllThreads=function(){for(var n=0;n<this.runningWorkers.length;++n)this.terminateWorker(this.runningWorkers[n]);for(var n=0;n<this.unusedWorkers.length;++n)this.terminateWorker(this.unusedWorkers[n]);this.unusedWorkers=[],this.runningWorkers=[],this.pthreads=Object.create(null),this.preparePool()},u.prototype.addMessageEventListener=function(n,c){var l=this.messageEvents.get(n);return l||(l=new Set,this.messageEvents.set(n,l)),l.add(c),function(){l?.delete(c)}},u.prototype.fireMessageEvent=function(n,c){var l=this.messageEvents.get(n);if(l){var p=this.printErr;l.forEach(function(y){try{y(c)}catch(h){p(h.stack)}})}},u}(),rt=Symbol("kIsProxy");function tt(u,n){if(u[rt])return u;var c=u.exports,l=function(D){for(var R=["apply","construct","defineProperty","deleteProperty","get","getOwnPropertyDescriptor","getPrototypeOf","has","isExtensible","ownKeys","preventExtensions","set","setPrototypeOf"],W={},m=function(g){var E=R[g];W[E]=function(){var w=Array.prototype.slice.call(arguments,1);return w.unshift(D),Reflect[E].apply(Reflect,w)}},o=0;o<R.length;o++)m(o);return W},p=l(c),y=function(){},h=function(){return 0};p.get=function(D,R,W){var m;return R==="memory"?(m=typeof n=="function"?n():n)!==null&&m!==void 0?m:Reflect.get(c,R,W):R==="_initialize"?R in c?y:void 0:R==="_start"?R in c?h:void 0:Reflect.get(c,R,W)},p.has=function(D,R){return R==="memory"?!0:Reflect.has(c,R)};var T=new Proxy(Object.create(null),p);return new Proxy(u,{get:function(D,R,W){return R==="exports"?T:R===rt?!0:Reflect.get(D,R,W)}})}var vt=new WeakMap,ms=function(){function u(n){var c=this;if(!n)throw new TypeError("WASIThreads(): options is not provided");if(!n.wasi)throw new TypeError("WASIThreads(): options.wasi is not provided");vt.set(this,new WeakSet);var l=n.wasi;ws(this,l),this.wasi=l,"childThread"in n?this.childThread=!!n.childThread:this.childThread=!1,this.PThread=void 0,"threadManager"in n?typeof n.threadManager=="function"?this.PThread=n.threadManager():this.PThread=n.threadManager:this.childThread||(this.PThread=new _t(n),this.PThread.init());var p=!1;"waitThreadStart"in n&&(p=typeof n.waitThreadStart=="number"?n.waitThreadStart:!!n.waitThreadStart);var y=hs(n);if(this.childThread&&typeof y!="function")throw new TypeError("options.postMessage is not a function");this.postMessage=y;var h=!!n.wasm64,T=function(R){if(R.data.__emnapi__){var W=R.data.__emnapi__.type,m=R.data.__emnapi__.payload;W==="spawn-thread"?D(m.startArg,m.errorOrTid):W==="terminate-all-threads"&&c.terminateAllThreads()}},D=function(R,W){var m,o=6,g=W!==void 0;try{ht(c.wasmMemory)}catch(Y){if((m=c.PThread)===null||m===void 0||m.printErr(Y.stack),g){var E=new Int32Array(c.wasmMemory.buffer,W,2);return Atomics.store(E,0,1),Atomics.store(E,1,o),Atomics.notify(E,1),1}else return-o}if(!g){var w=c.wasmInstance.exports.malloc;if(W=h?Number(w(BigInt(8))):w(8),!W)return-48}var b=c.wasmInstance.exports.free,S=h?function(Y){b(BigInt(Y))}:b,k=new Int32Array(c.wasmMemory.buffer,W,2);if(Atomics.store(k,0,0),Atomics.store(k,1,0),c.childThread){y(sr("spawn-thread",{startArg:R,errorOrTid:W})),Atomics.wait(k,1,0);var x=Atomics.load(k,0),O=Atomics.load(k,1);return g?x:(S(W),x?-O:O)}var B=p||p===0,M;B&&(M=new Int32Array(new SharedArrayBuffer(8208)),Atomics.store(M,0,0));var F,U,j=c.PThread;try{if(F=j.getNewWorker(M),!F)throw new Error("failed to get new worker");if(j.addMessageEventListener(F,T),U=j.markId(F),Ie&&F.ref(),F.postMessage(sr("start",{tid:U,arg:R,sab:M})),B){if(typeof p=="number"){var $=Atomics.wait(M,0,0,p);if($==="timed-out"){try{j.cleanThread(F,U,!0)}catch{}throw new Error("Spawning thread timed out. Please check if the worker is created successfully and if message is handled properly in the worker.")}}else Atomics.wait(M,0,0);var K=Atomics.load(M,0);if(K>1){try{j.cleanThread(F,U,!0)}catch{}throw _s(M.buffer)}}}catch(Y){return Atomics.store(k,0,1),Atomics.store(k,1,o),Atomics.notify(k,1),j?.printErr(Y.stack),g?1:(S(W),-o)}return Atomics.store(k,0,0),Atomics.store(k,1,U),Atomics.notify(k,1),j.runningWorkers.push(F),B||F.whenLoaded.catch(function(Y){throw delete F.whenLoaded,j.cleanThread(F,U,!0),Y}),g?0:(S(W),U)};this.threadSpawn=D}return u.prototype.getImportObject=function(){return{wasi:{"thread-spawn":this.threadSpawn}}},u.prototype.setup=function(n,c,l){l??(l=n.exports.memory),this.wasmInstance=n,this.wasmMemory=l,this.PThread&&this.PThread.setup(c,l)},u.prototype.preloadWorkers=function(){return this.PThread?this.PThread.preloadWorkers():Promise.resolve([])},u.prototype.initialize=function(n,c,l){var p=n.exports;l??(l=p.memory),this.childThread&&(n=tt(n,l)),this.setup(n,c,l);var y=this.wasi;if("_start"in p&&typeof p._start=="function")if(this.childThread){y.start(n);try{var h=gt(y,"kStarted");y[h]=!1}catch{}}else bs(y,n);else y.initialize(n);return n},u.prototype.start=function(n,c,l){var p=n.exports;l??(l=p.memory),this.childThread&&(n=tt(n,l)),this.setup(n,c,l);var y=this.wasi.start(n);return{exitCode:y,instance:n}},u.prototype.terminateAllThreads=function(){var n;this.childThread?this.postMessage(sr("terminate-all-threads",{})):(n=this.PThread)===null||n===void 0||n.terminateAllThreads()},u}();function ws(u,n){var c=vt.get(u);if(!c.has(n)){var l=u,p=n.wasiImport;if(p){var y=p.proc_exit;p.proc_exit=function(T){return l.terminateAllThreads(),y.call(this,T)}}if(!l.childThread){var h=n.start;typeof h=="function"&&(n.start=function(T){try{return h.call(this,T)}catch(D){throw gs(D)&&l.terminateAllThreads(),D}})}c.add(n)}}function gt(u,n){var c=Object.getOwnPropertySymbols(u),l=function(p){return function(y){return y.description?y.description===p:y.toString()==="Symbol(".concat(p,")")}};return Array.isArray(n)?n.map(function(p){return c.filter(l(p))[0]}):c.filter(l(n))[0]}function bs(u,n){var c=gt(u,["kInstance","kSetMemory"]),l=c[0],p=c[1];u[l]=n,u[p](n.exports.memory)}var Rr=function(u,n){return Rr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var p in l)Object.prototype.hasOwnProperty.call(l,p)&&(c[p]=l[p])},Rr(u,n)};function Le(u,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");Rr(u,n);function c(){this.constructor=u}u.prototype=n===null?Object.create(n):(c.prototype=n.prototype,new c)}var _e=typeof WebAssembly<"u"?WebAssembly:typeof WXWebAssembly<"u"?WXWebAssembly:void 0;function yt(u){if(u&&typeof u!="object")throw new TypeError("imports must be an object or undefined");return!0}function He(u,n){if(!u)throw new TypeError("Invalid wasm source");yt(n),n=n??{};try{var c=typeof u=="object"&&u!==null&&"then"in u?u.then:void 0;if(typeof c=="function")return c.call(u,function(p){return He(p,n)})}catch{}if(u instanceof ArrayBuffer||ArrayBuffer.isView(u))return _e.instantiate(u,n);if(u instanceof _e.Module)return _e.instantiate(u,n).then(function(p){return{instance:p,module:u}});if(typeof Response<"u"&&u instanceof Response)return u.arrayBuffer().then(function(p){return _e.instantiate(p,n)});var l=typeof u=="string";if(l||typeof URL<"u"&&u instanceof URL){if(l&&typeof wx<"u"&&typeof __wxConfig<"u")return _e.instantiate(u,n);if(typeof fetch!="function")throw new TypeError("wasm source can not be a string or URL in this environment");if(typeof _e.instantiateStreaming=="function")try{return _e.instantiateStreaming(fetch(u),n).catch(function(){return He(fetch(u),n)})}catch{return He(fetch(u),n)}else return He(fetch(u),n)}throw new TypeError("Invalid wasm source")}function As(u,n){if(!u)throw new TypeError("Invalid wasm source");yt(n),n=n??{};var c;if(u instanceof ArrayBuffer||ArrayBuffer.isView(u))c=new _e.Module(u);else if(u instanceof WebAssembly.Module)c=u;else throw new TypeError("Invalid wasm source");var l=new _e.Instance(c,n),p={instance:l,module:c};return p}function Is(u){var n=function(){var c=typeof process=="object"&&process!==null&&typeof process.versions=="object"&&process.versions!==null&&typeof process.versions.node=="string",l=!!u.childThread,p=typeof u.waitThreadStart=="number"?u.waitThreadStart:!!u.waitThreadStart,y,h,T,D,R;function W(e){throw typeof _e.RuntimeError=="function"?new _e.RuntimeError(e):Error(e)}var m={imports:{env:{},napi:{},emnapi:{}},exports:{},emnapi:{},loaded:!1,filename:"",childThread:l,initWorker:void 0,executeAsyncWork:void 0,waitThreadStart:p,PThread:void 0,init:function(e){if(m.loaded)return m.exports;if(!e)throw new TypeError("Invalid napi init options");var a=e.instance;if(!a?.exports)throw new TypeError("Invalid wasm instance");y=a;var t=a.exports,r=e.module,i=e.memory||t.memory,s=e.table||t.__indirect_function_table;if(!(r instanceof _e.Module))throw new TypeError("Invalid wasm module");if(!(i instanceof _e.Memory))throw new TypeError("Invalid wasm memory");if(!(s instanceof _e.Table))throw new TypeError("Invalid wasm table");if(h=i,T=s,typeof t.malloc!="function")throw new TypeError("malloc is not exported");if(typeof t.free!="function")throw new TypeError("free is not exported");if(D=t.malloc,R=t.free,!m.childThread){var f=8,d=a.exports.node_api_module_get_api_version_v1;typeof d=="function"&&(f=d());var _=m.envObject||(m.envObject=o.createEnv(m.filename,f,function(I){return T.get(I)},function(I){return T.get(I)},W,g)),v=o.openScope(_);try{_.callIntoModule(function(I){var A=m.exports,N=v.add(A),P=a.exports.napi_register_wasm_v1,V=P(I.id,N.id);m.exports=V?o.handleStore.get(V).value:A})}finally{o.closeScope(_,v)}return m.loaded=!0,delete m.envObject,m.exports}}},o,g,E=void 0,w;if(l){o=u?.context;var S=typeof u.postMessage=="function"?u.postMessage:typeof postMessage=="function"?postMessage:void 0;if(typeof S!="function")throw new TypeError("No postMessage found");m.postMessage=S}else{var b=u.context;if(typeof b!="object"||b===null)throw new TypeError("Invalid `options.context`. Use `import { getDefaultContext } from '@emnapi/runtime'`");o=b}if(typeof u.filename=="string"&&(m.filename=u.filename),typeof u.onCreateWorker=="function"&&(E=u.onCreateWorker),typeof u.print=="function"?u.print:console.log.bind(console),typeof u.printErr=="function"?w=u.printErr:w=console.warn.bind(console),"nodeBinding"in u){var k=u.nodeBinding;if(typeof k!="object"||k===null)throw new TypeError("Invalid `options.nodeBinding`. Use @emnapi/node-binding package");g=k}var x=0;if("asyncWorkPoolSize"in u){if(typeof u.asyncWorkPoolSize!="number")throw new TypeError("options.asyncWorkPoolSize must be a integer");x=u.asyncWorkPoolSize>>0,x>1024?x=1024:x<-1024&&(x=-1024)}var O=l?!1:x<=0;function B(){return Math.abs(x)}m.imports.env._emnapi_async_work_pool_size=B;function M(e){if(!e)return!1;if(e._emnapiSendListener)return!0;var a=function(r){var i=c?r:r.data,s=i.__emnapi__;if(s&&s.type==="async-send")if(l){var f=m.postMessage;f({__emnapi__:s})}else{var d=s.payload.callback;T.get(d)(s.payload.data)}},t=function(){c?e.off("message",a):e.removeEventListener("message",a,!1),delete e._emnapiSendListener};return e._emnapiSendListener={handler:a,dispose:t},c?e.on("message",a):e.addEventListener("message",a,!1),!0}m.emnapi.addSendListener=M;var F=new _t(l?{printErr:w,childThread:!0}:{printErr:w,beforeLoad:function(e){M(e)},reuseWorker:u.reuseWorker,onCreateWorker:E});m.PThread=F;function U(e,a,t,r){var i=o.envStore.get(e);return i.setLastError(a,t,r)}function j(e){var a=o.envStore.get(e);return a.clearLastError()}function $(e,a,t){var r=typeof process=="object"&&process!==null&&typeof process.versions=="object"&&process.versions!==null&&typeof process.versions.node=="string"?process.versions.node.split(".").map(function(s){return Number(s)}):[0,0,0],i=new DataView(h.buffer);i.setUint32(e,r[0],!0),i.setUint32(a,r[1],!0),i.setUint32(t,r[2],!0)}function K(){}function Y(){}function X(e,a){o.feature.setImmediate(function(){T.get(e)(a)})}function fe(e,a){Promise.resolve().then(function(){T.get(e)(a)})}function he(e,a,t,r,i){var s=o.envStore.get(a),f=o.openScope(s);try{s.callbackIntoModule(!!e,function(){T.get(t)(a,r)})}catch(d){throw o.closeScope(s,f),i&&o.closeScope(s),d}o.closeScope(s,f)}function be(e,a,t,r,i){var s=o.envStore.get(a);s.callFinalizerInternal(e,t,r,i)}function Ue(){o.increaseWaitingRequestCounter()}function Me(){o.decreaseWaitingRequestCounter()}function ye(e,a){var t,r=[a>>>0,(t=a,+Math.abs(t)>=1?t>0?(Math.min(+Math.floor(t/4294967296),4294967295)|0)>>>0:~~+Math.ceil((t-+(~~t>>>0))/4294967296)>>>0:0)],i=new DataView(h.buffer);i.setInt32(e,r[0],!0),i.setInt32(e+4,r[1],!0)}var Ae=Object.freeze({__proto__:null,$emnapiSetValueI64:ye,_emnapi_call_finalizer:be,_emnapi_callback_into_module:he,_emnapi_ctx_decrease_waiting_request_counter:Me,_emnapi_ctx_increase_waiting_request_counter:Ue,_emnapi_get_node_version:$,_emnapi_next_tick:fe,_emnapi_runtime_keepalive_pop:Y,_emnapi_runtime_keepalive_push:K,_emnapi_set_immediate:X,napi_clear_last_error:j,napi_set_last_error:U});function Ye(e){var a=new DataView(h.buffer),t=20,r=a.getInt32(e+t,!0),i=F.pthreads[r];return i}function zt(e){if(!l){var a=Ye(e);a&&typeof a.unref=="function"&&a.unref()}}function Gt(e,a,t){if(l){var r=m.postMessage;r({__emnapi__:{type:"async-send",payload:{callback:a,data:t}}})}else switch(e){case 0:X(a,t);break;case 1:fe(a,t);break}}var zr,Qe=new Promise(function(e){zr=function(){Qe.ready=!0,e()}});Qe.ready=!1;function $t(){return typeof window<"u"&&typeof document<"u"&&!c?1:0}function Jt(e,a,t){Qe.ready?T.get(e)(a,t):Qe.then(function(){T.get(e)(a,t)})}function qt(e,a){for(var t=[],r=new DataView(h.buffer),i=function(f){var d=r.getInt32(e+f*4,!0),_=Ye(d);t.push(new Promise(function(v){var I=function(A){var N=c?A:A.data,P=N.__emnapi__;P&&P.type==="async-thread-ready"&&(v(),_&&typeof _.unref=="function"&&_.unref(),c?_.off("message",I):_.removeEventListener("message",I))};c?_.on("message",I):_.addEventListener("message",I)}))},s=0;s<a;s++)i(s);Promise.all(t).then(zr)}function Yt(){if(l){var e=m.postMessage;e({__emnapi__:{type:"async-thread-ready",payload:{}}})}}var Qt=Object.freeze({__proto__:null,_emnapi_after_uvthreadpool_ready:Jt,_emnapi_async_send_js:Gt,_emnapi_emit_async_thread_ready:Yt,_emnapi_is_main_browser_thread:$t,_emnapi_tell_js_uvthreadpool:qt,_emnapi_worker_unref:zt});function Kt(e,a,t){if(!e)return 1;var r=o.envStore.get(e);if(!t)return r.setLastError(1);var i=Number(a);if(i<0)return r.setLastError(1);var s=h.buffer.byteLength,f=s+i;if(f=f+(65536-f%65536)%65536,h.grow(f-s+65535>>16)===-1)return r.setLastError(9);if(o.feature.supportBigInt){var d=new DataView(h.buffer);d.setBigInt64(t,BigInt(h.buffer.byteLength),!0)}else ye(t,h.buffer.byteLength);return r.clearLastError()}var Xt=Object.freeze({__proto__:null,napi_adjust_external_memory:Kt}),te={idGen:{},values:[void 0],queued:new Set,pending:[],init:function(){var e={nextId:1,list:[],generate:function(){var a;return e.list.length?a=e.list.shift():(a=e.nextId,e.nextId++),a},reuse:function(a){e.list.push(a)}};te.idGen=e,te.values=[void 0],te.queued=new Set,te.pending=[]},create:function(e,a,t,r,i,s){var f=0,d=0;if(g){var _=g.node.emitAsyncInit(a,t,-1);f=_.asyncId,d=_.triggerAsyncId}var v=te.idGen.generate();return te.values[v]={env:e,id:v,resource:a,asyncId:f,triggerAsyncId:d,status:0,execute:r,complete:i,data:s},v},callComplete:function(e,a){var t=e.complete,r=e.env,i=e.data,s=function(){if(t){var f=o.envStore.get(r),d=o.openScope(f);try{f.callbackIntoModule(!0,function(){T.get(t)(r,a,i)})}finally{o.closeScope(f,d)}}};g?g.node.makeCallback(e.resource,s,[],{asyncId:e.asyncId,triggerAsyncId:e.triggerAsyncId}):s()},queue:function(e){var a=te.values[e];if(a&&a.status===0){if(a.status=1,te.queued.size>=(Math.abs(x)||4)){te.pending.push(e);return}te.queued.add(e);var t=a.env,r=a.data,i=a.execute;a.status=2,o.feature.setImmediate(function(){if(T.get(i)(t,r),te.queued.delete(e),a.status=3,o.feature.setImmediate(function(){te.callComplete(a,0)}),te.pending.length>0){var s=te.pending.shift();te.values[s].status=0,te.queue(s)}})}},cancel:function(e){var a=te.pending.indexOf(e);if(a!==-1){var t=te.values[e];return t&&t.status===1?(t.status=4,te.pending.splice(a,1),o.feature.setImmediate(function(){te.callComplete(t,11)}),0):9}return 9},remove:function(e){var a=te.values[e];a&&(g&&g.node.emitAsyncDestroy({asyncId:a.asyncId,triggerAsyncId:a.triggerAsyncId}),te.values[e]=void 0,te.idGen.reuse(e))}};function hr(e,a,t,r){if(g){var i=o.handleStore.get(e).value,s=o.handleStore.get(a).value,f=g.node.emitAsyncInit(i,s,t),d=f.asyncId,_=f.triggerAsyncId;if(r){var v=new DataView(h.buffer);v.setFloat64(r,d,!0),v.setFloat64(r+8,_,!0)}}}function _r(e,a){g&&g.node.emitAsyncDestroy({asyncId:e,triggerAsyncId:a})}function Zt(e,a,t,r,i,s,f,d){var _=0,v;if(g){var I=o.handleStore.get(a).value,A=o.handleStore.get(t).value;i=i>>>0;for(var N=Array(i),P=new DataView(h.buffer);_<i;_++){var V=P.getInt32(r+_*4,!0);N[_]=o.handleStore.get(V).value}var G=g.node.makeCallback(I,A,N,{asyncId:s,triggerAsyncId:f});if(d){var Q=o.envStore.get(e);v=Q.ensureHandleId(G),P.setInt32(d,v,!0)}}}function en(e,a,t){if(!g)return 9;var r;e&&(r=Object(o.handleStore.get(e).value));var i=o.handleStore.get(a).value,s=g.napi.asyncInit(r,i);if(s.status!==0)return s.status;var f=s.value;f>=BigInt(-1)*(BigInt(1)<<BigInt(63))&&f<BigInt(1)<<BigInt(63)||(f=f&(BigInt(1)<<BigInt(64))-BigInt(1),f>=BigInt(1)<<BigInt(63)&&(f=f-(BigInt(1)<<BigInt(64))));var d=Number(f&BigInt(4294967295)),_=Number(f>>BigInt(32)),v=new DataView(h.buffer);return v.setInt32(t,d,!0),v.setInt32(t+4,_,!0),0}function rn(e){if(!g)return 9;var a=new DataView(h.buffer),t=a.getInt32(e,!0),r=a.getInt32(e+4,!0),i=BigInt(t>>>0)|BigInt(r)<<BigInt(32),s=g.napi.asyncDestroy(i);return s.status!==0?s.status:0}function tn(e,a,t,r){throw new Error("napi_open_callback_scope has not been implemented yet")}function nn(e,a){throw new Error("napi_close_callback_scope has not been implemented yet")}function an(e,a,t,r,i,s,f){var d=0,_;if(!e)return 1;var v=o.envStore.get(e);if(v.checkGCAccess(),!v.tryCatch.isEmpty())return v.setLastError(10);if(!v.canCallIntoJs())return v.setLastError(v.moduleApiVersion>=10?23:10);v.clearLastError();try{if(!g)return v.setLastError(9);if(!t||i>0&&!s)return v.setLastError(1);var I=Object(o.handleStore.get(t).value),A=o.handleStore.get(r).value;if(typeof A!="function")return v.setLastError(1);var N=new DataView(h.buffer),P=N.getInt32(a,!0),V=N.getInt32(a+4,!0),G=BigInt(P>>>0)|BigInt(V)<<BigInt(32);i=i>>>0;for(var Q=Array(i);d<i;d++){var ne=N.getInt32(s+d*4,!0);Q[d]=o.handleStore.get(ne).value}var oe=g.napi.makeCallback(G,I,A,Q);if(oe.error)throw oe.error;return oe.status!==0?v.setLastError(oe.status):(f&&(_=v.ensureHandleId(oe.value),N.setInt32(f,_,!0)),v.getReturnStatus())}catch(ee){return v.tryCatch.setError(ee),v.setLastError(10)}}function sn(e){var a=o.envStore.get(e);a.checkGCAccess()}var on=Object.freeze({__proto__:null,_emnapi_async_destroy_js:rn,_emnapi_async_init_js:en,_emnapi_env_check_gc_access:sn,_emnapi_node_emit_async_destroy:_r,_emnapi_node_emit_async_init:hr,_emnapi_node_make_callback:Zt,napi_close_callback_scope:nn,napi_make_callback:an,napi_open_callback_scope:tn}),L={offset:{resource:0,async_id:8,trigger_async_id:16,queue_size:24,queue:28,thread_count:32,is_closing:36,dispatch_state:40,context:44,max_queue_size:48,ref:52,env:56,finalize_data:60,finalize_cb:64,call_js_cb:68,handles_closing:72,async_ref:76,mutex:80,cond:84,end:88},init:function(){if(typeof F<"u"){F.unusedWorkers.forEach(L.addListener),F.runningWorkers.forEach(L.addListener);var e=F.getNewWorker;F.getNewWorker=function(){var a=e.apply(this,arguments);return L.addListener(a),a}}},addListener:function(e){if(!e)return!1;if(e._emnapiTSFNListener)return!0;var a=function(r){var i=c?r:r.data,s=i.__emnapi__;if(s){var f=s.type,d=s.payload;f==="tsfn-send"&&L.dispatch(d.tsfn)}},t=function(){c?e.off("message",a):e.removeEventListener("message",a,!1),delete e._emnapiTSFNListener};return e._emnapiTSFNListener={handler:a,dispose:t},c?e.on("message",a):e.addEventListener("message",a,!1),!0},initQueue:function(e){var a=8,t=D(a);return t?(new Uint8Array(h.buffer,t,a).fill(0),L.storeSizeTypeValue(e+L.offset.queue,t,!1),!0):!1},destroyQueue:function(e){var a=L.loadSizeTypeValue(e+L.offset.queue,!1);a&&R(a)},pushQueue:function(e,a){var t=L.loadSizeTypeValue(e+L.offset.queue,!1),r=L.loadSizeTypeValue(t,!1),i=L.loadSizeTypeValue(t+4,!1),s=8,f=D(s);if(!f)throw new Error("OOM");L.storeSizeTypeValue(f,a,!1),L.storeSizeTypeValue(f+4,0,!1),r===0&&i===0?(L.storeSizeTypeValue(t,f,!1),L.storeSizeTypeValue(t+4,f,!1)):(L.storeSizeTypeValue(i+4,f,!1),L.storeSizeTypeValue(t+4,f,!1)),L.addQueueSize(e)},shiftQueue:function(e){var a=L.loadSizeTypeValue(e+L.offset.queue,!1),t=L.loadSizeTypeValue(a,!1);if(t===0)return 0;var r=t,i=L.loadSizeTypeValue(t+4,!1);L.storeSizeTypeValue(a,i,!1),i===0&&L.storeSizeTypeValue(a+4,0,!1),L.storeSizeTypeValue(r+4,0,!1);var s=L.loadSizeTypeValue(r,!1);return R(r),L.subQueueSize(e),s},push:function(e,a,t){var r=L.getMutex(e),i=L.getCond(e),s=function(){var d=L.getQueueSize(e),_=L.getMaxQueueSize(e),v=L.getIsClosing(e);return d>=_&&_>0&&!v},f=typeof window<"u"&&typeof document<"u"&&!c;return r.execute(function(){for(;s();){if(t===0)return 15;if(f)return 21;i.wait()}return L.getIsClosing(e)?L.getThreadCount(e)===0?1:(L.subThreadCount(e),16):(L.pushQueue(e,a),L.send(e),0)})},getMutex:function(e){var a=e+L.offset.mutex,t={lock:function(){var r=typeof window<"u"&&typeof document<"u"&&!c,i=new Int32Array(h.buffer,a,1);if(r)for(;;){var s=Atomics.compareExchange(i,0,0,1);if(s===0)return}else for(;;){var s=Atomics.compareExchange(i,0,0,1);if(s===0)return;Atomics.wait(i,0,1)}},unlock:function(){var r=new Int32Array(h.buffer,a,1),i=Atomics.compareExchange(r,0,1,0);if(i!==1)throw new Error("Tried to unlock while not holding the mutex");Atomics.notify(r,0,1)},execute:function(r){t.lock();try{return r()}finally{t.unlock()}}};return t},getCond:function(e){var a=e+L.offset.cond,t=L.getMutex(e),r={wait:function(){var i=new Int32Array(h.buffer,a,1),s=Atomics.load(i,0);t.unlock(),Atomics.wait(i,0,s),t.lock()},signal:function(){var i=new Int32Array(h.buffer,a,1);Atomics.add(i,0,1),Atomics.notify(i,0,1)}};return r},getQueueSize:function(e){return L.loadSizeTypeValue(e+L.offset.queue_size,!0)},addQueueSize:function(e){var a=L.offset.queue_size,t,r;t=new Uint32Array(h.buffer),r=e+a>>2,Atomics.add(t,r,1)},subQueueSize:function(e){var a=L.offset.queue_size,t,r;t=new Uint32Array(h.buffer),r=e+a>>2,Atomics.sub(t,r,1)},getThreadCount:function(e){return L.loadSizeTypeValue(e+L.offset.thread_count,!0)},addThreadCount:function(e){var a=L.offset.thread_count,t,r;t=new Uint32Array(h.buffer),r=e+a>>2,Atomics.add(t,r,1)},subThreadCount:function(e){var a=L.offset.thread_count,t,r;t=new Uint32Array(h.buffer),r=e+a>>2,Atomics.sub(t,r,1)},getIsClosing:function(e){return Atomics.load(new Int32Array(h.buffer),e+L.offset.is_closing>>2)},setIsClosing:function(e,a){Atomics.store(new Int32Array(h.buffer),e+L.offset.is_closing>>2,a)},getHandlesClosing:function(e){return Atomics.load(new Int32Array(h.buffer),e+L.offset.handles_closing>>2)},setHandlesClosing:function(e,a){Atomics.store(new Int32Array(h.buffer),e+L.offset.handles_closing>>2,a)},getDispatchState:function(e){return Atomics.load(new Uint32Array(h.buffer),e+L.offset.dispatch_state>>2)},getContext:function(e){return L.loadSizeTypeValue(e+L.offset.context,!1)},getMaxQueueSize:function(e){return L.loadSizeTypeValue(e+L.offset.max_queue_size,!0)},getEnv:function(e){return L.loadSizeTypeValue(e+L.offset.env,!1)},getCallJSCb:function(e){return L.loadSizeTypeValue(e+L.offset.call_js_cb,!1)},getRef:function(e){return L.loadSizeTypeValue(e+L.offset.ref,!1)},getResource:function(e){return L.loadSizeTypeValue(e+L.offset.resource,!1)},getFinalizeCb:function(e){return L.loadSizeTypeValue(e+L.offset.finalize_cb,!1)},getFinalizeData:function(e){return L.loadSizeTypeValue(e+L.offset.finalize_data,!1)},loadSizeTypeValue:function(e,a){var t,r;return a?(r=new Uint32Array(h.buffer),t=Atomics.load(r,e>>2),t):(r=new Int32Array(h.buffer),t=Atomics.load(r,e>>2),t)},storeSizeTypeValue:function(e,a,t){var r;if(t){r=new Uint32Array(h.buffer),Atomics.store(r,e>>2,a);return}else{r=new Int32Array(h.buffer),Atomics.store(r,e>>2,a>>>0);return}},destroy:function(e){L.destroyQueue(e);var a=L.getEnv(e),t=o.envStore.get(a),r=L.getRef(e);r&&o.refStore.get(r).dispose(),o.removeCleanupHook(t,L.cleanup,e),t.unref();var i=e+L.offset.async_ref>>2,s=new Int32Array(h.buffer);Atomics.load(s,i)&&(Atomics.store(s,i,0),o.decreaseWaitingRequestCounter());var f=L.getResource(e);if(o.refStore.get(f).dispose(),g){var d=new DataView(h.buffer),_=d.getFloat64(e+L.offset.async_id,!0),v=d.getFloat64(e+L.offset.trigger_async_id,!0);_r(_,v)}R(e)},emptyQueueAndDelete:function(e){for(var a=L.getCallJSCb(e),t=L.getContext(e),r;L.getQueueSize(e)>0;)r=L.shiftQueue(e),a&&T.get(a)(0,0,t,r);L.destroy(e)},finalize:function(e){var a=L.getEnv(e),t=o.envStore.get(a);o.openScope(t);var r=L.getFinalizeCb(e),i=L.getFinalizeData(e),s=L.getContext(e),f=function(){t.callFinalizerInternal(0,r,i,s)};try{if(r)if(g){var d=L.getResource(e),_=o.refStore.get(d).get(),v=o.handleStore.get(_).value,I=new DataView(h.buffer),A=I.getFloat64(e+L.offset.async_id,!0),N=I.getFloat64(e+L.offset.trigger_async_id,!0);g.node.makeCallback(v,f,[],{asyncId:A,triggerAsyncId:N})}else f();L.emptyQueueAndDelete(e)}finally{o.closeScope(t)}},cleanup:function(e){L.closeHandlesAndMaybeDelete(e,1)},closeHandlesAndMaybeDelete:function(e,a){var t=L.getEnv(e),r=o.envStore.get(t);o.openScope(r);try{if(a&&L.getMutex(e).execute(function(){L.setIsClosing(e,1),L.getMaxQueueSize(e)>0&&L.getCond(e).signal()}),L.getHandlesClosing(e))return;L.setHandlesClosing(e,1),o.feature.setImmediate(function(){L.finalize(e)})}finally{o.closeScope(r)}},dispatchOne:function(e){var a=0,t=!1,r=!1,i=L.getMutex(e),s=L.getCond(e);if(i.execute(function(){if(L.getIsClosing(e))L.closeHandlesAndMaybeDelete(e,0);else{var P=L.getQueueSize(e);if(P>0){a=L.shiftQueue(e),t=!0;var V=L.getMaxQueueSize(e);P===V&&V>0&&s.signal(),P--}P===0?L.getThreadCount(e)===0&&(L.setIsClosing(e,1),L.getMaxQueueSize(e)>0&&s.signal(),L.closeHandlesAndMaybeDelete(e,0)):r=!0}}),t){var f=L.getEnv(e),d=o.envStore.get(f);o.openScope(d);var _=function(){d.callbackIntoModule(!1,function(){var P=L.getCallJSCb(e),V=L.getRef(e),G=V?o.refStore.get(V).get():0;if(P){var Q=L.getContext(e);T.get(P)(f,G,Q,a)}else{var ne=G?o.handleStore.get(G).value:null;typeof ne=="function"&&ne()}})};try{if(g){var v=L.getResource(e),I=o.refStore.get(v).get(),A=o.handleStore.get(I).value,N=new DataView(h.buffer);g.node.makeCallback(A,_,[],{asyncId:N.getFloat64(e+L.offset.async_id,!0),triggerAsyncId:N.getFloat64(e+L.offset.trigger_async_id,!0)})}else _()}finally{o.closeScope(d)}}return r},dispatch:function(e){for(var a=!0,t=1e3,r=new Uint32Array(h.buffer),i=e+L.offset.dispatch_state>>2;a&&--t!==0;)Atomics.store(r,i,1),a=L.dispatchOne(e),Atomics.exchange(r,i,0)!==1&&(a=!0);a&&L.send(e)},send:function(e){var a=Atomics.or(new Uint32Array(h.buffer),e+L.offset.dispatch_state>>2,2);(a&1)!==1&&(typeof l<"u"&&l?postMessage({__emnapi__:{type:"tsfn-send",payload:{tsfn:e}}}):o.feature.setImmediate(function(){L.dispatch(e)}))}};function un(e,a,t,r,i,s,f,d,_,v,I){if(!e)return 1;var A=o.envStore.get(e);if(A.checkGCAccess(),!r||(i=i>>>0,s=s>>>0,s===0)||!I)return A.setLastError(1);var N=0;if(a){var P=o.handleStore.get(a).value;if(typeof P!="function")return A.setLastError(1);N=o.createReference(A,a,1,1).id}else if(!v)return A.setLastError(1);var V;if(t){if(V=o.handleStore.get(t).value,V==null)return A.setLastError(2);V=Object(V)}else V={};var G=A.ensureHandleId(V),Q=o.handleStore.get(r).value;if(typeof Q=="symbol")return A.setLastError(3);Q=String(Q);var ne=A.ensureHandleId(Q),oe=L.offset.end,ee=D(oe);if(!ee)return A.setLastError(9);new Uint8Array(h.buffer).subarray(ee,ee+oe).fill(0);var le=o.createReference(A,G,1,1),ve=le.id,pe=new DataView(h.buffer);return pe.setInt32(ee,ve,!0),L.initQueue(ee)?(hr(G,ne,-1,ee+L.offset.async_id),pe.setUint32(ee+L.offset.thread_count,s,!0),pe.setInt32(ee+L.offset.context,_,!0),pe.setUint32(ee+L.offset.max_queue_size,i,!0),pe.setInt32(ee+L.offset.ref,N,!0),pe.setInt32(ee+L.offset.env,e,!0),pe.setInt32(ee+L.offset.finalize_data,f,!0),pe.setInt32(ee+L.offset.finalize_cb,d,!0),pe.setInt32(ee+L.offset.call_js_cb,v,!0),o.addCleanupHook(A,L.cleanup,ee),A.ref(),o.increaseWaitingRequestCounter(),pe.setInt32(ee+L.offset.async_ref,1,!0),pe.setInt32(I,ee,!0),A.clearLastError()):(R(ee),le.dispose(),A.setLastError(9))}function cn(e,a){if(!e||!a)return W(),1;var t=L.getContext(e),r=new DataView(h.buffer);return r.setInt32(a,t,!0),0}function fn(e,a,t){return e?L.push(e,a,t):(W(),1)}function ln(e){if(!e)return W(),1;var a=L.getMutex(e);return a.execute(function(){return L.getIsClosing(e)?16:(L.addThreadCount(e),0)})}function dn(e,a){if(!e)return W(),1;var t=L.getMutex(e),r=L.getCond(e);return t.execute(function(){if(L.getThreadCount(e)===0)return 1;if(L.subThreadCount(e),L.getThreadCount(e)===0||a===1){var i=L.getIsClosing(e);if(!i){var s=a===1?1:0;L.setIsClosing(e,s),s&&L.getMaxQueueSize(e)>0&&r.signal(),L.send(e)}}return 0})}function pn(e,a){if(!a)return W(),1;var t=a+L.offset.async_ref>>2,r=new Int32Array(h.buffer);return Atomics.load(r,t)&&(Atomics.store(r,t,0),o.decreaseWaitingRequestCounter()),0}function hn(e,a){if(!a)return W(),1;var t=a+L.offset.async_ref>>2,r=new Int32Array(h.buffer);return Atomics.load(r,t)||(Atomics.store(r,t,1),o.increaseWaitingRequestCounter()),0}var H={unusedWorkers:[],runningWorkers:[],workQueue:[],workerReady:null,offset:{resource:0,async_id:8,trigger_async_id:16,env:24,data:28,execute:32,complete:36,end:40},init:function(){H.unusedWorkers=[],H.runningWorkers=[],H.workQueue=[],H.workerReady=null},addListener:function(e){if(!e)return!1;if(e._emnapiAWMTListener)return!0;var a=function(r){var i=c?r:r.data,s=i.__emnapi__;if(s){var f=s.type,d=s.payload;f==="async-work-complete"?(o.decreaseWaitingRequestCounter(),H.runningWorkers.splice(H.runningWorkers.indexOf(e),1),H.unusedWorkers.push(e),H.checkIdleWorker(),H.callComplete(d.work,0)):f==="async-work-queue"?H.scheduleWork(d.work):f==="async-work-cancel"&&H.cancelWork(d.work)}},t=function(){c?e.off("message",a):e.removeEventListener("message",a,!1),delete e._emnapiAWMTListener};return e._emnapiAWMTListener={handler:a,dispose:t},c?e.on("message",a):e.addEventListener("message",a,!1),!0},initWorkers:function(e){if(l)return H.workerReady||(H.workerReady=Promise.resolve());if(H.workerReady)return H.workerReady;if(typeof E!="function")throw new TypeError("`options.onCreateWorker` is not a function");var a=[],t=[];if(!("emnapi_async_worker_create"in y.exports))throw new TypeError("`emnapi_async_worker_create` is not exported, please try to add `--export=emnapi_async_worker_create` to linker flags");for(var r=0;r<e;++r)t.push(y.exports.emnapi_async_worker_create());try{for(var i=function(f){var d=E({type:"async-work",name:"emnapi-async-worker"}),_=F.loadWasmModuleToWorker(d);H.addListener(d),a.push(_.then(function(){typeof d.unref=="function"&&d.unref()})),H.unusedWorkers.push(d);var v=t[f];d.threadBlockBase=v,d.postMessage({__emnapi__:{type:"async-worker-init",payload:{arg:v}}})},r=0;r<e;++r)i(r)}catch(f){for(var r=0;r<e;++r){var s=t[r];R(s)}throw f}return H.workerReady=Promise.all(a),H.workerReady},checkIdleWorker:function(){if(H.unusedWorkers.length>0&&H.workQueue.length>0){var e=H.unusedWorkers.shift(),a=H.workQueue.shift();H.runningWorkers.push(e),e.postMessage({__emnapi__:{type:"async-work-execute",payload:{work:a}}})}},getResource:function(e){return L.loadSizeTypeValue(e+H.offset.resource,!1)},getExecute:function(e){return L.loadSizeTypeValue(e+H.offset.execute,!1)},getComplete:function(e){return L.loadSizeTypeValue(e+H.offset.complete,!1)},getEnv:function(e){return L.loadSizeTypeValue(e+H.offset.env,!1)},getData:function(e){return L.loadSizeTypeValue(e+H.offset.data,!1)},scheduleWork:function(e){var a;if(l){var t=m.postMessage;t({__emnapi__:{type:"async-work-queue",payload:{work:e}}});return}if(o.increaseWaitingRequestCounter(),H.workQueue.push(e),!((a=H.workerReady)===null||a===void 0)&&a.ready)H.checkIdleWorker();else{var r=function(i){throw o.decreaseWaitingRequestCounter(),i};try{H.initWorkers(B()).then(function(){H.workerReady.ready=!0,H.checkIdleWorker()},r)}catch(i){r(i)}}},cancelWork:function(e){if(l){var a=m.postMessage;return a({__emnapi__:{type:"async-work-cancel",payload:{work:e}}}),0}var t=H.workQueue.indexOf(e);return t!==-1?(H.workQueue.splice(t,1),o.feature.setImmediate(function(){o.decreaseWaitingRequestCounter(),H.checkIdleWorker(),H.callComplete(e,11)}),0):9},callComplete:function(e,a){var t=H.getComplete(e),r=H.getEnv(e),i=H.getData(e),s=o.envStore.get(r),f=o.openScope(s),d=function(){t&&s.callbackIntoModule(!0,function(){T.get(t)(r,a,i)})};try{if(g){var _=H.getResource(e),v=o.refStore.get(_).get(),I=o.handleStore.get(v).value,A=new DataView(h.buffer),N=A.getFloat64(e+H.offset.async_id,!0),P=A.getFloat64(e+H.offset.trigger_async_id,!0);g.node.makeCallback(I,d,[],{asyncId:N,triggerAsyncId:P})}else d()}finally{o.closeScope(s,f)}}},_n=O?function(e,a,t,r,i,s,f){if(!e)return 1;var d=o.envStore.get(e);if(d.checkGCAccess(),!r||!f)return d.setLastError(1);var _;if(a?_=Object(o.handleStore.get(a).value):_={},!t)return d.setLastError(1);var v=String(o.handleStore.get(t).value),I=te.create(e,_,v,r,i,s),A=new DataView(h.buffer);return A.setInt32(f,I,!0),d.clearLastError()}:function(e,a,t,r,i,s,f){if(!e)return 1;var d=o.envStore.get(e);if(d.checkGCAccess(),!r||!f)return d.setLastError(1);var _;if(a?_=Object(o.handleStore.get(a).value):_={},!t)return d.setLastError(1);var v=H.offset.end,I=D(v);if(!I)return d.setLastError(9);new Uint8Array(h.buffer).subarray(I,I+v).fill(0);var A=d.ensureHandleId(_),N=o.createReference(d,A,1,1),P=N.id,V=new DataView(h.buffer);return V.setInt32(I,P,!0),hr(A,t,-1,I+H.offset.async_id),V.setInt32(I+H.offset.env,e,!0),V.setInt32(I+H.offset.execute,r,!0),V.setInt32(I+H.offset.complete,i,!0),V.setInt32(I+H.offset.data,s,!0),V.setInt32(f,I,!0),d.clearLastError()},vn=O?function(e,a){if(!e)return 1;var t=o.envStore.get(e);return t.checkGCAccess(),a?(te.remove(a),t.clearLastError()):t.setLastError(1)}:function(e,a){if(!e)return 1;var t=o.envStore.get(e);if(t.checkGCAccess(),!a)return t.setLastError(1);var r=H.getResource(a);if(o.refStore.get(r).dispose(),g){var i=new DataView(h.buffer),s=i.getFloat64(a+H.offset.async_id,!0),f=i.getFloat64(a+H.offset.trigger_async_id,!0);_r(s,f)}return R(a),t.clearLastError()},gn=O?function(e,a){if(!e)return 1;var t=o.envStore.get(e);return a?(te.queue(a),t.clearLastError()):t.setLastError(1)}:function(e,a){if(!e)return 1;var t=o.envStore.get(e);return a?(H.scheduleWork(a),t.clearLastError()):t.setLastError(1)},yn=O?function(e,a){if(!e)return 1;var t=o.envStore.get(e);if(!a)return t.setLastError(1);var r=te.cancel(a);return r===0?t.clearLastError():t.setLastError(r)}:function(e,a){if(!e)return 1;var t=o.envStore.get(e);if(!a)return t.setLastError(1);var r=H.cancelWork(a);return r===0?t.clearLastError():t.setLastError(r)};function En(e){if(m.childThread){if(typeof y.exports.emnapi_async_worker_init!="function")throw new TypeError("`emnapi_async_worker_init` is not exported, please try to add `--export=emnapi_async_worker_init` to linker flags");y.exports.emnapi_async_worker_init(e)}else throw new Error("startThread is only available in child threads")}function mn(e){if(l){var a=H.getExecute(e),t=H.getEnv(e),r=H.getData(e);T.get(a)(t,r);var i=m.postMessage;i({__emnapi__:{type:"async-work-complete",payload:{work:e}}})}}m.initWorker=En,m.executeAsyncWork=mn;var wn=Object.freeze({__proto__:null,napi_cancel_async_work:yn,napi_create_async_work:_n,napi_delete_async_work:vn,napi_queue_async_work:gn}),q={registry:typeof FinalizationRegistry=="function"?new FinalizationRegistry(function(e){R(e)}):void 0,table:new WeakMap,wasmMemoryViewTable:new WeakMap,init:function(){q.registry=typeof FinalizationRegistry=="function"?new FinalizationRegistry(function(e){R(e)}):void 0,q.table=new WeakMap,q.wasmMemoryViewTable=new WeakMap},isDetachedArrayBuffer:function(e){if(e.byteLength===0)try{new Uint8Array(e)}catch{return!0}return!1},getArrayBufferPointer:function(e,a){var t,r={address:0,ownership:0,runtimeAllocated:0};if(e===h.buffer)return r;var i=q.isDetachedArrayBuffer(e);if(q.table.has(e)){var s=q.table.get(e);return i?(s.address=0,s):(a&&s.ownership===0&&s.runtimeAllocated===1&&new Uint8Array(h.buffer).set(new Uint8Array(e),s.address),s)}if(i||e.byteLength===0||!a)return r;var f=D(e.byteLength);if(!f)throw new Error("Out of memory");return new Uint8Array(h.buffer).set(new Uint8Array(e),f),r.address=f,r.ownership=q.registry?0:1,r.runtimeAllocated=1,q.table.set(e,r),(t=q.registry)===null||t===void 0||t.register(e,f),r},getOrUpdateMemoryView:function(e){if(e.buffer===h.buffer)return q.wasmMemoryViewTable.has(e)||q.wasmMemoryViewTable.set(e,{Ctor:e.constructor,address:e.byteOffset,length:e instanceof DataView?e.byteLength:e.length,ownership:1,runtimeAllocated:0}),e;var a=q.isDetachedArrayBuffer(e.buffer)||typeof SharedArrayBuffer=="function"&&e.buffer instanceof SharedArrayBuffer;if(a&&q.wasmMemoryViewTable.has(e)){var t=q.wasmMemoryViewTable.get(e),r=t.Ctor,i=void 0,s=o.feature.Buffer;return typeof s=="function"&&r===s?i=s.from(h.buffer,t.address,t.length):i=new r(h.buffer,t.address,t.length),q.wasmMemoryViewTable.set(i,t),i}return e},getViewPointer:function(e,a){if(e=q.getOrUpdateMemoryView(e),e.buffer===h.buffer){if(q.wasmMemoryViewTable.has(e)){var t=q.wasmMemoryViewTable.get(e),r=t.address,i=t.ownership,s=t.runtimeAllocated;return{address:r,ownership:i,runtimeAllocated:s,view:e}}return{address:e.byteOffset,ownership:1,runtimeAllocated:0,view:e}}var f=q.getArrayBufferPointer(e.buffer,a),d=f.address,_=f.ownership,v=f.runtimeAllocated;return{address:d===0?0:d+e.byteOffset,ownership:_,runtimeAllocated:v,view:e}}},Z={utf8Decoder:void 0,utf16Decoder:void 0,init:function(){var e={decode:function(i){for(var s=0,f=Math.min(4096,i.length+1),d=new Uint16Array(f),_=[],v=0;;){var I=s<i.length;if(!I||v>=f-1){var A=d.subarray(0,v),N=A;if(_.push(String.fromCharCode.apply(null,N)),!I)return _.join("");i=i.subarray(s),s=0,v=0}var P=i[s++];if((P&128)===0)d[v++]=P;else if((P&224)===192){var V=i[s++]&63;d[v++]=(P&31)<<6|V}else if((P&240)===224){var V=i[s++]&63,G=i[s++]&63;d[v++]=(P&31)<<12|V<<6|G}else if((P&248)===240){var V=i[s++]&63,G=i[s++]&63,Q=i[s++]&63,ne=(P&7)<<18|V<<12|G<<6|Q;ne>65535&&(ne-=65536,d[v++]=ne>>>10&1023|55296,ne=56320|ne&1023),d[v++]=ne}}}},a;a=typeof TextDecoder=="function"?new TextDecoder:e,Z.utf8Decoder=a;var t={decode:function(i){var s=new Uint16Array(i.buffer,i.byteOffset,i.byteLength/2);if(s.length<=4096)return String.fromCharCode.apply(null,s);for(var f=[],d=0,_=0;d<s.length;d+=_)_=Math.min(4096,s.length-d),f.push(String.fromCharCode.apply(null,s.subarray(d,d+_)));return f.join("")}},r;r=typeof TextDecoder=="function"?new TextDecoder("utf-16le"):t,Z.utf16Decoder=r},lengthBytesUTF8:function(e){for(var a,t=0,r=0;r<e.length;++r)a=e.charCodeAt(r),a<=127?t++:a<=2047?t+=2:a>=55296&&a<=57343?(t+=4,++r):t+=3;return t},UTF8ToString:function(e,a){if(!e||!a)return"";e>>>=0;var t=new Uint8Array(h.buffer),r=e;if(a===-1)for(;t[r];)++r;else r=e+(a>>>0);if(a=r-e,a<=16){for(var i=e,s="";i<r;){var f=t[i++];if(!(f&128)){s+=String.fromCharCode(f);continue}var d=t[i++]&63;if((f&224)===192){s+=String.fromCharCode((f&31)<<6|d);continue}var _=t[i++]&63;if((f&240)===224?f=(f&15)<<12|d<<6|_:f=(f&7)<<18|d<<12|_<<6|t[i++]&63,f<65536)s+=String.fromCharCode(f);else{var v=f-65536;s+=String.fromCharCode(55296|v>>10,56320|v&1023)}}return s}return Z.utf8Decoder.decode(typeof SharedArrayBuffer=="function"&&t.buffer instanceof SharedArrayBuffer||Object.prototype.toString.call(t.buffer)==="[object SharedArrayBuffer]"?t.slice(e,r):t.subarray(e,r))},stringToUTF8:function(e,a,t){var r=new Uint8Array(h.buffer),i=a;if(i>>>=0,!(t>0))return 0;for(var s=i,f=i+t-1,d=0;d<e.length;++d){var _=e.charCodeAt(d);if(_>=55296&&_<=57343){var v=e.charCodeAt(++d);_=65536+((_&1023)<<10)|v&1023}if(_<=127){if(i>=f)break;r[i++]=_}else if(_<=2047){if(i+1>=f)break;r[i++]=192|_>>6,r[i++]=128|_&63}else if(_<=65535){if(i+2>=f)break;r[i++]=224|_>>12,r[i++]=128|_>>6&63,r[i++]=128|_&63}else{if(i+3>=f)break;r[i++]=240|_>>18,r[i++]=128|_>>12&63,r[i++]=128|_>>6&63,r[i++]=128|_&63}}return r[i]=0,i-s},UTF16ToString:function(e,a){if(!e||!a)return"";e>>>=0;var t=e;if(a===-1){for(var r=t>>1,i=new Uint16Array(h.buffer);i[r];)++r;t=r<<1}else t=e+(a>>>0)*2;if(a=t-e,a<=32)return String.fromCharCode.apply(null,new Uint16Array(h.buffer,e,a/2));var s=new Uint8Array(h.buffer);return Z.utf16Decoder.decode(typeof SharedArrayBuffer=="function"&&s.buffer instanceof SharedArrayBuffer||Object.prototype.toString.call(s.buffer)==="[object SharedArrayBuffer]"?s.slice(e,t):s.subarray(e,t))},stringToUTF16:function(e,a,t){if(t===void 0&&(t=2147483647),t<2)return 0;t-=2;for(var r=a,i=t<e.length*2?t/2:e.length,s=new DataView(h.buffer),f=0;f<i;++f){var d=e.charCodeAt(f);s.setInt16(a,d,!0),a+=2}return s.setInt16(a,0,!0),a-r},newString:function(e,a,t,r,i){if(!e)return 1;var s=o.envStore.get(e);s.checkGCAccess();var f=t===-1,d=t>>>0;if(t!==0&&!a||!r||!(f||d<=2147483647))return s.setLastError(1);var _=i(a,f,d),v=o.addToCurrentScope(_).id,I=new DataView(h.buffer);return I.setInt32(r,v,!0),s.clearLastError()},newExternalString:function(e,a,t,r,i,s,f,d,_){if(!e)return 1;var v=o.envStore.get(e);v.checkGCAccess();var I=t===-1,A=t>>>0;if(t!==0&&!a||!s||!(I||A<=2147483647))return v.setLastError(1);var N=d(e,a,t,s);if(N===0){if(f){var P=new DataView(h.buffer);P.setInt8(f,1,!0)}r&&v.callFinalizer(r,a,i)}return N}};function bn(e,a,t){if(!e)return 1;var r=o.envStore.get(e);if(r.checkGCAccess(),!r.tryCatch.isEmpty())return r.setLastError(10);if(!r.canCallIntoJs())return r.setLastError(r.moduleApiVersion>=10?23:10);r.clearLastError();try{if(!a||!t)return r.setLastError(1);var i=o.handleStore.get(a);if(!i.isArray())return r.setLastError(8);var s=i.value.length>>>0,f=new DataView(h.buffer);return f.setUint32(t,s,!0),r.getReturnStatus()}catch(d){return r.tryCatch.setError(d),r.setLastError(10)}}function An(e,a,t,r){if(!e)return 1;var i=o.envStore.get(e);if(i.checkGCAccess(),!a)return i.setLastError(1);var s=o.handleStore.get(a);if(!s.isArrayBuffer())return i.setLastError(1);var f=new DataView(h.buffer);if(t){var d=q.getArrayBufferPointer(s.value,!0).address;f.setInt32(t,d,!0)}return r&&f.setUint32(r,s.value.byteLength,!0),i.clearLastError()}function In(e,a,t){if(!e)return 1;var r=o.envStore.get(e);if(r.checkGCAccess(),!r.tryCatch.isEmpty())return r.setLastError(10);if(!r.canCallIntoJs())return r.setLastError(r.moduleApiVersion>=10?23:10);r.clearLastError();try{if(!a||!t)return r.setLastError(1);var i=o.handleStore.get(a);if(i.value==null)throw new TypeError("Cannot convert undefined or null to object");var s=void 0;try{s=i.isObject()||i.isFunction()?i.value:Object(i.value)}catch{return r.setLastError(2)}var f=r.ensureHandleId(Object.getPrototypeOf(s)),d=new DataView(h.buffer);return d.setInt32(t,f,!0),r.getReturnStatus()}catch(_){return r.tryCatch.setError(_),r.setLastError(10)}}function Gr(e,a,t,r,i,s,f){if(!e)return 1;var d=o.envStore.get(e);if(d.checkGCAccess(),!a)return d.setLastError(1);var _=o.handleStore.get(a);if(!_.isTypedArray())return d.setLastError(1);var v=_.value,I=new DataView(h.buffer);if(t){var A=void 0;if(v instanceof Int8Array)A=0;else if(v instanceof Uint8Array)A=1;else if(v instanceof Uint8ClampedArray)A=2;else if(v instanceof Int16Array)A=3;else if(v instanceof Uint16Array)A=4;else if(v instanceof Int32Array)A=5;else if(v instanceof Uint32Array)A=6;else if(v instanceof Float32Array)A=7;else if(v instanceof Float64Array)A=8;else if(v instanceof BigInt64Array)A=9;else if(v instanceof BigUint64Array)A=10;else return d.setLastError(9);I.setInt32(t,A,!0)}r&&I.setUint32(r,v.length,!0);var N;if(i||s){if(N=v.buffer,i){var P=q.getViewPointer(v,!0).address;I.setInt32(i,P,!0)}if(s){var V=d.ensureHandleId(N);I.setInt32(s,V,!0)}}return f&&I.setUint32(f,v.byteOffset,!0),d.clearLastError()}function Sn(e,a,t,r){if(!e)return 1;var i=o.envStore.get(e);if(i.checkGCAccess(),!a)return i.setLastError(1);var s=o.handleStore.get(a);return s.isBuffer(o.feature.Buffer)?s.isDataView()?$r(e,a,r,t,0,0):Gr(e,a,0,r,t,0,0):i.setLastError(1)}function $r(e,a,t,r,i,s){if(!e)return 1;var f=o.envStore.get(e);if(f.checkGCAccess(),!a)return f.setLastError(1);var d=o.handleStore.get(a);if(!d.isDataView())return f.setLastError(1);var _=d.value,v=new DataView(h.buffer);t&&v.setUint32(t,_.byteLength,!0);var I;if(r||i){if(I=_.buffer,r){var A=q.getViewPointer(_,!0).address;v.setInt32(r,A,!0)}if(i){var N=f.ensureHandleId(I);v.setInt32(i,N,!0)}}return s&&v.setUint32(s,_.byteOffset,!0),f.clearLastError()}function Ln(e,a,t){var r;if(!e)return 1;var i=o.envStore.get(e);if(i.checkGCAccess(),!i.tryCatch.isEmpty())return i.setLastError(10);if(!i.canCallIntoJs())return i.setLastError(i.moduleApiVersion>=10?23:10);i.clearLastError();try{if(!a||!t)return i.setLastError(1);var s=o.handleStore.get(a);if(!s.isDate())return i.setLastError(1);r=s.value.valueOf();var f=new DataView(h.buffer);return f.setFloat64(t,r,!0),i.getReturnStatus()}catch(d){return i.tryCatch.setError(d),i.setLastError(10)}}function Tn(e,a,t){if(!e)return 1;var r=o.envStore.get(e);if(r.checkGCAccess(),!a||!t)return r.setLastError(1);var i=o.handleStore.get(a);if(typeof i.value!="boolean")return r.setLastError(7);var s=i.value?1:0,f=new DataView(h.buffer);return f.setInt8(t,s,!0),r.clearLastError()}function Cn(e,a,t){if(!e)return 1;var r=o.envStore.get(e);if(r.checkGCAccess(),!a||!t)return r.setLastError(1);var i=o.handleStore.get(a);if(typeof i.value!="number")return r.setLastError(6);var s=i.value,f=new DataView(h.buffer);return f.setFloat64(t,s,!0),r.clearLastError()}function kn(e,a,t,r){if(!e)return 1;var i=o.envStore.get(e);if(i.checkGCAccess(),!o.feature.supportBigInt)return i.setLastError(9);if(!a||!t||!r)return i.setLastError(1);var s=o.handleStore.get(a),f=s.value;if(typeof f!="bigint")return i.setLastError(6);var d=new DataView(h.buffer);f>=BigInt(-1)*(BigInt(1)<<BigInt(63))&&f<BigInt(1)<<BigInt(63)?d.setInt8(r,1,!0):(d.setInt8(r,0,!0),f=f&(BigInt(1)<<BigInt(64))-BigInt(1),f>=BigInt(1)<<BigInt(63)&&(f=f-(BigInt(1)<<BigInt(64))));var _=Number(f&BigInt(4294967295)),v=Number(f>>BigInt(32));return d.setInt32(t,_,!0),d.setInt32(t+4,v,!0),i.clearLastError()}function Dn(e,a,t,r){if(!e)return 1;var i=o.envStore.get(e);if(i.checkGCAccess(),!o.feature.supportBigInt)return i.setLastError(9);if(!a||!t||!r)return i.setLastError(1);var s=o.handleStore.get(a),f=s.value;if(typeof f!="bigint")return i.setLastError(6);var d=new DataView(h.buffer);f>=BigInt(0)&&f<BigInt(1)<<BigInt(64)?d.setInt8(r,1,!0):(d.setInt8(r,0,!0),f=f&(BigInt(1)<<BigInt(64))-BigInt(1));var _=Number(f&BigInt(4294967295)),v=Number(f>>BigInt(32));return d.setUint32(t,_,!0),d.setUint32(t+4,v,!0),i.clearLastError()}function Bn(e,a,t,r,i){if(!e)return 1;var s=o.envStore.get(e);if(s.checkGCAccess(),!o.feature.supportBigInt)return s.setLastError(9);if(!a||!r)return s.setLastError(1);var f=o.handleStore.get(a);if(!f.isBigInt())return s.setLastError(17);for(var d=f.value<BigInt(0),_=new DataView(h.buffer),v=_.getUint32(r,!0),I=0,A=d?f.value*BigInt(-1):f.value;A!==BigInt(0);)I++,A=A>>BigInt(64);if(A=d?f.value*BigInt(-1):f.value,!t&&!i)v=I,_.setUint32(r,v,!0);else{if(!t||!i)return s.setLastError(1);for(var N=[];A!==BigInt(0);){var P=A&(BigInt(1)<<BigInt(64))-BigInt(1);N.push(P),A=A>>BigInt(64)}for(var V=Math.min(v,N.length),G=0;G<V;G++){var Q=Number(N[G]&BigInt(4294967295)),ne=Number(N[G]>>BigInt(32));_.setUint32(i+G*8,Q,!0),_.setUint32(i+(G*8+4),ne,!0)}_.setInt32(t,d?1:0,!0),_.setUint32(r,V,!0)}return s.clearLastError()}function Rn(e,a,t){if(!e)return 1;var r=o.envStore.get(e);if(r.checkGCAccess(),!a||!t)return r.setLastError(1);var i=o.handleStore.get(a);if(!i.isExternal())return r.setLastError(1);var s=i.data(),f=new DataView(h.buffer);return f.setInt32(t,s,!0),r.clearLastError()}function On(e,a,t){if(!e)return 1;var r=o.envStore.get(e);if(r.checkGCAccess(),!a||!t)return r.setLastError(1);var i=o.handleStore.get(a);if(typeof i.value!="number")return r.setLastError(6);var s=new Int32Array([i.value])[0],f=new DataView(h.buffer);return f.setInt32(t,s,!0),r.clearLastError()}function xn(e,a,t){if(!e)return 1;var r=o.envStore.get(e);if(r.checkGCAccess(),!a||!t)return r.setLastError(1);var i=o.handleStore.get(a);if(typeof i.value!="number")return r.setLastError(6);var s=i.value,f=new DataView(h.buffer);return s===Number.POSITIVE_INFINITY||s===Number.NEGATIVE_INFINITY||isNaN(s)?(f.setInt32(t,0,!0),f.setInt32(t+4,0,!0)):s<-9223372036854776e3?(f.setInt32(t,0,!0),f.setInt32(t+4,2147483648,!0)):s>=9223372036854776e3?(f.setUint32(t,4294967295,!0),f.setUint32(t+4,2147483647,!0)):ye(t,Math.trunc(s)),r.clearLastError()}function Fn(e,a,t,r,i){if(!e)return 1;var s=o.envStore.get(e);if(s.checkGCAccess(),!a)return s.setLastError(1);r=r>>>0;var f=o.handleStore.get(a);if(typeof f.value!="string")return s.setLastError(3);var d=new DataView(h.buffer);if(t)if(r!==0){for(var _=0,v=void 0,I=0;I<r-1;++I)v=f.value.charCodeAt(I)&255,d.setUint8(t+I,v,!0),_++;d.setUint8(t+_,0,!0),i&&d.setUint32(i,_,!0)}else i&&d.setUint32(i,0,!0);else{if(!i)return s.setLastError(1);d.setUint32(i,f.value.length,!0)}return s.clearLastError()}function Nn(e,a,t,r,i){if(!e)return 1;var s=o.envStore.get(e);if(s.checkGCAccess(),!a)return s.setLastError(1);r=r>>>0;var f=o.handleStore.get(a);if(typeof f.value!="string")return s.setLastError(3);var d=new DataView(h.buffer);if(t)if(r!==0){var v=Z.stringToUTF8(f.value,t,r);i&&d.setUint32(i,v,!0)}else i&&d.setUint32(i,0,!0);else{if(!i)return s.setLastError(1);var _=Z.lengthBytesUTF8(f.value);d.setUint32(i,_,!0)}return s.clearLastError()}function Pn(e,a,t,r,i){if(!e)return 1;var s=o.envStore.get(e);if(s.checkGCAccess(),!a)return s.setLastError(1);r=r>>>0;var f=o.handleStore.get(a);if(typeof f.value!="string")return s.setLastError(3);var d=new DataView(h.buffer);if(t)if(r!==0){var _=Z.stringToUTF16(f.value,t,r*2);i&&d.setUint32(i,_/2,!0)}else i&&d.setUint32(i,0,!0);else{if(!i)return s.setLastError(1);d.setUint32(i,f.value.length,!0)}return s.clearLastError()}function Un(e,a,t){if(!e)return 1;var r=o.envStore.get(e);if(r.checkGCAccess(),!a||!t)return r.setLastError(1);var i=o.handleStore.get(a);if(typeof i.value!="number")return r.setLastError(6);var s=new Uint32Array([i.value])[0],f=new DataView(h.buffer);return f.setUint32(t,s,!0),r.clearLastError()}var Mn=Object.freeze({__proto__:null,napi_get_array_length:bn,napi_get_arraybuffer_info:An,napi_get_buffer_info:Sn,napi_get_dataview_info:$r,napi_get_date_value:Ln,napi_get_prototype:In,napi_get_typedarray_info:Gr,napi_get_value_bigint_int64:kn,napi_get_value_bigint_uint64:Dn,napi_get_value_bigint_words:Bn,napi_get_value_bool:Tn,napi_get_value_double:Cn,napi_get_value_external:Rn,napi_get_value_int32:On,napi_get_value_int64:xn,napi_get_value_string_latin1:Fn,napi_get_value_string_utf16:Pn,napi_get_value_string_utf8:Nn,napi_get_value_uint32:Un});function Vn(e,a,t){if(!e)return 1;var r=o.envStore.get(e);if(r.checkGCAccess(),!t)return r.setLastError(1);var i=o.addToCurrentScope(a).id,s=new DataView(h.buffer);return s.setInt32(t,i,!0),r.clearLastError()}function Wn(e,a,t){if(!e)return 1;var r=o.envStore.get(e);if(r.checkGCAccess(),!t)return r.setLastError(1);var i=o.addToCurrentScope(a>>>0).id,s=new DataView(h.buffer);return s.setInt32(t,i,!0),r.clearLastError()}function jn(e,a,t,r){if(!e)return 1;var i=o.envStore.get(e);i.checkGCAccess();var s;if(!t)return i.setLastError(1);s=Number(a);var f=o.addToCurrentScope(s).id,d=new DataView(h.buffer);return d.setInt32(t,f,!0),i.clearLastError()}function Hn(e,a,t){if(!e)return 1;var r=o.envStore.get(e);if(r.checkGCAccess(),!t)return r.setLastError(1);var i=o.addToCurrentScope(a).id,s=new DataView(h.buffer);return s.setInt32(t,i,!0),r.clearLastError()}function vr(e,a,t,r){return Z.newString(e,a,t,r,function(i,s,f){var d="",_=0,v=new DataView(h.buffer);if(s)for(;;){var I=v.getUint8(i,!0);if(!I)break;d+=String.fromCharCode(I),i++}else for(;_<f;){var I=v.getUint8(i,!0);if(!I)break;d+=String.fromCharCode(I),_++,i++}return d})}function gr(e,a,t,r){return Z.newString(e,a,t,r,function(i){return Z.UTF16ToString(i,t)})}function Jr(e,a,t,r){return Z.newString(e,a,t,r,function(i){return Z.UTF8ToString(i,t)})}function zn(e,a,t,r,i,s,f){return Z.newExternalString(e,a,t,r,i,s,f,vr,void 0)}function Gn(e,a,t,r,i,s,f){return Z.newExternalString(e,a,t,r,i,s,f,gr,void 0)}function $n(e,a,t,r){return vr(e,a,t,r)}function Jn(e,a,t,r){return Jr(e,a,t,r)}function qn(e,a,t,r){return gr(e,a,t,r)}function Yn(e,a,t,r){if(!e)return 1;var i=o.envStore.get(e);if(i.checkGCAccess(),!o.feature.supportBigInt)return i.setLastError(9);var s;if(!t)return i.setLastError(1);s=a;var f=o.addToCurrentScope(s).id,d=new DataView(h.buffer);return d.setInt32(t,f,!0),i.clearLastError()}function Qn(e,a,t,r){if(!e)return 1;var i=o.envStore.get(e);if(i.checkGCAccess(),!o.feature.supportBigInt)return i.setLastError(9);var s;if(!t)return i.setLastError(1);s=a&(BigInt(1)<<BigInt(64))-BigInt(1);var f=o.addToCurrentScope(s).id,d=new DataView(h.buffer);return d.setInt32(t,f,!0),i.clearLastError()}function Kn(e,a,t,r,i){var s,f;if(!e)return 1;var d=o.envStore.get(e);if(d.checkGCAccess(),!d.tryCatch.isEmpty())return d.setLastError(10);if(!d.canCallIntoJs())return d.setLastError(d.moduleApiVersion>=10?23:10);d.clearLastError();try{if(!o.feature.supportBigInt)return d.setLastError(9);if(!i||(t=t>>>0,t>2147483647))return d.setLastError(1);if(t>16384)throw new RangeError("Maximum BigInt size exceeded");var _=BigInt(0),v=new DataView(h.buffer);for(f=0;f<t;f++){var I=v.getUint32(r+f*8,!0),A=v.getUint32(r+(f*8+4),!0),N=BigInt(I)|BigInt(A)<<BigInt(32);_+=N<<BigInt(64*f)}return _*=BigInt(a)%BigInt(2)===BigInt(0)?BigInt(1):BigInt(-1),s=o.addToCurrentScope(_).id,v.setInt32(i,s,!0),d.getReturnStatus()}catch(P){return d.tryCatch.setError(P),d.setLastError(10)}}var Xn=Object.freeze({__proto__:null,napi_create_bigint_int64:Yn,napi_create_bigint_uint64:Qn,napi_create_bigint_words:Kn,napi_create_double:Hn,napi_create_int32:Vn,napi_create_int64:jn,napi_create_string_latin1:vr,napi_create_string_utf16:gr,napi_create_string_utf8:Jr,napi_create_uint32:Wn,node_api_create_external_string_latin1:zn,node_api_create_external_string_utf16:Gn,node_api_create_property_key_latin1:$n,node_api_create_property_key_utf16:qn,node_api_create_property_key_utf8:Jn});function Ve(e,a,t,r,i){var s=!a||!t?"":Z.UTF8ToString(a,t),f,d=T.get(r),_=function(A){return d(A.id,A.ctx.scopeStore.currentScope.id)},v=function(A,N){return function(){var P=A.ctx.openScope(A),V=P.callbackInfo;V.data=i,V.args=arguments,V.thiz=this,V.fn=f;try{var G=A.callIntoModule(N);return G?A.ctx.handleStore.get(G).value:void 0}finally{V.data=0,V.args=void 0,V.thiz=void 0,V.fn=void 0,A.ctx.closeScope(A,P)}}};if(s==="")return f=v(e,_),{status:0,f};if(!/^[_$a-zA-Z][_$a-zA-Z0-9]*$/.test(s))return{status:1,f:void 0};if(o.feature.supportNewFunction){var I=v(e,_);try{f=new Function("_","return function "+s+'(){"use strict";return _.apply(this,arguments);};')(I)}catch{f=v(e,_),o.feature.canSetFunctionName&&Object.defineProperty(f,"name",{value:s})}}else f=v(e,_),o.feature.canSetFunctionName&&Object.defineProperty(f,"name",{value:s});return{status:0,f}}function yr(e,a,t,r,i,s,f,d,_){if(i||s){var v=void 0,I=void 0;i&&(v=Ve(e,0,0,i,_).f),s&&(I=Ve(e,0,0,s,_).f);var A={configurable:(d&4)!==0,enumerable:(d&2)!==0,get:v,set:I};Object.defineProperty(a,t,A)}else if(r){var N=Ve(e,0,0,r,_).f,A={configurable:(d&4)!==0,enumerable:(d&2)!==0,writable:(d&1)!==0,value:N};Object.defineProperty(a,t,A)}else{var A={configurable:(d&4)!==0,enumerable:(d&2)!==0,writable:(d&1)!==0,value:o.handleStore.get(f).value};Object.defineProperty(a,t,A)}}function qr(e){var a=o.handleStore.get(e);return a.isObject()||a.isFunction()?(typeof q<"u"&&ArrayBuffer.isView(a.value)&&q.wasmMemoryViewTable.has(a.value)&&(a=o.addToCurrentScope(q.wasmMemoryViewTable.get(a.value))),{status:0,handle:a}):{status:1}}function Zn(e,a,t,r,i,s){var f;if(!e)return 1;var d=o.envStore.get(e);if(d.checkGCAccess(),!d.tryCatch.isEmpty())return d.setLastError(10);if(!d.canCallIntoJs())return d.setLastError(d.moduleApiVersion>=10?23:10);d.clearLastError();try{if(!o.feature.supportFinalizer){if(r)throw o.createNotSupportWeakRefError("napi_wrap",'Parameter "finalize_cb" must be 0(NULL)');if(s)throw o.createNotSupportWeakRefError("napi_wrap",'Parameter "result" must be 0(NULL)')}if(!a)return d.setLastError(1);var _=qr(a);if(_.status!==0)return d.setLastError(_.status);var v=_.handle;if(d.getObjectBinding(v.value).wrapped!==0)return d.setLastError(1);var I=void 0;if(s){if(!r)return d.setLastError(1);I=o.createReferenceWithFinalizer(d,v.id,0,1,r,t,i),f=I.id;var A=new DataView(h.buffer);A.setInt32(s,f,!0)}else r?I=o.createReferenceWithFinalizer(d,v.id,0,0,r,t,i):I=o.createReferenceWithData(d,v.id,0,0,t);return d.getObjectBinding(v.value).wrapped=I.id,d.getReturnStatus()}catch(N){return d.tryCatch.setError(N),d.setLastError(10)}}function Yr(e,a,t,r){var i;if(!e)return 1;var s=o.envStore.get(e);if(s.checkGCAccess(),!s.tryCatch.isEmpty())return s.setLastError(10);if(!s.canCallIntoJs())return s.setLastError(s.moduleApiVersion>=10?23:10);s.clearLastError();try{if(!a||r===0&&!t)return s.setLastError(1);var f=o.handleStore.get(a);if(!(f.isObject()||f.isFunction()))return s.setLastError(1);var d=s.getObjectBinding(f.value),_=d.wrapped,v=o.refStore.get(_);if(!v)return s.setLastError(1);if(t){i=v.data();var I=new DataView(h.buffer);I.setInt32(t,i,!0)}return r===1&&(d.wrapped=0,v.ownership()===1?v.resetFinalizer():v.dispose()),s.getReturnStatus()}catch(A){return s.tryCatch.setError(A),s.setLastError(10)}}function ei(e,a,t,r,i,s,f,d){var _,v,I;if(!e)return 1;var A=o.envStore.get(e);if(A.checkGCAccess(),!A.tryCatch.isEmpty())return A.setLastError(10);if(!A.canCallIntoJs())return A.setLastError(A.moduleApiVersion>=10?23:10);A.clearLastError();try{if(!d||!r||(s=s>>>0,s>0&&!f)||t<-1||t>2147483647||!a)return A.setLastError(1);var N=Ve(A,a,t,r,i);if(N.status!==0)return A.setLastError(N.status);for(var P=N.f,V=void 0,G=new DataView(h.buffer),Q=0;Q<s;Q++){_=f+Q*32;var ne=G.getInt32(_,!0),oe=G.getInt32(_+4,!0),ee=G.getInt32(_+8,!0),le=G.getInt32(_+12,!0),ve=G.getInt32(_+16,!0),pe=G.getInt32(_+20,!0);I=G.getInt32(_+24,!0);var Ee=G.getInt32(_+28,!0);if(ne)V=Z.UTF8ToString(ne,-1);else if(!oe||(V=o.handleStore.get(oe).value,typeof V!="string"&&typeof V!="symbol"))return A.setLastError(4);if((I&1024)!==0){yr(A,P,V,ee,le,ve,pe,I,Ee);continue}yr(A,P.prototype,V,ee,le,ve,pe,I,Ee)}var ke=o.addToCurrentScope(P);return v=ke.id,G.setInt32(d,v,!0),A.getReturnStatus()}catch(br){return A.tryCatch.setError(br),A.setLastError(10)}}function ri(e,a,t,r,i,s){return Zn(e,a,t,r,i,s)}function ti(e,a,t){return Yr(e,a,t,0)}function ni(e,a,t){return Yr(e,a,t,1)}function ii(e,a,t){if(!e)return 1;var r=o.envStore.get(e);if(r.checkGCAccess(),!r.tryCatch.isEmpty())return r.setLastError(10);if(!r.canCallIntoJs())return r.setLastError(r.moduleApiVersion>=10?23:10);r.clearLastError();try{if(!a)return r.setLastError(r.tryCatch.hasCaught()?10:1);var i=o.handleStore.get(a);if(!(i.isObject()||i.isFunction()))return r.setLastError(r.tryCatch.hasCaught()?10:2);if(!t)return r.setLastError(r.tryCatch.hasCaught()?10:1);var s=r.getObjectBinding(i.value);if(s.tag!==null)return r.setLastError(r.tryCatch.hasCaught()?10:1);var f=new Uint8Array(16);return f.set(new Uint8Array(h.buffer,t,16)),s.tag=new Uint32Array(f.buffer),r.getReturnStatus()}catch(d){return r.tryCatch.setError(d),r.setLastError(10)}}function ai(e,a,t,r){var i=!0;if(!e)return 1;var s=o.envStore.get(e);if(s.checkGCAccess(),!s.tryCatch.isEmpty())return s.setLastError(10);if(!s.canCallIntoJs())return s.setLastError(s.moduleApiVersion>=10?23:10);s.clearLastError();try{if(!a)return s.setLastError(s.tryCatch.hasCaught()?10:1);var f=o.handleStore.get(a);if(!(f.isObject()||f.isFunction()))return s.setLastError(s.tryCatch.hasCaught()?10:2);if(!t||!r)return s.setLastError(s.tryCatch.hasCaught()?10:1);var d=s.getObjectBinding(f.value);if(d.tag!==null){var _=d.tag,v=new Uint32Array(h.buffer,t,4);i=_[0]===v[0]&&_[1]===v[1]&&_[2]===v[2]&&_[3]===v[3]}else i=!1;var I=new DataView(h.buffer);return I.setInt8(r,i?1:0,!0),s.getReturnStatus()}catch(A){return s.tryCatch.setError(A),s.setLastError(10)}}function Er(e,a,t,r,i,s){if(!e)return 1;var f=o.envStore.get(e);if(f.checkGCAccess(),!o.feature.supportFinalizer)return f.setLastError(9);if(!a||!r)return f.setLastError(1);var d=qr(a);if(d.status!==0)return f.setLastError(d.status);var _=d.handle,v=s?1:0,I=o.createReferenceWithFinalizer(f,_.id,0,v,r,t,i);if(s){var A=I.id,N=new DataView(h.buffer);N.setInt32(s,A,!0)}return f.clearLastError()}function si(e,a,t,r){if(!e)return 1;var i=o.envStore.get(e);return i.enqueueFinalizer(o.createTrackedFinalizer(i,a,t,r)),i.clearLastError()}var oi=Object.freeze({__proto__:null,napi_add_finalizer:Er,napi_check_object_type_tag:ai,napi_define_class:ei,napi_remove_wrap:ni,napi_type_tag_object:ii,napi_unwrap:ti,napi_wrap:ri,node_api_post_finalizer:si});function Qr(e,a,t,r,i,s,f){var d;if(!e)return 1;var _=o.envStore.get(e);if(_.checkGCAccess(),!_.tryCatch.isEmpty())return _.setLastError(10);if(!_.canCallIntoJs())return _.setLastError(_.moduleApiVersion>=10?23:10);_.clearLastError();try{if(!f)return _.setLastError(1);if(r=r>>>0,t||(r=0),r>2147483647)throw new RangeError("Cannot create a memory view larger than 2147483647 bytes");if(t+r>h.buffer.byteLength)throw new RangeError("Memory out of range");if(!o.feature.supportFinalizer&&i)throw o.createNotSupportWeakRefError("emnapi_create_memory_view",'Parameter "finalize_cb" must be 0(NULL)');var v=void 0;switch(a){case 0:v={Ctor:Int8Array,address:t,length:r,ownership:1,runtimeAllocated:0};break;case 1:v={Ctor:Uint8Array,address:t,length:r,ownership:1,runtimeAllocated:0};break;case 2:v={Ctor:Uint8ClampedArray,address:t,length:r,ownership:1,runtimeAllocated:0};break;case 3:v={Ctor:Int16Array,address:t,length:r>>1,ownership:1,runtimeAllocated:0};break;case 4:v={Ctor:Uint16Array,address:t,length:r>>1,ownership:1,runtimeAllocated:0};break;case 5:v={Ctor:Int32Array,address:t,length:r>>2,ownership:1,runtimeAllocated:0};break;case 6:v={Ctor:Uint32Array,address:t,length:r>>2,ownership:1,runtimeAllocated:0};break;case 7:v={Ctor:Float32Array,address:t,length:r>>2,ownership:1,runtimeAllocated:0};break;case 8:v={Ctor:Float64Array,address:t,length:r>>3,ownership:1,runtimeAllocated:0};break;case 9:v={Ctor:BigInt64Array,address:t,length:r>>3,ownership:1,runtimeAllocated:0};break;case 10:v={Ctor:BigUint64Array,address:t,length:r>>3,ownership:1,runtimeAllocated:0};break;case-1:v={Ctor:DataView,address:t,length:r,ownership:1,runtimeAllocated:0};break;case-2:{if(!o.feature.Buffer)throw o.createNotSupportBufferError("emnapi_create_memory_view","");v={Ctor:o.feature.Buffer,address:t,length:r,ownership:1,runtimeAllocated:0};break}default:return _.setLastError(1)}var I=v.Ctor,A=a===-2?o.feature.Buffer.from(h.buffer,v.address,v.length):new I(h.buffer,v.address,v.length),N=o.addToCurrentScope(A);if(q.wasmMemoryViewTable.set(A,v),i){var P=Er(e,N.id,t,i,s,0);if(P===10){var V=_.tryCatch.extractException();throw _.clearLastError(),V}else if(P!==0)return _.setLastError(P)}d=N.id;var G=new DataView(h.buffer);return G.setInt32(f,d,!0),_.getReturnStatus()}catch(Q){return _.tryCatch.setError(Q),_.setLastError(10)}}function ui(){return o.feature.supportFinalizer?1:0}function ci(){return o.feature.supportBigInt?1:0}function fi(){return g?1:0}function mr(e,a,t,r){t=t??0,t=t>>>0;var i;if(a instanceof ArrayBuffer){var s=q.getArrayBufferPointer(a,!1).address;if(!s)throw new Error("Unknown ArrayBuffer address");if((typeof r!="number"||r===-1)&&(r=a.byteLength-t),r=r>>>0,r===0)return a;i=new Uint8Array(a,t,r);var f=new Uint8Array(h.buffer);return e?f.set(i,s):i.set(f.subarray(s,s+r)),a}if(ArrayBuffer.isView(a)){var d=q.getViewPointer(a,!1),_=d.view,s=d.address;if(!s)throw new Error("Unknown ArrayBuffer address");if((typeof r!="number"||r===-1)&&(r=_.byteLength-t),r=r>>>0,r===0)return _;i=new Uint8Array(_.buffer,_.byteOffset+t,r);var f=new Uint8Array(h.buffer);return e?f.set(i,s):i.set(f.subarray(s,s+r)),_}throw new TypeError("emnapiSyncMemory expect ArrayBuffer or ArrayBufferView as first parameter")}function li(e,a,t,r,i){var s;if(!e)return 1;var f=o.envStore.get(e);if(f.checkGCAccess(),!f.tryCatch.isEmpty())return f.setLastError(10);if(!f.canCallIntoJs())return f.setLastError(f.moduleApiVersion>=10?23:10);f.clearLastError();try{if(!t)return f.setLastError(1);var d=new DataView(h.buffer),_=d.getInt32(t,!0),v=f.ctx.handleStore.get(_);if(!v.isArrayBuffer()&&!v.isTypedArray()&&!v.isDataView())return f.setLastError(1);var I=mr(!!a,v.value,r,i);return v.value!==I&&(s=f.ensureHandleId(I),d.setInt32(t,s,!0)),f.getReturnStatus()}catch(A){return f.tryCatch.setError(A),f.setLastError(10)}}function wr(e){var a=e instanceof ArrayBuffer,t=e instanceof DataView,r=ArrayBuffer.isView(e)&&!t;if(!a&&!r&&!t)throw new TypeError("emnapiGetMemoryAddress expect ArrayBuffer or ArrayBufferView as first parameter");var i;return a?i=q.getArrayBufferPointer(e,!1):i=q.getViewPointer(e,!1),{address:i.address,ownership:i.ownership,runtimeAllocated:i.runtimeAllocated}}function di(e,a,t,r,i){var s,f,d,_;if(!e)return 1;var v=o.envStore.get(e);if(v.checkGCAccess(),!v.tryCatch.isEmpty())return v.setLastError(10);if(!v.canCallIntoJs())return v.setLastError(v.moduleApiVersion>=10?23:10);v.clearLastError();try{if(!a||!t&&!r&&!i)return v.setLastError(1);var I=v.ctx.handleStore.get(a);_=wr(I.value),s=_.address;var A=new DataView(h.buffer);return t&&A.setInt32(t,s,!0),r&&(d=_.ownership,A.setInt32(r,d,!0)),i&&(f=_.runtimeAllocated,A.setInt8(i,f,!0)),v.getReturnStatus()}catch(N){return v.tryCatch.setError(N),v.setLastError(10)}}function pi(e,a){if(!e)return 1;var t=o.envStore.get(e);if(!a)return t.setLastError(1);var r;try{r=o.getRuntimeVersions().version}catch{return t.setLastError(9)}var i=r.split(".").map(function(f){return Number(f)}),s=new DataView(h.buffer);return s.setUint32(a,i[0],!0),s.setUint32(a+4,i[1],!0),s.setUint32(a+8,i[2],!0),t.clearLastError()}var hi=Object.freeze({__proto__:null,$emnapiGetMemoryAddress:wr,$emnapiSyncMemory:mr,emnapi_create_memory_view:Qr,emnapi_get_memory_address:di,emnapi_get_runtime_version:pi,emnapi_is_node_binding_available:fi,emnapi_is_support_bigint:ci,emnapi_is_support_weakref:ui,emnapi_sync_memory:li});function _i(e,a){if(!e)return 1;var t=o.envStore.get(e);if(t.checkGCAccess(),!a)return t.setLastError(1);var r=o.addToCurrentScope([]).id,i=new DataView(h.buffer);return i.setInt32(a,r,!0),t.clearLastError()}function vi(e,a,t){if(!e)return 1;var r=o.envStore.get(e);if(r.checkGCAccess(),!t)return r.setLastError(1);a=a>>>0;var i=o.addToCurrentScope(new Array(a)).id,s=new DataView(h.buffer);return s.setInt32(t,i,!0),r.clearLastError()}function Kr(e,a){e=e>>>0;var t=new ArrayBuffer(e);if(a){var r=q.getArrayBufferPointer(t,!0).address,i=new DataView(h.buffer);i.setInt32(a,r,!0)}return t}function gi(e,a,t,r){var i;if(!e)return 1;var s=o.envStore.get(e);if(s.checkGCAccess(),!s.tryCatch.isEmpty())return s.setLastError(10);if(!s.canCallIntoJs())return s.setLastError(s.moduleApiVersion>=10?23:10);s.clearLastError();try{if(!r)return s.setLastError(1);var f=Kr(a,t);i=o.addToCurrentScope(f).id;var d=new DataView(h.buffer);return d.setInt32(r,i,!0),s.getReturnStatus()}catch(_){return s.tryCatch.setError(_),s.setLastError(10)}}function yi(e,a,t){var r;if(!e)return 1;var i=o.envStore.get(e);if(i.checkGCAccess(),!i.tryCatch.isEmpty())return i.setLastError(10);if(!i.canCallIntoJs())return i.setLastError(i.moduleApiVersion>=10?23:10);i.clearLastError();try{if(!t)return i.setLastError(1);r=o.addToCurrentScope(new Date(a)).id;var s=new DataView(h.buffer);return s.setInt32(t,r,!0),i.getReturnStatus()}catch(f){return i.tryCatch.setError(f),i.setLastError(10)}}function Ei(e,a,t,r,i){var s;if(!e)return 1;var f=o.envStore.get(e);if(f.checkGCAccess(),!f.tryCatch.isEmpty())return f.setLastError(10);if(!f.canCallIntoJs())return f.setLastError(f.moduleApiVersion>=10?23:10);f.clearLastError();try{if(!i)return f.setLastError(1);if(!o.feature.supportFinalizer&&t)throw o.createNotSupportWeakRefError("napi_create_external",'Parameter "finalize_cb" must be 0(NULL)');var d=o.getCurrentScope().addExternal(a);t&&o.createReferenceWithFinalizer(f,d.id,0,0,t,a,r),s=d.id;var _=new DataView(h.buffer);return _.setInt32(i,s,!0),f.clearLastError()}catch(v){return f.tryCatch.setError(v),f.setLastError(10)}}function mi(e,a,t,r,i,s){var f;if(!e)return 1;var d=o.envStore.get(e);if(d.checkGCAccess(),!d.tryCatch.isEmpty())return d.setLastError(10);if(!d.canCallIntoJs())return d.setLastError(d.moduleApiVersion>=10?23:10);d.clearLastError();try{if(!s)return d.setLastError(1);if(t=t>>>0,a||(t=0),a+t>h.buffer.byteLength)throw new RangeError("Memory out of range");if(!o.feature.supportFinalizer&&r)throw o.createNotSupportWeakRefError("napi_create_external_arraybuffer",'Parameter "finalize_cb" must be 0(NULL)');var _=new ArrayBuffer(t);if(t===0)try{var v=o.feature.MessageChannel,I=new v;I.port1.postMessage(_,[_])}catch{}else{var A=new Uint8Array(_);A.set(new Uint8Array(h.buffer).subarray(a,a+t)),q.table.set(_,{address:a,ownership:1,runtimeAllocated:0})}var N=o.addToCurrentScope(_);if(r){var P=Er(e,N.id,a,r,i,0);if(P===10){var V=d.tryCatch.extractException();throw d.clearLastError(),V}else if(P!==0)return d.setLastError(P)}f=N.id;var G=new DataView(h.buffer);return G.setInt32(s,f,!0),d.getReturnStatus()}catch(Q){return d.tryCatch.setError(Q),d.setLastError(10)}}function wi(e,a){if(!e)return 1;var t=o.envStore.get(e);if(t.checkGCAccess(),!a)return t.setLastError(1);var r=o.addToCurrentScope({}).id,i=new DataView(h.buffer);return i.setInt32(a,r,!0),t.clearLastError()}function bi(e,a,t){if(!e)return 1;var r=o.envStore.get(e);if(r.checkGCAccess(),!t)return r.setLastError(1);var i=new DataView(h.buffer);if(a){var f=o.handleStore.get(a),d=f.value;if(typeof d!="string")return r.setLastError(3);var _=o.addToCurrentScope(Symbol(d)).id;i.setInt32(t,_,!0)}else{var s=o.addToCurrentScope(Symbol()).id;i.setInt32(t,s,!0)}return r.clearLastError()}function Ai(e,a,t,r,i,s){var f;if(!e)return 1;var d=o.envStore.get(e);if(d.checkGCAccess(),!d.tryCatch.isEmpty())return d.setLastError(10);if(!d.canCallIntoJs())return d.setLastError(d.moduleApiVersion>=10?23:10);d.clearLastError();try{if(!r||!s)return d.setLastError(1);var _=o.handleStore.get(r);if(!_.isArrayBuffer())return d.setLastError(1);var v=_.value,I=function(A,N,P,V,G,Q){var ne;if(G=G>>>0,Q=Q>>>0,P>1&&G%P!==0){var oe=new RangeError("start offset of ".concat((ne=N.name)!==null&&ne!==void 0?ne:""," should be a multiple of ").concat(P));return oe.code="ERR_NAPI_INVALID_TYPEDARRAY_ALIGNMENT",A.tryCatch.setError(oe),A.setLastError(9)}if(Q*P+G>V.byteLength){var oe=new RangeError("Invalid typed array length");return oe.code="ERR_NAPI_INVALID_TYPEDARRAY_LENGTH",A.tryCatch.setError(oe),A.setLastError(9)}var ee=new N(V,G,Q);V===h.buffer&&(q.wasmMemoryViewTable.has(ee)||q.wasmMemoryViewTable.set(ee,{Ctor:N,address:G,length:Q,ownership:1,runtimeAllocated:0})),f=o.addToCurrentScope(ee).id;var le=new DataView(h.buffer);return le.setInt32(s,f,!0),A.getReturnStatus()};switch(a){case 0:return I(d,Int8Array,1,v,i,t);case 1:return I(d,Uint8Array,1,v,i,t);case 2:return I(d,Uint8ClampedArray,1,v,i,t);case 3:return I(d,Int16Array,2,v,i,t);case 4:return I(d,Uint16Array,2,v,i,t);case 5:return I(d,Int32Array,4,v,i,t);case 6:return I(d,Uint32Array,4,v,i,t);case 7:return I(d,Float32Array,4,v,i,t);case 8:return I(d,Float64Array,8,v,i,t);case 9:return I(d,BigInt64Array,8,v,i,t);case 10:return I(d,BigUint64Array,8,v,i,t);default:return d.setLastError(1)}}catch(A){return d.tryCatch.setError(A),d.setLastError(10)}}function Ii(e,a,t,r){var i,s,f;if(!e)return 1;var d=o.envStore.get(e);if(d.checkGCAccess(),!d.tryCatch.isEmpty())return d.setLastError(10);if(!d.canCallIntoJs())return d.setLastError(d.moduleApiVersion>=10?23:10);d.clearLastError();try{if(!r)return d.setLastError(1);var _=o.feature.Buffer;if(!_)throw o.createNotSupportBufferError("napi_create_buffer","");var v=void 0;a=a>>>0;var I=new DataView(h.buffer);if(!t||a===0)v=_.alloc(a),s=o.addToCurrentScope(v).id,I.setInt32(r,s,!0);else{if(f=D(a),!f)throw new Error("Out of memory");new Uint8Array(h.buffer).subarray(f,f+a).fill(0);var A=_.from(h.buffer,f,a),N={Ctor:_,address:f,length:a,ownership:q.registry?0:1,runtimeAllocated:1};q.wasmMemoryViewTable.set(A,N),(i=q.registry)===null||i===void 0||i.register(N,f),s=o.addToCurrentScope(A).id,I.setInt32(r,s,!0),I.setInt32(t,f,!0)}return d.getReturnStatus()}catch(P){return d.tryCatch.setError(P),d.setLastError(10)}}function Si(e,a,t,r,i){var s;if(!e)return 1;var f=o.envStore.get(e);if(f.checkGCAccess(),!f.tryCatch.isEmpty())return f.setLastError(10);if(!f.canCallIntoJs())return f.setLastError(f.moduleApiVersion>=10?23:10);f.clearLastError();try{if(!i)return f.setLastError(1);var d=o.feature.Buffer;if(!d)throw o.createNotSupportBufferError("napi_create_buffer_copy","");var _=Kr(a,r),v=d.from(_);v.set(new Uint8Array(h.buffer).subarray(t,t+a)),s=o.addToCurrentScope(v).id;var I=new DataView(h.buffer);return I.setInt32(i,s,!0),f.getReturnStatus()}catch(A){return f.tryCatch.setError(A),f.setLastError(10)}}function Li(e,a,t,r,i,s){return Qr(e,-2,t,a,r,i,s)}function Ti(e,a,t,r,i){var s;if(!e)return 1;var f=o.envStore.get(e);if(f.checkGCAccess(),!f.tryCatch.isEmpty())return f.setLastError(10);if(!f.canCallIntoJs())return f.setLastError(f.moduleApiVersion>=10?23:10);f.clearLastError();try{if(!a||!i)return f.setLastError(1);t=t>>>0,r=r>>>0;var d=o.handleStore.get(a);if(!d.isArrayBuffer())return f.setLastError(1);var _=d.value;if(r+t>_.byteLength){var v=new RangeError("The byte offset + length is out of range");throw v.code="ERR_OUT_OF_RANGE",v}var I=o.feature.Buffer;if(!I)throw o.createNotSupportBufferError("node_api_create_buffer_from_arraybuffer","");var A=I.from(_,t,r);_===h.buffer&&(q.wasmMemoryViewTable.has(A)||q.wasmMemoryViewTable.set(A,{Ctor:I,address:t,length:r,ownership:1,runtimeAllocated:0})),s=o.addToCurrentScope(A).id;var N=new DataView(h.buffer);return N.setInt32(i,s,!0),f.getReturnStatus()}catch(P){return f.tryCatch.setError(P),f.setLastError(10)}}function Ci(e,a,t,r,i){var s;if(!e)return 1;var f=o.envStore.get(e);if(f.checkGCAccess(),!f.tryCatch.isEmpty())return f.setLastError(10);if(!f.canCallIntoJs())return f.setLastError(f.moduleApiVersion>=10?23:10);f.clearLastError();try{if(!t||!i)return f.setLastError(1);a=a>>>0,r=r>>>0;var d=o.handleStore.get(t);if(!d.isArrayBuffer())return f.setLastError(1);var _=d.value;if(a+r>_.byteLength){var v=new RangeError("byte_offset + byte_length should be less than or equal to the size in bytes of the array passed in");throw v.code="ERR_NAPI_INVALID_DATAVIEW_ARGS",v}var I=new DataView(_,r,a);_===h.buffer&&(q.wasmMemoryViewTable.has(I)||q.wasmMemoryViewTable.set(I,{Ctor:DataView,address:r,length:a,ownership:1,runtimeAllocated:0})),s=o.addToCurrentScope(I).id;var A=new DataView(h.buffer);return A.setInt32(i,s,!0),f.getReturnStatus()}catch(N){return f.tryCatch.setError(N),f.setLastError(10)}}function ki(e,a,t,r){if(!e)return 1;var i=o.envStore.get(e);if(i.checkGCAccess(),!r)return i.setLastError(1);var s=t===-1,f=t>>>0;if(t!==0&&!a||!(s||f<=2147483647))return i.setLastError(1);var d=Z.UTF8ToString(a,t),_=o.addToCurrentScope(Symbol.for(d)).id,v=new DataView(h.buffer);return v.setInt32(r,_,!0),i.clearLastError()}var Di=Object.freeze({__proto__:null,napi_create_array:_i,napi_create_array_with_length:vi,napi_create_arraybuffer:gi,napi_create_buffer:Ii,napi_create_buffer_copy:Si,napi_create_dataview:Ci,napi_create_date:yi,napi_create_external:Ei,napi_create_external_arraybuffer:mi,napi_create_external_buffer:Li,napi_create_object:wi,napi_create_symbol:bi,napi_create_typedarray:Ai,node_api_create_buffer_from_arraybuffer:Ti,node_api_symbol_for:ki});function Bi(e,a,t){if(!e)return 1;var r=o.envStore.get(e);if(r.checkGCAccess(),!t)return r.setLastError(1);var i=a===0?3:4,s=new DataView(h.buffer);return s.setInt32(t,i,!0),r.clearLastError()}function Ri(e,a){if(!e)return 1;var t=o.envStore.get(e);if(t.checkGCAccess(),!a)return t.setLastError(1);var r=5,i=new DataView(h.buffer);return i.setInt32(a,r,!0),t.clearLastError()}function Oi(e,a){if(!e)return 1;var t=o.envStore.get(e);if(t.checkGCAccess(),!a)return t.setLastError(1);var r=2,i=new DataView(h.buffer);return i.setInt32(a,r,!0),t.clearLastError()}function xi(e,a){if(!e)return 1;var t=o.envStore.get(e);if(t.checkGCAccess(),!a)return t.setLastError(1);var r=1,i=new DataView(h.buffer);return i.setInt32(a,r,!0),t.clearLastError()}var Fi=Object.freeze({__proto__:null,napi_get_boolean:Bi,napi_get_global:Ri,napi_get_null:Oi,napi_get_undefined:xi});function Ni(e,a,t,r){if(!e)return 1;var i=o.envStore.get(e);return i.setInstanceData(a,t,r),i.clearLastError()}function Pi(e,a){if(!e)return 1;var t=o.envStore.get(e);if(!a)return t.setLastError(1);var r=t.getInstanceData(),i=new DataView(h.buffer);return i.setInt32(a,r,!0),t.clearLastError()}var Ui=Object.freeze({__proto__:null,napi_get_instance_data:Pi,napi_set_instance_data:Ni});function Mi(e,a,t,r){var i=o.envStore.get(e),s=i.lastError,f=s.errorCode,d=s.engineErrorCode>>>0,_=s.engineReserved,v=new DataView(h.buffer);v.setInt32(a,f,!0),v.setUint32(t,d,!0),v.setInt32(r,_,!0)}function Vi(e,a){if(!e)return 1;var t=o.envStore.get(e);if(t.checkGCAccess(),!t.tryCatch.isEmpty())return t.setLastError(10);if(!t.canCallIntoJs())return t.setLastError(t.moduleApiVersion>=10?23:10);t.clearLastError();try{return a?(t.tryCatch.setError(o.handleStore.get(a).value),t.clearLastError()):t.setLastError(1)}catch(r){return t.tryCatch.setError(r),t.setLastError(10)}}function Wi(e,a,t){if(!e)return 1;var r=o.envStore.get(e);if(r.checkGCAccess(),!r.tryCatch.isEmpty())return r.setLastError(10);if(!r.canCallIntoJs())return r.setLastError(r.moduleApiVersion>=10?23:10);r.clearLastError();try{if(!t)return r.setLastError(1);var i=new Error(Z.UTF8ToString(t,-1));return a&&(i.code=Z.UTF8ToString(a,-1)),r.tryCatch.setError(i),r.clearLastError()}catch(s){return r.tryCatch.setError(s),r.setLastError(10)}}function ji(e,a,t){if(!e)return 1;var r=o.envStore.get(e);if(r.checkGCAccess(),!r.tryCatch.isEmpty())return r.setLastError(10);if(!r.canCallIntoJs())return r.setLastError(r.moduleApiVersion>=10?23:10);r.clearLastError();try{if(!t)return r.setLastError(1);var i=new TypeError(Z.UTF8ToString(t,-1));return a&&(i.code=Z.UTF8ToString(a,-1)),r.tryCatch.setError(i),r.clearLastError()}catch(s){return r.tryCatch.setError(s),r.setLastError(10)}}function Hi(e,a,t){if(!e)return 1;var r=o.envStore.get(e);if(r.checkGCAccess(),!r.tryCatch.isEmpty())return r.setLastError(10);if(!r.canCallIntoJs())return r.setLastError(r.moduleApiVersion>=10?23:10);r.clearLastError();try{if(!t)return r.setLastError(1);var i=new RangeError(Z.UTF8ToString(t,-1));return a&&(i.code=Z.UTF8ToString(a,-1)),r.tryCatch.setError(i),r.clearLastError()}catch(s){return r.tryCatch.setError(s),r.setLastError(10)}}function zi(e,a,t){if(!e)return 1;var r=o.envStore.get(e);if(r.checkGCAccess(),!r.tryCatch.isEmpty())return r.setLastError(10);if(!r.canCallIntoJs())return r.setLastError(r.moduleApiVersion>=10?23:10);r.clearLastError();try{if(!t)return r.setLastError(1);var i=new SyntaxError(Z.UTF8ToString(t,-1));return a&&(i.code=Z.UTF8ToString(a,-1)),r.tryCatch.setError(i),r.clearLastError()}catch(s){return r.tryCatch.setError(s),r.setLastError(10)}}function Gi(e,a){if(!e)return 1;var t=o.envStore.get(e);if(t.checkGCAccess(),!a)return t.setLastError(1);var r=t.tryCatch.hasCaught(),i=new DataView(h.buffer);return i.setInt8(a,r?1:0,!0),t.clearLastError()}function $i(e,a,t,r){if(!e)return 1;var i=o.envStore.get(e);if(i.checkGCAccess(),!t||!r)return i.setLastError(1);var s=o.handleStore.get(t).value;if(typeof s!="string")return i.setLastError(3);var f=new Error(s);if(a){var d=o.handleStore.get(a).value;if(typeof d!="string")return i.setLastError(3);f.code=d}var _=o.addToCurrentScope(f).id,v=new DataView(h.buffer);return v.setInt32(r,_,!0),i.clearLastError()}function Ji(e,a,t,r){if(!e)return 1;var i=o.envStore.get(e);if(i.checkGCAccess(),!t||!r)return i.setLastError(1);var s=o.handleStore.get(t).value;if(typeof s!="string")return i.setLastError(3);var f=new TypeError(s);if(a){var d=o.handleStore.get(a).value;if(typeof d!="string")return i.setLastError(3);f.code=d}var _=o.addToCurrentScope(f).id,v=new DataView(h.buffer);return v.setInt32(r,_,!0),i.clearLastError()}function qi(e,a,t,r){if(!e)return 1;var i=o.envStore.get(e);if(i.checkGCAccess(),!t||!r)return i.setLastError(1);var s=o.handleStore.get(t).value;if(typeof s!="string")return i.setLastError(3);var f=new RangeError(s);if(a){var d=o.handleStore.get(a).value;if(typeof d!="string")return i.setLastError(3);f.code=d}var _=o.addToCurrentScope(f).id,v=new DataView(h.buffer);return v.setInt32(r,_,!0),i.clearLastError()}function Yi(e,a,t,r){if(!e)return 1;var i=o.envStore.get(e);if(i.checkGCAccess(),!t||!r)return i.setLastError(1);var s=o.handleStore.get(t).value;if(typeof s!="string")return i.setLastError(3);var f=new SyntaxError(s);if(a){var d=o.handleStore.get(a).value;if(typeof d!="string")return i.setLastError(3);f.code=d}var _=o.addToCurrentScope(f).id,v=new DataView(h.buffer);return v.setInt32(r,_,!0),i.clearLastError()}function Qi(e,a){if(!e)return 1;var t=o.envStore.get(e);if(t.checkGCAccess(),!a)return t.setLastError(1);var r=new DataView(h.buffer);if(t.tryCatch.hasCaught()){var i=t.tryCatch.exception(),s=t.ensureHandleId(i);r.setInt32(a,s,!0),t.tryCatch.reset()}else return r.setInt32(a,1,!0),t.clearLastError();return t.clearLastError()}function Ki(e,a,t,r){var i=Z.UTF8ToString(e,a),s=Z.UTF8ToString(t,r);g?g.napi.fatalError(i,s):W("FATAL ERROR: "+i+" "+s)}function Xi(e,a){if(!e)return 1;var t=o.envStore.get(e);if(t.checkGCAccess(),!t.tryCatch.isEmpty())return t.setLastError(10);if(!t.canCallIntoJs())return t.setLastError(t.moduleApiVersion>=10?23:10);t.clearLastError();try{if(!a)return t.setLastError(1);var r=t.ctx.handleStore.get(a);try{t.triggerFatalException(r.value)}catch{return t.setLastError(9)}return t.clearLastError()}catch(i){return t.tryCatch.setError(i),t.setLastError(10)}}var Zi=Object.freeze({__proto__:null,_emnapi_get_last_error_info:Mi,napi_create_error:$i,napi_create_range_error:qi,napi_create_type_error:Ji,napi_fatal_error:Ki,napi_fatal_exception:Xi,napi_get_and_clear_last_exception:Qi,napi_is_exception_pending:Gi,napi_throw:Vi,napi_throw_error:Wi,napi_throw_range_error:Hi,napi_throw_type_error:ji,node_api_create_syntax_error:Yi,node_api_throw_syntax_error:zi});function ea(e,a,t,r,i,s){var f;if(!e)return 1;var d=o.envStore.get(e);if(d.checkGCAccess(),!d.tryCatch.isEmpty())return d.setLastError(10);if(!d.canCallIntoJs())return d.setLastError(d.moduleApiVersion>=10?23:10);d.clearLastError();try{if(!s||!r)return d.setLastError(1);var _=Ve(d,a,t,r,i);if(_.status!==0)return d.setLastError(_.status);var v=_.f,I=o.addToCurrentScope(v);f=I.id;var A=new DataView(h.buffer);return A.setInt32(s,f,!0),d.getReturnStatus()}catch(N){return d.tryCatch.setError(N),d.setLastError(10)}}function ra(e,a,t,r,i,s){if(!e)return 1;var f=o.envStore.get(e);if(!a)return f.setLastError(1);var d=o.scopeStore.get(a).callbackInfo,_=new DataView(h.buffer);if(r){if(!t)return f.setLastError(1);for(var v=_.getUint32(t,!0),I=d.args.length,A=v<I?v:I,N=0;N<A;N++){var P=f.ensureHandleId(d.args[N]);_.setInt32(r+N*4,P,!0)}if(N<v)for(;N<v;N++)_.setInt32(r+N*4,1,!0)}if(t&&_.setUint32(t,d.args.length,!0),i){var V=f.ensureHandleId(d.thiz);_.setInt32(i,V,!0)}return s&&_.setInt32(s,d.data,!0),f.clearLastError()}function ta(e,a,t,r,i,s){var f=0,d;if(!e)return 1;var _=o.envStore.get(e);if(_.checkGCAccess(),!_.tryCatch.isEmpty())return _.setLastError(10);if(!_.canCallIntoJs())return _.setLastError(_.moduleApiVersion>=10?23:10);_.clearLastError();try{if(!a||(r=r>>>0,r>0&&!i))return _.setLastError(1);var v=o.handleStore.get(a).value;if(!t)return _.setLastError(1);var I=o.handleStore.get(t).value;if(typeof I!="function")return _.setLastError(1);for(var A=[],N=new DataView(h.buffer);f<r;f++){var P=N.getInt32(i+f*4,!0);A.push(o.handleStore.get(P).value)}var V=I.apply(v,A);return s&&(d=_.ensureHandleId(V),N.setInt32(s,d,!0)),_.clearLastError()}catch(G){return _.tryCatch.setError(G),_.setLastError(10)}}function na(e,a,t,r,i){var s,f;if(!e)return 1;var d=o.envStore.get(e);if(d.checkGCAccess(),!d.tryCatch.isEmpty())return d.setLastError(10);if(!d.canCallIntoJs())return d.setLastError(d.moduleApiVersion>=10?23:10);d.clearLastError();try{if(!a||(t=t>>>0,t>0&&!r)||!i)return d.setLastError(1);var _=o.handleStore.get(a).value;if(typeof _!="function")return d.setLastError(1);var v=void 0,I=new DataView(h.buffer);if(o.feature.supportReflect){var A=Array(t);for(s=0;s<t;s++){var N=I.getInt32(r+s*4,!0);A[s]=o.handleStore.get(N).value}v=Reflect.construct(_,A,_)}else{var P=Array(t+1);for(P[0]=void 0,s=0;s<t;s++){var N=I.getInt32(r+s*4,!0);P[s+1]=o.handleStore.get(N).value}var V=_.bind.apply(_,P);v=new V}return i&&(f=d.ensureHandleId(v),I.setInt32(i,f,!0)),d.getReturnStatus()}catch(G){return d.tryCatch.setError(G),d.setLastError(10)}}function ia(e,a,t){if(!e)return 1;var r=o.envStore.get(e);if(r.checkGCAccess(),!a||!t)return r.setLastError(1);var i=o.scopeStore.get(a).callbackInfo,s=i.thiz,f=i.fn,d=s==null||s.constructor==null?0:s instanceof f?r.ensureHandleId(s.constructor):0,_=new DataView(h.buffer);return _.setInt32(t,d,!0),r.clearLastError()}var aa=Object.freeze({__proto__:null,napi_call_function:ta,napi_create_function:ea,napi_get_cb_info:ra,napi_get_new_target:ia,napi_new_instance:na});function sa(e,a){if(!e)return 1;var t=o.envStore.get(e);if(t.checkGCAccess(),!a)return t.setLastError(1);var r=o.openScope(t),i=new DataView(h.buffer);return i.setInt32(a,r.id,!0),t.clearLastError()}function oa(e,a){if(!e)return 1;var t=o.envStore.get(e);return t.checkGCAccess(),a?t.openHandleScopes===0?13:(o.closeScope(t),t.clearLastError()):t.setLastError(1)}function ua(e,a){if(!e)return 1;var t=o.envStore.get(e);if(t.checkGCAccess(),!a)return t.setLastError(1);var r=o.openScope(t),i=new DataView(h.buffer);return i.setInt32(a,r.id,!0),t.clearLastError()}function ca(e,a){if(!e)return 1;var t=o.envStore.get(e);return t.checkGCAccess(),a?t.openHandleScopes===0?13:(o.closeScope(t),t.clearLastError()):t.setLastError(1)}function fa(e,a,t,r){if(!e)return 1;var i=o.envStore.get(e);if(i.checkGCAccess(),!a||!t||!r)return i.setLastError(1);var s=o.scopeStore.get(a);if(!s.escapeCalled()){var f=s.escape(t),d=f?f.id:0,_=new DataView(h.buffer);return _.setInt32(r,d,!0),i.clearLastError()}return i.setLastError(12)}function la(e,a,t,r){if(!e)return 1;var i=o.envStore.get(e);if(i.checkGCAccess(),!a||!r)return i.setLastError(1);var s=o.handleStore.get(a);if(i.moduleApiVersion<10&&!(s.isObject()||s.isFunction()||s.isSymbol()))return i.setLastError(1);var f=o.createReference(i,s.id,t>>>0,1),d=new DataView(h.buffer);return d.setInt32(r,f.id,!0),i.clearLastError()}function da(e,a){if(!e)return 1;var t=o.envStore.get(e);return a?(o.refStore.get(a).dispose(),t.clearLastError()):t.setLastError(1)}function pa(e,a,t){if(!e)return 1;var r=o.envStore.get(e);if(r.checkGCAccess(),!a)return r.setLastError(1);var i=o.refStore.get(a).ref();if(t){var s=new DataView(h.buffer);s.setUint32(t,i,!0)}return r.clearLastError()}function ha(e,a,t){if(!e)return 1;var r=o.envStore.get(e);if(r.checkGCAccess(),!a)return r.setLastError(1);var i=o.refStore.get(a),s=i.refcount();if(s===0)return r.setLastError(9);var f=i.unref();if(t){var d=new DataView(h.buffer);d.setUint32(t,f,!0)}return r.clearLastError()}function _a(e,a,t){if(!e)return 1;var r=o.envStore.get(e);if(r.checkGCAccess(),!a||!t)return r.setLastError(1);var i=o.refStore.get(a),s=i.get(r),f=new DataView(h.buffer);return f.setInt32(t,s,!0),r.clearLastError()}function va(e,a,t){if(!e)return 1;var r=o.envStore.get(e);return a?(o.addCleanupHook(r,a,t),0):r.setLastError(1)}function ga(e,a,t){if(!e)return 1;var r=o.envStore.get(e);return a?(o.removeCleanupHook(r,a,t),0):r.setLastError(1)}function ya(e){var a=o.envStore.get(e);a.ref()}function Ea(e){var a=o.envStore.get(e);a.unref()}var ma=Object.freeze({__proto__:null,_emnapi_env_ref:ya,_emnapi_env_unref:Ea,napi_add_env_cleanup_hook:va,napi_close_escapable_handle_scope:ca,napi_close_handle_scope:oa,napi_create_reference:la,napi_delete_reference:da,napi_escape_handle:fa,napi_get_reference_value:_a,napi_open_escapable_handle_scope:ua,napi_open_handle_scope:sa,napi_reference_ref:pa,napi_reference_unref:ha,napi_remove_env_cleanup_hook:ga});function wa(e,a,t){var r=o.envStore.get(e),i=r.filename;return a?Z.stringToUTF8(i,a,t):Z.lengthBytesUTF8(i)}var ba=Object.freeze({__proto__:null,_emnapi_get_filename:wa});function Aa(e,a,t){var r,i;if(!e)return 1;var s=o.envStore.get(e);if(s.checkGCAccess(),!s.tryCatch.isEmpty())return s.setLastError(10);if(!s.canCallIntoJs())return s.setLastError(s.moduleApiVersion>=10?23:10);s.clearLastError();try{if(!a||!t)return s.setLastError(1);var f=new DataView(h.buffer),d=new Promise(function(_,v){var I=o.createDeferred({resolve:_,reject:v});r=I.id,f.setInt32(a,r,!0)});return i=o.addToCurrentScope(d).id,f.setInt32(t,i,!0),s.getReturnStatus()}catch(_){return s.tryCatch.setError(_),s.setLastError(10)}}function Ia(e,a,t){if(!e)return 1;var r=o.envStore.get(e);if(r.checkGCAccess(),!r.tryCatch.isEmpty())return r.setLastError(10);if(!r.canCallIntoJs())return r.setLastError(r.moduleApiVersion>=10?23:10);r.clearLastError();try{if(!a||!t)return r.setLastError(1);var i=o.deferredStore.get(a);return i.resolve(o.handleStore.get(t).value),r.getReturnStatus()}catch(s){return r.tryCatch.setError(s),r.setLastError(10)}}function Sa(e,a,t){if(!e)return 1;var r=o.envStore.get(e);if(r.checkGCAccess(),!r.tryCatch.isEmpty())return r.setLastError(10);if(!r.canCallIntoJs())return r.setLastError(r.moduleApiVersion>=10?23:10);r.clearLastError();try{if(!a||!t)return r.setLastError(1);var i=o.deferredStore.get(a);return i.reject(o.handleStore.get(t).value),r.getReturnStatus()}catch(s){return r.tryCatch.setError(s),r.setLastError(10)}}function La(e,a,t){if(!e)return 1;var r=o.envStore.get(e);if(r.checkGCAccess(),!a||!t)return r.setLastError(1);var i=o.handleStore.get(a),s=i.isPromise()?1:0,f=new DataView(h.buffer);return f.setInt8(t,s,!0),r.clearLastError()}var Ta=Object.freeze({__proto__:null,napi_create_promise:Aa,napi_is_promise:La,napi_reject_deferred:Sa,napi_resolve_deferred:Ia});function Xr(e,a,t,r,i,s){var f;if(!e)return 1;var d=o.envStore.get(e);if(d.checkGCAccess(),!d.tryCatch.isEmpty())return d.setLastError(10);if(!d.canCallIntoJs())return d.setLastError(d.moduleApiVersion>=10?23:10);d.clearLastError();try{if(!s||!a)return d.setLastError(1);var _=o.handleStore.get(a);if(_.value==null)throw new TypeError("Cannot convert undefined or null to object");var v=void 0;try{v=_.isObject()||_.isFunction()?_.value:Object(_.value)}catch{return d.setLastError(2)}if(t!==0&&t!==1||i!==0&&i!==1)return d.setLastError(1);var I=[],A=void 0,N=void 0,P=void 0,V=!0,G=/^(0|[1-9][0-9]*)$/;do{for(A=Object.getOwnPropertyNames(v),N=Object.getOwnPropertySymbols(v),P=0;P<A.length;P++)I.push({name:G.test(A[P])?Number(A[P]):A[P],desc:Object.getOwnPropertyDescriptor(v,A[P]),own:V});for(P=0;P<N.length;P++)I.push({name:N[P],desc:Object.getOwnPropertyDescriptor(v,N[P]),own:V});if(t===1)break;v=Object.getPrototypeOf(v),V=!1}while(v);var Q=[],ne=function(Ee,ke,br,Zr){if(Ee.indexOf(ke)===-1){if(Zr===0)Ee.push(ke);else if(Zr===1){var Ar=typeof ke=="number"?String(ke):ke;typeof Ar=="string"&&br&8||Ee.push(Ar)}}};for(P=0;P<I.length;P++){var oe=I[P],ee=oe.name,le=oe.desc;if(r===0)ne(Q,ee,r,i);else{if(r&8&&typeof ee=="string"||r&16&&typeof ee=="symbol")continue;var ve=!0;switch(r&7){case 1:{ve=!!le.writable;break}case 2:{ve=!!le.enumerable;break}case 3:{ve=!!(le.writable&&le.enumerable);break}case 4:{ve=!!le.configurable;break}case 5:{ve=!!(le.configurable&&le.writable);break}case 6:{ve=!!(le.configurable&&le.enumerable);break}case 7:{ve=!!(le.configurable&&le.enumerable&&le.writable);break}}ve&&ne(Q,ee,r,i)}}f=o.addToCurrentScope(Q).id;var pe=new DataView(h.buffer);return pe.setInt32(s,f,!0),d.getReturnStatus()}catch(Ee){return d.tryCatch.setError(Ee),d.setLastError(10)}}function Ca(e,a,t){return Xr(e,a,0,18,1,t)}function ka(e,a,t,r){if(!e)return 1;var i=o.envStore.get(e);if(i.checkGCAccess(),!i.tryCatch.isEmpty())return i.setLastError(10);if(!i.canCallIntoJs())return i.setLastError(i.moduleApiVersion>=10?23:10);i.clearLastError();try{if(!t||!r||!a)return i.setLastError(1);var s=o.handleStore.get(a);return s.isObject()||s.isFunction()?(s.value[o.handleStore.get(t).value]=o.handleStore.get(r).value,i.getReturnStatus()):i.setLastError(2)}catch(f){return i.tryCatch.setError(f),i.setLastError(10)}}function Da(e,a,t,r){var i;if(!e)return 1;var s=o.envStore.get(e);if(s.checkGCAccess(),!s.tryCatch.isEmpty())return s.setLastError(10);if(!s.canCallIntoJs())return s.setLastError(s.moduleApiVersion>=10?23:10);s.clearLastError();try{if(!t||!r||!a)return s.setLastError(1);var f=o.handleStore.get(a);if(f.value==null)throw new TypeError("Cannot convert undefined or null to object");var d=void 0;try{d=f.isObject()||f.isFunction()?f.value:Object(f.value)}catch{return s.setLastError(2)}i=o.handleStore.get(t).value in d?1:0;var _=new DataView(h.buffer);return _.setInt8(r,i,!0),s.getReturnStatus()}catch(v){return s.tryCatch.setError(v),s.setLastError(10)}}function Ba(e,a,t,r){var i;if(!e)return 1;var s=o.envStore.get(e);if(s.checkGCAccess(),!s.tryCatch.isEmpty())return s.setLastError(10);if(!s.canCallIntoJs())return s.setLastError(s.moduleApiVersion>=10?23:10);s.clearLastError();try{if(!t||!r||!a)return s.setLastError(1);var f=o.handleStore.get(a);if(f.value==null)throw new TypeError("Cannot convert undefined or null to object");var d=void 0;try{d=f.isObject()||f.isFunction()?f.value:Object(f.value)}catch{return s.setLastError(2)}i=s.ensureHandleId(d[o.handleStore.get(t).value]);var _=new DataView(h.buffer);return _.setInt32(r,i,!0),s.getReturnStatus()}catch(v){return s.tryCatch.setError(v),s.setLastError(10)}}function Ra(e,a,t,r){var i;if(!e)return 1;var s=o.envStore.get(e);if(s.checkGCAccess(),!s.tryCatch.isEmpty())return s.setLastError(10);if(!s.canCallIntoJs())return s.setLastError(s.moduleApiVersion>=10?23:10);s.clearLastError();try{if(!t||!a)return s.setLastError(1);var f=o.handleStore.get(a);if(!(f.isObject()||f.isFunction()))return s.setLastError(2);var d=o.handleStore.get(t).value;if(o.feature.supportReflect)i=Reflect.deleteProperty(f.value,d);else try{i=delete f.value[d]}catch{i=!1}if(r){var _=new DataView(h.buffer);_.setInt8(r,i?1:0,!0)}return s.getReturnStatus()}catch(v){return s.tryCatch.setError(v),s.setLastError(10)}}function Oa(e,a,t,r){var i;if(!e)return 1;var s=o.envStore.get(e);if(s.checkGCAccess(),!s.tryCatch.isEmpty())return s.setLastError(10);if(!s.canCallIntoJs())return s.setLastError(s.moduleApiVersion>=10?23:10);s.clearLastError();try{if(!t||!r||!a)return s.setLastError(1);var f=o.handleStore.get(a);if(f.value==null)throw new TypeError("Cannot convert undefined or null to object");var d=void 0;try{d=f.isObject()||f.isFunction()?f.value:Object(f.value)}catch{return s.setLastError(2)}var _=o.handleStore.get(t).value;if(typeof _!="string"&&typeof _!="symbol")return s.setLastError(4);i=Object.prototype.hasOwnProperty.call(d,o.handleStore.get(t).value);var v=new DataView(h.buffer);return v.setInt8(r,i?1:0,!0),s.getReturnStatus()}catch(I){return s.tryCatch.setError(I),s.setLastError(10)}}function xa(e,a,t,r){if(!e)return 1;var i=o.envStore.get(e);if(i.checkGCAccess(),!i.tryCatch.isEmpty())return i.setLastError(10);if(!i.canCallIntoJs())return i.setLastError(i.moduleApiVersion>=10?23:10);i.clearLastError();try{if(!r||!a)return i.setLastError(1);var s=o.handleStore.get(a);return s.isObject()||s.isFunction()?t?(o.handleStore.get(a).value[Z.UTF8ToString(t,-1)]=o.handleStore.get(r).value,i.getReturnStatus()):i.setLastError(1):i.setLastError(2)}catch(f){return i.tryCatch.setError(f),i.setLastError(10)}}function Fa(e,a,t,r){var i;if(!e)return 1;var s=o.envStore.get(e);if(s.checkGCAccess(),!s.tryCatch.isEmpty())return s.setLastError(10);if(!s.canCallIntoJs())return s.setLastError(s.moduleApiVersion>=10?23:10);s.clearLastError();try{if(!r||!a||!t)return s.setLastError(1);var f=o.handleStore.get(a);if(f.value==null)throw new TypeError("Cannot convert undefined or null to object");var d=void 0;try{d=f.isObject()||f.isFunction()?f.value:Object(f.value)}catch{return s.setLastError(2)}i=Z.UTF8ToString(t,-1)in d;var _=new DataView(h.buffer);return _.setInt8(r,i?1:0,!0),s.getReturnStatus()}catch(v){return s.tryCatch.setError(v),s.setLastError(10)}}function Na(e,a,t,r){var i;if(!e)return 1;var s=o.envStore.get(e);if(s.checkGCAccess(),!s.tryCatch.isEmpty())return s.setLastError(10);if(!s.canCallIntoJs())return s.setLastError(s.moduleApiVersion>=10?23:10);s.clearLastError();try{if(!r||!a||!t)return s.setLastError(1);var f=o.handleStore.get(a);if(f.value==null)throw new TypeError("Cannot convert undefined or null to object");var d=void 0;try{d=f.isObject()||f.isFunction()?f.value:Object(f.value)}catch{return s.setLastError(2)}i=s.ensureHandleId(d[Z.UTF8ToString(t,-1)]);var _=new DataView(h.buffer);return _.setInt32(r,i,!0),s.getReturnStatus()}catch(v){return s.tryCatch.setError(v),s.setLastError(10)}}function Pa(e,a,t,r){if(!e)return 1;var i=o.envStore.get(e);if(i.checkGCAccess(),!i.tryCatch.isEmpty())return i.setLastError(10);if(!i.canCallIntoJs())return i.setLastError(i.moduleApiVersion>=10?23:10);i.clearLastError();try{if(!r||!a)return i.setLastError(1);var s=o.handleStore.get(a);return s.isObject()||s.isFunction()?(s.value[t>>>0]=o.handleStore.get(r).value,i.getReturnStatus()):i.setLastError(2)}catch(f){return i.tryCatch.setError(f),i.setLastError(10)}}function Ua(e,a,t,r){var i;if(!e)return 1;var s=o.envStore.get(e);if(s.checkGCAccess(),!s.tryCatch.isEmpty())return s.setLastError(10);if(!s.canCallIntoJs())return s.setLastError(s.moduleApiVersion>=10?23:10);s.clearLastError();try{if(!r||!a)return s.setLastError(1);var f=o.handleStore.get(a);if(f.value==null)throw new TypeError("Cannot convert undefined or null to object");var d=void 0;try{d=f.isObject()||f.isFunction()?f.value:Object(f.value)}catch{return s.setLastError(2)}i=t>>>0 in d?1:0;var _=new DataView(h.buffer);return _.setInt8(r,i,!0),s.getReturnStatus()}catch(v){return s.tryCatch.setError(v),s.setLastError(10)}}function Ma(e,a,t,r){var i;if(!e)return 1;var s=o.envStore.get(e);if(s.checkGCAccess(),!s.tryCatch.isEmpty())return s.setLastError(10);if(!s.canCallIntoJs())return s.setLastError(s.moduleApiVersion>=10?23:10);s.clearLastError();try{if(!r||!a)return s.setLastError(1);var f=o.handleStore.get(a);if(f.value==null)throw new TypeError("Cannot convert undefined or null to object");var d=void 0;try{d=f.isObject()||f.isFunction()?f.value:Object(f.value)}catch{return s.setLastError(2)}i=s.ensureHandleId(d[t>>>0]);var _=new DataView(h.buffer);return _.setInt32(r,i,!0),s.getReturnStatus()}catch(v){return s.tryCatch.setError(v),s.setLastError(10)}}function Va(e,a,t,r){var i;if(!e)return 1;var s=o.envStore.get(e);if(s.checkGCAccess(),!s.tryCatch.isEmpty())return s.setLastError(10);if(!s.canCallIntoJs())return s.setLastError(s.moduleApiVersion>=10?23:10);s.clearLastError();try{if(!a)return s.setLastError(1);var f=o.handleStore.get(a);if(!(f.isObject()||f.isFunction()))return s.setLastError(2);if(o.feature.supportReflect)i=Reflect.deleteProperty(f.value,t>>>0);else try{i=delete f.value[t>>>0]}catch{i=!1}if(r){var d=new DataView(h.buffer);d.setInt8(r,i?1:0,!0)}return s.getReturnStatus()}catch(_){return s.tryCatch.setError(_),s.setLastError(10)}}function Wa(e,a,t,r){var i,s;if(!e)return 1;var f=o.envStore.get(e);if(f.checkGCAccess(),!f.tryCatch.isEmpty())return f.setLastError(10);if(!f.canCallIntoJs())return f.setLastError(f.moduleApiVersion>=10?23:10);f.clearLastError();try{if(t=t>>>0,t>0&&!r||!a)return f.setLastError(1);var d=o.handleStore.get(a),_=d.value;if(!(d.isObject()||d.isFunction()))return f.setLastError(2);for(var v=void 0,I=new DataView(h.buffer),A=0;A<t;A++){i=r+A*32;var N=I.getInt32(i,!0),P=I.getInt32(i+4,!0),V=I.getInt32(i+8,!0),G=I.getInt32(i+12,!0),Q=I.getInt32(i+16,!0),ne=I.getInt32(i+20,!0);s=I.getInt32(i+24,!0);var oe=I.getInt32(i+28,!0);if(N)v=Z.UTF8ToString(N,-1);else if(!P||(v=o.handleStore.get(P).value,typeof v!="string"&&typeof v!="symbol"))return f.setLastError(4);yr(f,_,v,V,G,Q,ne,s,oe)}return f.getReturnStatus()}catch(ee){return f.tryCatch.setError(ee),f.setLastError(10)}}function ja(e,a){if(!e)return 1;var t=o.envStore.get(e);if(t.checkGCAccess(),!t.tryCatch.isEmpty())return t.setLastError(10);if(!t.canCallIntoJs())return t.setLastError(t.moduleApiVersion>=10?23:10);t.clearLastError();try{if(!a)return t.setLastError(1);var r=o.handleStore.get(a),i=r.value;return r.isObject()||r.isFunction()?(Object.freeze(i),t.getReturnStatus()):t.setLastError(2)}catch(s){return t.tryCatch.setError(s),t.setLastError(10)}}function Ha(e,a){if(!e)return 1;var t=o.envStore.get(e);if(t.checkGCAccess(),!t.tryCatch.isEmpty())return t.setLastError(10);if(!t.canCallIntoJs())return t.setLastError(t.moduleApiVersion>=10?23:10);t.clearLastError();try{if(!a)return t.setLastError(1);var r=o.handleStore.get(a),i=r.value;return r.isObject()||r.isFunction()?(Object.seal(i),t.getReturnStatus()):t.setLastError(2)}catch(s){return t.tryCatch.setError(s),t.setLastError(10)}}var za=Object.freeze({__proto__:null,napi_define_properties:Wa,napi_delete_element:Va,napi_delete_property:Ra,napi_get_all_property_names:Xr,napi_get_element:Ma,napi_get_named_property:Na,napi_get_property:Ba,napi_get_property_names:Ca,napi_has_element:Ua,napi_has_named_property:Fa,napi_has_own_property:Oa,napi_has_property:Da,napi_object_freeze:ja,napi_object_seal:Ha,napi_set_element:Pa,napi_set_named_property:xa,napi_set_property:ka});function Ga(e,a,t){var r,i;if(!e)return 1;var s=o.envStore.get(e);if(s.checkGCAccess(),!s.tryCatch.isEmpty())return s.setLastError(10);if(!s.canCallIntoJs())return s.setLastError(s.moduleApiVersion>=10?23:10);s.clearLastError();try{if(!a||!t)return s.setLastError(1);var f=o.handleStore.get(a);if(!f.isString())return s.setLastError(3);var d=o.handleStore.get(5).value,_=d.eval(f.value);i=s.ensureHandleId(_);var v=new DataView(h.buffer);v.setInt32(t,i,!0),r=s.getReturnStatus()}catch(I){return s.tryCatch.setError(I),s.setLastError(10)}return r}var $a=Object.freeze({__proto__:null,napi_run_script:Ga});function Ja(e,a,t){if(!e)return 1;var r=o.envStore.get(e);if(r.checkGCAccess(),!a||!t)return r.setLastError(1);var i=o.handleStore.get(a),s;if(i.isNumber())s=3;else if(i.isBigInt())s=9;else if(i.isString())s=4;else if(i.isFunction())s=7;else if(i.isExternal())s=8;else if(i.isObject())s=6;else if(i.isBoolean())s=2;else if(i.isUndefined())s=0;else if(i.isSymbol())s=5;else if(i.isNull())s=1;else return r.setLastError(1);var f=new DataView(h.buffer);return f.setInt32(t,s,!0),r.clearLastError()}function qa(e,a,t){var r;if(!e)return 1;var i=o.envStore.get(e);if(i.checkGCAccess(),!i.tryCatch.isEmpty())return i.setLastError(10);if(!i.canCallIntoJs())return i.setLastError(i.moduleApiVersion>=10?23:10);i.clearLastError();try{if(!a||!t)return i.setLastError(1);var s=o.handleStore.get(a);r=s.value?4:3;var f=new DataView(h.buffer);return f.setInt32(t,r,!0),i.getReturnStatus()}catch(d){return i.tryCatch.setError(d),i.setLastError(10)}}function Ya(e,a,t){var r;if(!e)return 1;var i=o.envStore.get(e);if(i.checkGCAccess(),!i.tryCatch.isEmpty())return i.setLastError(10);if(!i.canCallIntoJs())return i.setLastError(i.moduleApiVersion>=10?23:10);i.clearLastError();try{if(!a||!t)return i.setLastError(1);var s=o.handleStore.get(a);if(s.isBigInt())throw new TypeError("Cannot convert a BigInt value to a number");r=o.addToCurrentScope(Number(s.value)).id;var f=new DataView(h.buffer);return f.setInt32(t,r,!0),i.getReturnStatus()}catch(d){return i.tryCatch.setError(d),i.setLastError(10)}}function Qa(e,a,t){var r;if(!e)return 1;var i=o.envStore.get(e);if(i.checkGCAccess(),!i.tryCatch.isEmpty())return i.setLastError(10);if(!i.canCallIntoJs())return i.setLastError(i.moduleApiVersion>=10?23:10);i.clearLastError();try{if(!a||!t)return i.setLastError(1);var s=o.handleStore.get(a);if(s.value==null)throw new TypeError("Cannot convert undefined or null to object");r=i.ensureHandleId(Object(s.value));var f=new DataView(h.buffer);return f.setInt32(t,r,!0),i.getReturnStatus()}catch(d){return i.tryCatch.setError(d),i.setLastError(10)}}function Ka(e,a,t){var r;if(!e)return 1;var i=o.envStore.get(e);if(i.checkGCAccess(),!i.tryCatch.isEmpty())return i.setLastError(10);if(!i.canCallIntoJs())return i.setLastError(i.moduleApiVersion>=10?23:10);i.clearLastError();try{if(!a||!t)return i.setLastError(1);var s=o.handleStore.get(a);if(s.isSymbol())throw new TypeError("Cannot convert a Symbol value to a string");r=o.addToCurrentScope(String(s.value)).id;var f=new DataView(h.buffer);return f.setInt32(t,r,!0),i.getReturnStatus()}catch(d){return i.tryCatch.setError(d),i.setLastError(10)}}function Xa(e,a,t,r){var i;if(!e)return 1;var s=o.envStore.get(e);if(s.checkGCAccess(),!s.tryCatch.isEmpty())return s.setLastError(10);if(!s.canCallIntoJs())return s.setLastError(s.moduleApiVersion>=10?23:10);s.clearLastError();try{if(!a||!r||!t)return s.setLastError(1);var f=new DataView(h.buffer);f.setInt8(r,0,!0);var d=o.handleStore.get(t);if(!d.isFunction())return s.setLastError(5);var _=o.handleStore.get(a).value,v=_ instanceof d.value;return i=v?1:0,f.setInt8(r,i,!0),s.getReturnStatus()}catch(I){return s.tryCatch.setError(I),s.setLastError(10)}}function Za(e,a,t){if(!e)return 1;var r=o.envStore.get(e);if(r.checkGCAccess(),!a||!t)return r.setLastError(1);var i=o.handleStore.get(a),s=i.isArray()?1:0,f=new DataView(h.buffer);return f.setInt8(t,s,!0),r.clearLastError()}function es(e,a,t){if(!e)return 1;var r=o.envStore.get(e);if(r.checkGCAccess(),!a||!t)return r.setLastError(1);var i=o.handleStore.get(a),s=i.isArrayBuffer()?1:0,f=new DataView(h.buffer);return f.setInt8(t,s,!0),r.clearLastError()}function rs(e,a,t){if(!e)return 1;var r=o.envStore.get(e);if(r.checkGCAccess(),!a||!t)return r.setLastError(1);var i=o.handleStore.get(a),s=i.isDate()?1:0,f=new DataView(h.buffer);return f.setInt8(t,s,!0),r.clearLastError()}function ts(e,a,t){if(!e)return 1;var r=o.envStore.get(e);if(r.checkGCAccess(),!a||!t)return r.setLastError(1);var i=o.handleStore.get(a).value,s=i instanceof Error?1:0,f=new DataView(h.buffer);return f.setInt8(t,s,!0),r.clearLastError()}function ns(e,a,t){if(!e)return 1;var r=o.envStore.get(e);if(r.checkGCAccess(),!a||!t)return r.setLastError(1);var i=o.handleStore.get(a),s=i.isTypedArray()?1:0,f=new DataView(h.buffer);return f.setInt8(t,s,!0),r.clearLastError()}function is(e,a,t){if(!e)return 1;var r=o.envStore.get(e);if(r.checkGCAccess(),!a||!t)return r.setLastError(1);var i=o.handleStore.get(a),s=i.isBuffer(o.feature.Buffer)?1:0,f=new DataView(h.buffer);return f.setInt8(t,s,!0),r.clearLastError()}function as(e,a,t){if(!e)return 1;var r=o.envStore.get(e);if(r.checkGCAccess(),!a||!t)return r.setLastError(1);var i=o.handleStore.get(a),s=i.isDataView()?1:0,f=new DataView(h.buffer);return f.setInt8(t,s,!0),r.clearLastError()}function ss(e,a,t,r){var i;if(!e)return 1;var s=o.envStore.get(e);if(s.checkGCAccess(),!s.tryCatch.isEmpty())return s.setLastError(10);if(!s.canCallIntoJs())return s.setLastError(s.moduleApiVersion>=10?23:10);s.clearLastError();try{if(!a||!t||!r)return s.setLastError(1);var f=o.handleStore.get(a).value,d=o.handleStore.get(t).value;i=f===d?1:0;var _=new DataView(h.buffer);return _.setInt8(r,i,!0),s.getReturnStatus()}catch(v){return s.tryCatch.setError(v),s.setLastError(10)}}function os(e,a){if(!e)return 1;var t=o.envStore.get(e);if(t.checkGCAccess(),!a)return t.setLastError(1);var r=o.handleStore.get(a).value;if(!(r instanceof ArrayBuffer))return typeof SharedArrayBuffer=="function"&&r instanceof SharedArrayBuffer?t.setLastError(20):t.setLastError(19);try{var i=o.feature.MessageChannel,s=new i;s.port1.postMessage(r,[r])}catch{return t.setLastError(9)}return t.clearLastError()}function us(e,a,t){if(!e)return 1;var r=o.envStore.get(e);if(r.checkGCAccess(),!r.tryCatch.isEmpty())return r.setLastError(10);if(!r.canCallIntoJs())return r.setLastError(r.moduleApiVersion>=10?23:10);r.clearLastError();try{if(!a||!t)return r.setLastError(1);var i=o.handleStore.get(a),s=new DataView(h.buffer);if(i.isArrayBuffer()&&i.value.byteLength===0)try{new Uint8Array(i.value)}catch{return s.setInt8(t,1,!0),r.getReturnStatus()}return s.setInt8(t,0,!0),r.getReturnStatus()}catch(f){return r.tryCatch.setError(f),r.setLastError(10)}}var cs=Object.freeze({__proto__:null,napi_coerce_to_bool:qa,napi_coerce_to_number:Ya,napi_coerce_to_object:Qa,napi_coerce_to_string:Ka,napi_detach_arraybuffer:os,napi_instanceof:Xa,napi_is_array:Za,napi_is_arraybuffer:es,napi_is_buffer:is,napi_is_dataview:as,napi_is_date:rs,napi_is_detached_arraybuffer:us,napi_is_error:ts,napi_is_typedarray:ns,napi_strict_equals:ss,napi_typeof:Ja});function fs(e,a){if(!e)return 1;var t=o.envStore.get(e);if(!a)return t.setLastError(1);var r=10,i=new DataView(h.buffer);return i.setUint32(a,r,!0),t.clearLastError()}var ls=Object.freeze({__proto__:null,napi_get_version:fs});te.init(),q.init(),Z.init(),L.init(),F.init(),m.emnapi.syncMemory=mr,m.emnapi.getMemoryAddress=wr;function ce(e){for(var a=Object.keys(e),t=0;t<a.length;++t){var r=a[t];r.indexOf("$")!==0&&(r.indexOf("emnapi_")===0?m.imports.emnapi[r]=e[r]:r.indexOf("_emnapi_")===0||r==="napi_set_last_error"||r==="napi_clear_last_error"?m.imports.env[r]=e[r]:m.imports.napi[r]=e[r])}}return ce(Qt),ce(Xt),ce(wn),ce(Ae),ce(Mn),ce(Xn),ce(Di),ce(Fi),ce(oi),ce(Ui),ce(hi),ce(Zi),ce(aa),ce(ma),ce(ba),ce(on),ce(Ta),ce(za),ce($a),ce(cs),ce(ls),m.imports.napi.napi_create_threadsafe_function=un,m.imports.napi.napi_get_threadsafe_function_context=cn,m.imports.napi.napi_call_threadsafe_function=fn,m.imports.napi.napi_acquire_threadsafe_function=ln,m.imports.napi.napi_release_threadsafe_function=dn,m.imports.napi.napi_unref_threadsafe_function=pn,m.imports.napi.napi_ref_threadsafe_function=hn,m}();return n}function Ss(u,n,c,l){l=l??{};var p=l.getMemory,y=l.getTable,h=l.beforeInit;if(p!=null&&typeof p!="function")throw new TypeError("options.getMemory is not a function");if(y!=null&&typeof y!="function")throw new TypeError("options.getTable is not a function");if(h!=null&&typeof h!="function")throw new TypeError("options.beforeInit is not a function");var T;T=Is(l);var D=l.wasi,R,W={env:T.imports.env,napi:T.imports.napi,emnapi:T.imports.emnapi};D&&(R=new ms(T.childThread?{wasi:D,childThread:!0,postMessage:T.postMessage}:{wasi:D,threadManager:T.PThread,waitThreadStart:T.waitThreadStart}),Object.assign(W,typeof D.getImportObject=="function"?D.getImportObject():{wasi_snapshot_preview1:D.wasiImport}),Object.assign(W,R.getImportObject()));var m=l.overwriteImports;if(typeof m=="function"){var o=m(W);typeof o=="object"&&o!==null&&(W=o)}return u(c,W,function(g,E){if(g)throw g;var w=E.instance,b=w,S=w.exports,k="memory"in S,x="memory"in W.env,O=p?p(S):k?S.memory:x?W.env.memory:void 0;if(!O)throw new Error("memory is neither exported nor imported");var B=y?y(S):S.__indirect_function_table;if(D&&!k){var M=Object.create(null);Object.assign(M,S,{memory:O}),b={exports:M}}var F=E.module;D?b=R.initialize(b,F,O):T.PThread.setup(F,O);var U=function(){h&&h({instance:w,module:F}),T.init({instance:b,module:F,memory:O,table:B});var $={instance:w,module:F,usedInstance:b};return $.napiModule=T,$};if(T.PThread.shouldPreloadWorkers()){var j=T.PThread.loadWasmModuleToAllWorkers();if(u===Ls)return j.then(U);throw new Error("Synchronous loading is not supported with worker pool (reuseWorker.size > 0)")}return U()})}function Ls(u,n,c){return He(u,n).then(function(l){return c(null,l)},function(l){return c(l)})}function Ts(u,n,c){var l;try{l=As(u,n)}catch(p){return c(p)}return c(null,l)}function Et(u,n){return Ss(Ts,void 0,u,n)}var Nr=new WeakMap;function mt(u){return Nr.has(u)}var Cs=function(){function u(n){Object.setPrototypeOf(this,null),Nr.set(this,n)}return u.prototype=null,u}();function ks(u){if(!mt(u))throw new TypeError("not external");return Nr.get(u)}var wt=function(){var u;try{u=new Function}catch{return!1}return typeof u=="function"}(),bt=function(){if(typeof globalThis<"u")return globalThis;var u=function(){return this}();if(!u&&wt)try{u=new Function("return this")()}catch{}if(!u){if(typeof __webpack_public_path__>"u"&&typeof global<"u")return global;if(typeof window<"u")return window;if(typeof self<"u")return self}return u}(),Ds=function(){function u(){this._exception=void 0,this._caught=!1}return u.prototype.isEmpty=function(){return!this._caught},u.prototype.hasCaught=function(){return this._caught},u.prototype.exception=function(){return this._exception},u.prototype.setError=function(n){this._caught=!0,this._exception=n},u.prototype.reset=function(){this._caught=!1,this._exception=void 0},u.prototype.extractException=function(){var n=this._exception;return this.reset(),n},u}(),Bs=function(){var u;try{return!!(!((u=Object.getOwnPropertyDescriptor(Function.prototype,"name"))===null||u===void 0)&&u.configurable)}catch{return!1}}(),Rs=typeof Reflect=="object",ze=typeof FinalizationRegistry<"u"&&typeof WeakRef<"u",Os=function(){try{var u=Symbol();new WeakRef(u),new WeakMap().set(u,void 0)}catch{return!1}return!0}(),xs=typeof BigInt<"u",At=function(){var u;return typeof __webpack_public_path__<"u"?u=function(){return typeof __non_webpack_require__<"u"?__non_webpack_require__:void 0}():u=function(){return typeof __webpack_public_path__<"u"?typeof __non_webpack_require__<"u"?__non_webpack_require__:void 0:typeof require<"u"?require:void 0}(),u}(),fr=typeof MessageChannel=="function"?MessageChannel:function(){try{return At("worker_threads").MessageChannel}catch{}}(),It=typeof setImmediate=="function"?setImmediate:function(u){if(typeof u!="function")throw new TypeError('The "callback" argument must be of type function');if(fr){var n=new fr;n.port1.onmessage=function(){n.port1.onmessage=null,n=void 0,u()},n.port2.postMessage(null)}else setTimeout(u,0)},St=typeof Buffer=="function"?Buffer:function(){try{return At("buffer").Buffer}catch{}}(),Fs="1.4.5",Pr=10,lr=2147483647,or=8,Lt=function(){function u(n,c){this.id=n,this.value=c}return u.prototype.data=function(){return ks(this.value)},u.prototype.isNumber=function(){return typeof this.value=="number"},u.prototype.isBigInt=function(){return typeof this.value=="bigint"},u.prototype.isString=function(){return typeof this.value=="string"},u.prototype.isFunction=function(){return typeof this.value=="function"},u.prototype.isExternal=function(){return mt(this.value)},u.prototype.isObject=function(){return typeof this.value=="object"&&this.value!==null},u.prototype.isArray=function(){return Array.isArray(this.value)},u.prototype.isArrayBuffer=function(){return this.value instanceof ArrayBuffer},u.prototype.isTypedArray=function(){return ArrayBuffer.isView(this.value)&&!(this.value instanceof DataView)},u.prototype.isBuffer=function(n){return ArrayBuffer.isView(this.value)?!0:(n??(n=St),typeof n=="function"&&n.isBuffer(this.value))},u.prototype.isDataView=function(){return this.value instanceof DataView},u.prototype.isDate=function(){return this.value instanceof Date},u.prototype.isPromise=function(){return this.value instanceof Promise},u.prototype.isBoolean=function(){return typeof this.value=="boolean"},u.prototype.isUndefined=function(){return this.value===void 0},u.prototype.isSymbol=function(){return typeof this.value=="symbol"},u.prototype.isNull=function(){return this.value===null},u.prototype.dispose=function(){this.value=void 0},u}(),We=function(u){Le(n,u);function n(c,l){return u.call(this,c,l)||this}return n.prototype.dispose=function(){},n}(Lt),De=function(){function u(){this._values=[void 0,u.UNDEFINED,u.NULL,u.FALSE,u.TRUE,u.GLOBAL],this._next=u.MIN_ID}return u.prototype.push=function(n){var c,l=this._next,p=this._values;return l<p.length?(c=p[l],c.value=n):(c=new Lt(l,n),p[l]=c),this._next++,c},u.prototype.erase=function(n,c){this._next=n;for(var l=this._values,p=n;p<c;++p)l[p].dispose()},u.prototype.get=function(n){return this._values[n]},u.prototype.swap=function(n,c){var l=this._values,p=l[n];l[n]=l[c],l[n].id=Number(n),l[c]=p,p.id=Number(c)},u.prototype.dispose=function(){this._values.length=u.MIN_ID,this._next=u.MIN_ID},u.UNDEFINED=new We(1,void 0),u.NULL=new We(2,null),u.FALSE=new We(3,!1),u.TRUE=new We(4,!0),u.GLOBAL=new We(5,bt),u.MIN_ID=6,u}(),nt=function(){function u(n,c,l,p,y){y===void 0&&(y=p),this.handleStore=n,this.id=c,this.parent=l,this.child=null,l!==null&&(l.child=this),this.start=p,this.end=y,this._escapeCalled=!1,this.callbackInfo={thiz:void 0,data:0,args:void 0,fn:void 0}}return u.prototype.add=function(n){var c=this.handleStore.push(n);return this.end++,c},u.prototype.addExternal=function(n){return this.add(new Cs(n))},u.prototype.dispose=function(){this._escapeCalled&&(this._escapeCalled=!1),this.start!==this.end&&this.handleStore.erase(this.start,this.end)},u.prototype.escape=function(n){if(this._escapeCalled||(this._escapeCalled=!0,n<this.start||n>=this.end))return null;this.handleStore.swap(n,this.start);var c=this.handleStore.get(this.start);return this.start++,this.parent.end++,c},u.prototype.escapeCalled=function(){return this._escapeCalled},u}(),Ns=function(){function u(){this._rootScope=new nt(null,0,null,1,De.MIN_ID),this.currentScope=this._rootScope,this._values=[void 0]}return u.prototype.get=function(n){return this._values[n]},u.prototype.openScope=function(n){var c=this.currentScope,l=c.child;if(l!==null)l.start=l.end=c.end;else{var p=c.id+1;l=new nt(n.ctx.handleStore,p,c,c.end),this._values[p]=l}return this.currentScope=l,n.openHandleScopes++,l},u.prototype.closeScope=function(n){if(n.openHandleScopes!==0){var c=this.currentScope;this.currentScope=c.parent,c.dispose(),n.openHandleScopes--}},u.prototype.dispose=function(){this.currentScope=this._rootScope,this._values.length=1},u}(),Fe=function(){function u(){this._next=null,this._prev=null}return u.prototype.dispose=function(){},u.prototype.finalize=function(){},u.prototype.link=function(n){this._prev=n,this._next=n._next,this._next!==null&&(this._next._prev=this),n._next=this},u.prototype.unlink=function(){this._prev!==null&&(this._prev._next=this._next),this._next!==null&&(this._next._prev=this._prev),this._prev=null,this._next=null},u.finalizeAll=function(n){for(;n._next!==null;)n._next.finalize()},u}(),Tt=function(){function u(n,c,l,p){c===void 0&&(c=0),l===void 0&&(l=0),p===void 0&&(p=0),this.envObject=n,this._finalizeCallback=c,this._finalizeData=l,this._finalizeHint=p,this._makeDynCall_vppp=n.makeDynCall_vppp}return u.prototype.callback=function(){return this._finalizeCallback},u.prototype.data=function(){return this._finalizeData},u.prototype.hint=function(){return this._finalizeHint},u.prototype.resetEnv=function(){this.envObject=void 0},u.prototype.resetFinalizer=function(){this._finalizeCallback=0,this._finalizeData=0,this._finalizeHint=0},u.prototype.callFinalizer=function(){var n=this._finalizeCallback,c=this._finalizeData,l=this._finalizeHint;if(this.resetFinalizer(),!!n){var p=Number(n);this.envObject?this.envObject.callFinalizer(p,c,l):this._makeDynCall_vppp(p)(0,c,l)}},u.prototype.dispose=function(){this.envObject=void 0,this._makeDynCall_vppp=void 0},u}(),Ct=function(u){Le(n,u);function n(c,l,p,y){var h=u.call(this)||this;return h._finalizer=new Tt(c,l,p,y),h}return n.create=function(c,l,p,y){var h=new n(c,l,p,y);return h.link(c.finalizing_reflist),h},n.prototype.data=function(){return this._finalizer.data()},n.prototype.dispose=function(){this._finalizer&&(this.unlink(),this._finalizer.envObject.dequeueFinalizer(this),this._finalizer.dispose(),this._finalizer=void 0,u.prototype.dispose.call(this))},n.prototype.finalize=function(){this.unlink();var c,l=!1;try{this._finalizer.callFinalizer()}catch(p){l=!0,c=p}if(this.dispose(),l)throw c},n}(Fe);function Ps(u,n){var c="".concat(u," requires Node-API version ").concat(n,", but this version of Node.js only supports version ").concat(Pr," add-ons.");throw new Error(c)}function Us(u,n){if(!u.terminatedOrTerminating())throw n}var Ms=function(){function u(n,c,l,p,y){this.ctx=n,this.moduleApiVersion=c,this.makeDynCall_vppp=l,this.makeDynCall_vp=p,this.abort=y,this.openHandleScopes=0,this.instanceData=null,this.tryCatch=new Ds,this.refs=1,this.reflist=new Fe,this.finalizing_reflist=new Fe,this.pendingFinalizers=[],this.lastError={errorCode:0,engineErrorCode:0,engineReserved:0},this.inGcFinalizer=!1,this._bindingMap=new WeakMap,this.id=0}return u.prototype.canCallIntoJs=function(){return!0},u.prototype.terminatedOrTerminating=function(){return!this.canCallIntoJs()},u.prototype.ref=function(){this.refs++},u.prototype.unref=function(){this.refs--,this.refs===0&&this.dispose()},u.prototype.ensureHandle=function(n){return this.ctx.ensureHandle(n)},u.prototype.ensureHandleId=function(n){return this.ensureHandle(n).id},u.prototype.clearLastError=function(){var n=this.lastError;return n.errorCode!==0&&(n.errorCode=0),n.engineErrorCode!==0&&(n.engineErrorCode=0),n.engineReserved!==0&&(n.engineReserved=0),0},u.prototype.setLastError=function(n,c,l){c===void 0&&(c=0),l===void 0&&(l=0);var p=this.lastError;return p.errorCode!==n&&(p.errorCode=n),p.engineErrorCode!==c&&(p.engineErrorCode=c),p.engineReserved!==l&&(p.engineReserved=l),n},u.prototype.getReturnStatus=function(){return this.tryCatch.hasCaught()?this.setLastError(10):0},u.prototype.callIntoModule=function(n,c){c===void 0&&(c=Us);var l=this.openHandleScopes;this.clearLastError();var p=n(this);if(l!==this.openHandleScopes&&this.abort("open_handle_scopes != open_handle_scopes_before"),this.tryCatch.hasCaught()){var y=this.tryCatch.extractException();c(this,y)}return p},u.prototype.invokeFinalizerFromGC=function(n){if(this.moduleApiVersion!==lr)this.enqueueFinalizer(n);else{var c=this.inGcFinalizer;this.inGcFinalizer=!0;try{n.finalize()}finally{this.inGcFinalizer=c}}},u.prototype.checkGCAccess=function(){this.moduleApiVersion===lr&&this.inGcFinalizer&&this.abort(`Finalizer is calling a function that may affect GC state.
The finalizers are run directly from GC and must not affect GC state.
Use \`node_api_post_finalizer\` from inside of the finalizer to work around this issue.
It schedules the call as a new task in the event loop.`)},u.prototype.enqueueFinalizer=function(n){this.pendingFinalizers.indexOf(n)===-1&&this.pendingFinalizers.push(n)},u.prototype.dequeueFinalizer=function(n){var c=this.pendingFinalizers.indexOf(n);c!==-1&&this.pendingFinalizers.splice(c,1)},u.prototype.deleteMe=function(){Fe.finalizeAll(this.finalizing_reflist),Fe.finalizeAll(this.reflist),this.tryCatch.extractException(),this.ctx.envStore.remove(this.id)},u.prototype.dispose=function(){this.id!==0&&(this.deleteMe(),this.finalizing_reflist.dispose(),this.reflist.dispose(),this.id=0)},u.prototype.initObjectBinding=function(n){var c={wrapped:0,tag:null};return this._bindingMap.set(n,c),c},u.prototype.getObjectBinding=function(n){return this._bindingMap.has(n)?this._bindingMap.get(n):this.initObjectBinding(n)},u.prototype.setInstanceData=function(n,c,l){this.instanceData&&this.instanceData.dispose(),this.instanceData=Ct.create(this,c,n,l)},u.prototype.getInstanceData=function(){return this.instanceData?this.instanceData.data():0},u}(),Vs=function(u){Le(n,u);function n(c,l,p,y,h,T,D){var R=u.call(this,c,p,y,h,T)||this;return R.filename=l,R.nodeBinding=D,R.destructing=!1,R.finalizationScheduled=!1,R}return n.prototype.deleteMe=function(){this.destructing=!0,this.drainFinalizerQueue(),u.prototype.deleteMe.call(this)},n.prototype.canCallIntoJs=function(){return u.prototype.canCallIntoJs.call(this)&&this.ctx.canCallIntoJs()},n.prototype.triggerFatalException=function(c){if(this.nodeBinding)this.nodeBinding.napi.fatalException(c);else if(typeof process=="object"&&process!==null&&typeof process._fatalException=="function"){var l=process._fatalException(c);l||(console.error(c),process.exit(1))}else throw c},n.prototype.callbackIntoModule=function(c,l){return this.callIntoModule(l,function(p,y){if(!p.terminatedOrTerminating()){var h=typeof process=="object"&&process!==null,T=h?!!(process.execArgv&&process.execArgv.indexOf("--force-node-api-uncaught-exceptions-policy")!==-1):!1;if(p.moduleApiVersion<10&&!T&&!c){var D=h&&typeof process.emitWarning=="function"?process.emitWarning:function(R,W,m){if(R instanceof Error)console.warn(R.toString());else{var o=m?"[".concat(m,"] "):"";console.warn("".concat(o).concat(W||"Warning",": ").concat(R))}};D("Uncaught N-API callback exception detected, please run node with option --force-node-api-uncaught-exceptions-policy=true to handle those exceptions properly.","DeprecationWarning","DEP0168");return}p.triggerFatalException(y)}})},n.prototype.callFinalizer=function(c,l,p){this.callFinalizerInternal(1,c,l,p)},n.prototype.callFinalizerInternal=function(c,l,p,y){var h=this.makeDynCall_vppp(l),T=this.id,D=this.ctx.openScope(this);try{this.callbackIntoModule(!!c,function(){h(T,p,y)})}finally{this.ctx.closeScope(this,D)}},n.prototype.enqueueFinalizer=function(c){var l=this;u.prototype.enqueueFinalizer.call(this,c),!this.finalizationScheduled&&!this.destructing&&(this.finalizationScheduled=!0,this.ref(),It(function(){l.finalizationScheduled=!1,l.unref(),l.drainFinalizerQueue()}))},n.prototype.drainFinalizerQueue=function(){for(;this.pendingFinalizers.length>0;){var c=this.pendingFinalizers.shift();c.finalize()}},n}(Ms);function Ws(u,n,c,l,p,y,h){c=typeof c!="number"?or:c,c<or?c=or:c>Pr&&c!==lr&&Ps(n,c);var T=new Vs(u,n,c,l,p,y,h);return u.envStore.add(T),u.addCleanupHook(T,function(){T.unref()},0),T}var Ur=function(u){Le(n,u);function n(c){var l=this.constructor,p=u.call(this,c)||this,y=l,h=y.prototype;if(!(p instanceof n)){var T=Object.setPrototypeOf;typeof T=="function"?T.call(Object,p,h):p.__proto__=h,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(p,y)}return p}return n}(Error);Object.defineProperty(Ur.prototype,"name",{configurable:!0,writable:!0,value:"EmnapiError"});var kt=function(u){Le(n,u);function n(c,l){return u.call(this,"".concat(c,': The current runtime does not support "FinalizationRegistry" and "WeakRef".').concat(l?" ".concat(l):""))||this}return n}(Ur);Object.defineProperty(kt.prototype,"name",{configurable:!0,writable:!0,value:"NotSupportWeakRefError"});var Dt=function(u){Le(n,u);function n(c,l){return u.call(this,"".concat(c,': The current runtime does not support "Buffer". Consider using buffer polyfill to make sure `globalThis.Buffer` is defined.').concat(l?" ".concat(l):""))||this}return n}(Ur);Object.defineProperty(Dt.prototype,"name",{configurable:!0,writable:!0,value:"NotSupportBufferError"});var Ir=function(){function u(n){this._value=n}return u.prototype.deref=function(){return this._value},u.prototype.dispose=function(){this._value=void 0},u}(),js=function(){function u(n){this._ref=new Ir(n)}return u.prototype.setWeak=function(n,c){if(!(!ze||this._ref===void 0||this._ref instanceof WeakRef)){var l=this._ref.deref();try{u._registry.register(l,this,this);var p=new WeakRef(l);this._ref.dispose(),this._ref=p,this._param=n,this._callback=c}catch(y){if(typeof l!="symbol")throw y}}},u.prototype.clearWeak=function(){if(!(!ze||this._ref===void 0)&&this._ref instanceof WeakRef){try{u._registry.unregister(this)}catch{}this._param=void 0,this._callback=void 0;var n=this._ref.deref();n===void 0?this._ref=n:this._ref=new Ir(n)}},u.prototype.reset=function(){if(ze)try{u._registry.unregister(this)}catch{}this._param=void 0,this._callback=void 0,this._ref instanceof Ir&&this._ref.dispose(),this._ref=void 0},u.prototype.isEmpty=function(){return this._ref===void 0},u.prototype.deref=function(){if(this._ref!==void 0)return this._ref.deref()},u._registry=ze?new FinalizationRegistry(function(n){n._ref=void 0;var c=n._callback,l=n._param;n._callback=void 0,n._param=void 0,typeof c=="function"&&c(l)}):void 0,u}(),Or;(function(u){u[u.kRuntime=0]="kRuntime",u[u.kUserland=1]="kUserland"})(Or||(Or={}));function Hs(u){return u.isObject()||u.isFunction()||u.isSymbol()}var Mr=function(u){Le(n,u);function n(c,l,p,y){var h=u.call(this)||this;h.envObject=c,h._refcount=p,h._ownership=y;var T=c.ctx.handleStore.get(l);return h.canBeWeak=Hs(T),h.persistent=new js(T.value),h.id=0,p===0&&h._setWeak(),h}return n.weakCallback=function(c){c.persistent.reset(),c.invokeFinalizerFromGC()},n.create=function(c,l,p,y,h,T,D){var R=new n(c,l,p,y);return c.ctx.refStore.add(R),R.link(c.reflist),R},n.prototype.ref=function(){return this.persistent.isEmpty()?0:(++this._refcount===1&&this.canBeWeak&&this.persistent.clearWeak(),this._refcount)},n.prototype.unref=function(){return this.persistent.isEmpty()||this._refcount===0?0:(--this._refcount===0&&this._setWeak(),this._refcount)},n.prototype.get=function(c){if(c===void 0&&(c=this.envObject),this.persistent.isEmpty())return 0;var l=this.persistent.deref(),p=c.ensureHandle(l);return p.id},n.prototype.resetFinalizer=function(){},n.prototype.data=function(){return 0},n.prototype.refcount=function(){return this._refcount},n.prototype.ownership=function(){return this._ownership},n.prototype.callUserFinalizer=function(){},n.prototype.invokeFinalizerFromGC=function(){this.finalize()},n.prototype._setWeak=function(){this.canBeWeak?this.persistent.setWeak(this,n.weakCallback):this.persistent.reset()},n.prototype.finalize=function(){this.persistent.reset();var c=this._ownership===Or.kRuntime;this.unlink(),this.callUserFinalizer(),c&&this.dispose()},n.prototype.dispose=function(){this.id!==0&&(this.unlink(),this.persistent.reset(),this.envObject.ctx.refStore.remove(this.id),u.prototype.dispose.call(this),this.envObject=void 0,this.id=0)},n}(Fe),zs=function(u){Le(n,u);function n(c,l,p,y,h){var T=u.call(this,c,l,p,y)||this;return T._data=h,T}return n.create=function(c,l,p,y,h){var T=new n(c,l,p,y,h);return c.ctx.refStore.add(T),T.link(c.reflist),T},n.prototype.data=function(){return this._data},n}(Mr),Gs=function(u){Le(n,u);function n(c,l,p,y,h,T,D){var R=u.call(this,c,l,p,y)||this;return R._finalizer=new Tt(c,h,T,D),R}return n.create=function(c,l,p,y,h,T,D){var R=new n(c,l,p,y,h,T,D);return c.ctx.refStore.add(R),R.link(c.finalizing_reflist),R},n.prototype.resetFinalizer=function(){this._finalizer.resetFinalizer()},n.prototype.data=function(){return this._finalizer.data()},n.prototype.callUserFinalizer=function(){this._finalizer.callFinalizer()},n.prototype.invokeFinalizerFromGC=function(){this._finalizer.envObject.invokeFinalizerFromGC(this)},n.prototype.dispose=function(){this._finalizer&&(this._finalizer.envObject.dequeueFinalizer(this),this._finalizer.dispose(),u.prototype.dispose.call(this),this._finalizer=void 0)},n}(Mr),$s=function(){function u(n,c){this.id=0,this.ctx=n,this.value=c}return u.create=function(n,c){var l=new u(n,c);return n.deferredStore.add(l),l},u.prototype.resolve=function(n){this.value.resolve(n),this.dispose()},u.prototype.reject=function(n){this.value.reject(n),this.dispose()},u.prototype.dispose=function(){this.ctx.deferredStore.remove(this.id),this.id=0,this.value=null,this.ctx=null},u}(),Sr=function(){function u(){this._values=[void 0],this._values.length=4,this._size=1,this._freeList=[]}return u.prototype.add=function(n){var c;if(this._freeList.length)c=this._freeList.shift();else{c=this._size,this._size++;var l=this._values.length;c>=l&&(this._values.length=l+(l>>1)+16)}n.id=c,this._values[c]=n},u.prototype.get=function(n){return this._values[n]},u.prototype.has=function(n){return this._values[n]!==void 0},u.prototype.remove=function(n){var c=this._values[n];c&&(c.id=0,this._values[n]=void 0,this._freeList.push(Number(n)))},u.prototype.dispose=function(){for(var n=1;n<this._size;++n){var c=this._values[n];c?.dispose()}this._values=[void 0],this._size=1,this._freeList=[]},u}(),Js=function(){function u(n,c,l,p){this.envObject=n,this.fn=c,this.arg=l,this.order=p}return u}(),qs=function(){function u(){this._cleanupHooks=[],this._cleanupHookCounter=0}return u.prototype.empty=function(){return this._cleanupHooks.length===0},u.prototype.add=function(n,c,l){if(this._cleanupHooks.filter(function(p){return p.envObject===n&&p.fn===c&&p.arg===l}).length>0)throw new Error("Can not add same fn and arg twice");this._cleanupHooks.push(new Js(n,c,l,this._cleanupHookCounter++))},u.prototype.remove=function(n,c,l){for(var p=0;p<this._cleanupHooks.length;++p){var y=this._cleanupHooks[p];if(y.envObject===n&&y.fn===c&&y.arg===l){this._cleanupHooks.splice(p,1);return}}},u.prototype.drain=function(){var n=this._cleanupHooks.slice();n.sort(function(p,y){return y.order-p.order});for(var c=0;c<n.length;++c){var l=n[c];typeof l.fn=="number"?l.envObject.makeDynCall_vp(l.fn)(l.arg):l.fn(l.arg),this._cleanupHooks.splice(this._cleanupHooks.indexOf(l),1)}},u.prototype.dispose=function(){this._cleanupHooks.length=0,this._cleanupHookCounter=0},u}(),Ys=function(){function u(){this.refHandle=new fr().port1,this.count=0}return u.prototype.increase=function(){this.count===0&&this.refHandle.ref&&this.refHandle.ref(),this.count++},u.prototype.decrease=function(){this.count!==0&&(this.count===1&&this.refHandle.unref&&this.refHandle.unref(),this.count--)},u}(),Qs=function(){function u(){var n=this;this._isStopping=!1,this._canCallIntoJs=!0,this._suppressDestroy=!1,this.envStore=new Sr,this.scopeStore=new Ns,this.refStore=new Sr,this.deferredStore=new Sr,this.handleStore=new De,this.feature={supportReflect:Rs,supportFinalizer:ze,supportWeakSymbol:Os,supportBigInt:xs,supportNewFunction:wt,canSetFunctionName:Bs,setImmediate:It,Buffer:St,MessageChannel:fr},this.cleanupQueue=new qs,typeof process=="object"&&process!==null&&typeof process.once=="function"&&(this.refCounter=new Ys,process.once("beforeExit",function(){n._suppressDestroy||n.destroy()}))}return u.prototype.suppressDestroy=function(){this._suppressDestroy=!0},u.prototype.getRuntimeVersions=function(){return{version:Fs,NODE_API_SUPPORTED_VERSION_MAX:Pr,NAPI_VERSION_EXPERIMENTAL:lr,NODE_API_DEFAULT_MODULE_API_VERSION:or}},u.prototype.createNotSupportWeakRefError=function(n,c){return new kt(n,c)},u.prototype.createNotSupportBufferError=function(n,c){return new Dt(n,c)},u.prototype.createReference=function(n,c,l,p){return Mr.create(n,c,l,p)},u.prototype.createReferenceWithData=function(n,c,l,p,y){return zs.create(n,c,l,p,y)},u.prototype.createReferenceWithFinalizer=function(n,c,l,p,y,h,T){return y===void 0&&(y=0),h===void 0&&(h=0),T===void 0&&(T=0),Gs.create(n,c,l,p,y,h,T)},u.prototype.createDeferred=function(n){return $s.create(this,n)},u.prototype.createEnv=function(n,c,l,p,y,h){return Ws(this,n,c,l,p,y,h)},u.prototype.createTrackedFinalizer=function(n,c,l,p){return Ct.create(n,c,l,p)},u.prototype.getCurrentScope=function(){return this.scopeStore.currentScope},u.prototype.addToCurrentScope=function(n){return this.scopeStore.currentScope.add(n)},u.prototype.openScope=function(n){return this.scopeStore.openScope(n)},u.prototype.closeScope=function(n,c){this.scopeStore.closeScope(n)},u.prototype.ensureHandle=function(n){switch(n){case void 0:return De.UNDEFINED;case null:return De.NULL;case!0:return De.TRUE;case!1:return De.FALSE;case bt:return De.GLOBAL}return this.addToCurrentScope(n)},u.prototype.addCleanupHook=function(n,c,l){this.cleanupQueue.add(n,c,l)},u.prototype.removeCleanupHook=function(n,c,l){this.cleanupQueue.remove(n,c,l)},u.prototype.runCleanup=function(){for(;!this.cleanupQueue.empty();)this.cleanupQueue.drain()},u.prototype.increaseWaitingRequestCounter=function(){var n;(n=this.refCounter)===null||n===void 0||n.increase()},u.prototype.decreaseWaitingRequestCounter=function(){var n;(n=this.refCounter)===null||n===void 0||n.decrease()},u.prototype.setCanCallIntoJs=function(n){this._canCallIntoJs=n},u.prototype.setStopping=function(n){this._isStopping=n},u.prototype.canCallIntoJs=function(){return this._canCallIntoJs&&!this._isStopping},u.prototype.destroy=function(){this.setStopping(!0),this.setCanCallIntoJs(!1),this.runCleanup()},u}(),Lr;function Ks(){return new Qs}function Bt(){return Lr||(Lr=Ks()),Lr}var Xs={};const Je=typeof WebAssembly<"u"?WebAssembly:typeof WXWebAssembly<"u"?WXWebAssembly:void 0;if(!Je)throw new Error("WebAssembly is not supported in this environment");function Ne(u,n){if(u===null||typeof u!="object")throw new TypeError(`${n} must be an object. Received ${u===null?"null":typeof u}`)}function Zs(u,n){if(!Array.isArray(u))throw new TypeError(`${n} must be an array. Received ${u===null?"null":typeof u}`)}function eo(u,n){if(typeof u!="boolean")throw new TypeError(`${n} must be a boolean. Received ${u===null?"null":typeof u}`)}function Rt(u,n){if(typeof u!="string")throw new TypeError(`${n} must be a string. Received ${u===null?"null":typeof u}`)}function dr(u,n){if(typeof u!="function")throw new TypeError(`${n} must be a function. Received ${u===null?"null":typeof u}`)}function it(u,n){if(u!==void 0)throw new TypeError(`${n} must be undefined. Received ${u===null?"null":typeof u}`)}function ro(u){return!!(u&&(typeof u=="object"||typeof u=="function")&&typeof u.then=="function")}function ae(u,n,c){return typeof SharedArrayBuffer=="function"&&u.buffer instanceof SharedArrayBuffer||Object.prototype.toString.call(u.buffer.constructor)==="[object SharedArrayBuffer]"?u.slice(n,c):u.subarray(n,c)}const Tr=46,Vr=47;function to(u){return u===Vr}function no(u,n,c,l){let p="",y=0,h=-1,T=0,D=0;for(let R=0;R<=u.length;++R){if(R<u.length)D=u.charCodeAt(R);else{if(l(D))break;D=Vr}if(l(D)){if(!(h===R-1||T===1))if(T===2){if(p.length<2||y!==2||p.charCodeAt(p.length-1)!==Tr||p.charCodeAt(p.length-2)!==Tr){if(p.length>2){const W=p.indexOf(c);W===-1?(p="",y=0):(p=p.slice(0,W),y=p.length-1-p.indexOf(c)),h=R,T=0;continue}else if(p.length!==0){p="",y=0,h=R,T=0;continue}}n&&(p+=p.length>0?`${c}..`:"..",y=2)}else p.length>0?p+=`${c}${u.slice(h+1,R)}`:p=u.slice(h+1,R),y=R-h-1;h=R,T=0}else D===Tr&&T!==-1?++T:T=-1}return p}function ue(...u){let n="",c=!1;for(let l=u.length-1;l>=-1&&!c;l--){const p=l>=0?u[l]:"/";Rt(p,"path"),p.length!==0&&(n=`${p}/${n}`,c=p.charCodeAt(0)===Vr)}return n=no(n,!c,"/",to),c?`/${n}`:n.length>0?n:"."}const io=BigInt(1)<<BigInt(0),ao=BigInt(1)<<BigInt(1),so=BigInt(1)<<BigInt(2),oo=BigInt(1)<<BigInt(3),uo=BigInt(1)<<BigInt(4),co=BigInt(1)<<BigInt(5),fo=BigInt(1)<<BigInt(6),lo=BigInt(1)<<BigInt(7),po=BigInt(1)<<BigInt(8),ho=BigInt(1)<<BigInt(9),_o=BigInt(1)<<BigInt(10),vo=BigInt(1)<<BigInt(11),go=BigInt(1)<<BigInt(12),yo=BigInt(1)<<BigInt(13),Eo=BigInt(1)<<BigInt(14),mo=BigInt(1)<<BigInt(15),wo=BigInt(1)<<BigInt(16),bo=BigInt(1)<<BigInt(17),Ao=BigInt(1)<<BigInt(18),Io=BigInt(1)<<BigInt(19),So=BigInt(1)<<BigInt(20),Lo=BigInt(1)<<BigInt(21),To=BigInt(1)<<BigInt(22),Co=BigInt(1)<<BigInt(23),ko=BigInt(1)<<BigInt(24),Do=BigInt(1)<<BigInt(25),Bo=BigInt(1)<<BigInt(26),Ro=BigInt(1)<<BigInt(27),Oo=BigInt(1)<<BigInt(28),xo=BigInt(1)<<BigInt(29),C={FD_DATASYNC:io,FD_READ:ao,FD_SEEK:so,FD_FDSTAT_SET_FLAGS:oo,FD_SYNC:uo,FD_TELL:co,FD_WRITE:fo,FD_ADVISE:lo,FD_ALLOCATE:po,PATH_CREATE_DIRECTORY:ho,PATH_CREATE_FILE:_o,PATH_LINK_SOURCE:vo,PATH_LINK_TARGET:go,PATH_OPEN:yo,FD_READDIR:Eo,PATH_READLINK:mo,PATH_RENAME_SOURCE:wo,PATH_RENAME_TARGET:bo,PATH_FILESTAT_GET:Ao,PATH_FILESTAT_SET_SIZE:Io,PATH_FILESTAT_SET_TIMES:So,FD_FILESTAT_GET:Lo,FD_FILESTAT_SET_SIZE:To,FD_FILESTAT_SET_TIMES:Co,PATH_SYMLINK:ko,PATH_REMOVE_DIRECTORY:Do,PATH_UNLINK_FILE:Bo,POLL_FD_READWRITE:Ro,SOCK_SHUTDOWN:Oo,SOCK_ACCEPT:xo};function Fo(u){switch(u){case 0:return"Success";case 1:return"Argument list too long";case 2:return"Permission denied";case 3:return"Address in use";case 4:return"Address not available";case 5:return"Address family not supported by protocol";case 6:return"Resource temporarily unavailable";case 7:return"Operation already in progress";case 8:return"Bad file descriptor";case 9:return"Bad message";case 10:return"Resource busy";case 11:return"Operation canceled";case 12:return"No child process";case 13:return"Connection aborted";case 14:return"Connection refused";case 15:return"Connection reset by peer";case 16:return"Resource deadlock would occur";case 17:return"Destination address required";case 18:return"Domain error";case 19:return"Quota exceeded";case 20:return"File exists";case 21:return"Bad address";case 22:return"File too large";case 23:return"Host is unreachable";case 24:return"Identifier removed";case 25:return"Illegal byte sequence";case 26:return"Operation in progress";case 27:return"Interrupted system call";case 28:return"Invalid argument";case 29:return"I/O error";case 30:return"Socket is connected";case 31:return"Is a directory";case 32:return"Symbolic link loop";case 33:return"No file descriptors available";case 34:return"Too many links";case 35:return"Message too large";case 36:return"Multihop attempted";case 37:return"Filename too long";case 38:return"Network is down";case 39:return"Connection reset by network";case 40:return"Network unreachable";case 41:return"Too many files open in system";case 42:return"No buffer space available";case 43:return"No such device";case 44:return"No such file or directory";case 45:return"Exec format error";case 46:return"No locks available";case 47:return"Link has been severed";case 48:return"Out of memory";case 49:return"No message of the desired type";case 50:return"Protocol not available";case 51:return"No space left on device";case 52:return"Function not implemented";case 53:return"Socket not connected";case 54:return"Not a directory";case 55:return"Directory not empty";case 56:return"State not recoverable";case 57:return"Not a socket";case 58:return"Not supported";case 59:return"Not a tty";case 60:return"No such device or address";case 61:return"Value too large for data type";case 62:return"Previous owner died";case 63:return"Operation not permitted";case 64:return"Broken pipe";case 65:return"Protocol error";case 66:return"Protocol not supported";case 67:return"Protocol wrong type for socket";case 68:return"Result not representable";case 69:return"Read-only file system";case 70:return"Invalid seek";case 71:return"No such process";case 72:return"Stale file handle";case 73:return"Operation timed out";case 74:return"Text file busy";case 75:return"Cross-device link";case 76:return"Capabilities insufficient";default:return"Unknown error"}}class de extends Error{constructor(n,c){super(n),this.errno=c}getErrorMessage(){return Fo(this.errno)}}Object.defineProperty(de.prototype,"name",{configurable:!0,writable:!0,value:"WasiError"});const qe=C.FD_DATASYNC|C.FD_READ|C.FD_SEEK|C.FD_FDSTAT_SET_FLAGS|C.FD_SYNC|C.FD_TELL|C.FD_WRITE|C.FD_ADVISE|C.FD_ALLOCATE|C.PATH_CREATE_DIRECTORY|C.PATH_CREATE_FILE|C.PATH_LINK_SOURCE|C.PATH_LINK_TARGET|C.PATH_OPEN|C.FD_READDIR|C.PATH_READLINK|C.PATH_RENAME_SOURCE|C.PATH_RENAME_TARGET|C.PATH_FILESTAT_GET|C.PATH_FILESTAT_SET_SIZE|C.PATH_FILESTAT_SET_TIMES|C.FD_FILESTAT_GET|C.FD_FILESTAT_SET_TIMES|C.FD_FILESTAT_SET_SIZE|C.PATH_SYMLINK|C.PATH_UNLINK_FILE|C.PATH_REMOVE_DIRECTORY|C.POLL_FD_READWRITE|C.SOCK_SHUTDOWN|C.SOCK_ACCEPT,No=qe,Po=qe,Uo=qe,Mo=qe,Ot=C.FD_DATASYNC|C.FD_READ|C.FD_SEEK|C.FD_FDSTAT_SET_FLAGS|C.FD_SYNC|C.FD_TELL|C.FD_WRITE|C.FD_ADVISE|C.FD_ALLOCATE|C.FD_FILESTAT_GET|C.FD_FILESTAT_SET_SIZE|C.FD_FILESTAT_SET_TIMES|C.POLL_FD_READWRITE,Vo=BigInt(0),xt=C.FD_FDSTAT_SET_FLAGS|C.FD_SYNC|C.FD_ADVISE|C.PATH_CREATE_DIRECTORY|C.PATH_CREATE_FILE|C.PATH_LINK_SOURCE|C.PATH_LINK_TARGET|C.PATH_OPEN|C.FD_READDIR|C.PATH_READLINK|C.PATH_RENAME_SOURCE|C.PATH_RENAME_TARGET|C.PATH_FILESTAT_GET|C.PATH_FILESTAT_SET_SIZE|C.PATH_FILESTAT_SET_TIMES|C.FD_FILESTAT_GET|C.FD_FILESTAT_SET_TIMES|C.PATH_SYMLINK|C.PATH_UNLINK_FILE|C.PATH_REMOVE_DIRECTORY|C.POLL_FD_READWRITE,Wo=xt|Ot,jo=C.FD_READ|C.FD_FDSTAT_SET_FLAGS|C.FD_WRITE|C.FD_FILESTAT_GET|C.POLL_FD_READWRITE|C.SOCK_SHUTDOWN,Ho=qe,zo=C.FD_READ|C.FD_FDSTAT_SET_FLAGS|C.FD_WRITE|C.FD_FILESTAT_GET|C.POLL_FD_READWRITE,Go=BigInt(0);function $e(u,n,c,l){const p={base:BigInt(0),inheriting:BigInt(0)};if(l===0)throw new de("Unknown file type",28);switch(l){case 4:p.base=Ot,p.inheriting=Vo;break;case 3:p.base=xt,p.inheriting=Wo;break;case 6:case 5:p.base=jo,p.inheriting=Ho;break;case 2:u.indexOf(n)!==-1?(p.base=zo,p.inheriting=Go):(p.base=Uo,p.inheriting=Mo);break;case 1:p.base=No,p.inheriting=Po;break;default:p.base=BigInt(0),p.inheriting=BigInt(0)}const y=c&3;return y===0?p.base&=~C.FD_WRITE:y===1&&(p.base&=~C.FD_READ),p}function Ge(u,n){let c=0;for(let y=0;y<u.length;y++){const h=u[y];c+=h.length}let l=0;const p=new Uint8Array(c);for(let y=0;y<u.length;y++){const h=u[y];p.set(h,l),l+=h.length}return p}class Ft{constructor(n,c,l,p,y,h,T,D){this.id=n,this.fd=c,this.path=l,this.realPath=p,this.type=y,this.rightsBase=h,this.rightsInheriting=T,this.preopen=D,this.pos=BigInt(0),this.size=BigInt(0)}seek(n,c){if(c===0)this.pos=BigInt(n);else if(c===1)this.pos+=BigInt(n);else if(c===2)this.pos=BigInt(this.size)-BigInt(n);else throw new de("Unknown whence",29);return this.pos}}class at extends Ft{constructor(n,c,l,p,y,h,T,D,R){super(c,l,p,y,h,T,D,R),this._log=n,this._buf=null}write(n){const c=n;if(this._buf&&(n=Ge([this._buf,n]),this._buf=null),n.indexOf(10)===-1)return this._buf=n,c.byteLength;let l=0,p=0,y;for(;(y=n.indexOf(10,l))!==-1;){const h=new TextDecoder().decode(n.subarray(p,y));this._log(h),l+=y-p+1,p=y+1}return l<n.length&&(this._buf=n.slice(l)),c.byteLength}}function Wr(u){return u.isBlockDevice()?1:u.isCharacterDevice()?2:u.isDirectory()?3:u.isSocket()?6:u.isFile()?4:u.isSymbolicLink()?7:0}function Xe(u,n,c){u.setBigUint64(n,c.dev,!0),u.setBigUint64(n+8,c.ino,!0),u.setBigUint64(n+16,BigInt(Wr(c)),!0),u.setBigUint64(n+24,c.nlink,!0),u.setBigUint64(n+32,c.size,!0),u.setBigUint64(n+40,c.atimeMs*BigInt(1e6),!0),u.setBigUint64(n+48,c.mtimeMs*BigInt(1e6),!0),u.setBigUint64(n+56,c.ctimeMs*BigInt(1e6),!0)}class Nt{constructor(n){this.used=0,this.size=n.size,this.fds=Array(n.size),this.stdio=[n.in,n.out,n.err],this.print=n.print,this.printErr=n.printErr,this.insertStdio(n.in,0,"<stdin>"),this.insertStdio(n.out,1,"<stdout>"),this.insertStdio(n.err,2,"<stderr>")}insertStdio(n,c,l){const{base:y,inheriting:h}=$e(this.stdio,n,2,2),T=this.insert(n,l,l,2,y,h,0);if(T.id!==c)throw new de(`id: ${T.id} !== expected: ${c}`,8);return T}insert(n,c,l,p,y,h,T){var D,R;let W=-1;if(this.used>=this.size){const o=this.size*2;this.fds.length=o,W=this.size,this.size=o}else for(let o=0;o<this.size;++o)if(this.fds[o]==null){W=o;break}let m;return c==="<stdout>"?m=new at((D=this.print)!==null&&D!==void 0?D:console.log,W,n,c,l,p,y,h,T):c==="<stderr>"?m=new at((R=this.printErr)!==null&&R!==void 0?R:console.error,W,n,c,l,p,y,h,T):m=new Ft(W,n,c,l,p,y,h,T),this.fds[W]=m,this.used++,m}get(n,c,l){if(n>=this.size)throw new de("Invalid fd",8);const p=this.fds[n];if(!p||p.id!==n)throw new de("Bad file descriptor",8);if((~p.rightsBase&c)!==BigInt(0)||(~p.rightsInheriting&l)!==BigInt(0))throw new de("Capabilities insufficient",76);return p}remove(n){if(n>=this.size)throw new de("Invalid fd",8);const c=this.fds[n];if(!c||c.id!==n)throw new de("Bad file descriptor",8);this.fds[n]=void 0,this.used--}}class $o extends Nt{constructor(n){super(n),this.fs=n.fs}getFileTypeByFd(n){const c=this.fs.fstatSync(n,{bigint:!0});return Wr(c)}insertPreopen(n,c,l){const p=this.getFileTypeByFd(n);if(p!==3)throw new de(`Preopen not dir: ["${c}", "${l}"]`,54);const y=$e(this.stdio,n,0,p);return this.insert(n,c,l,p,y.base,y.inheriting,1)}renumber(n,c){if(n===c)return;if(n>=this.size||c>=this.size)throw new de("Invalid fd",8);const l=this.fds[n],p=this.fds[c];if(!l||!p||l.id!==n||p.id!==c)throw new de("Invalid fd",8);this.fs.closeSync(l.fd),this.fds[n]=this.fds[c],this.fds[n].id=n,this.fds[c]=void 0,this.used--}}class Jo extends Nt{constructor(n){super(n)}async getFileTypeByFd(n){const c=await n.stat({bigint:!0});return Wr(c)}async insertPreopen(n,c,l){const p=await this.getFileTypeByFd(n);if(p!==3)throw new de(`Preopen not dir: ["${c}", "${l}"]`,54);const y=$e(this.stdio,n.fd,0,p);return this.insert(n,c,l,p,y.base,y.inheriting,1)}async renumber(n,c){if(n===c)return;if(n>=this.size||c>=this.size)throw new de("Invalid fd",8);const l=this.fds[n],p=this.fds[c];if(!l||!p||l.id!==n||p.id!==c)throw new de("Invalid fd",8);await l.fd.close(),this.fds[n]=this.fds[c],this.fds[n].id=n,this.fds[c]=void 0,this.used--}}const qo=function(){return Je.Memory}();class Yo extends qo{constructor(n){super(n)}get HEAP8(){return new Int8Array(super.buffer)}get HEAPU8(){return new Uint8Array(super.buffer)}get HEAP16(){return new Int16Array(super.buffer)}get HEAPU16(){return new Uint16Array(super.buffer)}get HEAP32(){return new Int32Array(super.buffer)}get HEAPU32(){return new Uint32Array(super.buffer)}get HEAP64(){return new BigInt64Array(super.buffer)}get HEAPU64(){return new BigUint64Array(super.buffer)}get HEAPF32(){return new Float32Array(super.buffer)}get HEAPF64(){return new Float64Array(super.buffer)}get view(){return new DataView(super.buffer)}}function Qo(u){return Object.getPrototypeOf(u)===Je.Memory.prototype&&Object.setPrototypeOf(u,Yo.prototype),u}function Ko(){const u=Je.Function;if(typeof u!="function")throw new Error('WebAssembly.Function is not supported in this environment. If you are using V8 based browser like Chrome, try to specify --js-flags="--wasm-staging --experimental-wasm-stack-switching"');return u}function Xo(u,n,c){const l=Ko();if(typeof u!="function")throw new TypeError("Function required");const p=n.slice(0);return p.unshift("externref"),new l({parameters:p,results:c},u,{suspending:"first"})}function xe(u,n){if(u.length===0||n.length===0)return 0;let c=0,l=n.length-c;for(let p=0;p<u.length;++p){const y=u[p];if(l<y.length)return y.set(n.subarray(c,c+l),0),c+=l,l=0,c;y.set(n.subarray(c,c+y.length),0),c+=y.length,l-=y.length}return c}const Pt=new WeakMap,z=new WeakMap,Ut=new WeakMap;function J(u){return Pt.get(u)}function re(u){const n=Ut.get(u);if(!n)throw new Error("filesystem is unavailable");return n}function st(u){if(u instanceof de)return u.errno;switch(u.code){case"ENOENT":return 44;case"EBADF":return 8;case"EINVAL":return 28;case"EPERM":return 63;case"EPROTO":return 65;case"EEXIST":return 20;case"ENOTDIR":return 54;case"EMFILE":return 33;case"EACCES":return 2;case"EISDIR":return 31;case"ENOTEMPTY":return 55;case"ENOSYS":return 52}throw u}function Zo(u,n){return Object.defineProperty(n,"name",{value:u}),n}function ie(u,n,c){return Zo(n,function(){if(Xs.NODE_DEBUG_NATIVE==="wasi"){const p=Array.prototype.slice.call(arguments);let y=[`${n}(${Array.from({length:arguments.length}).map(()=>"%d").join(", ")})`];y=y.concat(p),console.debug.apply(console,y)}let l;try{l=c.apply(u,arguments)}catch(p){return st(p)}return ro(l)?l.then(p=>p,st):l})}function Cr(u,n,c,l){let p=ue(n.realPath,c);if((l&1)===1)try{p=u.readlinkSync(p)}catch(y){if(y.code!=="EINVAL"&&y.code!=="ENOENT")throw y}return p}async function kr(u,n,c,l){let p=ue(n.realPath,c);if((l&1)===1)try{p=await u.promises.readlink(p)}catch(y){if(y.code!=="EINVAL"&&y.code!=="ENOENT")throw y}return p}const me=new TextEncoder,se=new TextDecoder,Ze=(BigInt(1)<<BigInt(63))-BigInt(1);function ot(){const u=window.prompt();return u===null?new Uint8Array:new TextEncoder().encode(u+`
`)}function er(u){return!!(u&-16)||(u&3)===3||(u&12)===12}class Pe{constructor(n,c,l,p,y,h){this.args_get=ie(this,"args_get",function(m,o){if(m=Number(m),o=Number(o),m===0||o===0)return 28;const{HEAPU8:g,view:E}=J(this),b=z.get(this).args;for(let S=0;S<b.length;++S){const k=b[S];E.setInt32(m,o,!0),m+=4;const x=me.encode(k+"\0");g.set(x,o),o+=x.length}return 0}),this.args_sizes_get=ie(this,"args_sizes_get",function(m,o){if(m=Number(m),o=Number(o),m===0||o===0)return 28;const{view:g}=J(this),w=z.get(this).args;return g.setUint32(m,w.length,!0),g.setUint32(o,me.encode(w.join("\0")+"\0").length,!0),0}),this.environ_get=ie(this,"environ_get",function(m,o){if(m=Number(m),o=Number(o),m===0||o===0)return 28;const{HEAPU8:g,view:E}=J(this),b=z.get(this).env;for(let S=0;S<b.length;++S){const k=b[S];E.setInt32(m,o,!0),m+=4;const x=me.encode(k+"\0");g.set(x,o),o+=x.length}return 0}),this.environ_sizes_get=ie(this,"environ_sizes_get",function(m,o){if(m=Number(m),o=Number(o),m===0||o===0)return 28;const{view:g}=J(this),E=z.get(this);return g.setUint32(m,E.env.length,!0),g.setUint32(o,me.encode(E.env.join("\0")+"\0").length,!0),0}),this.clock_res_get=ie(this,"clock_res_get",function(m,o){if(o=Number(o),o===0)return 28;const{view:g}=J(this);switch(m){case 0:return g.setBigUint64(o,BigInt(1e6),!0),0;case 1:case 2:case 3:return g.setBigUint64(o,BigInt(1e3),!0),0;default:return 28}}),this.clock_time_get=ie(this,"clock_time_get",function(m,o,g){if(g=Number(g),g===0)return 28;const{view:E}=J(this);switch(m){case 0:return E.setBigUint64(g,BigInt(Date.now())*BigInt(1e6),!0),0;case 1:case 2:case 3:{const w=performance.now()/1e3,b=Math.trunc(w),S=Math.floor((w-b)*1e3),k=BigInt(b)*BigInt(1e9)+BigInt(S)*BigInt(1e6);return E.setBigUint64(g,k,!0),0}default:return 28}}),this.fd_advise=ie(this,"fd_advise",function(m,o,g,E){return 52}),this.fd_fdstat_get=ie(this,"fd_fdstat_get",function(m,o){if(o=Number(o),o===0)return 28;const E=z.get(this).fds.get(m,BigInt(0),BigInt(0)),{view:w}=J(this);return w.setUint16(o,E.type,!0),w.setUint16(o+2,0,!0),w.setBigUint64(o+8,E.rightsBase,!0),w.setBigUint64(o+16,E.rightsInheriting,!0),0}),this.fd_fdstat_set_flags=ie(this,"fd_fdstat_set_flags",function(m,o){return 52}),this.fd_fdstat_set_rights=ie(this,"fd_fdstat_set_rights",function(m,o,g){const w=z.get(this).fds.get(m,BigInt(0),BigInt(0));return(o|w.rightsBase)>w.rightsBase||(g|w.rightsInheriting)>w.rightsInheriting?76:(w.rightsBase=o,w.rightsInheriting=g,0)}),this.fd_prestat_get=ie(this,"fd_prestat_get",function(m,o){if(o=Number(o),o===0)return 28;const g=z.get(this);let E;try{E=g.fds.get(m,BigInt(0),BigInt(0))}catch(b){if(b instanceof de)return b.errno;throw b}if(E.preopen!==1)return 28;const{view:w}=J(this);return w.setUint32(o,0,!0),w.setUint32(o+4,me.encode(E.path).length,!0),0}),this.fd_prestat_dir_name=ie(this,"fd_prestat_dir_name",function(m,o,g){if(o=Number(o),g=Number(g),o===0)return 28;const w=z.get(this).fds.get(m,BigInt(0),BigInt(0));if(w.preopen!==1)return 8;const b=me.encode(w.path);if(b.length>g)return 42;const{HEAPU8:k}=J(this);return k.set(b,o),0}),this.fd_seek=ie(this,"fd_seek",function(m,o,g,E){if(E=Number(E),E===0)return 28;if(m===0||m===1||m===2)return 0;const S=z.get(this).fds.get(m,C.FD_SEEK,BigInt(0)).seek(o,g),{view:k}=J(this);return k.setBigUint64(E,S,!0),0}),this.fd_tell=ie(this,"fd_tell",function(m,o){const E=z.get(this).fds.get(m,C.FD_TELL,BigInt(0)),w=BigInt(E.pos),{view:b}=J(this);return b.setBigUint64(Number(o),w,!0),0}),this.poll_oneoff=ie(this,"poll_oneoff",function(m,o,g,E){if(m=Number(m),o=Number(o),E=Number(E),g=Number(g),g=g>>>0,m===0||o===0||g===0||E===0)return 28;const{view:w}=J(this);w.setUint32(E,0,!0);let b=0,S=BigInt(0),k=BigInt(0),x=0,O=BigInt(0),B;const M=Array(g);for(b=0;b<g;b++){B=m+b*48;const U=w.getBigUint64(B,!0),j=w.getUint8(B+8),$=w.getUint32(B+16,!0),K=w.getBigUint64(B+24,!0),Y=w.getBigUint64(B+32,!0),X=w.getUint16(B+40,!0);M[b]={userdata:U,type:j,u:{clock:{clock_id:$,timeout:K,precision:Y,flags:X},fd_readwrite:{fd:$}}}}const F=[];for(b=0;b<g;b++)switch(B=M[b],B.type){case 0:{if(B.u.clock.flags===1){const U=BigInt(Date.now())*BigInt(1e6);k=B.u.clock.timeout-U}else k=B.u.clock.timeout;(x===0||k<O)&&(O=k,S=B.userdata,x=1);break}case 1:case 2:F.push(B);break;default:return 28}if(F.length>0){for(b=0;b<F.length;b++){const U=F[b],j=o+32*b;w.setBigUint64(j,U.userdata,!0),w.setUint32(j+8,52,!0),w.setUint32(j+12,U.type,!0),w.setBigUint64(j+16,BigInt(0),!0),w.setUint16(j+24,0,!0),w.setUint32(E,1,!0)}return w.setUint32(E,F.length,!0),0}if(x){Number(O/BigInt(1e6));const U=o;w.setBigUint64(U,S,!0),w.setUint32(U+8,0,!0),w.setUint32(U+12,0,!0),w.setUint32(E,1,!0)}return 0}),this.proc_exit=ie(this,"proc_exit",function(m){return typeof process=="object"&&process!==null&&typeof process.exit=="function"&&process.exit(m),0}),this.proc_raise=ie(this,"proc_raise",function(m){return 52}),this.sched_yield=ie(this,"sched_yield",function(){return 0}),this.random_get=typeof crypto<"u"&&typeof crypto.getRandomValues=="function"?ie(this,"random_get",function(m,o){if(m=Number(m),m===0)return 28;o=Number(o);const{HEAPU8:g,view:E}=J(this);if(typeof SharedArrayBuffer=="function"&&g.buffer instanceof SharedArrayBuffer||Object.prototype.toString.call(g.buffer)==="[object SharedArrayBuffer]"){for(let S=m;S<m+o;++S)E.setUint8(S,Math.floor(Math.random()*256));return 0}let w;const b=65536;for(w=0;w+b<o;w+=b)crypto.getRandomValues(g.subarray(m+w,m+w+b));return crypto.getRandomValues(g.subarray(m+w,m+o)),0}):ie(this,"random_get",function(m,o){if(m=Number(m),m===0)return 28;o=Number(o);const{view:g}=J(this);for(let E=m;E<m+o;++E)g.setUint8(E,Math.floor(Math.random()*256));return 0}),this.sock_recv=ie(this,"sock_recv",function(){return 58}),this.sock_send=ie(this,"sock_send",function(){return 58}),this.sock_shutdown=ie(this,"sock_shutdown",function(){return 58}),this.sock_accept=ie(this,"sock_accept",function(){return 58}),z.set(this,{fds:l,args:n,env:c}),y&&Ut.set(this,y);const T=this;function D(m,o,g,E,w){p?h?T[m]=h.wrapImportFunction(ie(T,m,g)):T[m]=Xo(ie(T,m,g),E,w):T[m]=ie(T,m,o)}D("fd_allocate",function(o,g,E){const w=z.get(this),b=re(this),S=w.fds.get(o,C.FD_ALLOCATE,BigInt(0));return b.fstatSync(S.fd,{bigint:!0}).size<g+E&&b.ftruncateSync(S.fd,Number(g+E)),0},async function(o,g,E){const S=z.get(this).fds.get(o,C.FD_ALLOCATE,BigInt(0)).fd;return(await S.stat({bigint:!0})).size<g+E&&await S.truncate(Number(g+E)),0},["i32","i64","f64"],["i32"]),D("fd_close",function(o){const g=z.get(this),E=g.fds.get(o,BigInt(0),BigInt(0));return re(this).closeSync(E.fd),g.fds.remove(o),0},async function(o){const g=z.get(this);return await g.fds.get(o,BigInt(0),BigInt(0)).fd.close(),g.fds.remove(o),0},["i32"],["i32"]),D("fd_datasync",function(o){const E=z.get(this).fds.get(o,C.FD_DATASYNC,BigInt(0));return re(this).fdatasyncSync(E.fd),0},async function(o){return await z.get(this).fds.get(o,C.FD_DATASYNC,BigInt(0)).fd.datasync(),0},["i32"],["i32"]),D("fd_filestat_get",function(o,g){if(g=Number(g),g===0)return 28;const w=z.get(this).fds.get(o,C.FD_FILESTAT_GET,BigInt(0)),S=re(this).fstatSync(w.fd,{bigint:!0}),{view:k}=J(this);return Xe(k,g,S),0},async function(o,g){if(g=Number(g),g===0)return 28;const S=await z.get(this).fds.get(o,C.FD_FILESTAT_GET,BigInt(0)).fd.stat({bigint:!0}),{view:k}=J(this);return Xe(k,g,S),0},["i32","i32"],["i32"]),D("fd_filestat_set_size",function(o,g){const w=z.get(this).fds.get(o,C.FD_FILESTAT_SET_SIZE,BigInt(0));return re(this).ftruncateSync(w.fd,Number(g)),0},async function(o,g){return await z.get(this).fds.get(o,C.FD_FILESTAT_SET_SIZE,BigInt(0)).fd.truncate(Number(g)),0},["i32","i64"],["i32"]);function R(m,o,g,E){const b=z.get(this).fds.get(m,C.FD_FILESTAT_SET_TIMES,BigInt(0));return(E&2)===2&&(o=BigInt(Date.now()*1e6)),(E&8)===8&&(g=BigInt(Date.now()*1e6)),{fileDescriptor:b,atim:o,mtim:g}}D("fd_filestat_set_times",function(o,g,E,w){if(er(w))return 28;const{fileDescriptor:b,atim:S,mtim:k}=R.call(this,o,g,E,w);return re(this).futimesSync(b.fd,Number(S),Number(k)),0},async function(o,g,E,w){if(er(w))return 28;const{fileDescriptor:b,atim:S,mtim:k}=R.call(this,o,g,E,w);return await b.fd.utimes(Number(S),Number(k)),0},["i32","i64","i64","i32"],["i32"]),D("fd_pread",function(o,g,E,w,b){if(g=Number(g),b=Number(b),g===0&&E||b===0||w>Ze)return 28;const{HEAPU8:S,view:k}=J(this),O=z.get(this).fds.get(o,C.FD_READ|C.FD_SEEK,BigInt(0));if(!E)return k.setUint32(b,0,!0),0;let B=0;const M=Array.from({length:Number(E)},(K,Y)=>{const X=g+Y*8,fe=k.getInt32(X,!0),he=k.getUint32(X+4,!0);return B+=he,S.subarray(fe,fe+he)});let F=0;const U=(()=>{try{return new Uint8Array(new SharedArrayBuffer(B))}catch{return new Uint8Array(B)}})();U._isBuffer=!0;const $=re(this).readSync(O.fd,U,0,U.length,Number(w));return F=U?xe(M,U.subarray(0,$)):0,k.setUint32(b,F,!0),0},async function(m,o,g,E,w){if(o=Number(o),w=Number(w),o===0&&g||w===0||E>Ze)return 28;const{HEAPU8:b,view:S}=J(this),x=z.get(this).fds.get(m,C.FD_READ|C.FD_SEEK,BigInt(0));if(!g)return S.setUint32(w,0,!0),0;let O=0;const B=Array.from({length:Number(g)},(j,$)=>{const K=o+$*8,Y=S.getInt32(K,!0),X=S.getUint32(K+4,!0);return O+=X,b.subarray(Y,Y+X)});let M=0;const F=new Uint8Array(O);F._isBuffer=!0;const{bytesRead:U}=await x.fd.read(F,0,F.length,Number(E));return M=F?xe(B,F.subarray(0,U)):0,S.setUint32(w,M,!0),0},["i32","i32","i32","i64","i32"],["i32"]),D("fd_pwrite",function(o,g,E,w,b){if(g=Number(g),b=Number(b),g===0&&E||b===0||w>Ze)return 28;const{HEAPU8:S,view:k}=J(this),O=z.get(this).fds.get(o,C.FD_WRITE|C.FD_SEEK,BigInt(0));if(!E)return k.setUint32(b,0,!0),0;const B=Ge(Array.from({length:Number(E)},(U,j)=>{const $=g+j*8,K=k.getInt32($,!0),Y=k.getUint32($+4,!0);return S.subarray(K,K+Y)})),F=re(this).writeSync(O.fd,B,0,B.length,Number(w));return k.setUint32(b,F,!0),0},async function(o,g,E,w,b){if(g=Number(g),b=Number(b),g===0&&E||b===0||w>Ze)return 28;const{HEAPU8:S,view:k}=J(this),O=z.get(this).fds.get(o,C.FD_WRITE|C.FD_SEEK,BigInt(0));if(!E)return k.setUint32(b,0,!0),0;const B=Ge(Array.from({length:Number(E)},(F,U)=>{const j=g+U*8,$=k.getInt32(j,!0),K=k.getUint32(j+4,!0);return S.subarray($,$+K)})),{bytesWritten:M}=await O.fd.write(B,0,B.length,Number(w));return k.setUint32(b,M,!0),0},["i32","i32","i32","i64","i32"],["i32"]),D("fd_read",function(o,g,E,w){if(g=Number(g),w=Number(w),g===0&&E||w===0)return 28;const{HEAPU8:b,view:S}=J(this),x=z.get(this).fds.get(o,C.FD_READ,BigInt(0));if(!E)return S.setUint32(w,0,!0),0;let O=0;const B=Array.from({length:Number(E)},(U,j)=>{const $=g+j*8,K=S.getInt32($,!0),Y=S.getUint32($+4,!0);return O+=Y,b.subarray(K,K+Y)});let M,F=0;if(o===0){if(typeof window>"u"||typeof window.prompt!="function")return 58;M=ot(),F=M?xe(B,M):0}else{M=(()=>{try{return new Uint8Array(new SharedArrayBuffer(O))}catch{return new Uint8Array(O)}})(),M._isBuffer=!0;const j=re(this).readSync(x.fd,M,0,M.length,Number(x.pos));F=M?xe(B,M.subarray(0,j)):0,x.pos+=BigInt(F)}return S.setUint32(w,F,!0),0},async function(o,g,E,w){if(g=Number(g),w=Number(w),g===0&&E||w===0)return 28;const{HEAPU8:b,view:S}=J(this),x=z.get(this).fds.get(o,C.FD_READ,BigInt(0));if(!E)return S.setUint32(w,0,!0),0;let O=0;const B=Array.from({length:Number(E)},(U,j)=>{const $=g+j*8,K=S.getInt32($,!0),Y=S.getUint32($+4,!0);return O+=Y,b.subarray(K,K+Y)});let M,F=0;if(o===0){if(typeof window>"u"||typeof window.prompt!="function")return 58;M=ot(),F=M?xe(B,M):0}else{M=new Uint8Array(O),M._isBuffer=!0;const{bytesRead:U}=await x.fd.read(M,0,M.length,Number(x.pos));F=M?xe(B,M.subarray(0,U)):0,x.pos+=BigInt(F)}return S.setUint32(w,F,!0),0},["i32","i32","i32","i32"],["i32"]),D("fd_readdir",function(o,g,E,w,b){if(g=Number(g),E=Number(E),b=Number(b),g===0||b===0)return 0;const k=z.get(this).fds.get(o,C.FD_READDIR,BigInt(0)),x=re(this),O=x.readdirSync(k.realPath,{withFileTypes:!0}),{HEAPU8:B,view:M}=J(this);let F=0;for(let U=Number(w);U<O.length;U++){const j=me.encode(O[U].name),$=x.statSync(ue(k.realPath,O[U].name),{bigint:!0}),K=new Uint8Array(24+j.byteLength),Y=new DataView(K.buffer);Y.setBigUint64(0,BigInt(U+1),!0),Y.setBigUint64(8,BigInt($.ino?$.ino:0),!0),Y.setUint32(16,j.byteLength,!0);let X;O[U].isFile()?X=4:O[U].isDirectory()?X=3:O[U].isSymbolicLink()?X=7:O[U].isCharacterDevice()?X=2:O[U].isBlockDevice()?X=1:O[U].isSocket()?X=6:X=0,Y.setUint8(20,X),K.set(j,24);const fe=K.slice(0,Math.min(K.length,E-F));B.set(fe,g+F),F+=fe.byteLength}return M.setUint32(b,F,!0),0},async function(o,g,E,w,b){if(g=Number(g),E=Number(E),b=Number(b),g===0||b===0)return 0;const k=z.get(this).fds.get(o,C.FD_READDIR,BigInt(0)),x=re(this),O=await x.promises.readdir(k.realPath,{withFileTypes:!0}),{HEAPU8:B,view:M}=J(this);let F=0;for(let U=Number(w);U<O.length;U++){const j=me.encode(O[U].name),$=await x.promises.stat(ue(k.realPath,O[U].name),{bigint:!0}),K=new Uint8Array(24+j.byteLength),Y=new DataView(K.buffer);Y.setBigUint64(0,BigInt(U+1),!0),Y.setBigUint64(8,BigInt($.ino?$.ino:0),!0),Y.setUint32(16,j.byteLength,!0);let X;O[U].isFile()?X=4:O[U].isDirectory()?X=3:O[U].isSymbolicLink()?X=7:O[U].isCharacterDevice()?X=2:O[U].isBlockDevice()?X=1:O[U].isSocket()?X=6:X=0,Y.setUint8(20,X),K.set(j,24);const fe=K.slice(0,Math.min(K.length,E-F));B.set(fe,g+F),F+=fe.byteLength}return M.setUint32(b,F,!0),0},["i32","i32","i32","i64","i32"],["i32"]),D("fd_renumber",function(o,g){return z.get(this).fds.renumber(g,o),0},async function(o,g){return await z.get(this).fds.renumber(g,o),0},["i32","i32"],["i32"]),D("fd_sync",function(o){const E=z.get(this).fds.get(o,C.FD_SYNC,BigInt(0));return re(this).fsyncSync(E.fd),0},async function(o){return await z.get(this).fds.get(o,C.FD_SYNC,BigInt(0)).fd.sync(),0},["i32"],["i32"]),D("fd_write",function(o,g,E,w){if(g=Number(g),w=Number(w),g===0&&E||w===0)return 28;const{HEAPU8:b,view:S}=J(this),x=z.get(this).fds.get(o,C.FD_WRITE,BigInt(0));if(!E)return S.setUint32(w,0,!0),0;const O=Ge(Array.from({length:Number(E)},(M,F)=>{const U=g+F*8,j=S.getInt32(U,!0),$=S.getUint32(U+4,!0);return b.subarray(j,j+$)}));let B;return o===1||o===2?B=x.write(O):(B=re(this).writeSync(x.fd,O,0,O.length,Number(x.pos)),x.pos+=BigInt(B)),S.setUint32(w,B,!0),0},async function(o,g,E,w){if(g=Number(g),w=Number(w),g===0&&E||w===0)return 28;const{HEAPU8:b,view:S}=J(this),x=z.get(this).fds.get(o,C.FD_WRITE,BigInt(0));if(!E)return S.setUint32(w,0,!0),0;const O=Ge(Array.from({length:Number(E)},(M,F)=>{const U=g+F*8,j=S.getInt32(U,!0),$=S.getUint32(U+4,!0);return b.subarray(j,j+$)}));let B;return o===1||o===2?B=x.write(O):(B=await(await x.fd.write(O,0,O.length,Number(x.pos))).bytesWritten,x.pos+=BigInt(B)),S.setUint32(w,B,!0),0},["i32","i32","i32","i32"],["i32"]),D("path_create_directory",function(o,g,E){if(g=Number(g),E=Number(E),g===0)return 28;const{HEAPU8:w}=J(this),S=z.get(this).fds.get(o,C.PATH_CREATE_DIRECTORY,BigInt(0));let k=se.decode(ae(w,g,g+E));return k=ue(S.realPath,k),re(this).mkdirSync(k),0},async function(o,g,E){if(g=Number(g),E=Number(E),g===0)return 28;const{HEAPU8:w}=J(this),S=z.get(this).fds.get(o,C.PATH_CREATE_DIRECTORY,BigInt(0));let k=se.decode(ae(w,g,g+E));return k=ue(S.realPath,k),await re(this).promises.mkdir(k),0},["i32","i32","i32"],["i32"]),D("path_filestat_get",function(o,g,E,w,b){if(E=Number(E),w=Number(w),b=Number(b),E===0||b===0)return 28;const{HEAPU8:S,view:k}=J(this),O=z.get(this).fds.get(o,C.PATH_FILESTAT_GET,BigInt(0));let B=se.decode(ae(S,E,E+w));const M=re(this);B=ue(O.realPath,B);let F;return(g&1)===1?F=M.statSync(B,{bigint:!0}):F=M.lstatSync(B,{bigint:!0}),Xe(k,b,F),0},async function(o,g,E,w,b){if(E=Number(E),w=Number(w),b=Number(b),E===0||b===0)return 28;const{HEAPU8:S,view:k}=J(this),O=z.get(this).fds.get(o,C.PATH_FILESTAT_GET,BigInt(0));let B=se.decode(ae(S,E,E+w));const M=re(this);B=ue(O.realPath,B);let F;return(g&1)===1?F=await M.promises.stat(B,{bigint:!0}):F=await M.promises.lstat(B,{bigint:!0}),Xe(k,b,F),0},["i32","i32","i32","i32","i32"],["i32"]),D("path_filestat_set_times",function(o,g,E,w,b,S,k){if(E=Number(E),w=Number(w),E===0)return 28;const{HEAPU8:x}=J(this),B=z.get(this).fds.get(o,C.PATH_FILESTAT_SET_TIMES,BigInt(0));if(er(k))return 28;const M=re(this),F=Cr(M,B,se.decode(ae(x,E,E+w)),g);return(k&2)===2&&(b=BigInt(Date.now()*1e6)),(k&8)===8&&(S=BigInt(Date.now()*1e6)),M.utimesSync(F,Number(b),Number(S)),0},async function(o,g,E,w,b,S,k){if(E=Number(E),w=Number(w),E===0)return 28;const{HEAPU8:x}=J(this),B=z.get(this).fds.get(o,C.PATH_FILESTAT_SET_TIMES,BigInt(0));if(er(k))return 28;const M=re(this),F=await kr(M,B,se.decode(ae(x,E,E+w)),g);return(k&2)===2&&(b=BigInt(Date.now()*1e6)),(k&8)===8&&(S=BigInt(Date.now()*1e6)),await M.promises.utimes(F,Number(b),Number(S)),0},["i32","i32","i32","i32","i64","i64","i32"],["i32"]),D("path_link",function(o,g,E,w,b,S,k){if(E=Number(E),w=Number(w),S=Number(S),k=Number(k),E===0||S===0)return 28;const x=z.get(this);let O,B;o===b?O=B=x.fds.get(o,C.PATH_LINK_SOURCE|C.PATH_LINK_TARGET,BigInt(0)):(O=x.fds.get(o,C.PATH_LINK_SOURCE,BigInt(0)),B=x.fds.get(b,C.PATH_LINK_TARGET,BigInt(0)));const{HEAPU8:M}=J(this),F=re(this),U=Cr(F,O,se.decode(ae(M,E,E+w)),g),j=ue(B.realPath,se.decode(ae(M,S,S+k)));return F.linkSync(U,j),0},async function(o,g,E,w,b,S,k){if(E=Number(E),w=Number(w),S=Number(S),k=Number(k),E===0||S===0)return 28;const x=z.get(this);let O,B;o===b?O=B=x.fds.get(o,C.PATH_LINK_SOURCE|C.PATH_LINK_TARGET,BigInt(0)):(O=x.fds.get(o,C.PATH_LINK_SOURCE,BigInt(0)),B=x.fds.get(b,C.PATH_LINK_TARGET,BigInt(0)));const{HEAPU8:M}=J(this),F=re(this),U=await kr(F,O,se.decode(ae(M,E,E+w)),g),j=ue(B.realPath,se.decode(ae(M,S,S+k)));return await F.promises.link(U,j),0},["i32","i32","i32","i32","i32","i32","i32"],["i32"]);function W(m,o,g,E){const w=(o&(C.FD_READ|C.FD_READDIR))!==BigInt(0),b=(o&(C.FD_DATASYNC|C.FD_WRITE|C.FD_ALLOCATE|C.FD_FILESTAT_SET_SIZE))!==BigInt(0);let S=b?w?2:1:0,k=C.PATH_OPEN,x=o|g;return(m&1)!==0&&(S|=64,k|=C.PATH_CREATE_FILE),(m&2)!==0&&(S|=65536),(m&4)!==0&&(S|=128),(m&8)!==0&&(S|=512,k|=C.PATH_FILESTAT_SET_SIZE),(E&1)!==0&&(S|=1024),(E&2)!==0&&(x|=C.FD_DATASYNC),(E&4)!==0&&(S|=2048),(E&8)!==0&&(S|=1052672,x|=C.FD_SYNC),(E&16)!==0&&(S|=1052672,x|=C.FD_SYNC),b&&(S&1536)===0&&(x|=C.FD_SEEK),{flags:S,needed_base:k,needed_inheriting:x}}D("path_open",function(o,g,E,w,b,S,k,x,O){if(E=Number(E),O=Number(O),E===0||O===0)return 28;w=Number(w),S=BigInt(S),k=BigInt(k);const{flags:B,needed_base:M,needed_inheriting:F}=W(b,S,k,x),U=z.get(this),j=U.fds.get(o,M,F),$=J(this),K=$.HEAPU8,Y=se.decode(ae(K,E,E+w)),X=re(this),fe=Cr(X,j,Y,g),he=X.openSync(fe,B,438),be=U.fds.getFileTypeByFd(he);if(be!==3&&((b&2)!==0||fe.endsWith("/")))return 54;const{base:Ue,inheriting:Me}=$e(U.fds.stdio,he,B,be),ye=U.fds.insert(he,fe,fe,be,S&Ue,k&Me,0),Ae=X.fstatSync(he,{bigint:!0});return Ae.isFile()&&(ye.size=Ae.size,(B&1024)!==0&&(ye.pos=Ae.size)),$.view.setInt32(O,ye.id,!0),0},async function(o,g,E,w,b,S,k,x,O){if(E=Number(E),O=Number(O),E===0||O===0)return 28;w=Number(w),S=BigInt(S),k=BigInt(k);const{flags:B,needed_base:M,needed_inheriting:F}=W(b,S,k,x),U=z.get(this),j=U.fds.get(o,M,F),$=J(this),K=$.HEAPU8,Y=se.decode(ae(K,E,E+w)),X=re(this),fe=await kr(X,j,Y,g),he=await X.promises.open(fe,B,438),be=await U.fds.getFileTypeByFd(he);if((b&2)!==0&&be!==3)return 54;const{base:Ue,inheriting:Me}=$e(U.fds.stdio,he.fd,B,be),ye=U.fds.insert(he,fe,fe,be,S&Ue,k&Me,0),Ae=await he.stat({bigint:!0});return Ae.isFile()&&(ye.size=Ae.size,(B&1024)!==0&&(ye.pos=Ae.size)),$.view.setInt32(O,ye.id,!0),0},["i32","i32","i32","i32","i32","i64","i64","i32","i32"],["i32"]),D("path_readlink",function(o,g,E,w,b,S){if(g=Number(g),E=Number(E),w=Number(w),b=Number(b),S=Number(S),g===0||w===0||S===0)return 28;const{HEAPU8:k,view:x}=J(this),B=z.get(this).fds.get(o,C.PATH_READLINK,BigInt(0));let M=se.decode(ae(k,g,g+E));M=ue(B.realPath,M);const U=re(this).readlinkSync(M),j=me.encode(U),$=Math.min(j.length,b);return $>=b?42:(k.set(j.subarray(0,$),w),k[w+$]=0,x.setUint32(S,$,!0),0)},async function(o,g,E,w,b,S){if(g=Number(g),E=Number(E),w=Number(w),b=Number(b),S=Number(S),g===0||w===0||S===0)return 28;const{HEAPU8:k,view:x}=J(this),B=z.get(this).fds.get(o,C.PATH_READLINK,BigInt(0));let M=se.decode(ae(k,g,g+E));M=ue(B.realPath,M);const U=await re(this).promises.readlink(M),j=me.encode(U),$=Math.min(j.length,b);return $>=b?42:(k.set(j.subarray(0,$),w),k[w+$]=0,x.setUint32(S,$,!0),0)},["i32","i32","i32","i32","i32","i32"],["i32"]),D("path_remove_directory",function(o,g,E){if(g=Number(g),E=Number(E),g===0)return 28;const{HEAPU8:w}=J(this),S=z.get(this).fds.get(o,C.PATH_REMOVE_DIRECTORY,BigInt(0));let k=se.decode(ae(w,g,g+E));return k=ue(S.realPath,k),re(this).rmdirSync(k),0},async function(o,g,E){if(g=Number(g),E=Number(E),g===0)return 28;const{HEAPU8:w}=J(this),S=z.get(this).fds.get(o,C.PATH_REMOVE_DIRECTORY,BigInt(0));let k=se.decode(ae(w,g,g+E));return k=ue(S.realPath,k),await re(this).promises.rmdir(k),0},["i32","i32","i32"],["i32"]),D("path_rename",function(o,g,E,w,b,S){if(g=Number(g),E=Number(E),b=Number(b),S=Number(S),g===0||b===0)return 28;const k=z.get(this);let x,O;o===w?x=O=k.fds.get(o,C.PATH_RENAME_SOURCE|C.PATH_RENAME_TARGET,BigInt(0)):(x=k.fds.get(o,C.PATH_RENAME_SOURCE,BigInt(0)),O=k.fds.get(w,C.PATH_RENAME_TARGET,BigInt(0)));const{HEAPU8:B}=J(this),M=ue(x.realPath,se.decode(ae(B,g,g+E))),F=ue(O.realPath,se.decode(ae(B,b,b+S)));return re(this).renameSync(M,F),0},async function(o,g,E,w,b,S){if(g=Number(g),E=Number(E),b=Number(b),S=Number(S),g===0||b===0)return 28;const k=z.get(this);let x,O;o===w?x=O=k.fds.get(o,C.PATH_RENAME_SOURCE|C.PATH_RENAME_TARGET,BigInt(0)):(x=k.fds.get(o,C.PATH_RENAME_SOURCE,BigInt(0)),O=k.fds.get(w,C.PATH_RENAME_TARGET,BigInt(0)));const{HEAPU8:B}=J(this),M=ue(x.realPath,se.decode(ae(B,g,g+E))),F=ue(O.realPath,se.decode(ae(B,b,b+S)));return await re(this).promises.rename(M,F),0},["i32","i32","i32","i32","i32","i32"],["i32"]),D("path_symlink",function(o,g,E,w,b){if(o=Number(o),g=Number(g),w=Number(w),b=Number(b),o===0||w===0)return 28;const{HEAPU8:S}=J(this),x=z.get(this).fds.get(E,C.PATH_SYMLINK,BigInt(0)),O=se.decode(ae(S,o,o+g));if(O.length>0&&O[0]==="/")return 63;let B=se.decode(ae(S,w,w+b));return B=ue(x.realPath,B),re(this).symlinkSync(O,B),0},async function(o,g,E,w,b){if(o=Number(o),g=Number(g),w=Number(w),b=Number(b),o===0||w===0)return 28;const{HEAPU8:S}=J(this),x=z.get(this).fds.get(E,C.PATH_SYMLINK,BigInt(0)),O=se.decode(ae(S,o,o+g));let B=se.decode(ae(S,w,w+b));return B=ue(x.realPath,B),await re(this).promises.symlink(O,B),0},["i32","i32","i32","i32","i32"],["i32"]),D("path_unlink_file",function(o,g,E){if(g=Number(g),E=Number(E),g===0)return 28;const{HEAPU8:w}=J(this),S=z.get(this).fds.get(o,C.PATH_UNLINK_FILE,BigInt(0));let k=se.decode(ae(w,g,g+E));return k=ue(S.realPath,k),re(this).unlinkSync(k),0},async function(o,g,E){if(g=Number(g),E=Number(E),g===0)return 28;const{HEAPU8:w}=J(this),S=z.get(this).fds.get(o,C.PATH_UNLINK_FILE,BigInt(0));let k=se.decode(ae(w,g,g+E));return k=ue(S.realPath,k),await re(this).promises.unlink(k),0},["i32","i32","i32"],["i32"]),this._setMemory=function(o){if(!(o instanceof Je.Memory))throw new TypeError('"instance.exports.memory" property must be a WebAssembly.Memory');Pt.set(T,Qo(o))}}static createSync(n,c,l,p,y,h,T){const D=new $o({size:3,in:p[0],out:p[1],err:p[2],fs:y,print:h,printErr:T}),R=new Pe(n,c,D,!1,y);if(l.length>0)for(let W=0;W<l.length;++W){const m=y.realpathSync(l[W].realPath,"utf8"),o=y.openSync(m,"r",438);D.insertPreopen(o,l[W].mappedPath,m)}return R}static async createAsync(n,c,l,p,y,h,T,D){const R=new Jo({size:3,in:p[0],out:p[1],err:p[2],print:h,printErr:T}),W=new Pe(n,c,R,!0,y,D);if(l.length>0)for(let m=0;m<l.length;++m){const o=l[m],g=await y.promises.realpath(o.realPath),E=await y.promises.open(g,"r",438);await R.insertPreopen(E,o.mappedPath,g)}return W}}const eu=Object.freeze(Object.create(null)),Ce=Symbol("kExitCode"),Mt=Symbol("kSetMemory"),xr=Symbol("kStarted"),ur=Symbol("kInstance"),cr=Symbol("kBindingName");function ru(u){var n;Ne(u,"options");let c;if(u.version!==void 0)switch(Rt(u.version,"options.version"),u.version){case"unstable":c=Pe,this[cr]="wasi_unstable";break;case"preview1":c=Pe,this[cr]="wasi_snapshot_preview1";break;default:throw new TypeError(`unsupported WASI version "${u.version}"`)}else c=Pe,this[cr]="wasi_snapshot_preview1";u.args!==void 0&&Zs(u.args,"options.args");const l=((n=u.args)!==null&&n!==void 0?n:[]).map(String),p=[];u.env!==void 0&&(Ne(u.env,"options.env"),Object.entries(u.env).forEach(({0:T,1:D})=>{D!==void 0&&p.push(`${T}=${D}`)}));const y=[];if(u.preopens!==void 0&&(Ne(u.preopens,"options.preopens"),Object.entries(u.preopens).forEach(({0:T,1:D})=>y.push({mappedPath:String(T),realPath:String(D)}))),y.length>0){if(u.fs===void 0)throw new Error("filesystem is disabled, can not preopen directory");try{Ne(u.fs,"options.fs")}catch{throw new TypeError("Node.js fs like implementation is not provided")}}return u.print!==void 0&&dr(u.print,"options.print"),u.printErr!==void 0&&dr(u.printErr,"options.printErr"),u.returnOnExit!==void 0&&eo(u.returnOnExit,"options.returnOnExit"),{args:l,env:p,preopens:y,stdio:[0,1,2],_WASI:c}}function tu(u,n){this[Mt]=u,this.wasiImport=n,this[xr]=!1,this[Ce]=0,this[ur]=void 0}class Vt{constructor(n=eu){const{args:c,env:l,preopens:p,stdio:y,_WASI:h}=ru.call(this,n),T=h.createSync(c,l,p,y,n.fs,n.print,n.printErr),D=T._setMemory;delete T._setMemory,tu.call(this,D,T),n.returnOnExit&&(T.proc_exit=nu.bind(this))}finalizeBindings(n,c){var l,{memory:p=(l=n?.exports)===null||l===void 0?void 0:l.memory}=c===void 0?{}:c;if(this[xr])throw new Error("WASI instance has already started");Ne(n,"instance"),Ne(n.exports,"instance.exports"),this[Mt](p),this[ur]=n,this[xr]=!0}start(n){this.finalizeBindings(n);const{_start:c,_initialize:l}=this[ur].exports;dr(c,"instance.exports._start"),it(l,"instance.exports._initialize");let p;try{p=c()}catch(y){if(y!==Ce)throw y}return p instanceof Promise?p.then(()=>this[Ce],y=>{if(y!==Ce)throw y;return this[Ce]}):this[Ce]}initialize(n){this.finalizeBindings(n);const{_start:c,_initialize:l}=this[ur].exports;if(it(c,"instance.exports._start"),l!==void 0)return dr(l,"instance.exports._initialize"),l()}getImportObject(){return{[this[cr]]:this.wasiImport}}}function nu(u){throw this[Ce]=u,Ce}const iu=new Vt({version:"preview1"}),au=new URL("/assets/turso-sync-js.wasm32-wasi-BmHBGJ63.wasm",import.meta.url).href,su=Bt(),ou=new WebAssembly.Memory({initial:4e3,maximum:65536,shared:!0}),uu=await fetch(au).then(u=>u.arrayBuffer()),{instance:xu,module:Fu,napiModule:Te}=Et(uu,{context:su,asyncWorkPoolSize:4,wasi:iu,onCreateWorker(){return new Worker(new URL("/assets/wasi-worker-browser-BW-zajkF.js",import.meta.url),{type:"module"})},overwriteImports(u){return u.env={...u.env,...u.napi,...u.emnapi,memory:ou},u},beforeInit({instance:u}){for(const n of Object.keys(u.exports))n.startsWith("__napi_register__")&&u.exports[n]()}});Te.exports;Te.exports.Database;Te.exports.Statement;Te.exports.GeneratorHolder;Te.exports.JsDataCompletion;Te.exports.JsDataPollResult;Te.exports.JsProtocolIo;Te.exports.JsProtocolRequestData;const cu=Te.exports.SyncEngine,fu=new Vt({version:"preview1"}),lu=new URL("/assets/turso.wasm32-wasi-DJfyqHl5.wasm",import.meta.url).href,du=Bt(),pu=new WebAssembly.Memory({initial:4e3,maximum:65536,shared:!0}),hu=await fetch(lu).then(u=>u.arrayBuffer()),{instance:Nu,module:Pu,napiModule:jr}=Et(hu,{context:du,asyncWorkPoolSize:4,wasi:fu,onCreateWorker(){return new Worker(new URL("/assets/wasi-worker-browser-BW-zajkF.js",import.meta.url),{type:"module"})},overwriteImports(u){return u.env={...u.env,...u.napi,...u.emnapi,memory:pu},u},beforeInit({instance:u}){for(const n of Object.keys(u.exports))n.startsWith("__napi_register__")&&u.exports[n]()}});jr.exports;const _u=jr.exports.Database;jr.exports.Statement;function je(u,n){const c=n?.length;if(c!==0){if(c===1){const l=n[0];if(vu(l)){gu(u,l);return}pr(u,1,l);return}yu(u,n)}}function vu(u){if(!u||typeof u!="object")return!1;const n=Object.getPrototypeOf(u);return n===Object.prototype||n===null}function gu(u,n){const c=u.parameterCount();for(let l=1;l<=c;l++){const p=u.parameterName(l);if(p){const y=p.substring(1),h=n[y];h!==void 0&&pr(u,l,h)}}}function yu(u,n){let c=1;for(let l=0;l<n.length;l++){const p=n[l];if(Array.isArray(p))for(let y=0;y<p.length;y++)pr(u,c++,p[y]);else pr(u,c++,p)}}function pr(u,n,c){u.bindAt(n,c)}class Hr extends Error{name;code;rawCode;constructor(n,c,l){super(n),this.name="SqliteError",this.code=c,this.rawCode=l,Error.captureStackTrace(this,Hr)}}const rr=1,tr=2,nr=3,Eu={TypeError},ut="[TURSO_CONVERT_TYPE]";function Fr(u){return(u.code??"").startsWith(ut)?mu(u.code.substring(ut.length),u.message):new Hr(u.message,u.code,u.rawCode)}function mu(u,n){const c=Eu[u];if(!c)throw new Error(`unknown error type ${u} from Turso`);return new c(n)}class wu{db;memory;open;constructor(n,c={}){c.readonly=c.readonly===void 0?!1:c.readonly,c.fileMustExist=c.fileMustExist===void 0?!1:c.fileMustExist,c.timeout=c.timeout===void 0?0:c.timeout;const l=new _u(n);this.initialize(l,c.path,c.readonly)}static create(){return Object.create(this.prototype)}initialize(n,c,l){this.db=n,this.memory=n.memory,Object.defineProperties(this,{inTransaction:{get(){throw new Error("not implemented")}},name:{get(){return c}},readonly:{get(){return l}},open:{get(){return this.db.open}}})}prepare(n){if(!this.open)throw new TypeError("The database connection is not open");if(!n)throw new RangeError("The supplied SQL string contains no statements");try{return new bu(this.db.prepare(n),this)}catch(c){throw Fr(c)}}transaction(n){if(typeof n!="function")throw new TypeError("Expected first argument to be a function");const c=this,l=y=>(...h)=>{c.exec("BEGIN "+y);try{const T=n(...h);return c.exec("COMMIT"),T}catch(T){throw c.exec("ROLLBACK"),T}},p={default:{value:l("")},deferred:{value:l("DEFERRED")},immediate:{value:l("IMMEDIATE")},exclusive:{value:l("EXCLUSIVE")},database:{value:this,enumerable:!0}};return Object.defineProperties(p.default.value,p),Object.defineProperties(p.deferred.value,p),Object.defineProperties(p.immediate.value,p),Object.defineProperties(p.exclusive.value,p),p.default.value}pragma(n,c){if(c==null&&(c={}),typeof n!="string")throw new TypeError("Expected first argument to be a string");if(typeof c!="object")throw new TypeError("Expected second argument to be an options object");const l=`PRAGMA ${n}`;return this.prepare(l).all()}backup(n,c){throw new Error("not implemented")}serialize(n){throw new Error("not implemented")}function(n,c,l){throw new Error("not implemented")}aggregate(n,c){throw new Error("not implemented")}table(n,c){throw new Error("not implemented")}loadExtension(n){throw new Error("not implemented")}maxWriteReplicationIndex(){throw new Error("not implemented")}exec(n){if(!this.open)throw new TypeError("The database connection is not open");try{this.db.batch(n)}catch(c){throw Fr(c)}}interrupt(){throw new Error("not implemented")}close(){this.db.close()}}class bu{stmt;db;constructor(n,c){this.stmt=n,this.db=c}raw(n){return this.stmt.raw(n),this}pluck(n){return this.stmt.pluck(n),this}get source(){throw new Error("not implemented")}get reader(){throw new Error("not implemented")}get database(){return this.db}async run(...n){const c=this.db.db.totalChanges();for(this.stmt.reset(),je(this.stmt,n);;){const y=this.stmt.step();if(y===nr){await this.db.db.ioLoopAsync();continue}if(y===tr)break}const l=this.db.db.lastInsertRowid();return{changes:this.db.db.totalChanges()===c?0:this.db.db.changes(),lastInsertRowid:l}}async get(...n){for(this.stmt.reset(),je(this.stmt,n);;){const c=this.stmt.step();if(c===nr){await this.db.db.ioLoopAsync();continue}if(c===tr)return;if(c===rr)return this.stmt.row()}}async*iterate(...n){for(this.stmt.reset(),je(this.stmt,n);;){const c=this.stmt.step();if(c===nr){await this.db.db.ioLoopAsync();continue}if(c===tr)break;c===rr&&(yield this.stmt.row())}}async all(...n){this.stmt.reset(),je(this.stmt,n);const c=[];for(;;){const l=this.stmt.step();if(l===nr){await this.db.db.ioLoopAsync();continue}if(l===tr)break;l===rr&&c.push(this.stmt.row())}return c}interrupt(){throw new Error("not implemented")}columns(){throw new Error("not implemented")}bind(...n){try{return je(this.stmt,n),this}catch(c){throw Fr(c)}}}const Au=1;function Iu(u){let n={promise:null,finished:!1};return n.promise=u.finally(()=>n.finished=!0),n}function Su(u){return new Promise(n=>setTimeout(n,u))}async function Lu(u,n){if(u.isMemory)return u.value;if(typeof window>"u"){const{promises:c}=await dt(async()=>{const{promises:l}=await Promise.resolve().then(()=>Ht);return{promises:l}},void 0);try{return await c.readFile(n)}catch(l){if(l.code==="ENOENT")return null;throw l}}else{const c=localStorage.getItem(n);return c!=null?new TextEncoder().encode(c):null}}async function Tu(u,n,c){if(u.isMemory){u.value=c;return}const l=new Uint8Array(c);if(typeof window>"u"){const{promises:p}=await dt(async()=>{const{promises:D}=await Promise.resolve().then(()=>Ht);return{promises:D}},void 0),y=Math.floor(Date.now()/1e3),h=Math.floor(Math.random()*1e9),T=`${n}.tmp.${y}.${h}`;await p.writeFile(T,l),await p.rename(T,n)}else localStorage.setItem(n,new TextDecoder().decode(l))}async function Cu(u,n){const c=n.request(),l=n.completion();if(c.type=="Http")try{const p=await fetch(`${u.url}${c.path}`,{method:c.method,headers:u.headers,body:c.body!=null?new Uint8Array(c.body):null});l.status(p.status);const y=p.body.getReader();for(;;){const{done:h,value:T}=await y.read();if(h){l.done();break}l.push(T)}}catch(p){l.poison(`fetch error: ${p}`)}else if(c.type=="FullRead")try{const p=await Lu(u.metadata,c.path);p!=null&&l.push(p),l.done()}catch(p){l.poison(`metadata read error: ${p}`)}else if(c.type=="FullWrite")try{await Tu(u.metadata,c.path,c.content),l.done()}catch(p){l.poison(`metadata write error: ${p}`)}}async function ir(u,n,c){let l=[];for(;c.resume(null)!==Au;){for(let y=n.protocolIo();y!=null;y=n.protocolIo())l.push(Iu(Cu(u,y)));const p=l.length==0?Promise.resolve():Promise.race([Su(u.preemptionMs),...l.map(y=>y.promise)]);await Promise.all([n.ioLoopAsync(),p]),l=l.filter(y=>!y.finished)}}async function ku(u){const n=new cu({path:u.path,clientName:u.clientName}),c={url:u.url,headers:{...u.authToken!=null&&{Authorization:`Bearer ${u.authToken}`},...u.encryptionKey!=null&&{"x-turso-encryption-key":u.encryptionKey}},metadata:u.path==":memory:"?{isMemory:!0,value:null}:{isMemory:!1},preemptionMs:1};await ir(c,n,n.init());const l=n.open(),p=wu.create();return p.initialize(l,u.path,!1),p.sync=async function(){await ir(c,n,n.sync())},p.pull=async function(){await ir(c,n,n.pull())},p.push=async function(){await ir(c,n,n.push())},p}const Du="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let ct=(u=21)=>{let n="",c=crypto.getRandomValues(new Uint8Array(u|=0));for(;u--;)n+=Du[c[u]&63];return n};var Oe=null,ge=document.getElementById("canvas");const ft=800,Bu=10,lt=120;function Wt(u,n,c,l){return Math.sqrt(Math.pow(u-c,2)+Math.pow(n-l,2))}function Dr(u,n,c,l,p){let y=Wt(u,n,c,l);if(y<1e-6)return[u,n];let h=(c-u)/y*Math.min(y,p*ft),T=(l-n)/y*Math.min(y,p*ft);return[u+h,n+T]}var we=null,Re=null,Be=null,Se=!1;async function ar(u){for(;Se;)await new Promise(n=>setTimeout(n,1));Se=!0;try{await Oe.exec(u)}finally{Se=!1}}async function Br(u){for(;Se;)await new Promise(n=>setTimeout(n,1));Se=!0;try{return await(await Oe.prepare(u)).all()}finally{Se=!1}}async function Ru(u){if(Oe==null)return;Se=!0;for(const l of document.getElementsByClassName("element"))l.classList.remove("active");if(document.getElementById("pending")?.remove(),we!=null&&Be!=null){let l=document.getElementById(`point-${we}`),p=parseInt(l.getAttribute("cx")),y=parseInt(l.getAttribute("cy"));if(Wt(p,y,Be[0],Be[1])>Bu){let h=document.createElementNS("http://www.w3.org/2000/svg","line");h.id="pending",h.setAttribute("x1",`${p}`),h.setAttribute("y1",`${y}`),h.setAttribute("x2",`${Be[0]}`),h.setAttribute("y2",`${Be[1]}`),h.setAttribute("stroke","black"),ge?.prepend(h)}}let n=await(await Oe.prepare(`
      SELECT edges.*, a.x as x1, a.y as y1, b.x as x2, b.y as y2
      FROM edges 
      JOIN points a ON a.id = edges.a 
      JOIN points b ON b.id = edges.b
  `)).all();for(const l of n){let p=`edge-${l.id}`,y=document.getElementById(p);if(y==null)y=document.createElementNS("http://www.w3.org/2000/svg","line"),y.id=p,y.classList.add("element"),y.classList.toggle(p),y.classList.toggle(`point-${l.a}`),y.classList.toggle(`point-${l.b}`),ge.prepend(y);else{let h=parseInt(y.getAttribute("x1")),T=parseInt(y.getAttribute("x2")),D=parseInt(y.getAttribute("y1")),R=parseInt(y.getAttribute("y2"));l.a!=Re&&l.b!=Re&&([l.x1,l.y1]=Dr(h,D,l.x1,l.y1,u),[l.x2,l.y2]=Dr(T,R,l.x2,l.y2,u))}y.classList.add("active"),y.setAttribute("x1",`${l.x1}`),y.setAttribute("y1",`${l.y1}`),y.setAttribute("x2",`${l.x2}`),y.setAttribute("y2",`${l.y2}`),y.setAttribute("stroke","black")}let c=await(await Oe.prepare("SELECT * FROM points")).all();for(const l of c){let p=`point-${l.id}`,y=document.getElementById(p);if(y==null)y=document.createElementNS("http://www.w3.org/2000/svg","circle"),y.id=p,y.classList.add("element"),y.classList.toggle(p),ge.appendChild(y);else{let h=parseInt(y.getAttribute("cx")),T=parseInt(y.getAttribute("cy"));l.id!=Re&&([l.x,l.y]=Dr(h,T,l.x,l.y,u))}y.classList.add("active"),y.setAttribute("cx",`${l.x}`),y.setAttribute("cy",`${l.y}`),y.setAttribute("r",`${l.size}`),y.setAttribute("fill",l.color)}for(const l of document.getElementsByClassName("element"))l.classList.contains("active")||l.remove()}async function jt(){try{await Oe.sync()}finally{setTimeout(jt,(1+Math.random())*1e3)}}async function Ou(){Oe=await ku({path:":memory:",url:"https://graph1-sivukhin.aws-eu-north-1.turso.io",authToken:"eyJhbGciOiJFZERTQSIsInR5cCI6IkpXVCJ9.eyJnaWQiOiI3NzM4YzQ4OC04YTE5LTQ0NTItOTFhOC0wMjQzZWY1YjIzYjAiLCJpYXQiOjE3NTUwMjk4NzgsInJpZCI6IjRkYjMxZjc3LWJkMDQtNGI2Zi1hYzYxLTg2NmE1NGJmMmI5ZCJ9.APXLUKukQFdODX8RZrem5JEmQGJ1A8QUtWkXI4OhHjREV_r3yC4YiAuY2yC153-uZyzzM3Qjsspl8RZoarWSCw",clientName:"turso-graph"}),document.getElementById("status").innerText="ready",jt(),setInterval(()=>{Se||Ru(1/lt).finally(()=>Se=!1)},1e3/lt),addEventListener("dblclick",async n=>{let c=n.pageX-ge.getBoundingClientRect().x,l=n.pageY-ge.getBoundingClientRect().y;await ar(`DELETE FROM points WHERE (x - ${c})*(x - ${c}) + (y - ${l})*(y - ${l}) <= size*size`)}),addEventListener("click",async n=>{if(we!=null)return;let c=n.pageX-ge.getBoundingClientRect().x,l=n.pageY-ge.getBoundingClientRect().y;(await Br(`SELECT id FROM points WHERE (x - ${c})*(x - ${c}) + (y - ${l})*(y - ${l}) <= size*size`)).length==0&&await ar(`INSERT INTO points VALUES ('${ct(8)}', ${c}, ${l}, 'lightcoral', 10)`)}),addEventListener("mousedown",async n=>{let c=n.pageX-ge.getBoundingClientRect().x,l=n.pageY-ge.getBoundingClientRect().y,p=await Br(`SELECT id FROM points WHERE (x - ${c})*(x - ${c}) + (y - ${l})*(y - ${l}) <= size*size`);p.length==1&&(we=p[0].id,Be=[c,l])}),addEventListener("mouseup",async n=>{if(we==null)return;let c=n.pageX-ge.getBoundingClientRect().x,l=n.pageY-ge.getBoundingClientRect().y,p=await Br(`SELECT id FROM points WHERE (x - ${c})*(x - ${c}) + (y - ${l})*(y - ${l}) <= size*size`);if(p.length==0){we=null;return}we==p[0].id?Re=Re==null?we:null:await ar(`INSERT INTO edges VALUES ('${ct(8)}', '${we}', '${p[0].id}')`),we=null}),addEventListener("mousemove",async n=>{let c=n.pageX-ge.getBoundingClientRect().x,l=n.pageY-ge.getBoundingClientRect().y;Be=[c,l],Re!=null&&await ar(`UPDATE points SET x = ${c}, y = ${l} WHERE id = '${Re}'`)})}Ou();const Ht=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));
