(function(){"use strict";var fr=typeof WebAssembly<"u"?WebAssembly:typeof WXWebAssembly<"u"?WXWebAssembly:void 0,Jr=!1;function lr(l){return typeof l?.postMessage=="function"?l.postMessage:typeof postMessage=="function"?postMessage:void 0}function qr(l,c,g){var p=new Int32Array(l);if(Atomics.store(p,0,c),c>1&&g){var E=g.name,f=g.message,C=g.stack,F=new TextEncoder().encode(E),D=new TextEncoder().encode(f),V=new TextEncoder().encode(C);Atomics.store(p,1,F.length),Atomics.store(p,2,D.length),Atomics.store(p,3,V.length);var k=new Uint8Array(l);k.set(F,16),k.set(D,16+F.length),k.set(V,16+F.length+D.length)}}function Kr(l){var c,g,p=new Int32Array(l),E=Atomics.load(p,0);if(E<=1)return null;var f=Atomics.load(p,1),C=Atomics.load(p,2),F=Atomics.load(p,3),D=new Uint8Array(l),V=D.slice(16,16+f),k=D.slice(16+f,16+f+C),s=D.slice(16+f+C,16+f+C+F),v=new TextDecoder().decode(V),h=new TextDecoder().decode(k),y=new TextDecoder().decode(s),m=(c=globalThis[v])!==null&&c!==void 0?c:v==="RuntimeError"&&(g=fr.RuntimeError)!==null&&g!==void 0?g:Error,w=new m(h);return Object.defineProperty(w,"stack",{value:y,writable:!0,enumerable:!1,configurable:!0}),w}function Yr(l){return typeof SharedArrayBuffer=="function"&&l instanceof SharedArrayBuffer||Object.prototype.toString.call(l)==="[object SharedArrayBuffer]"}function $r(l){try{return l instanceof fr.RuntimeError}catch{return!1}}function Le(l,c){return{__emnapi__:{type:l,payload:c}}}var Qr=536870911;function dr(l){if(l){if(!Yr(l.buffer))throw new Error("Multithread features require shared wasm memory. Try to compile with `-matomics -mbulk-memory` and use `--import-memory --shared-memory` during linking, then create WebAssembly.Memory with `shared: true` option")}else if(typeof SharedArrayBuffer>"u")throw new Error("Current environment does not support SharedArrayBuffer, threads are not available!")}function Zr(l){var c;if(typeof l=="boolean")return l?{size:0,strict:!1}:!1;if(typeof l=="number"){if(!(l>=0))throw new RangeError("reuseWorker: size must be a non-negative integer");return{size:l,strict:!1}}if(!l)return!1;var g=(c=Number(l.size))!==null&&c!==void 0?c:0,p=!!l.strict;if(!(g>0)&&p)throw new RangeError("reuseWorker: size must be set to positive integer if strict is set to true");return{size:g,strict:p}}var Ne=0,_r=function(){function l(c){var g;if(this.unusedWorkers=[],this.runningWorkers=[],this.pthreads=Object.create(null),this.wasmModule=null,this.wasmMemory=null,this.messageEvents=new WeakMap,!c)throw new TypeError("ThreadManager(): options is not provided");"childThread"in c?this._childThread=!!c.childThread:this._childThread=!1,this._childThread?(this._onCreateWorker=void 0,this._reuseWorker=!1,this._beforeLoad=void 0):(this._onCreateWorker=c.onCreateWorker,this._reuseWorker=Zr(c.reuseWorker),this._beforeLoad=c.beforeLoad),this.printErr=(g=c.printErr)!==null&&g!==void 0?g:console.error.bind(console)}return Object.defineProperty(l.prototype,"nextWorkerID",{get:function(){return Ne},enumerable:!1,configurable:!0}),l.prototype.init=function(){this._childThread||this.initMainThread()},l.prototype.initMainThread=function(){this.preparePool()},l.prototype.preparePool=function(){if(this._reuseWorker&&this._reuseWorker.size)for(var c=this._reuseWorker.size;c--;)this.allocateUnusedWorker()},l.prototype.shouldPreloadWorkers=function(){return!this._childThread&&this._reuseWorker&&this._reuseWorker.size>0},l.prototype.loadWasmModuleToAllWorkers=function(){for(var c=this,g=Array(this.unusedWorkers.length),p=function(C){var F=E.unusedWorkers[C];g[C]=E.loadWasmModuleToWorker(F).then(function(D){return D},function(D){throw D})},E=this,f=0;f<this.unusedWorkers.length;++f)p(f);return Promise.all(g).catch(function(C){throw c.terminateAllThreads(),C})},l.prototype.preloadWorkers=function(){return this.shouldPreloadWorkers()?this.loadWasmModuleToAllWorkers():Promise.resolve([])},l.prototype.setup=function(c,g){this.wasmModule=c,this.wasmMemory=g},l.prototype.markId=function(c){if(c.__emnapi_tid)return c.__emnapi_tid;var g=Ne+43;return Ne=(Ne+1)%(Qr-42),this.pthreads[g]=c,c.__emnapi_tid=g,g},l.prototype.returnWorkerToPool=function(c){var g=c.__emnapi_tid;g!==void 0&&delete this.pthreads[g],this.unusedWorkers.push(c),this.runningWorkers.splice(this.runningWorkers.indexOf(c),1),delete c.__emnapi_tid},l.prototype.loadWasmModuleToWorker=function(c,g){var p=this;if(c.whenLoaded)return c.whenLoaded;var E=this.printErr,f=this._beforeLoad,C=this;return c.whenLoaded=new Promise(function(F,D){var V=function(s){var v="worker sent an error!";if(c.__emnapi_tid!==void 0&&(v="worker (tid = "+c.__emnapi_tid+") sent an error!"),"message"in s){if(E(v+" "+s.message),s.message.indexOf("RuntimeError")!==-1||s.message.indexOf("unreachable")!==-1)try{C.terminateAllThreads()}catch{}}else E(v);throw D(s),s},k=function(s){if(s.__emnapi__){var v=s.__emnapi__.type,h=s.__emnapi__.payload;v==="loaded"?(c.loaded=!0,F(c)):v==="cleanup-thread"&&h.tid in p.pthreads&&p.cleanThread(c,h.tid)}};c.onmessage=function(s){k(s.data),p.fireMessageEvent(c,s)},c.onerror=V,typeof f=="function"&&f(c);try{c.postMessage(Le("load",{wasmModule:p.wasmModule,wasmMemory:p.wasmMemory,sab:g}))}catch(s){throw dr(p.wasmMemory),s}}),c.whenLoaded},l.prototype.allocateUnusedWorker=function(){var c=this._onCreateWorker;if(typeof c!="function")throw new TypeError("`options.onCreateWorker` is not provided");var g=c({type:"thread",name:"emnapi-pthread"});return this.unusedWorkers.push(g),g},l.prototype.getNewWorker=function(c){if(this._reuseWorker){if(this.unusedWorkers.length===0){if(this._reuseWorker.strict){var g=this.printErr;g(`Tried to spawn a new thread, but the thread pool is exhausted.
This might result in a deadlock unless some threads eventually exit or the code explicitly breaks out to the event loop.`);return}var p=this.allocateUnusedWorker();this.loadWasmModuleToWorker(p,c)}return this.unusedWorkers.pop()}var E=this.allocateUnusedWorker();return this.loadWasmModuleToWorker(E,c),this.unusedWorkers.pop()},l.prototype.cleanThread=function(c,g,p){if(!p&&this._reuseWorker)this.returnWorkerToPool(c);else{delete this.pthreads[g];var E=this.runningWorkers.indexOf(c);E!==-1&&this.runningWorkers.splice(E,1),this.terminateWorker(c),delete c.__emnapi_tid}},l.prototype.terminateWorker=function(c){var g=this,p,E=c.__emnapi_tid;c.terminate(),(p=this.messageEvents.get(c))===null||p===void 0||p.clear(),this.messageEvents.delete(c),c.onmessage=function(f){if(f.data.__emnapi__){var C=g.printErr;C('received "'+f.data.__emnapi__.type+'" command from terminated worker: '+E)}}},l.prototype.terminateAllThreads=function(){for(var c=0;c<this.runningWorkers.length;++c)this.terminateWorker(this.runningWorkers[c]);for(var c=0;c<this.unusedWorkers.length;++c)this.terminateWorker(this.unusedWorkers[c]);this.unusedWorkers=[],this.runningWorkers=[],this.pthreads=Object.create(null),this.preparePool()},l.prototype.addMessageEventListener=function(c,g){var p=this.messageEvents.get(c);return p||(p=new Set,this.messageEvents.set(c,p)),p.add(g),function(){p?.delete(g)}},l.prototype.fireMessageEvent=function(c,g){var p=this.messageEvents.get(c);if(p){var E=this.printErr;p.forEach(function(f){try{f(g)}catch(C){E(C.stack)}})}},l}(),vr=Symbol("kIsProxy");function gr(l,c){if(l[vr])return l;var g=l.exports,p=function(D){for(var V=["apply","construct","defineProperty","deleteProperty","get","getOwnPropertyDescriptor","getPrototypeOf","has","isExtensible","ownKeys","preventExtensions","set","setPrototypeOf"],k={},s=function(h){var y=V[h];k[y]=function(){var m=Array.prototype.slice.call(arguments,1);return m.unshift(D),Reflect[y].apply(Reflect,m)}},v=0;v<V.length;v++)s(v);return k},E=p(g),f=function(){},C=function(){return 0};E.get=function(D,V,k){var s;return V==="memory"?(s=typeof c=="function"?c():c)!==null&&s!==void 0?s:Reflect.get(g,V,k):V==="_initialize"?V in g?f:void 0:V==="_start"?V in g?C:void 0:Reflect.get(g,V,k)},E.has=function(D,V){return V==="memory"?!0:Reflect.has(g,V)};var F=new Proxy(Object.create(null),E);return new Proxy(l,{get:function(D,V,k){return V==="exports"?F:V===vr?!0:Reflect.get(D,V,k)}})}var hr=new WeakMap,Xr=function(){function l(c){var g=this;if(!c)throw new TypeError("WASIThreads(): options is not provided");if(!c.wasi)throw new TypeError("WASIThreads(): options.wasi is not provided");hr.set(this,new WeakSet);var p=c.wasi;et(this,p),this.wasi=p,"childThread"in c?this.childThread=!!c.childThread:this.childThread=!1,this.PThread=void 0,"threadManager"in c?typeof c.threadManager=="function"?this.PThread=c.threadManager():this.PThread=c.threadManager:this.childThread||(this.PThread=new _r(c),this.PThread.init());var E=!1;"waitThreadStart"in c&&(E=typeof c.waitThreadStart=="number"?c.waitThreadStart:!!c.waitThreadStart);var f=lr(c);if(this.childThread&&typeof f!="function")throw new TypeError("options.postMessage is not a function");this.postMessage=f;var C=!!c.wasm64,F=function(V){if(V.data.__emnapi__){var k=V.data.__emnapi__.type,s=V.data.__emnapi__.payload;k==="spawn-thread"?D(s.startArg,s.errorOrTid):k==="terminate-all-threads"&&g.terminateAllThreads()}},D=function(V,k){var s,v=6,h=k!==void 0;try{dr(g.wasmMemory)}catch(Y){if((s=g.PThread)===null||s===void 0||s.printErr(Y.stack),h){var y=new Int32Array(g.wasmMemory.buffer,k,2);return Atomics.store(y,0,1),Atomics.store(y,1,v),Atomics.notify(y,1),1}else return-v}if(!h){var m=g.wasmInstance.exports.malloc;if(k=C?Number(m(BigInt(8))):m(8),!k)return-48}var w=g.wasmInstance.exports.free,b=C?function(Y){w(BigInt(Y))}:w,S=new Int32Array(g.wasmMemory.buffer,k,2);if(Atomics.store(S,0,0),Atomics.store(S,1,0),g.childThread){f(Le("spawn-thread",{startArg:V,errorOrTid:k})),Atomics.wait(S,1,0);var R=Atomics.load(S,0),O=Atomics.load(S,1);return h?R:(b(k),R?-O:O)}var B=E||E===0,N;B&&(N=new Int32Array(new SharedArrayBuffer(8208)),Atomics.store(N,0,0));var x,M,j=g.PThread;try{if(x=j.getNewWorker(N),!x)throw new Error("failed to get new worker");if(j.addMessageEventListener(x,F),M=j.markId(x),x.postMessage(Le("start",{tid:M,arg:V,sab:N})),B){if(typeof E=="number"){var J=Atomics.wait(N,0,0,E);if(J==="timed-out"){try{j.cleanThread(x,M,!0)}catch{}throw new Error("Spawning thread timed out. Please check if the worker is created successfully and if message is handled properly in the worker.")}}else Atomics.wait(N,0,0);var Q=Atomics.load(N,0);if(Q>1){try{j.cleanThread(x,M,!0)}catch{}throw Kr(N.buffer)}}}catch(Y){return Atomics.store(S,0,1),Atomics.store(S,1,v),Atomics.notify(S,1),j?.printErr(Y.stack),h?1:(b(k),-v)}return Atomics.store(S,0,0),Atomics.store(S,1,M),Atomics.notify(S,1),j.runningWorkers.push(x),B||x.whenLoaded.catch(function(Y){throw delete x.whenLoaded,j.cleanThread(x,M,!0),Y}),h?0:(b(k),M)};this.threadSpawn=D}return l.prototype.getImportObject=function(){return{wasi:{"thread-spawn":this.threadSpawn}}},l.prototype.setup=function(c,g,p){p??(p=c.exports.memory),this.wasmInstance=c,this.wasmMemory=p,this.PThread&&this.PThread.setup(g,p)},l.prototype.preloadWorkers=function(){return this.PThread?this.PThread.preloadWorkers():Promise.resolve([])},l.prototype.initialize=function(c,g,p){var E=c.exports;p??(p=E.memory),this.childThread&&(c=gr(c,p)),this.setup(c,g,p);var f=this.wasi;if("_start"in E&&typeof E._start=="function")if(this.childThread){f.start(c);try{var C=pr(f,"kStarted");f[C]=!1}catch{}}else rt(f,c);else f.initialize(c);return c},l.prototype.start=function(c,g,p){var E=c.exports;p??(p=E.memory),this.childThread&&(c=gr(c,p)),this.setup(c,g,p);var f=this.wasi.start(c);return{exitCode:f,instance:c}},l.prototype.terminateAllThreads=function(){var c;this.childThread?this.postMessage(Le("terminate-all-threads",{})):(c=this.PThread)===null||c===void 0||c.terminateAllThreads()},l}();function et(l,c){var g=hr.get(l);if(!g.has(c)){var p=l,E=c.wasiImport;if(E){var f=E.proc_exit;E.proc_exit=function(F){return p.terminateAllThreads(),f.call(this,F)}}if(!p.childThread){var C=c.start;typeof C=="function"&&(c.start=function(F){try{return C.call(this,F)}catch(D){throw $r(D)&&p.terminateAllThreads(),D}})}g.add(c)}}function pr(l,c){var g=Object.getOwnPropertySymbols(l),p=function(E){return function(f){return f.description?f.description===E:f.toString()==="Symbol(".concat(E,")")}};return Array.isArray(c)?c.map(function(E){return g.filter(p(E))[0]}):g.filter(p(c))[0]}function rt(l,c){var g=pr(l,["kInstance","kSetMemory"]),p=g[0],E=g[1];l[p]=c,l[E](c.exports.memory)}var tt=function(){function l(c){var g=lr(c);if(typeof g!="function")throw new TypeError("options.postMessage is not a function");this.postMessage=g,this.onLoad=c?.onLoad,this.instance=void 0,this.messagesBeforeLoad=[]}return l.prototype.instantiate=function(c){if(typeof this.onLoad=="function")return this.onLoad(c);throw new Error("ThreadMessageHandler.prototype.instantiate is not implemented")},l.prototype.handle=function(c){var g=this,p;if(!((p=c?.data)===null||p===void 0)&&p.__emnapi__){var E=c.data.__emnapi__.type,f=c.data.__emnapi__.payload;E==="load"?this._load(f):E==="start"&&this.handleAfterLoad(c,function(){g._start(f)})}},l.prototype._load=function(c){var g=this;if(this.instance===void 0){var p;try{p=this.instantiate(c)}catch(f){this._loaded(f,null,c);return}var E=p&&"then"in p?p.then:void 0;typeof E=="function"?E.call(p,function(f){g._loaded(null,f,c)},function(f){g._loaded(f,null,c)}):this._loaded(null,p,c)}},l.prototype._start=function(c){var g=this.instance.exports.wasi_thread_start;if(typeof g!="function"){var p=new TypeError("wasi_thread_start is not exported");throw ke(c.sab,2,p),p}var E=this.postMessage,f=c.tid,C=c.arg;ke(c.sab,1),g(f,C),E(Le("cleanup-thread",{tid:f}))},l.prototype._loaded=function(c,g,p){if(c)throw ke(p.sab,2,c),c;if(g==null){var E=new TypeError("onLoad should return an object");throw ke(p.sab,2,E),E}var f=g.instance;if(!f){var C=new TypeError('onLoad should return an object which includes "instance"');throw ke(p.sab,2,C),C}this.instance=f;var F=this.postMessage;F(Le("loaded",{}));var D=this.messagesBeforeLoad;this.messagesBeforeLoad=[];for(var V=0;V<D.length;V++){var k=D[V];this.handle({data:k})}},l.prototype.handleAfterLoad=function(c,g){this.instance!==void 0?g.call(this,c):this.messagesBeforeLoad.push(c.data)},l}();function ke(l,c,g){l&&(qr(l.buffer,c,g),Atomics.notify(l,0))}var Je=function(l,c){return Je=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,p){g.__proto__=p}||function(g,p){for(var E in p)Object.prototype.hasOwnProperty.call(p,E)&&(g[E]=p[E])},Je(l,c)};function nt(l,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");Je(l,c);function g(){this.constructor=l}l.prototype=c===null?Object.create(c):(g.prototype=c.prototype,new g)}typeof SuppressedError=="function"&&SuppressedError;var ve=typeof WebAssembly<"u"?WebAssembly:typeof WXWebAssembly<"u"?WXWebAssembly:void 0;function Er(l){if(l&&typeof l!="object")throw new TypeError("imports must be an object or undefined");return!0}function De(l,c){if(!l)throw new TypeError("Invalid wasm source");Er(c),c=c??{};try{var g=typeof l=="object"&&l!==null&&"then"in l?l.then:void 0;if(typeof g=="function")return g.call(l,function(E){return De(E,c)})}catch{}if(l instanceof ArrayBuffer||ArrayBuffer.isView(l))return ve.instantiate(l,c);if(l instanceof ve.Module)return ve.instantiate(l,c).then(function(E){return{instance:E,module:l}});if(typeof Response<"u"&&l instanceof Response)return l.arrayBuffer().then(function(E){return ve.instantiate(E,c)});var p=typeof l=="string";if(p||typeof URL<"u"&&l instanceof URL){if(p&&typeof wx<"u"&&typeof __wxConfig<"u")return ve.instantiate(l,c);if(typeof fetch!="function")throw new TypeError("wasm source can not be a string or URL in this environment");if(typeof ve.instantiateStreaming=="function")try{return ve.instantiateStreaming(fetch(l),c).catch(function(){return De(fetch(l),c)})}catch{return De(fetch(l),c)}else return De(fetch(l),c)}throw new TypeError("Invalid wasm source")}function at(l,c){if(!l)throw new TypeError("Invalid wasm source");Er(c),c=c??{};var g;if(l instanceof ArrayBuffer||ArrayBuffer.isView(l))g=new ve.Module(l);else if(l instanceof WebAssembly.Module)g=l;else throw new TypeError("Invalid wasm source");var p=new ve.Instance(g,c),E={instance:p,module:g};return E}function it(l){var c=function(){var g=!!l.childThread,p=typeof l.waitThreadStart=="number"?l.waitThreadStart:!!l.waitThreadStart,E,f,C,F,D;function V(e){throw typeof ve.RuntimeError=="function"?new ve.RuntimeError(e):Error(e)}var k={imports:{env:{},napi:{},emnapi:{}},exports:{},emnapi:{},loaded:!1,filename:"",childThread:g,initWorker:void 0,executeAsyncWork:void 0,waitThreadStart:p,PThread:void 0,init:function(e){if(k.loaded)return k.exports;if(!e)throw new TypeError("Invalid napi init options");var a=e.instance;if(!a?.exports)throw new TypeError("Invalid wasm instance");E=a;var t=a.exports,r=e.module,n=e.memory||t.memory,i=e.table||t.__indirect_function_table;if(!(r instanceof ve.Module))throw new TypeError("Invalid wasm module");if(!(n instanceof ve.Memory))throw new TypeError("Invalid wasm memory");if(!(i instanceof ve.Table))throw new TypeError("Invalid wasm table");if(f=n,C=i,typeof t.malloc!="function")throw new TypeError("malloc is not exported");if(typeof t.free!="function")throw new TypeError("free is not exported");if(F=t.malloc,D=t.free,!k.childThread){var o=8,u=a.exports.node_api_module_get_api_version_v1;typeof u=="function"&&(o=u());var d=k.envObject||(k.envObject=s.createEnv(k.filename,o,function(I){return C.get(I)},function(I){return C.get(I)},V,v)),_=s.openScope(d);try{d.callIntoModule(function(I){var A=k.exports,P=_.add(A),U=a.exports.napi_register_wasm_v1,W=U(I.id,P.id);k.exports=W?s.handleStore.get(W).value:A})}finally{s.closeScope(d,_)}return k.loaded=!0,delete k.envObject,k.exports}}},s,v,h=void 0,y;if(g){s=l?.context;var w=typeof l.postMessage=="function"?l.postMessage:typeof postMessage=="function"?postMessage:void 0;if(typeof w!="function")throw new TypeError("No postMessage found");k.postMessage=w}else{var m=l.context;if(typeof m!="object"||m===null)throw new TypeError("Invalid `options.context`. Use `import { getDefaultContext } from '@emnapi/runtime'`");s=m}if(typeof l.filename=="string"&&(k.filename=l.filename),typeof l.onCreateWorker=="function"&&(h=l.onCreateWorker),typeof l.print=="function"?l.print:console.log.bind(console),typeof l.printErr=="function"?y=l.printErr:y=console.warn.bind(console),"nodeBinding"in l){var b=l.nodeBinding;if(typeof b!="object"||b===null)throw new TypeError("Invalid `options.nodeBinding`. Use @emnapi/node-binding package");v=b}var S=0;if("asyncWorkPoolSize"in l){if(typeof l.asyncWorkPoolSize!="number")throw new TypeError("options.asyncWorkPoolSize must be a integer");S=l.asyncWorkPoolSize>>0,S>1024?S=1024:S<-1024&&(S=-1024)}var R=g?!1:S<=0;function O(){return Math.abs(S)}k.imports.env._emnapi_async_work_pool_size=O;function B(e){if(!e)return!1;if(e._emnapiSendListener)return!0;var a=function(r){var n=r.data,i=n.__emnapi__;if(i&&i.type==="async-send")if(g){var o=k.postMessage;o({__emnapi__:i})}else{var u=i.payload.callback;C.get(u)(i.payload.data)}},t=function(){e.removeEventListener("message",a,!1),delete e._emnapiSendListener};return e._emnapiSendListener={handler:a,dispose:t},e.addEventListener("message",a,!1),!0}k.emnapi.addSendListener=B;var N=new _r(g?{printErr:y,childThread:!0}:{printErr:y,beforeLoad:function(e){B(e)},reuseWorker:l.reuseWorker,onCreateWorker:h});k.PThread=N;function x(e,a,t,r){var n=s.envStore.get(e);return n.setLastError(a,t,r)}function M(e){var a=s.envStore.get(e);return a.clearLastError()}function j(e,a,t){var r=[0,0,0],n=new DataView(f.buffer);n.setUint32(e,r[0],!0),n.setUint32(a,r[1],!0),n.setUint32(t,r[2],!0)}function J(){}function Q(){}function Y(e,a){s.feature.setImmediate(function(){C.get(e)(a)})}function Z(e,a){Promise.resolve().then(function(){C.get(e)(a)})}function le(e,a,t,r,n){var i=s.envStore.get(a),o=s.openScope(i);try{i.callbackIntoModule(!!e,function(){C.get(t)(a,r)})}catch(u){throw s.closeScope(i,o),n&&s.closeScope(i),u}s.closeScope(i,o)}function ge(e,a,t,r,n){var i=s.envStore.get(a);i.callFinalizerInternal(e,t,r,n)}function me(){s.increaseWaitingRequestCounter()}function Re(){s.decreaseWaitingRequestCounter()}function be(e,a){var t,r=[a>>>0,(t=a,+Math.abs(t)>=1?t>0?(Math.min(+Math.floor(t/4294967296),4294967295)|0)>>>0:~~+Math.ceil((t-+(~~t>>>0))/4294967296)>>>0:0)],n=new DataView(f.buffer);n.setInt32(e,r[0],!0),n.setInt32(e+4,r[1],!0)}var we=Object.freeze({__proto__:null,$emnapiSetValueI64:be,_emnapi_call_finalizer:ge,_emnapi_callback_into_module:le,_emnapi_ctx_decrease_waiting_request_counter:Re,_emnapi_ctx_increase_waiting_request_counter:me,_emnapi_get_node_version:j,_emnapi_next_tick:Z,_emnapi_runtime_keepalive_pop:Q,_emnapi_runtime_keepalive_push:J,_emnapi_set_immediate:Y,napi_clear_last_error:M,napi_set_last_error:x});function Ee(e){var a=new DataView(f.buffer),t=20,r=a.getInt32(e+t,!0),n=N.pthreads[r];return n}function Xe(e){if(!g){var a=Ee(e);a&&typeof a.unref=="function"&&a.unref()}}function yn(e,a,t){if(g){var r=k.postMessage;r({__emnapi__:{type:"async-send",payload:{callback:a,data:t}}})}else switch(e){case 0:Y(a,t);break;case 1:Z(a,t);break}}var Vr,ze=new Promise(function(e){Vr=function(){ze.ready=!0,e()}});ze.ready=!1;function mn(){return typeof window<"u"&&typeof document<"u"?1:0}function wn(e,a,t){ze.ready?C.get(e)(a,t):ze.then(function(){C.get(e)(a,t)})}function An(e,a){for(var t=[],r=new DataView(f.buffer),n=function(o){var u=r.getInt32(e+o*4,!0),d=Ee(u);t.push(new Promise(function(_){var I=function(A){var P=A.data,U=P.__emnapi__;U&&U.type==="async-thread-ready"&&(_(),d&&typeof d.unref=="function"&&d.unref(),d.removeEventListener("message",I))};d.addEventListener("message",I)}))},i=0;i<a;i++)n(i);Promise.all(t).then(Vr)}function bn(){if(g){var e=k.postMessage;e({__emnapi__:{type:"async-thread-ready",payload:{}}})}}var In=Object.freeze({__proto__:null,_emnapi_after_uvthreadpool_ready:wn,_emnapi_async_send_js:yn,_emnapi_emit_async_thread_ready:bn,_emnapi_is_main_browser_thread:mn,_emnapi_tell_js_uvthreadpool:An,_emnapi_worker_unref:Xe});function Ln(e,a,t){if(!e)return 1;var r=s.envStore.get(e);if(!t)return r.setLastError(1);var n=Number(a);if(n<0)return r.setLastError(1);var i=f.buffer.byteLength,o=i+n;if(o=o+(65536-o%65536)%65536,f.grow(o-i+65535>>16)===-1)return r.setLastError(9);if(s.feature.supportBigInt){var u=new DataView(f.buffer);u.setBigInt64(t,BigInt(f.buffer.byteLength),!0)}else be(t,f.buffer.byteLength);return r.clearLastError()}var Sn=Object.freeze({__proto__:null,napi_adjust_external_memory:Ln}),te={idGen:{},values:[void 0],queued:new Set,pending:[],init:function(){var e={nextId:1,list:[],generate:function(){var a;return e.list.length?a=e.list.shift():(a=e.nextId,e.nextId++),a},reuse:function(a){e.list.push(a)}};te.idGen=e,te.values=[void 0],te.queued=new Set,te.pending=[]},create:function(e,a,t,r,n,i){var o=0,u=0;if(v){var d=v.node.emitAsyncInit(a,t,-1);o=d.asyncId,u=d.triggerAsyncId}var _=te.idGen.generate();return te.values[_]={env:e,id:_,resource:a,asyncId:o,triggerAsyncId:u,status:0,execute:r,complete:n,data:i},_},callComplete:function(e,a){var t=e.complete,r=e.env,n=e.data,i=function(){if(t){var o=s.envStore.get(r),u=s.openScope(o);try{o.callbackIntoModule(!0,function(){C.get(t)(r,a,n)})}finally{s.closeScope(o,u)}}};v?v.node.makeCallback(e.resource,i,[],{asyncId:e.asyncId,triggerAsyncId:e.triggerAsyncId}):i()},queue:function(e){var a=te.values[e];if(a&&a.status===0){if(a.status=1,te.queued.size>=(Math.abs(S)||4)){te.pending.push(e);return}te.queued.add(e);var t=a.env,r=a.data,n=a.execute;a.status=2,s.feature.setImmediate(function(){if(C.get(n)(t,r),te.queued.delete(e),a.status=3,s.feature.setImmediate(function(){te.callComplete(a,0)}),te.pending.length>0){var i=te.pending.shift();te.values[i].status=0,te.queue(i)}})}},cancel:function(e){var a=te.pending.indexOf(e);if(a!==-1){var t=te.values[e];return t&&t.status===1?(t.status=4,te.pending.splice(a,1),s.feature.setImmediate(function(){te.callComplete(t,11)}),0):9}return 9},remove:function(e){var a=te.values[e];a&&(v&&v.node.emitAsyncDestroy({asyncId:a.asyncId,triggerAsyncId:a.triggerAsyncId}),te.values[e]=void 0,te.idGen.reuse(e))}};function er(e,a,t,r){if(v){var n=s.handleStore.get(e).value,i=s.handleStore.get(a).value,o=v.node.emitAsyncInit(n,i,t),u=o.asyncId,d=o.triggerAsyncId;if(r){var _=new DataView(f.buffer);_.setFloat64(r,u,!0),_.setFloat64(r+8,d,!0)}}}function rr(e,a){v&&v.node.emitAsyncDestroy({asyncId:e,triggerAsyncId:a})}function Tn(e,a,t,r,n,i,o,u){var d=0,_;if(v){var I=s.handleStore.get(a).value,A=s.handleStore.get(t).value;n=n>>>0;for(var P=Array(n),U=new DataView(f.buffer);d<n;d++){var W=U.getInt32(r+d*4,!0);P[d]=s.handleStore.get(W).value}var z=v.node.makeCallback(I,A,P,{asyncId:i,triggerAsyncId:o});if(u){var $=s.envStore.get(e);_=$.ensureHandleId(z),U.setInt32(u,_,!0)}}}function Cn(e,a,t){if(!v)return 9;var r;e&&(r=Object(s.handleStore.get(e).value));var n=s.handleStore.get(a).value,i=v.napi.asyncInit(r,n);if(i.status!==0)return i.status;var o=i.value;o>=BigInt(-1)*(BigInt(1)<<BigInt(63))&&o<BigInt(1)<<BigInt(63)||(o=o&(BigInt(1)<<BigInt(64))-BigInt(1),o>=BigInt(1)<<BigInt(63)&&(o=o-(BigInt(1)<<BigInt(64))));var u=Number(o&BigInt(4294967295)),d=Number(o>>BigInt(32)),_=new DataView(f.buffer);return _.setInt32(t,u,!0),_.setInt32(t+4,d,!0),0}function kn(e){if(!v)return 9;var a=new DataView(f.buffer),t=a.getInt32(e,!0),r=a.getInt32(e+4,!0),n=BigInt(t>>>0)|BigInt(r)<<BigInt(32),i=v.napi.asyncDestroy(n);return i.status!==0?i.status:0}function Dn(e,a,t,r){throw new Error("napi_open_callback_scope has not been implemented yet")}function Bn(e,a){throw new Error("napi_close_callback_scope has not been implemented yet")}function On(e,a,t,r,n,i,o){var u=0,d;if(!e)return 1;var _=s.envStore.get(e);if(_.checkGCAccess(),!_.tryCatch.isEmpty())return _.setLastError(10);if(!_.canCallIntoJs())return _.setLastError(_.moduleApiVersion>=10?23:10);_.clearLastError();try{if(!v)return _.setLastError(9);if(!t||n>0&&!i)return _.setLastError(1);var I=Object(s.handleStore.get(t).value),A=s.handleStore.get(r).value;if(typeof A!="function")return _.setLastError(1);var P=new DataView(f.buffer),U=P.getInt32(a,!0),W=P.getInt32(a+4,!0),z=BigInt(U>>>0)|BigInt(W)<<BigInt(32);n=n>>>0;for(var $=Array(n);u<n;u++){var ae=P.getInt32(i+u*4,!0);$[u]=s.handleStore.get(ae).value}var ue=v.napi.makeCallback(z,I,A,$);if(ue.error)throw ue.error;return ue.status!==0?_.setLastError(ue.status):(o&&(d=_.ensureHandleId(ue.value),P.setInt32(o,d,!0)),_.getReturnStatus())}catch(ee){return _.tryCatch.setError(ee),_.setLastError(10)}}function Fn(e){var a=s.envStore.get(e);a.checkGCAccess()}var Pn=Object.freeze({__proto__:null,_emnapi_async_destroy_js:kn,_emnapi_async_init_js:Cn,_emnapi_env_check_gc_access:Fn,_emnapi_node_emit_async_destroy:rr,_emnapi_node_emit_async_init:er,_emnapi_node_make_callback:Tn,napi_close_callback_scope:Bn,napi_make_callback:On,napi_open_callback_scope:Dn}),L={offset:{resource:0,async_id:8,trigger_async_id:16,queue_size:24,queue:28,thread_count:32,is_closing:36,dispatch_state:40,context:44,max_queue_size:48,ref:52,env:56,finalize_data:60,finalize_cb:64,call_js_cb:68,handles_closing:72,async_ref:76,mutex:80,cond:84,end:88},init:function(){if(typeof N<"u"){N.unusedWorkers.forEach(L.addListener),N.runningWorkers.forEach(L.addListener);var e=N.getNewWorker;N.getNewWorker=function(){var a=e.apply(this,arguments);return L.addListener(a),a}}},addListener:function(e){if(!e)return!1;if(e._emnapiTSFNListener)return!0;var a=function(r){var n=r.data,i=n.__emnapi__;if(i){var o=i.type,u=i.payload;o==="tsfn-send"&&L.dispatch(u.tsfn)}},t=function(){e.removeEventListener("message",a,!1),delete e._emnapiTSFNListener};return e._emnapiTSFNListener={handler:a,dispose:t},e.addEventListener("message",a,!1),!0},initQueue:function(e){var a=8,t=F(a);return t?(new Uint8Array(f.buffer,t,a).fill(0),L.storeSizeTypeValue(e+L.offset.queue,t,!1),!0):!1},destroyQueue:function(e){var a=L.loadSizeTypeValue(e+L.offset.queue,!1);a&&D(a)},pushQueue:function(e,a){var t=L.loadSizeTypeValue(e+L.offset.queue,!1),r=L.loadSizeTypeValue(t,!1),n=L.loadSizeTypeValue(t+4,!1),i=8,o=F(i);if(!o)throw new Error("OOM");L.storeSizeTypeValue(o,a,!1),L.storeSizeTypeValue(o+4,0,!1),r===0&&n===0?(L.storeSizeTypeValue(t,o,!1),L.storeSizeTypeValue(t+4,o,!1)):(L.storeSizeTypeValue(n+4,o,!1),L.storeSizeTypeValue(t+4,o,!1)),L.addQueueSize(e)},shiftQueue:function(e){var a=L.loadSizeTypeValue(e+L.offset.queue,!1),t=L.loadSizeTypeValue(a,!1);if(t===0)return 0;var r=t,n=L.loadSizeTypeValue(t+4,!1);L.storeSizeTypeValue(a,n,!1),n===0&&L.storeSizeTypeValue(a+4,0,!1),L.storeSizeTypeValue(r+4,0,!1);var i=L.loadSizeTypeValue(r,!1);return D(r),L.subQueueSize(e),i},push:function(e,a,t){var r=L.getMutex(e),n=L.getCond(e),i=function(){var u=L.getQueueSize(e),d=L.getMaxQueueSize(e),_=L.getIsClosing(e);return u>=d&&d>0&&!_},o=typeof window<"u"&&typeof document<"u"&&!0;return r.execute(function(){for(;i();){if(t===0)return 15;if(o)return 21;n.wait()}return L.getIsClosing(e)?L.getThreadCount(e)===0?1:(L.subThreadCount(e),16):(L.pushQueue(e,a),L.send(e),0)})},getMutex:function(e){var a=e+L.offset.mutex,t={lock:function(){var r=typeof window<"u"&&typeof document<"u"&&!0,n=new Int32Array(f.buffer,a,1);if(r)for(;;){var i=Atomics.compareExchange(n,0,0,1);if(i===0)return}else for(;;){var i=Atomics.compareExchange(n,0,0,1);if(i===0)return;Atomics.wait(n,0,1)}},unlock:function(){var r=new Int32Array(f.buffer,a,1),n=Atomics.compareExchange(r,0,1,0);if(n!==1)throw new Error("Tried to unlock while not holding the mutex");Atomics.notify(r,0,1)},execute:function(r){t.lock();try{return r()}finally{t.unlock()}}};return t},getCond:function(e){var a=e+L.offset.cond,t=L.getMutex(e),r={wait:function(){var n=new Int32Array(f.buffer,a,1),i=Atomics.load(n,0);t.unlock(),Atomics.wait(n,0,i),t.lock()},signal:function(){var n=new Int32Array(f.buffer,a,1);Atomics.add(n,0,1),Atomics.notify(n,0,1)}};return r},getQueueSize:function(e){return L.loadSizeTypeValue(e+L.offset.queue_size,!0)},addQueueSize:function(e){var a=L.offset.queue_size,t,r;t=new Uint32Array(f.buffer),r=e+a>>2,Atomics.add(t,r,1)},subQueueSize:function(e){var a=L.offset.queue_size,t,r;t=new Uint32Array(f.buffer),r=e+a>>2,Atomics.sub(t,r,1)},getThreadCount:function(e){return L.loadSizeTypeValue(e+L.offset.thread_count,!0)},addThreadCount:function(e){var a=L.offset.thread_count,t,r;t=new Uint32Array(f.buffer),r=e+a>>2,Atomics.add(t,r,1)},subThreadCount:function(e){var a=L.offset.thread_count,t,r;t=new Uint32Array(f.buffer),r=e+a>>2,Atomics.sub(t,r,1)},getIsClosing:function(e){return Atomics.load(new Int32Array(f.buffer),e+L.offset.is_closing>>2)},setIsClosing:function(e,a){Atomics.store(new Int32Array(f.buffer),e+L.offset.is_closing>>2,a)},getHandlesClosing:function(e){return Atomics.load(new Int32Array(f.buffer),e+L.offset.handles_closing>>2)},setHandlesClosing:function(e,a){Atomics.store(new Int32Array(f.buffer),e+L.offset.handles_closing>>2,a)},getDispatchState:function(e){return Atomics.load(new Uint32Array(f.buffer),e+L.offset.dispatch_state>>2)},getContext:function(e){return L.loadSizeTypeValue(e+L.offset.context,!1)},getMaxQueueSize:function(e){return L.loadSizeTypeValue(e+L.offset.max_queue_size,!0)},getEnv:function(e){return L.loadSizeTypeValue(e+L.offset.env,!1)},getCallJSCb:function(e){return L.loadSizeTypeValue(e+L.offset.call_js_cb,!1)},getRef:function(e){return L.loadSizeTypeValue(e+L.offset.ref,!1)},getResource:function(e){return L.loadSizeTypeValue(e+L.offset.resource,!1)},getFinalizeCb:function(e){return L.loadSizeTypeValue(e+L.offset.finalize_cb,!1)},getFinalizeData:function(e){return L.loadSizeTypeValue(e+L.offset.finalize_data,!1)},loadSizeTypeValue:function(e,a){var t,r;return a?(r=new Uint32Array(f.buffer),t=Atomics.load(r,e>>2),t):(r=new Int32Array(f.buffer),t=Atomics.load(r,e>>2),t)},storeSizeTypeValue:function(e,a,t){var r;if(t){r=new Uint32Array(f.buffer),Atomics.store(r,e>>2,a);return}else{r=new Int32Array(f.buffer),Atomics.store(r,e>>2,a>>>0);return}},destroy:function(e){L.destroyQueue(e);var a=L.getEnv(e),t=s.envStore.get(a),r=L.getRef(e);r&&s.refStore.get(r).dispose(),s.removeCleanupHook(t,L.cleanup,e),t.unref();var n=e+L.offset.async_ref>>2,i=new Int32Array(f.buffer);Atomics.load(i,n)&&(Atomics.store(i,n,0),s.decreaseWaitingRequestCounter());var o=L.getResource(e);if(s.refStore.get(o).dispose(),v){var u=new DataView(f.buffer),d=u.getFloat64(e+L.offset.async_id,!0),_=u.getFloat64(e+L.offset.trigger_async_id,!0);rr(d,_)}D(e)},emptyQueueAndDelete:function(e){for(var a=L.getCallJSCb(e),t=L.getContext(e),r;L.getQueueSize(e)>0;)r=L.shiftQueue(e),a&&C.get(a)(0,0,t,r);L.destroy(e)},finalize:function(e){var a=L.getEnv(e),t=s.envStore.get(a);s.openScope(t);var r=L.getFinalizeCb(e),n=L.getFinalizeData(e),i=L.getContext(e),o=function(){t.callFinalizerInternal(0,r,n,i)};try{if(r)if(v){var u=L.getResource(e),d=s.refStore.get(u).get(),_=s.handleStore.get(d).value,I=new DataView(f.buffer),A=I.getFloat64(e+L.offset.async_id,!0),P=I.getFloat64(e+L.offset.trigger_async_id,!0);v.node.makeCallback(_,o,[],{asyncId:A,triggerAsyncId:P})}else o();L.emptyQueueAndDelete(e)}finally{s.closeScope(t)}},cleanup:function(e){L.closeHandlesAndMaybeDelete(e,1)},closeHandlesAndMaybeDelete:function(e,a){var t=L.getEnv(e),r=s.envStore.get(t);s.openScope(r);try{if(a&&L.getMutex(e).execute(function(){L.setIsClosing(e,1),L.getMaxQueueSize(e)>0&&L.getCond(e).signal()}),L.getHandlesClosing(e))return;L.setHandlesClosing(e,1),s.feature.setImmediate(function(){L.finalize(e)})}finally{s.closeScope(r)}},dispatchOne:function(e){var a=0,t=!1,r=!1,n=L.getMutex(e),i=L.getCond(e);if(n.execute(function(){if(L.getIsClosing(e))L.closeHandlesAndMaybeDelete(e,0);else{var U=L.getQueueSize(e);if(U>0){a=L.shiftQueue(e),t=!0;var W=L.getMaxQueueSize(e);U===W&&W>0&&i.signal(),U--}U===0?L.getThreadCount(e)===0&&(L.setIsClosing(e,1),L.getMaxQueueSize(e)>0&&i.signal(),L.closeHandlesAndMaybeDelete(e,0)):r=!0}}),t){var o=L.getEnv(e),u=s.envStore.get(o);s.openScope(u);var d=function(){u.callbackIntoModule(!1,function(){var U=L.getCallJSCb(e),W=L.getRef(e),z=W?s.refStore.get(W).get():0;if(U){var $=L.getContext(e);C.get(U)(o,z,$,a)}else{var ae=z?s.handleStore.get(z).value:null;typeof ae=="function"&&ae()}})};try{if(v){var _=L.getResource(e),I=s.refStore.get(_).get(),A=s.handleStore.get(I).value,P=new DataView(f.buffer);v.node.makeCallback(A,d,[],{asyncId:P.getFloat64(e+L.offset.async_id,!0),triggerAsyncId:P.getFloat64(e+L.offset.trigger_async_id,!0)})}else d()}finally{s.closeScope(u)}}return r},dispatch:function(e){for(var a=!0,t=1e3,r=new Uint32Array(f.buffer),n=e+L.offset.dispatch_state>>2;a&&--t!==0;)Atomics.store(r,n,1),a=L.dispatchOne(e),Atomics.exchange(r,n,0)!==1&&(a=!0);a&&L.send(e)},send:function(e){var a=Atomics.or(new Uint32Array(f.buffer),e+L.offset.dispatch_state>>2,2);(a&1)!==1&&(typeof g<"u"&&g?postMessage({__emnapi__:{type:"tsfn-send",payload:{tsfn:e}}}):s.feature.setImmediate(function(){L.dispatch(e)}))}};function Rn(e,a,t,r,n,i,o,u,d,_,I){if(!e)return 1;var A=s.envStore.get(e);if(A.checkGCAccess(),!r||(n=n>>>0,i=i>>>0,i===0)||!I)return A.setLastError(1);var P=0;if(a){var U=s.handleStore.get(a).value;if(typeof U!="function")return A.setLastError(1);P=s.createReference(A,a,1,1).id}else if(!_)return A.setLastError(1);var W;if(t){if(W=s.handleStore.get(t).value,W==null)return A.setLastError(2);W=Object(W)}else W={};var z=A.ensureHandleId(W),$=s.handleStore.get(r).value;if(typeof $=="symbol")return A.setLastError(3);$=String($);var ae=A.ensureHandleId($),ue=L.offset.end,ee=F(ue);if(!ee)return A.setLastError(9);new Uint8Array(f.buffer).subarray(ee,ee+ue).fill(0);var fe=s.createReference(A,z,1,1),he=fe.id,_e=new DataView(f.buffer);return _e.setInt32(ee,he,!0),L.initQueue(ee)?(er(z,ae,-1,ee+L.offset.async_id),_e.setUint32(ee+L.offset.thread_count,i,!0),_e.setInt32(ee+L.offset.context,d,!0),_e.setUint32(ee+L.offset.max_queue_size,n,!0),_e.setInt32(ee+L.offset.ref,P,!0),_e.setInt32(ee+L.offset.env,e,!0),_e.setInt32(ee+L.offset.finalize_data,o,!0),_e.setInt32(ee+L.offset.finalize_cb,u,!0),_e.setInt32(ee+L.offset.call_js_cb,_,!0),s.addCleanupHook(A,L.cleanup,ee),A.ref(),s.increaseWaitingRequestCounter(),_e.setInt32(ee+L.offset.async_ref,1,!0),_e.setInt32(I,ee,!0),A.clearLastError()):(D(ee),fe.dispose(),A.setLastError(9))}function Vn(e,a){if(!e||!a)return V(),1;var t=L.getContext(e),r=new DataView(f.buffer);return r.setInt32(a,t,!0),0}function Nn(e,a,t){return e?L.push(e,a,t):(V(),1)}function Un(e){if(!e)return V(),1;var a=L.getMutex(e);return a.execute(function(){return L.getIsClosing(e)?16:(L.addThreadCount(e),0)})}function xn(e,a){if(!e)return V(),1;var t=L.getMutex(e),r=L.getCond(e);return t.execute(function(){if(L.getThreadCount(e)===0)return 1;if(L.subThreadCount(e),L.getThreadCount(e)===0||a===1){var n=L.getIsClosing(e);if(!n){var i=a===1?1:0;L.setIsClosing(e,i),i&&L.getMaxQueueSize(e)>0&&r.signal(),L.send(e)}}return 0})}function Mn(e,a){if(!a)return V(),1;var t=a+L.offset.async_ref>>2,r=new Int32Array(f.buffer);return Atomics.load(r,t)&&(Atomics.store(r,t,0),s.decreaseWaitingRequestCounter()),0}function Wn(e,a){if(!a)return V(),1;var t=a+L.offset.async_ref>>2,r=new Int32Array(f.buffer);return Atomics.load(r,t)||(Atomics.store(r,t,1),s.increaseWaitingRequestCounter()),0}var H={unusedWorkers:[],runningWorkers:[],workQueue:[],workerReady:null,offset:{resource:0,async_id:8,trigger_async_id:16,env:24,data:28,execute:32,complete:36,end:40},init:function(){H.unusedWorkers=[],H.runningWorkers=[],H.workQueue=[],H.workerReady=null},addListener:function(e){if(!e)return!1;if(e._emnapiAWMTListener)return!0;var a=function(r){var n=r.data,i=n.__emnapi__;if(i){var o=i.type,u=i.payload;o==="async-work-complete"?(s.decreaseWaitingRequestCounter(),H.runningWorkers.splice(H.runningWorkers.indexOf(e),1),H.unusedWorkers.push(e),H.checkIdleWorker(),H.callComplete(u.work,0)):o==="async-work-queue"?H.scheduleWork(u.work):o==="async-work-cancel"&&H.cancelWork(u.work)}},t=function(){e.removeEventListener("message",a,!1),delete e._emnapiAWMTListener};return e._emnapiAWMTListener={handler:a,dispose:t},e.addEventListener("message",a,!1),!0},initWorkers:function(e){if(g)return H.workerReady||(H.workerReady=Promise.resolve());if(H.workerReady)return H.workerReady;if(typeof h!="function")throw new TypeError("`options.onCreateWorker` is not a function");var a=[],t=[];if(!("emnapi_async_worker_create"in E.exports))throw new TypeError("`emnapi_async_worker_create` is not exported, please try to add `--export=emnapi_async_worker_create` to linker flags");for(var r=0;r<e;++r)t.push(E.exports.emnapi_async_worker_create());try{for(var n=function(o){var u=h({type:"async-work",name:"emnapi-async-worker"}),d=N.loadWasmModuleToWorker(u);H.addListener(u),a.push(d.then(function(){typeof u.unref=="function"&&u.unref()})),H.unusedWorkers.push(u);var _=t[o];u.threadBlockBase=_,u.postMessage({__emnapi__:{type:"async-worker-init",payload:{arg:_}}})},r=0;r<e;++r)n(r)}catch(o){for(var r=0;r<e;++r){var i=t[r];D(i)}throw o}return H.workerReady=Promise.all(a),H.workerReady},checkIdleWorker:function(){if(H.unusedWorkers.length>0&&H.workQueue.length>0){var e=H.unusedWorkers.shift(),a=H.workQueue.shift();H.runningWorkers.push(e),e.postMessage({__emnapi__:{type:"async-work-execute",payload:{work:a}}})}},getResource:function(e){return L.loadSizeTypeValue(e+H.offset.resource,!1)},getExecute:function(e){return L.loadSizeTypeValue(e+H.offset.execute,!1)},getComplete:function(e){return L.loadSizeTypeValue(e+H.offset.complete,!1)},getEnv:function(e){return L.loadSizeTypeValue(e+H.offset.env,!1)},getData:function(e){return L.loadSizeTypeValue(e+H.offset.data,!1)},scheduleWork:function(e){var a;if(g){var t=k.postMessage;t({__emnapi__:{type:"async-work-queue",payload:{work:e}}});return}if(s.increaseWaitingRequestCounter(),H.workQueue.push(e),!((a=H.workerReady)===null||a===void 0)&&a.ready)H.checkIdleWorker();else{var r=function(n){throw s.decreaseWaitingRequestCounter(),n};try{H.initWorkers(O()).then(function(){H.workerReady.ready=!0,H.checkIdleWorker()},r)}catch(n){r(n)}}},cancelWork:function(e){if(g){var a=k.postMessage;return a({__emnapi__:{type:"async-work-cancel",payload:{work:e}}}),0}var t=H.workQueue.indexOf(e);return t!==-1?(H.workQueue.splice(t,1),s.feature.setImmediate(function(){s.decreaseWaitingRequestCounter(),H.checkIdleWorker(),H.callComplete(e,11)}),0):9},callComplete:function(e,a){var t=H.getComplete(e),r=H.getEnv(e),n=H.getData(e),i=s.envStore.get(r),o=s.openScope(i),u=function(){t&&i.callbackIntoModule(!0,function(){C.get(t)(r,a,n)})};try{if(v){var d=H.getResource(e),_=s.refStore.get(d).get(),I=s.handleStore.get(_).value,A=new DataView(f.buffer),P=A.getFloat64(e+H.offset.async_id,!0),U=A.getFloat64(e+H.offset.trigger_async_id,!0);v.node.makeCallback(I,u,[],{asyncId:P,triggerAsyncId:U})}else u()}finally{s.closeScope(i,o)}}},jn=R?function(e,a,t,r,n,i,o){if(!e)return 1;var u=s.envStore.get(e);if(u.checkGCAccess(),!r||!o)return u.setLastError(1);var d;if(a?d=Object(s.handleStore.get(a).value):d={},!t)return u.setLastError(1);var _=String(s.handleStore.get(t).value),I=te.create(e,d,_,r,n,i),A=new DataView(f.buffer);return A.setInt32(o,I,!0),u.clearLastError()}:function(e,a,t,r,n,i,o){if(!e)return 1;var u=s.envStore.get(e);if(u.checkGCAccess(),!r||!o)return u.setLastError(1);var d;if(a?d=Object(s.handleStore.get(a).value):d={},!t)return u.setLastError(1);var _=H.offset.end,I=F(_);if(!I)return u.setLastError(9);new Uint8Array(f.buffer).subarray(I,I+_).fill(0);var A=u.ensureHandleId(d),P=s.createReference(u,A,1,1),U=P.id,W=new DataView(f.buffer);return W.setInt32(I,U,!0),er(A,t,-1,I+H.offset.async_id),W.setInt32(I+H.offset.env,e,!0),W.setInt32(I+H.offset.execute,r,!0),W.setInt32(I+H.offset.complete,n,!0),W.setInt32(I+H.offset.data,i,!0),W.setInt32(o,I,!0),u.clearLastError()},Hn=R?function(e,a){if(!e)return 1;var t=s.envStore.get(e);return t.checkGCAccess(),a?(te.remove(a),t.clearLastError()):t.setLastError(1)}:function(e,a){if(!e)return 1;var t=s.envStore.get(e);if(t.checkGCAccess(),!a)return t.setLastError(1);var r=H.getResource(a);if(s.refStore.get(r).dispose(),v){var n=new DataView(f.buffer),i=n.getFloat64(a+H.offset.async_id,!0),o=n.getFloat64(a+H.offset.trigger_async_id,!0);rr(i,o)}return D(a),t.clearLastError()},Gn=R?function(e,a){if(!e)return 1;var t=s.envStore.get(e);return a?(te.queue(a),t.clearLastError()):t.setLastError(1)}:function(e,a){if(!e)return 1;var t=s.envStore.get(e);return a?(H.scheduleWork(a),t.clearLastError()):t.setLastError(1)},zn=R?function(e,a){if(!e)return 1;var t=s.envStore.get(e);if(!a)return t.setLastError(1);var r=te.cancel(a);return r===0?t.clearLastError():t.setLastError(r)}:function(e,a){if(!e)return 1;var t=s.envStore.get(e);if(!a)return t.setLastError(1);var r=H.cancelWork(a);return r===0?t.clearLastError():t.setLastError(r)};function Jn(e){if(k.childThread){if(typeof E.exports.emnapi_async_worker_init!="function")throw new TypeError("`emnapi_async_worker_init` is not exported, please try to add `--export=emnapi_async_worker_init` to linker flags");E.exports.emnapi_async_worker_init(e)}else throw new Error("startThread is only available in child threads")}function qn(e){if(g){var a=H.getExecute(e),t=H.getEnv(e),r=H.getData(e);C.get(a)(t,r);var n=k.postMessage;n({__emnapi__:{type:"async-work-complete",payload:{work:e}}})}}k.initWorker=Jn,k.executeAsyncWork=qn;var Kn=Object.freeze({__proto__:null,napi_cancel_async_work:zn,napi_create_async_work:jn,napi_delete_async_work:Hn,napi_queue_async_work:Gn}),K={registry:typeof FinalizationRegistry=="function"?new FinalizationRegistry(function(e){D(e)}):void 0,table:new WeakMap,wasmMemoryViewTable:new WeakMap,init:function(){K.registry=typeof FinalizationRegistry=="function"?new FinalizationRegistry(function(e){D(e)}):void 0,K.table=new WeakMap,K.wasmMemoryViewTable=new WeakMap},isDetachedArrayBuffer:function(e){if(e.byteLength===0)try{new Uint8Array(e)}catch{return!0}return!1},getArrayBufferPointer:function(e,a){var t,r={address:0,ownership:0,runtimeAllocated:0};if(e===f.buffer)return r;var n=K.isDetachedArrayBuffer(e);if(K.table.has(e)){var i=K.table.get(e);return n?(i.address=0,i):(a&&i.ownership===0&&i.runtimeAllocated===1&&new Uint8Array(f.buffer).set(new Uint8Array(e),i.address),i)}if(n||e.byteLength===0||!a)return r;var o=F(e.byteLength);if(!o)throw new Error("Out of memory");return new Uint8Array(f.buffer).set(new Uint8Array(e),o),r.address=o,r.ownership=K.registry?0:1,r.runtimeAllocated=1,K.table.set(e,r),(t=K.registry)===null||t===void 0||t.register(e,o),r},getOrUpdateMemoryView:function(e){if(e.buffer===f.buffer)return K.wasmMemoryViewTable.has(e)||K.wasmMemoryViewTable.set(e,{Ctor:e.constructor,address:e.byteOffset,length:e instanceof DataView?e.byteLength:e.length,ownership:1,runtimeAllocated:0}),e;var a=K.isDetachedArrayBuffer(e.buffer)||typeof SharedArrayBuffer=="function"&&e.buffer instanceof SharedArrayBuffer;if(a&&K.wasmMemoryViewTable.has(e)){var t=K.wasmMemoryViewTable.get(e),r=t.Ctor,n=void 0,i=s.feature.Buffer;return typeof i=="function"&&r===i?n=i.from(f.buffer,t.address,t.length):n=new r(f.buffer,t.address,t.length),K.wasmMemoryViewTable.set(n,t),n}return e},getViewPointer:function(e,a){if(e=K.getOrUpdateMemoryView(e),e.buffer===f.buffer){if(K.wasmMemoryViewTable.has(e)){var t=K.wasmMemoryViewTable.get(e),r=t.address,n=t.ownership,i=t.runtimeAllocated;return{address:r,ownership:n,runtimeAllocated:i,view:e}}return{address:e.byteOffset,ownership:1,runtimeAllocated:0,view:e}}var o=K.getArrayBufferPointer(e.buffer,a),u=o.address,d=o.ownership,_=o.runtimeAllocated;return{address:u===0?0:u+e.byteOffset,ownership:d,runtimeAllocated:_,view:e}}},X={utf8Decoder:void 0,utf16Decoder:void 0,init:function(){var e={decode:function(n){for(var i=0,o=Math.min(4096,n.length+1),u=new Uint16Array(o),d=[],_=0;;){var I=i<n.length;if(!I||_>=o-1){var A=u.subarray(0,_),P=A;if(d.push(String.fromCharCode.apply(null,P)),!I)return d.join("");n=n.subarray(i),i=0,_=0}var U=n[i++];if((U&128)===0)u[_++]=U;else if((U&224)===192){var W=n[i++]&63;u[_++]=(U&31)<<6|W}else if((U&240)===224){var W=n[i++]&63,z=n[i++]&63;u[_++]=(U&31)<<12|W<<6|z}else if((U&248)===240){var W=n[i++]&63,z=n[i++]&63,$=n[i++]&63,ae=(U&7)<<18|W<<12|z<<6|$;ae>65535&&(ae-=65536,u[_++]=ae>>>10&1023|55296,ae=56320|ae&1023),u[_++]=ae}}}},a;a=typeof TextDecoder=="function"?new TextDecoder:e,X.utf8Decoder=a;var t={decode:function(n){var i=new Uint16Array(n.buffer,n.byteOffset,n.byteLength/2);if(i.length<=4096)return String.fromCharCode.apply(null,i);for(var o=[],u=0,d=0;u<i.length;u+=d)d=Math.min(4096,i.length-u),o.push(String.fromCharCode.apply(null,i.subarray(u,u+d)));return o.join("")}},r;r=typeof TextDecoder=="function"?new TextDecoder("utf-16le"):t,X.utf16Decoder=r},lengthBytesUTF8:function(e){for(var a,t=0,r=0;r<e.length;++r)a=e.charCodeAt(r),a<=127?t++:a<=2047?t+=2:a>=55296&&a<=57343?(t+=4,++r):t+=3;return t},UTF8ToString:function(e,a){if(!e||!a)return"";e>>>=0;var t=new Uint8Array(f.buffer),r=e;if(a===-1)for(;t[r];)++r;else r=e+(a>>>0);if(a=r-e,a<=16){for(var n=e,i="";n<r;){var o=t[n++];if(!(o&128)){i+=String.fromCharCode(o);continue}var u=t[n++]&63;if((o&224)===192){i+=String.fromCharCode((o&31)<<6|u);continue}var d=t[n++]&63;if((o&240)===224?o=(o&15)<<12|u<<6|d:o=(o&7)<<18|u<<12|d<<6|t[n++]&63,o<65536)i+=String.fromCharCode(o);else{var _=o-65536;i+=String.fromCharCode(55296|_>>10,56320|_&1023)}}return i}return X.utf8Decoder.decode(typeof SharedArrayBuffer=="function"&&t.buffer instanceof SharedArrayBuffer||Object.prototype.toString.call(t.buffer)==="[object SharedArrayBuffer]"?t.slice(e,r):t.subarray(e,r))},stringToUTF8:function(e,a,t){var r=new Uint8Array(f.buffer),n=a;if(n>>>=0,!(t>0))return 0;for(var i=n,o=n+t-1,u=0;u<e.length;++u){var d=e.charCodeAt(u);if(d>=55296&&d<=57343){var _=e.charCodeAt(++u);d=65536+((d&1023)<<10)|_&1023}if(d<=127){if(n>=o)break;r[n++]=d}else if(d<=2047){if(n+1>=o)break;r[n++]=192|d>>6,r[n++]=128|d&63}else if(d<=65535){if(n+2>=o)break;r[n++]=224|d>>12,r[n++]=128|d>>6&63,r[n++]=128|d&63}else{if(n+3>=o)break;r[n++]=240|d>>18,r[n++]=128|d>>12&63,r[n++]=128|d>>6&63,r[n++]=128|d&63}}return r[n]=0,n-i},UTF16ToString:function(e,a){if(!e||!a)return"";e>>>=0;var t=e;if(a===-1){for(var r=t>>1,n=new Uint16Array(f.buffer);n[r];)++r;t=r<<1}else t=e+(a>>>0)*2;if(a=t-e,a<=32)return String.fromCharCode.apply(null,new Uint16Array(f.buffer,e,a/2));var i=new Uint8Array(f.buffer);return X.utf16Decoder.decode(typeof SharedArrayBuffer=="function"&&i.buffer instanceof SharedArrayBuffer||Object.prototype.toString.call(i.buffer)==="[object SharedArrayBuffer]"?i.slice(e,t):i.subarray(e,t))},stringToUTF16:function(e,a,t){if(t===void 0&&(t=2147483647),t<2)return 0;t-=2;for(var r=a,n=t<e.length*2?t/2:e.length,i=new DataView(f.buffer),o=0;o<n;++o){var u=e.charCodeAt(o);i.setInt16(a,u,!0),a+=2}return i.setInt16(a,0,!0),a-r},newString:function(e,a,t,r,n){if(!e)return 1;var i=s.envStore.get(e);i.checkGCAccess();var o=t===-1,u=t>>>0;if(t!==0&&!a||!r||!(o||u<=2147483647))return i.setLastError(1);var d=n(a,o,u),_=s.addToCurrentScope(d).id,I=new DataView(f.buffer);return I.setInt32(r,_,!0),i.clearLastError()},newExternalString:function(e,a,t,r,n,i,o,u,d){if(!e)return 1;var _=s.envStore.get(e);_.checkGCAccess();var I=t===-1,A=t>>>0;if(t!==0&&!a||!i||!(I||A<=2147483647))return _.setLastError(1);var P=u(e,a,t,i);if(P===0){if(o){var U=new DataView(f.buffer);U.setInt8(o,1,!0)}r&&_.callFinalizer(r,a,n)}return P}};function Yn(e,a,t){if(!e)return 1;var r=s.envStore.get(e);if(r.checkGCAccess(),!r.tryCatch.isEmpty())return r.setLastError(10);if(!r.canCallIntoJs())return r.setLastError(r.moduleApiVersion>=10?23:10);r.clearLastError();try{if(!a||!t)return r.setLastError(1);var n=s.handleStore.get(a);if(!n.isArray())return r.setLastError(8);var i=n.value.length>>>0,o=new DataView(f.buffer);return o.setUint32(t,i,!0),r.getReturnStatus()}catch(u){return r.tryCatch.setError(u),r.setLastError(10)}}function $n(e,a,t,r){if(!e)return 1;var n=s.envStore.get(e);if(n.checkGCAccess(),!a)return n.setLastError(1);var i=s.handleStore.get(a);if(!i.isArrayBuffer())return n.setLastError(1);var o=new DataView(f.buffer);if(t){var u=K.getArrayBufferPointer(i.value,!0).address;o.setInt32(t,u,!0)}return r&&o.setUint32(r,i.value.byteLength,!0),n.clearLastError()}function Qn(e,a,t){if(!e)return 1;var r=s.envStore.get(e);if(r.checkGCAccess(),!r.tryCatch.isEmpty())return r.setLastError(10);if(!r.canCallIntoJs())return r.setLastError(r.moduleApiVersion>=10?23:10);r.clearLastError();try{if(!a||!t)return r.setLastError(1);var n=s.handleStore.get(a);if(n.value==null)throw new TypeError("Cannot convert undefined or null to object");var i=void 0;try{i=n.isObject()||n.isFunction()?n.value:Object(n.value)}catch{return r.setLastError(2)}var o=r.ensureHandleId(Object.getPrototypeOf(i)),u=new DataView(f.buffer);return u.setInt32(t,o,!0),r.getReturnStatus()}catch(d){return r.tryCatch.setError(d),r.setLastError(10)}}function Nr(e,a,t,r,n,i,o){if(!e)return 1;var u=s.envStore.get(e);if(u.checkGCAccess(),!a)return u.setLastError(1);var d=s.handleStore.get(a);if(!d.isTypedArray())return u.setLastError(1);var _=d.value,I=new DataView(f.buffer);if(t){var A=void 0;if(_ instanceof Int8Array)A=0;else if(_ instanceof Uint8Array)A=1;else if(_ instanceof Uint8ClampedArray)A=2;else if(_ instanceof Int16Array)A=3;else if(_ instanceof Uint16Array)A=4;else if(_ instanceof Int32Array)A=5;else if(_ instanceof Uint32Array)A=6;else if(_ instanceof Float32Array)A=7;else if(_ instanceof Float64Array)A=8;else if(_ instanceof BigInt64Array)A=9;else if(_ instanceof BigUint64Array)A=10;else return u.setLastError(9);I.setInt32(t,A,!0)}r&&I.setUint32(r,_.length,!0);var P;if(n||i){if(P=_.buffer,n){var U=K.getViewPointer(_,!0).address;I.setInt32(n,U,!0)}if(i){var W=u.ensureHandleId(P);I.setInt32(i,W,!0)}}return o&&I.setUint32(o,_.byteOffset,!0),u.clearLastError()}function Zn(e,a,t,r){if(!e)return 1;var n=s.envStore.get(e);if(n.checkGCAccess(),!a)return n.setLastError(1);var i=s.handleStore.get(a);return i.isBuffer(s.feature.Buffer)?i.isDataView()?Ur(e,a,r,t,0,0):Nr(e,a,0,r,t,0,0):n.setLastError(1)}function Ur(e,a,t,r,n,i){if(!e)return 1;var o=s.envStore.get(e);if(o.checkGCAccess(),!a)return o.setLastError(1);var u=s.handleStore.get(a);if(!u.isDataView())return o.setLastError(1);var d=u.value,_=new DataView(f.buffer);t&&_.setUint32(t,d.byteLength,!0);var I;if(r||n){if(I=d.buffer,r){var A=K.getViewPointer(d,!0).address;_.setInt32(r,A,!0)}if(n){var P=o.ensureHandleId(I);_.setInt32(n,P,!0)}}return i&&_.setUint32(i,d.byteOffset,!0),o.clearLastError()}function Xn(e,a,t){var r;if(!e)return 1;var n=s.envStore.get(e);if(n.checkGCAccess(),!n.tryCatch.isEmpty())return n.setLastError(10);if(!n.canCallIntoJs())return n.setLastError(n.moduleApiVersion>=10?23:10);n.clearLastError();try{if(!a||!t)return n.setLastError(1);var i=s.handleStore.get(a);if(!i.isDate())return n.setLastError(1);r=i.value.valueOf();var o=new DataView(f.buffer);return o.setFloat64(t,r,!0),n.getReturnStatus()}catch(u){return n.tryCatch.setError(u),n.setLastError(10)}}function ea(e,a,t){if(!e)return 1;var r=s.envStore.get(e);if(r.checkGCAccess(),!a||!t)return r.setLastError(1);var n=s.handleStore.get(a);if(typeof n.value!="boolean")return r.setLastError(7);var i=n.value?1:0,o=new DataView(f.buffer);return o.setInt8(t,i,!0),r.clearLastError()}function ra(e,a,t){if(!e)return 1;var r=s.envStore.get(e);if(r.checkGCAccess(),!a||!t)return r.setLastError(1);var n=s.handleStore.get(a);if(typeof n.value!="number")return r.setLastError(6);var i=n.value,o=new DataView(f.buffer);return o.setFloat64(t,i,!0),r.clearLastError()}function ta(e,a,t,r){if(!e)return 1;var n=s.envStore.get(e);if(n.checkGCAccess(),!s.feature.supportBigInt)return n.setLastError(9);if(!a||!t||!r)return n.setLastError(1);var i=s.handleStore.get(a),o=i.value;if(typeof o!="bigint")return n.setLastError(6);var u=new DataView(f.buffer);o>=BigInt(-1)*(BigInt(1)<<BigInt(63))&&o<BigInt(1)<<BigInt(63)?u.setInt8(r,1,!0):(u.setInt8(r,0,!0),o=o&(BigInt(1)<<BigInt(64))-BigInt(1),o>=BigInt(1)<<BigInt(63)&&(o=o-(BigInt(1)<<BigInt(64))));var d=Number(o&BigInt(4294967295)),_=Number(o>>BigInt(32));return u.setInt32(t,d,!0),u.setInt32(t+4,_,!0),n.clearLastError()}function na(e,a,t,r){if(!e)return 1;var n=s.envStore.get(e);if(n.checkGCAccess(),!s.feature.supportBigInt)return n.setLastError(9);if(!a||!t||!r)return n.setLastError(1);var i=s.handleStore.get(a),o=i.value;if(typeof o!="bigint")return n.setLastError(6);var u=new DataView(f.buffer);o>=BigInt(0)&&o<BigInt(1)<<BigInt(64)?u.setInt8(r,1,!0):(u.setInt8(r,0,!0),o=o&(BigInt(1)<<BigInt(64))-BigInt(1));var d=Number(o&BigInt(4294967295)),_=Number(o>>BigInt(32));return u.setUint32(t,d,!0),u.setUint32(t+4,_,!0),n.clearLastError()}function aa(e,a,t,r,n){if(!e)return 1;var i=s.envStore.get(e);if(i.checkGCAccess(),!s.feature.supportBigInt)return i.setLastError(9);if(!a||!r)return i.setLastError(1);var o=s.handleStore.get(a);if(!o.isBigInt())return i.setLastError(17);for(var u=o.value<BigInt(0),d=new DataView(f.buffer),_=d.getUint32(r,!0),I=0,A=u?o.value*BigInt(-1):o.value;A!==BigInt(0);)I++,A=A>>BigInt(64);if(A=u?o.value*BigInt(-1):o.value,!t&&!n)_=I,d.setUint32(r,_,!0);else{if(!t||!n)return i.setLastError(1);for(var P=[];A!==BigInt(0);){var U=A&(BigInt(1)<<BigInt(64))-BigInt(1);P.push(U),A=A>>BigInt(64)}for(var W=Math.min(_,P.length),z=0;z<W;z++){var $=Number(P[z]&BigInt(4294967295)),ae=Number(P[z]>>BigInt(32));d.setUint32(n+z*8,$,!0),d.setUint32(n+(z*8+4),ae,!0)}d.setInt32(t,u?1:0,!0),d.setUint32(r,W,!0)}return i.clearLastError()}function ia(e,a,t){if(!e)return 1;var r=s.envStore.get(e);if(r.checkGCAccess(),!a||!t)return r.setLastError(1);var n=s.handleStore.get(a);if(!n.isExternal())return r.setLastError(1);var i=n.data(),o=new DataView(f.buffer);return o.setInt32(t,i,!0),r.clearLastError()}function sa(e,a,t){if(!e)return 1;var r=s.envStore.get(e);if(r.checkGCAccess(),!a||!t)return r.setLastError(1);var n=s.handleStore.get(a);if(typeof n.value!="number")return r.setLastError(6);var i=new Int32Array([n.value])[0],o=new DataView(f.buffer);return o.setInt32(t,i,!0),r.clearLastError()}function oa(e,a,t){if(!e)return 1;var r=s.envStore.get(e);if(r.checkGCAccess(),!a||!t)return r.setLastError(1);var n=s.handleStore.get(a);if(typeof n.value!="number")return r.setLastError(6);var i=n.value,o=new DataView(f.buffer);return i===Number.POSITIVE_INFINITY||i===Number.NEGATIVE_INFINITY||isNaN(i)?(o.setInt32(t,0,!0),o.setInt32(t+4,0,!0)):i<-9223372036854776e3?(o.setInt32(t,0,!0),o.setInt32(t+4,2147483648,!0)):i>=9223372036854776e3?(o.setUint32(t,4294967295,!0),o.setUint32(t+4,2147483647,!0)):be(t,Math.trunc(i)),r.clearLastError()}function ua(e,a,t,r,n){if(!e)return 1;var i=s.envStore.get(e);if(i.checkGCAccess(),!a)return i.setLastError(1);r=r>>>0;var o=s.handleStore.get(a);if(typeof o.value!="string")return i.setLastError(3);var u=new DataView(f.buffer);if(t)if(r!==0){for(var d=0,_=void 0,I=0;I<r-1;++I)_=o.value.charCodeAt(I)&255,u.setUint8(t+I,_,!0),d++;u.setUint8(t+d,0,!0),n&&u.setUint32(n,d,!0)}else n&&u.setUint32(n,0,!0);else{if(!n)return i.setLastError(1);u.setUint32(n,o.value.length,!0)}return i.clearLastError()}function ca(e,a,t,r,n){if(!e)return 1;var i=s.envStore.get(e);if(i.checkGCAccess(),!a)return i.setLastError(1);r=r>>>0;var o=s.handleStore.get(a);if(typeof o.value!="string")return i.setLastError(3);var u=new DataView(f.buffer);if(t)if(r!==0){var _=X.stringToUTF8(o.value,t,r);n&&u.setUint32(n,_,!0)}else n&&u.setUint32(n,0,!0);else{if(!n)return i.setLastError(1);var d=X.lengthBytesUTF8(o.value);u.setUint32(n,d,!0)}return i.clearLastError()}function fa(e,a,t,r,n){if(!e)return 1;var i=s.envStore.get(e);if(i.checkGCAccess(),!a)return i.setLastError(1);r=r>>>0;var o=s.handleStore.get(a);if(typeof o.value!="string")return i.setLastError(3);var u=new DataView(f.buffer);if(t)if(r!==0){var d=X.stringToUTF16(o.value,t,r*2);n&&u.setUint32(n,d/2,!0)}else n&&u.setUint32(n,0,!0);else{if(!n)return i.setLastError(1);u.setUint32(n,o.value.length,!0)}return i.clearLastError()}function la(e,a,t){if(!e)return 1;var r=s.envStore.get(e);if(r.checkGCAccess(),!a||!t)return r.setLastError(1);var n=s.handleStore.get(a);if(typeof n.value!="number")return r.setLastError(6);var i=new Uint32Array([n.value])[0],o=new DataView(f.buffer);return o.setUint32(t,i,!0),r.clearLastError()}var da=Object.freeze({__proto__:null,napi_get_array_length:Yn,napi_get_arraybuffer_info:$n,napi_get_buffer_info:Zn,napi_get_dataview_info:Ur,napi_get_date_value:Xn,napi_get_prototype:Qn,napi_get_typedarray_info:Nr,napi_get_value_bigint_int64:ta,napi_get_value_bigint_uint64:na,napi_get_value_bigint_words:aa,napi_get_value_bool:ea,napi_get_value_double:ra,napi_get_value_external:ia,napi_get_value_int32:sa,napi_get_value_int64:oa,napi_get_value_string_latin1:ua,napi_get_value_string_utf16:fa,napi_get_value_string_utf8:ca,napi_get_value_uint32:la});function _a(e,a,t){if(!e)return 1;var r=s.envStore.get(e);if(r.checkGCAccess(),!t)return r.setLastError(1);var n=s.addToCurrentScope(a).id,i=new DataView(f.buffer);return i.setInt32(t,n,!0),r.clearLastError()}function va(e,a,t){if(!e)return 1;var r=s.envStore.get(e);if(r.checkGCAccess(),!t)return r.setLastError(1);var n=s.addToCurrentScope(a>>>0).id,i=new DataView(f.buffer);return i.setInt32(t,n,!0),r.clearLastError()}function ga(e,a,t,r){if(!e)return 1;var n=s.envStore.get(e);n.checkGCAccess();var i;if(!t)return n.setLastError(1);i=Number(a);var o=s.addToCurrentScope(i).id,u=new DataView(f.buffer);return u.setInt32(t,o,!0),n.clearLastError()}function ha(e,a,t){if(!e)return 1;var r=s.envStore.get(e);if(r.checkGCAccess(),!t)return r.setLastError(1);var n=s.addToCurrentScope(a).id,i=new DataView(f.buffer);return i.setInt32(t,n,!0),r.clearLastError()}function tr(e,a,t,r){return X.newString(e,a,t,r,function(n,i,o){var u="",d=0,_=new DataView(f.buffer);if(i)for(;;){var I=_.getUint8(n,!0);if(!I)break;u+=String.fromCharCode(I),n++}else for(;d<o;){var I=_.getUint8(n,!0);if(!I)break;u+=String.fromCharCode(I),d++,n++}return u})}function nr(e,a,t,r){return X.newString(e,a,t,r,function(n){return X.UTF16ToString(n,t)})}function xr(e,a,t,r){return X.newString(e,a,t,r,function(n){return X.UTF8ToString(n,t)})}function pa(e,a,t,r,n,i,o){return X.newExternalString(e,a,t,r,n,i,o,tr,void 0)}function Ea(e,a,t,r,n,i,o){return X.newExternalString(e,a,t,r,n,i,o,nr,void 0)}function ya(e,a,t,r){return tr(e,a,t,r)}function ma(e,a,t,r){return xr(e,a,t,r)}function wa(e,a,t,r){return nr(e,a,t,r)}function Aa(e,a,t,r){if(!e)return 1;var n=s.envStore.get(e);if(n.checkGCAccess(),!s.feature.supportBigInt)return n.setLastError(9);var i;if(!t)return n.setLastError(1);i=a;var o=s.addToCurrentScope(i).id,u=new DataView(f.buffer);return u.setInt32(t,o,!0),n.clearLastError()}function ba(e,a,t,r){if(!e)return 1;var n=s.envStore.get(e);if(n.checkGCAccess(),!s.feature.supportBigInt)return n.setLastError(9);var i;if(!t)return n.setLastError(1);i=a&(BigInt(1)<<BigInt(64))-BigInt(1);var o=s.addToCurrentScope(i).id,u=new DataView(f.buffer);return u.setInt32(t,o,!0),n.clearLastError()}function Ia(e,a,t,r,n){var i,o;if(!e)return 1;var u=s.envStore.get(e);if(u.checkGCAccess(),!u.tryCatch.isEmpty())return u.setLastError(10);if(!u.canCallIntoJs())return u.setLastError(u.moduleApiVersion>=10?23:10);u.clearLastError();try{if(!s.feature.supportBigInt)return u.setLastError(9);if(!n||(t=t>>>0,t>2147483647))return u.setLastError(1);if(t>16384)throw new RangeError("Maximum BigInt size exceeded");var d=BigInt(0),_=new DataView(f.buffer);for(o=0;o<t;o++){var I=_.getUint32(r+o*8,!0),A=_.getUint32(r+(o*8+4),!0),P=BigInt(I)|BigInt(A)<<BigInt(32);d+=P<<BigInt(64*o)}return d*=BigInt(a)%BigInt(2)===BigInt(0)?BigInt(1):BigInt(-1),i=s.addToCurrentScope(d).id,_.setInt32(n,i,!0),u.getReturnStatus()}catch(U){return u.tryCatch.setError(U),u.setLastError(10)}}var La=Object.freeze({__proto__:null,napi_create_bigint_int64:Aa,napi_create_bigint_uint64:ba,napi_create_bigint_words:Ia,napi_create_double:ha,napi_create_int32:_a,napi_create_int64:ga,napi_create_string_latin1:tr,napi_create_string_utf16:nr,napi_create_string_utf8:xr,napi_create_uint32:va,node_api_create_external_string_latin1:pa,node_api_create_external_string_utf16:Ea,node_api_create_property_key_latin1:ya,node_api_create_property_key_utf16:wa,node_api_create_property_key_utf8:ma});function Ve(e,a,t,r,n){var i=!a||!t?"":X.UTF8ToString(a,t),o,u=C.get(r),d=function(A){return u(A.id,A.ctx.scopeStore.currentScope.id)},_=function(A,P){return function(){var U=A.ctx.openScope(A),W=U.callbackInfo;W.data=n,W.args=arguments,W.thiz=this,W.fn=o;try{var z=A.callIntoModule(P);return z?A.ctx.handleStore.get(z).value:void 0}finally{W.data=0,W.args=void 0,W.thiz=void 0,W.fn=void 0,A.ctx.closeScope(A,U)}}};if(i==="")return o=_(e,d),{status:0,f:o};if(!/^[_$a-zA-Z][_$a-zA-Z0-9]*$/.test(i))return{status:1,f:void 0};if(s.feature.supportNewFunction){var I=_(e,d);try{o=new Function("_","return function "+i+'(){"use strict";return _.apply(this,arguments);};')(I)}catch{o=_(e,d),s.feature.canSetFunctionName&&Object.defineProperty(o,"name",{value:i})}}else o=_(e,d),s.feature.canSetFunctionName&&Object.defineProperty(o,"name",{value:i});return{status:0,f:o}}function ar(e,a,t,r,n,i,o,u,d){if(n||i){var _=void 0,I=void 0;n&&(_=Ve(e,0,0,n,d).f),i&&(I=Ve(e,0,0,i,d).f);var A={configurable:(u&4)!==0,enumerable:(u&2)!==0,get:_,set:I};Object.defineProperty(a,t,A)}else if(r){var P=Ve(e,0,0,r,d).f,A={configurable:(u&4)!==0,enumerable:(u&2)!==0,writable:(u&1)!==0,value:P};Object.defineProperty(a,t,A)}else{var A={configurable:(u&4)!==0,enumerable:(u&2)!==0,writable:(u&1)!==0,value:s.handleStore.get(o).value};Object.defineProperty(a,t,A)}}function Mr(e){var a=s.handleStore.get(e);return a.isObject()||a.isFunction()?(typeof K<"u"&&ArrayBuffer.isView(a.value)&&K.wasmMemoryViewTable.has(a.value)&&(a=s.addToCurrentScope(K.wasmMemoryViewTable.get(a.value))),{status:0,handle:a}):{status:1}}function Sa(e,a,t,r,n,i){var o;if(!e)return 1;var u=s.envStore.get(e);if(u.checkGCAccess(),!u.tryCatch.isEmpty())return u.setLastError(10);if(!u.canCallIntoJs())return u.setLastError(u.moduleApiVersion>=10?23:10);u.clearLastError();try{if(!s.feature.supportFinalizer){if(r)throw s.createNotSupportWeakRefError("napi_wrap",'Parameter "finalize_cb" must be 0(NULL)');if(i)throw s.createNotSupportWeakRefError("napi_wrap",'Parameter "result" must be 0(NULL)')}if(!a)return u.setLastError(1);var d=Mr(a);if(d.status!==0)return u.setLastError(d.status);var _=d.handle;if(u.getObjectBinding(_.value).wrapped!==0)return u.setLastError(1);var I=void 0;if(i){if(!r)return u.setLastError(1);I=s.createReferenceWithFinalizer(u,_.id,0,1,r,t,n),o=I.id;var A=new DataView(f.buffer);A.setInt32(i,o,!0)}else r?I=s.createReferenceWithFinalizer(u,_.id,0,0,r,t,n):I=s.createReferenceWithData(u,_.id,0,0,t);return u.getObjectBinding(_.value).wrapped=I.id,u.getReturnStatus()}catch(P){return u.tryCatch.setError(P),u.setLastError(10)}}function Wr(e,a,t,r){var n;if(!e)return 1;var i=s.envStore.get(e);if(i.checkGCAccess(),!i.tryCatch.isEmpty())return i.setLastError(10);if(!i.canCallIntoJs())return i.setLastError(i.moduleApiVersion>=10?23:10);i.clearLastError();try{if(!a||r===0&&!t)return i.setLastError(1);var o=s.handleStore.get(a);if(!(o.isObject()||o.isFunction()))return i.setLastError(1);var u=i.getObjectBinding(o.value),d=u.wrapped,_=s.refStore.get(d);if(!_)return i.setLastError(1);if(t){n=_.data();var I=new DataView(f.buffer);I.setInt32(t,n,!0)}return r===1&&(u.wrapped=0,_.ownership()===1?_.resetFinalizer():_.dispose()),i.getReturnStatus()}catch(A){return i.tryCatch.setError(A),i.setLastError(10)}}function Ta(e,a,t,r,n,i,o,u){var d,_,I;if(!e)return 1;var A=s.envStore.get(e);if(A.checkGCAccess(),!A.tryCatch.isEmpty())return A.setLastError(10);if(!A.canCallIntoJs())return A.setLastError(A.moduleApiVersion>=10?23:10);A.clearLastError();try{if(!u||!r||(i=i>>>0,i>0&&!o)||t<-1||t>2147483647||!a)return A.setLastError(1);var P=Ve(A,a,t,r,n);if(P.status!==0)return A.setLastError(P.status);for(var U=P.f,W=void 0,z=new DataView(f.buffer),$=0;$<i;$++){d=o+$*32;var ae=z.getInt32(d,!0),ue=z.getInt32(d+4,!0),ee=z.getInt32(d+8,!0),fe=z.getInt32(d+12,!0),he=z.getInt32(d+16,!0),_e=z.getInt32(d+20,!0);I=z.getInt32(d+24,!0);var ye=z.getInt32(d+28,!0);if(ae)W=X.UTF8ToString(ae,-1);else if(!ue||(W=s.handleStore.get(ue).value,typeof W!="string"&&typeof W!="symbol"))return A.setLastError(4);if((I&1024)!==0){ar(A,U,W,ee,fe,he,_e,I,ye);continue}ar(A,U.prototype,W,ee,fe,he,_e,I,ye)}var Ie=s.addToCurrentScope(U);return _=Ie.id,z.setInt32(u,_,!0),A.getReturnStatus()}catch(ur){return A.tryCatch.setError(ur),A.setLastError(10)}}function Ca(e,a,t,r,n,i){return Sa(e,a,t,r,n,i)}function ka(e,a,t){return Wr(e,a,t,0)}function Da(e,a,t){return Wr(e,a,t,1)}function Ba(e,a,t){if(!e)return 1;var r=s.envStore.get(e);if(r.checkGCAccess(),!r.tryCatch.isEmpty())return r.setLastError(10);if(!r.canCallIntoJs())return r.setLastError(r.moduleApiVersion>=10?23:10);r.clearLastError();try{if(!a)return r.setLastError(r.tryCatch.hasCaught()?10:1);var n=s.handleStore.get(a);if(!(n.isObject()||n.isFunction()))return r.setLastError(r.tryCatch.hasCaught()?10:2);if(!t)return r.setLastError(r.tryCatch.hasCaught()?10:1);var i=r.getObjectBinding(n.value);if(i.tag!==null)return r.setLastError(r.tryCatch.hasCaught()?10:1);var o=new Uint8Array(16);return o.set(new Uint8Array(f.buffer,t,16)),i.tag=new Uint32Array(o.buffer),r.getReturnStatus()}catch(u){return r.tryCatch.setError(u),r.setLastError(10)}}function Oa(e,a,t,r){var n=!0;if(!e)return 1;var i=s.envStore.get(e);if(i.checkGCAccess(),!i.tryCatch.isEmpty())return i.setLastError(10);if(!i.canCallIntoJs())return i.setLastError(i.moduleApiVersion>=10?23:10);i.clearLastError();try{if(!a)return i.setLastError(i.tryCatch.hasCaught()?10:1);var o=s.handleStore.get(a);if(!(o.isObject()||o.isFunction()))return i.setLastError(i.tryCatch.hasCaught()?10:2);if(!t||!r)return i.setLastError(i.tryCatch.hasCaught()?10:1);var u=i.getObjectBinding(o.value);if(u.tag!==null){var d=u.tag,_=new Uint32Array(f.buffer,t,4);n=d[0]===_[0]&&d[1]===_[1]&&d[2]===_[2]&&d[3]===_[3]}else n=!1;var I=new DataView(f.buffer);return I.setInt8(r,n?1:0,!0),i.getReturnStatus()}catch(A){return i.tryCatch.setError(A),i.setLastError(10)}}function ir(e,a,t,r,n,i){if(!e)return 1;var o=s.envStore.get(e);if(o.checkGCAccess(),!s.feature.supportFinalizer)return o.setLastError(9);if(!a||!r)return o.setLastError(1);var u=Mr(a);if(u.status!==0)return o.setLastError(u.status);var d=u.handle,_=i?1:0,I=s.createReferenceWithFinalizer(o,d.id,0,_,r,t,n);if(i){var A=I.id,P=new DataView(f.buffer);P.setInt32(i,A,!0)}return o.clearLastError()}function Fa(e,a,t,r){if(!e)return 1;var n=s.envStore.get(e);return n.enqueueFinalizer(s.createTrackedFinalizer(n,a,t,r)),n.clearLastError()}var Pa=Object.freeze({__proto__:null,napi_add_finalizer:ir,napi_check_object_type_tag:Oa,napi_define_class:Ta,napi_remove_wrap:Da,napi_type_tag_object:Ba,napi_unwrap:ka,napi_wrap:Ca,node_api_post_finalizer:Fa});function jr(e,a,t,r,n,i,o){var u;if(!e)return 1;var d=s.envStore.get(e);if(d.checkGCAccess(),!d.tryCatch.isEmpty())return d.setLastError(10);if(!d.canCallIntoJs())return d.setLastError(d.moduleApiVersion>=10?23:10);d.clearLastError();try{if(!o)return d.setLastError(1);if(r=r>>>0,t||(r=0),r>2147483647)throw new RangeError("Cannot create a memory view larger than 2147483647 bytes");if(t+r>f.buffer.byteLength)throw new RangeError("Memory out of range");if(!s.feature.supportFinalizer&&n)throw s.createNotSupportWeakRefError("emnapi_create_memory_view",'Parameter "finalize_cb" must be 0(NULL)');var _=void 0;switch(a){case 0:_={Ctor:Int8Array,address:t,length:r,ownership:1,runtimeAllocated:0};break;case 1:_={Ctor:Uint8Array,address:t,length:r,ownership:1,runtimeAllocated:0};break;case 2:_={Ctor:Uint8ClampedArray,address:t,length:r,ownership:1,runtimeAllocated:0};break;case 3:_={Ctor:Int16Array,address:t,length:r>>1,ownership:1,runtimeAllocated:0};break;case 4:_={Ctor:Uint16Array,address:t,length:r>>1,ownership:1,runtimeAllocated:0};break;case 5:_={Ctor:Int32Array,address:t,length:r>>2,ownership:1,runtimeAllocated:0};break;case 6:_={Ctor:Uint32Array,address:t,length:r>>2,ownership:1,runtimeAllocated:0};break;case 7:_={Ctor:Float32Array,address:t,length:r>>2,ownership:1,runtimeAllocated:0};break;case 8:_={Ctor:Float64Array,address:t,length:r>>3,ownership:1,runtimeAllocated:0};break;case 9:_={Ctor:BigInt64Array,address:t,length:r>>3,ownership:1,runtimeAllocated:0};break;case 10:_={Ctor:BigUint64Array,address:t,length:r>>3,ownership:1,runtimeAllocated:0};break;case-1:_={Ctor:DataView,address:t,length:r,ownership:1,runtimeAllocated:0};break;case-2:{if(!s.feature.Buffer)throw s.createNotSupportBufferError("emnapi_create_memory_view","");_={Ctor:s.feature.Buffer,address:t,length:r,ownership:1,runtimeAllocated:0};break}default:return d.setLastError(1)}var I=_.Ctor,A=a===-2?s.feature.Buffer.from(f.buffer,_.address,_.length):new I(f.buffer,_.address,_.length),P=s.addToCurrentScope(A);if(K.wasmMemoryViewTable.set(A,_),n){var U=ir(e,P.id,t,n,i,0);if(U===10){var W=d.tryCatch.extractException();throw d.clearLastError(),W}else if(U!==0)return d.setLastError(U)}u=P.id;var z=new DataView(f.buffer);return z.setInt32(o,u,!0),d.getReturnStatus()}catch($){return d.tryCatch.setError($),d.setLastError(10)}}function Ra(){return s.feature.supportFinalizer?1:0}function Va(){return s.feature.supportBigInt?1:0}function Na(){return v?1:0}function sr(e,a,t,r){t=t??0,t=t>>>0;var n;if(a instanceof ArrayBuffer){var i=K.getArrayBufferPointer(a,!1).address;if(!i)throw new Error("Unknown ArrayBuffer address");if((typeof r!="number"||r===-1)&&(r=a.byteLength-t),r=r>>>0,r===0)return a;n=new Uint8Array(a,t,r);var o=new Uint8Array(f.buffer);return e?o.set(n,i):n.set(o.subarray(i,i+r)),a}if(ArrayBuffer.isView(a)){var u=K.getViewPointer(a,!1),d=u.view,i=u.address;if(!i)throw new Error("Unknown ArrayBuffer address");if((typeof r!="number"||r===-1)&&(r=d.byteLength-t),r=r>>>0,r===0)return d;n=new Uint8Array(d.buffer,d.byteOffset+t,r);var o=new Uint8Array(f.buffer);return e?o.set(n,i):n.set(o.subarray(i,i+r)),d}throw new TypeError("emnapiSyncMemory expect ArrayBuffer or ArrayBufferView as first parameter")}function Ua(e,a,t,r,n){var i;if(!e)return 1;var o=s.envStore.get(e);if(o.checkGCAccess(),!o.tryCatch.isEmpty())return o.setLastError(10);if(!o.canCallIntoJs())return o.setLastError(o.moduleApiVersion>=10?23:10);o.clearLastError();try{if(!t)return o.setLastError(1);var u=new DataView(f.buffer),d=u.getInt32(t,!0),_=o.ctx.handleStore.get(d);if(!_.isArrayBuffer()&&!_.isTypedArray()&&!_.isDataView())return o.setLastError(1);var I=sr(!!a,_.value,r,n);return _.value!==I&&(i=o.ensureHandleId(I),u.setInt32(t,i,!0)),o.getReturnStatus()}catch(A){return o.tryCatch.setError(A),o.setLastError(10)}}function or(e){var a=e instanceof ArrayBuffer,t=e instanceof DataView,r=ArrayBuffer.isView(e)&&!t;if(!a&&!r&&!t)throw new TypeError("emnapiGetMemoryAddress expect ArrayBuffer or ArrayBufferView as first parameter");var n;return a?n=K.getArrayBufferPointer(e,!1):n=K.getViewPointer(e,!1),{address:n.address,ownership:n.ownership,runtimeAllocated:n.runtimeAllocated}}function xa(e,a,t,r,n){var i,o,u,d;if(!e)return 1;var _=s.envStore.get(e);if(_.checkGCAccess(),!_.tryCatch.isEmpty())return _.setLastError(10);if(!_.canCallIntoJs())return _.setLastError(_.moduleApiVersion>=10?23:10);_.clearLastError();try{if(!a||!t&&!r&&!n)return _.setLastError(1);var I=_.ctx.handleStore.get(a);d=or(I.value),i=d.address;var A=new DataView(f.buffer);return t&&A.setInt32(t,i,!0),r&&(u=d.ownership,A.setInt32(r,u,!0)),n&&(o=d.runtimeAllocated,A.setInt8(n,o,!0)),_.getReturnStatus()}catch(P){return _.tryCatch.setError(P),_.setLastError(10)}}function Ma(e,a){if(!e)return 1;var t=s.envStore.get(e);if(!a)return t.setLastError(1);var r;try{r=s.getRuntimeVersions().version}catch{return t.setLastError(9)}var n=r.split(".").map(function(o){return Number(o)}),i=new DataView(f.buffer);return i.setUint32(a,n[0],!0),i.setUint32(a+4,n[1],!0),i.setUint32(a+8,n[2],!0),t.clearLastError()}var Wa=Object.freeze({__proto__:null,$emnapiGetMemoryAddress:or,$emnapiSyncMemory:sr,emnapi_create_memory_view:jr,emnapi_get_memory_address:xa,emnapi_get_runtime_version:Ma,emnapi_is_node_binding_available:Na,emnapi_is_support_bigint:Va,emnapi_is_support_weakref:Ra,emnapi_sync_memory:Ua});function ja(e,a){if(!e)return 1;var t=s.envStore.get(e);if(t.checkGCAccess(),!a)return t.setLastError(1);var r=s.addToCurrentScope([]).id,n=new DataView(f.buffer);return n.setInt32(a,r,!0),t.clearLastError()}function Ha(e,a,t){if(!e)return 1;var r=s.envStore.get(e);if(r.checkGCAccess(),!t)return r.setLastError(1);a=a>>>0;var n=s.addToCurrentScope(new Array(a)).id,i=new DataView(f.buffer);return i.setInt32(t,n,!0),r.clearLastError()}function Hr(e,a){e=e>>>0;var t=new ArrayBuffer(e);if(a){var r=K.getArrayBufferPointer(t,!0).address,n=new DataView(f.buffer);n.setInt32(a,r,!0)}return t}function Ga(e,a,t,r){var n;if(!e)return 1;var i=s.envStore.get(e);if(i.checkGCAccess(),!i.tryCatch.isEmpty())return i.setLastError(10);if(!i.canCallIntoJs())return i.setLastError(i.moduleApiVersion>=10?23:10);i.clearLastError();try{if(!r)return i.setLastError(1);var o=Hr(a,t);n=s.addToCurrentScope(o).id;var u=new DataView(f.buffer);return u.setInt32(r,n,!0),i.getReturnStatus()}catch(d){return i.tryCatch.setError(d),i.setLastError(10)}}function za(e,a,t){var r;if(!e)return 1;var n=s.envStore.get(e);if(n.checkGCAccess(),!n.tryCatch.isEmpty())return n.setLastError(10);if(!n.canCallIntoJs())return n.setLastError(n.moduleApiVersion>=10?23:10);n.clearLastError();try{if(!t)return n.setLastError(1);r=s.addToCurrentScope(new Date(a)).id;var i=new DataView(f.buffer);return i.setInt32(t,r,!0),n.getReturnStatus()}catch(o){return n.tryCatch.setError(o),n.setLastError(10)}}function Ja(e,a,t,r,n){var i;if(!e)return 1;var o=s.envStore.get(e);if(o.checkGCAccess(),!o.tryCatch.isEmpty())return o.setLastError(10);if(!o.canCallIntoJs())return o.setLastError(o.moduleApiVersion>=10?23:10);o.clearLastError();try{if(!n)return o.setLastError(1);if(!s.feature.supportFinalizer&&t)throw s.createNotSupportWeakRefError("napi_create_external",'Parameter "finalize_cb" must be 0(NULL)');var u=s.getCurrentScope().addExternal(a);t&&s.createReferenceWithFinalizer(o,u.id,0,0,t,a,r),i=u.id;var d=new DataView(f.buffer);return d.setInt32(n,i,!0),o.clearLastError()}catch(_){return o.tryCatch.setError(_),o.setLastError(10)}}function qa(e,a,t,r,n,i){var o;if(!e)return 1;var u=s.envStore.get(e);if(u.checkGCAccess(),!u.tryCatch.isEmpty())return u.setLastError(10);if(!u.canCallIntoJs())return u.setLastError(u.moduleApiVersion>=10?23:10);u.clearLastError();try{if(!i)return u.setLastError(1);if(t=t>>>0,a||(t=0),a+t>f.buffer.byteLength)throw new RangeError("Memory out of range");if(!s.feature.supportFinalizer&&r)throw s.createNotSupportWeakRefError("napi_create_external_arraybuffer",'Parameter "finalize_cb" must be 0(NULL)');var d=new ArrayBuffer(t);if(t===0)try{var _=s.feature.MessageChannel,I=new _;I.port1.postMessage(d,[d])}catch{}else{var A=new Uint8Array(d);A.set(new Uint8Array(f.buffer).subarray(a,a+t)),K.table.set(d,{address:a,ownership:1,runtimeAllocated:0})}var P=s.addToCurrentScope(d);if(r){var U=ir(e,P.id,a,r,n,0);if(U===10){var W=u.tryCatch.extractException();throw u.clearLastError(),W}else if(U!==0)return u.setLastError(U)}o=P.id;var z=new DataView(f.buffer);return z.setInt32(i,o,!0),u.getReturnStatus()}catch($){return u.tryCatch.setError($),u.setLastError(10)}}function Ka(e,a){if(!e)return 1;var t=s.envStore.get(e);if(t.checkGCAccess(),!a)return t.setLastError(1);var r=s.addToCurrentScope({}).id,n=new DataView(f.buffer);return n.setInt32(a,r,!0),t.clearLastError()}function Ya(e,a,t){if(!e)return 1;var r=s.envStore.get(e);if(r.checkGCAccess(),!t)return r.setLastError(1);var n=new DataView(f.buffer);if(a){var o=s.handleStore.get(a),u=o.value;if(typeof u!="string")return r.setLastError(3);var d=s.addToCurrentScope(Symbol(u)).id;n.setInt32(t,d,!0)}else{var i=s.addToCurrentScope(Symbol()).id;n.setInt32(t,i,!0)}return r.clearLastError()}function $a(e,a,t,r,n,i){var o;if(!e)return 1;var u=s.envStore.get(e);if(u.checkGCAccess(),!u.tryCatch.isEmpty())return u.setLastError(10);if(!u.canCallIntoJs())return u.setLastError(u.moduleApiVersion>=10?23:10);u.clearLastError();try{if(!r||!i)return u.setLastError(1);var d=s.handleStore.get(r);if(!d.isArrayBuffer())return u.setLastError(1);var _=d.value,I=function(A,P,U,W,z,$){var ae;if(z=z>>>0,$=$>>>0,U>1&&z%U!==0){var ue=new RangeError("start offset of ".concat((ae=P.name)!==null&&ae!==void 0?ae:""," should be a multiple of ").concat(U));return ue.code="ERR_NAPI_INVALID_TYPEDARRAY_ALIGNMENT",A.tryCatch.setError(ue),A.setLastError(9)}if($*U+z>W.byteLength){var ue=new RangeError("Invalid typed array length");return ue.code="ERR_NAPI_INVALID_TYPEDARRAY_LENGTH",A.tryCatch.setError(ue),A.setLastError(9)}var ee=new P(W,z,$);W===f.buffer&&(K.wasmMemoryViewTable.has(ee)||K.wasmMemoryViewTable.set(ee,{Ctor:P,address:z,length:$,ownership:1,runtimeAllocated:0})),o=s.addToCurrentScope(ee).id;var fe=new DataView(f.buffer);return fe.setInt32(i,o,!0),A.getReturnStatus()};switch(a){case 0:return I(u,Int8Array,1,_,n,t);case 1:return I(u,Uint8Array,1,_,n,t);case 2:return I(u,Uint8ClampedArray,1,_,n,t);case 3:return I(u,Int16Array,2,_,n,t);case 4:return I(u,Uint16Array,2,_,n,t);case 5:return I(u,Int32Array,4,_,n,t);case 6:return I(u,Uint32Array,4,_,n,t);case 7:return I(u,Float32Array,4,_,n,t);case 8:return I(u,Float64Array,8,_,n,t);case 9:return I(u,BigInt64Array,8,_,n,t);case 10:return I(u,BigUint64Array,8,_,n,t);default:return u.setLastError(1)}}catch(A){return u.tryCatch.setError(A),u.setLastError(10)}}function Qa(e,a,t,r){var n,i,o;if(!e)return 1;var u=s.envStore.get(e);if(u.checkGCAccess(),!u.tryCatch.isEmpty())return u.setLastError(10);if(!u.canCallIntoJs())return u.setLastError(u.moduleApiVersion>=10?23:10);u.clearLastError();try{if(!r)return u.setLastError(1);var d=s.feature.Buffer;if(!d)throw s.createNotSupportBufferError("napi_create_buffer","");var _=void 0;a=a>>>0;var I=new DataView(f.buffer);if(!t||a===0)_=d.alloc(a),i=s.addToCurrentScope(_).id,I.setInt32(r,i,!0);else{if(o=F(a),!o)throw new Error("Out of memory");new Uint8Array(f.buffer).subarray(o,o+a).fill(0);var A=d.from(f.buffer,o,a),P={Ctor:d,address:o,length:a,ownership:K.registry?0:1,runtimeAllocated:1};K.wasmMemoryViewTable.set(A,P),(n=K.registry)===null||n===void 0||n.register(P,o),i=s.addToCurrentScope(A).id,I.setInt32(r,i,!0),I.setInt32(t,o,!0)}return u.getReturnStatus()}catch(U){return u.tryCatch.setError(U),u.setLastError(10)}}function Za(e,a,t,r,n){var i;if(!e)return 1;var o=s.envStore.get(e);if(o.checkGCAccess(),!o.tryCatch.isEmpty())return o.setLastError(10);if(!o.canCallIntoJs())return o.setLastError(o.moduleApiVersion>=10?23:10);o.clearLastError();try{if(!n)return o.setLastError(1);var u=s.feature.Buffer;if(!u)throw s.createNotSupportBufferError("napi_create_buffer_copy","");var d=Hr(a,r),_=u.from(d);_.set(new Uint8Array(f.buffer).subarray(t,t+a)),i=s.addToCurrentScope(_).id;var I=new DataView(f.buffer);return I.setInt32(n,i,!0),o.getReturnStatus()}catch(A){return o.tryCatch.setError(A),o.setLastError(10)}}function Xa(e,a,t,r,n,i){return jr(e,-2,t,a,r,n,i)}function ei(e,a,t,r,n){var i;if(!e)return 1;var o=s.envStore.get(e);if(o.checkGCAccess(),!o.tryCatch.isEmpty())return o.setLastError(10);if(!o.canCallIntoJs())return o.setLastError(o.moduleApiVersion>=10?23:10);o.clearLastError();try{if(!a||!n)return o.setLastError(1);t=t>>>0,r=r>>>0;var u=s.handleStore.get(a);if(!u.isArrayBuffer())return o.setLastError(1);var d=u.value;if(r+t>d.byteLength){var _=new RangeError("The byte offset + length is out of range");throw _.code="ERR_OUT_OF_RANGE",_}var I=s.feature.Buffer;if(!I)throw s.createNotSupportBufferError("node_api_create_buffer_from_arraybuffer","");var A=I.from(d,t,r);d===f.buffer&&(K.wasmMemoryViewTable.has(A)||K.wasmMemoryViewTable.set(A,{Ctor:I,address:t,length:r,ownership:1,runtimeAllocated:0})),i=s.addToCurrentScope(A).id;var P=new DataView(f.buffer);return P.setInt32(n,i,!0),o.getReturnStatus()}catch(U){return o.tryCatch.setError(U),o.setLastError(10)}}function ri(e,a,t,r,n){var i;if(!e)return 1;var o=s.envStore.get(e);if(o.checkGCAccess(),!o.tryCatch.isEmpty())return o.setLastError(10);if(!o.canCallIntoJs())return o.setLastError(o.moduleApiVersion>=10?23:10);o.clearLastError();try{if(!t||!n)return o.setLastError(1);a=a>>>0,r=r>>>0;var u=s.handleStore.get(t);if(!u.isArrayBuffer())return o.setLastError(1);var d=u.value;if(a+r>d.byteLength){var _=new RangeError("byte_offset + byte_length should be less than or equal to the size in bytes of the array passed in");throw _.code="ERR_NAPI_INVALID_DATAVIEW_ARGS",_}var I=new DataView(d,r,a);d===f.buffer&&(K.wasmMemoryViewTable.has(I)||K.wasmMemoryViewTable.set(I,{Ctor:DataView,address:r,length:a,ownership:1,runtimeAllocated:0})),i=s.addToCurrentScope(I).id;var A=new DataView(f.buffer);return A.setInt32(n,i,!0),o.getReturnStatus()}catch(P){return o.tryCatch.setError(P),o.setLastError(10)}}function ti(e,a,t,r){if(!e)return 1;var n=s.envStore.get(e);if(n.checkGCAccess(),!r)return n.setLastError(1);var i=t===-1,o=t>>>0;if(t!==0&&!a||!(i||o<=2147483647))return n.setLastError(1);var u=X.UTF8ToString(a,t),d=s.addToCurrentScope(Symbol.for(u)).id,_=new DataView(f.buffer);return _.setInt32(r,d,!0),n.clearLastError()}var ni=Object.freeze({__proto__:null,napi_create_array:ja,napi_create_array_with_length:Ha,napi_create_arraybuffer:Ga,napi_create_buffer:Qa,napi_create_buffer_copy:Za,napi_create_dataview:ri,napi_create_date:za,napi_create_external:Ja,napi_create_external_arraybuffer:qa,napi_create_external_buffer:Xa,napi_create_object:Ka,napi_create_symbol:Ya,napi_create_typedarray:$a,node_api_create_buffer_from_arraybuffer:ei,node_api_symbol_for:ti});function ai(e,a,t){if(!e)return 1;var r=s.envStore.get(e);if(r.checkGCAccess(),!t)return r.setLastError(1);var n=a===0?3:4,i=new DataView(f.buffer);return i.setInt32(t,n,!0),r.clearLastError()}function ii(e,a){if(!e)return 1;var t=s.envStore.get(e);if(t.checkGCAccess(),!a)return t.setLastError(1);var r=5,n=new DataView(f.buffer);return n.setInt32(a,r,!0),t.clearLastError()}function si(e,a){if(!e)return 1;var t=s.envStore.get(e);if(t.checkGCAccess(),!a)return t.setLastError(1);var r=2,n=new DataView(f.buffer);return n.setInt32(a,r,!0),t.clearLastError()}function oi(e,a){if(!e)return 1;var t=s.envStore.get(e);if(t.checkGCAccess(),!a)return t.setLastError(1);var r=1,n=new DataView(f.buffer);return n.setInt32(a,r,!0),t.clearLastError()}var ui=Object.freeze({__proto__:null,napi_get_boolean:ai,napi_get_global:ii,napi_get_null:si,napi_get_undefined:oi});function ci(e,a,t,r){if(!e)return 1;var n=s.envStore.get(e);return n.setInstanceData(a,t,r),n.clearLastError()}function fi(e,a){if(!e)return 1;var t=s.envStore.get(e);if(!a)return t.setLastError(1);var r=t.getInstanceData(),n=new DataView(f.buffer);return n.setInt32(a,r,!0),t.clearLastError()}var li=Object.freeze({__proto__:null,napi_get_instance_data:fi,napi_set_instance_data:ci});function di(e,a,t,r){var n=s.envStore.get(e),i=n.lastError,o=i.errorCode,u=i.engineErrorCode>>>0,d=i.engineReserved,_=new DataView(f.buffer);_.setInt32(a,o,!0),_.setUint32(t,u,!0),_.setInt32(r,d,!0)}function _i(e,a){if(!e)return 1;var t=s.envStore.get(e);if(t.checkGCAccess(),!t.tryCatch.isEmpty())return t.setLastError(10);if(!t.canCallIntoJs())return t.setLastError(t.moduleApiVersion>=10?23:10);t.clearLastError();try{return a?(t.tryCatch.setError(s.handleStore.get(a).value),t.clearLastError()):t.setLastError(1)}catch(r){return t.tryCatch.setError(r),t.setLastError(10)}}function vi(e,a,t){if(!e)return 1;var r=s.envStore.get(e);if(r.checkGCAccess(),!r.tryCatch.isEmpty())return r.setLastError(10);if(!r.canCallIntoJs())return r.setLastError(r.moduleApiVersion>=10?23:10);r.clearLastError();try{if(!t)return r.setLastError(1);var n=new Error(X.UTF8ToString(t,-1));return a&&(n.code=X.UTF8ToString(a,-1)),r.tryCatch.setError(n),r.clearLastError()}catch(i){return r.tryCatch.setError(i),r.setLastError(10)}}function gi(e,a,t){if(!e)return 1;var r=s.envStore.get(e);if(r.checkGCAccess(),!r.tryCatch.isEmpty())return r.setLastError(10);if(!r.canCallIntoJs())return r.setLastError(r.moduleApiVersion>=10?23:10);r.clearLastError();try{if(!t)return r.setLastError(1);var n=new TypeError(X.UTF8ToString(t,-1));return a&&(n.code=X.UTF8ToString(a,-1)),r.tryCatch.setError(n),r.clearLastError()}catch(i){return r.tryCatch.setError(i),r.setLastError(10)}}function hi(e,a,t){if(!e)return 1;var r=s.envStore.get(e);if(r.checkGCAccess(),!r.tryCatch.isEmpty())return r.setLastError(10);if(!r.canCallIntoJs())return r.setLastError(r.moduleApiVersion>=10?23:10);r.clearLastError();try{if(!t)return r.setLastError(1);var n=new RangeError(X.UTF8ToString(t,-1));return a&&(n.code=X.UTF8ToString(a,-1)),r.tryCatch.setError(n),r.clearLastError()}catch(i){return r.tryCatch.setError(i),r.setLastError(10)}}function pi(e,a,t){if(!e)return 1;var r=s.envStore.get(e);if(r.checkGCAccess(),!r.tryCatch.isEmpty())return r.setLastError(10);if(!r.canCallIntoJs())return r.setLastError(r.moduleApiVersion>=10?23:10);r.clearLastError();try{if(!t)return r.setLastError(1);var n=new SyntaxError(X.UTF8ToString(t,-1));return a&&(n.code=X.UTF8ToString(a,-1)),r.tryCatch.setError(n),r.clearLastError()}catch(i){return r.tryCatch.setError(i),r.setLastError(10)}}function Ei(e,a){if(!e)return 1;var t=s.envStore.get(e);if(t.checkGCAccess(),!a)return t.setLastError(1);var r=t.tryCatch.hasCaught(),n=new DataView(f.buffer);return n.setInt8(a,r?1:0,!0),t.clearLastError()}function yi(e,a,t,r){if(!e)return 1;var n=s.envStore.get(e);if(n.checkGCAccess(),!t||!r)return n.setLastError(1);var i=s.handleStore.get(t).value;if(typeof i!="string")return n.setLastError(3);var o=new Error(i);if(a){var u=s.handleStore.get(a).value;if(typeof u!="string")return n.setLastError(3);o.code=u}var d=s.addToCurrentScope(o).id,_=new DataView(f.buffer);return _.setInt32(r,d,!0),n.clearLastError()}function mi(e,a,t,r){if(!e)return 1;var n=s.envStore.get(e);if(n.checkGCAccess(),!t||!r)return n.setLastError(1);var i=s.handleStore.get(t).value;if(typeof i!="string")return n.setLastError(3);var o=new TypeError(i);if(a){var u=s.handleStore.get(a).value;if(typeof u!="string")return n.setLastError(3);o.code=u}var d=s.addToCurrentScope(o).id,_=new DataView(f.buffer);return _.setInt32(r,d,!0),n.clearLastError()}function wi(e,a,t,r){if(!e)return 1;var n=s.envStore.get(e);if(n.checkGCAccess(),!t||!r)return n.setLastError(1);var i=s.handleStore.get(t).value;if(typeof i!="string")return n.setLastError(3);var o=new RangeError(i);if(a){var u=s.handleStore.get(a).value;if(typeof u!="string")return n.setLastError(3);o.code=u}var d=s.addToCurrentScope(o).id,_=new DataView(f.buffer);return _.setInt32(r,d,!0),n.clearLastError()}function Ai(e,a,t,r){if(!e)return 1;var n=s.envStore.get(e);if(n.checkGCAccess(),!t||!r)return n.setLastError(1);var i=s.handleStore.get(t).value;if(typeof i!="string")return n.setLastError(3);var o=new SyntaxError(i);if(a){var u=s.handleStore.get(a).value;if(typeof u!="string")return n.setLastError(3);o.code=u}var d=s.addToCurrentScope(o).id,_=new DataView(f.buffer);return _.setInt32(r,d,!0),n.clearLastError()}function bi(e,a){if(!e)return 1;var t=s.envStore.get(e);if(t.checkGCAccess(),!a)return t.setLastError(1);var r=new DataView(f.buffer);if(t.tryCatch.hasCaught()){var n=t.tryCatch.exception(),i=t.ensureHandleId(n);r.setInt32(a,i,!0),t.tryCatch.reset()}else return r.setInt32(a,1,!0),t.clearLastError();return t.clearLastError()}function Ii(e,a,t,r){var n=X.UTF8ToString(e,a),i=X.UTF8ToString(t,r);v?v.napi.fatalError(n,i):V("FATAL ERROR: "+n+" "+i)}function Li(e,a){if(!e)return 1;var t=s.envStore.get(e);if(t.checkGCAccess(),!t.tryCatch.isEmpty())return t.setLastError(10);if(!t.canCallIntoJs())return t.setLastError(t.moduleApiVersion>=10?23:10);t.clearLastError();try{if(!a)return t.setLastError(1);var r=t.ctx.handleStore.get(a);try{t.triggerFatalException(r.value)}catch{return t.setLastError(9)}return t.clearLastError()}catch(n){return t.tryCatch.setError(n),t.setLastError(10)}}var Si=Object.freeze({__proto__:null,_emnapi_get_last_error_info:di,napi_create_error:yi,napi_create_range_error:wi,napi_create_type_error:mi,napi_fatal_error:Ii,napi_fatal_exception:Li,napi_get_and_clear_last_exception:bi,napi_is_exception_pending:Ei,napi_throw:_i,napi_throw_error:vi,napi_throw_range_error:hi,napi_throw_type_error:gi,node_api_create_syntax_error:Ai,node_api_throw_syntax_error:pi});function Ti(e,a,t,r,n,i){var o;if(!e)return 1;var u=s.envStore.get(e);if(u.checkGCAccess(),!u.tryCatch.isEmpty())return u.setLastError(10);if(!u.canCallIntoJs())return u.setLastError(u.moduleApiVersion>=10?23:10);u.clearLastError();try{if(!i||!r)return u.setLastError(1);var d=Ve(u,a,t,r,n);if(d.status!==0)return u.setLastError(d.status);var _=d.f,I=s.addToCurrentScope(_);o=I.id;var A=new DataView(f.buffer);return A.setInt32(i,o,!0),u.getReturnStatus()}catch(P){return u.tryCatch.setError(P),u.setLastError(10)}}function Ci(e,a,t,r,n,i){if(!e)return 1;var o=s.envStore.get(e);if(!a)return o.setLastError(1);var u=s.scopeStore.get(a).callbackInfo,d=new DataView(f.buffer);if(r){if(!t)return o.setLastError(1);for(var _=d.getUint32(t,!0),I=u.args.length,A=_<I?_:I,P=0;P<A;P++){var U=o.ensureHandleId(u.args[P]);d.setInt32(r+P*4,U,!0)}if(P<_)for(;P<_;P++)d.setInt32(r+P*4,1,!0)}if(t&&d.setUint32(t,u.args.length,!0),n){var W=o.ensureHandleId(u.thiz);d.setInt32(n,W,!0)}return i&&d.setInt32(i,u.data,!0),o.clearLastError()}function ki(e,a,t,r,n,i){var o=0,u;if(!e)return 1;var d=s.envStore.get(e);if(d.checkGCAccess(),!d.tryCatch.isEmpty())return d.setLastError(10);if(!d.canCallIntoJs())return d.setLastError(d.moduleApiVersion>=10?23:10);d.clearLastError();try{if(!a||(r=r>>>0,r>0&&!n))return d.setLastError(1);var _=s.handleStore.get(a).value;if(!t)return d.setLastError(1);var I=s.handleStore.get(t).value;if(typeof I!="function")return d.setLastError(1);for(var A=[],P=new DataView(f.buffer);o<r;o++){var U=P.getInt32(n+o*4,!0);A.push(s.handleStore.get(U).value)}var W=I.apply(_,A);return i&&(u=d.ensureHandleId(W),P.setInt32(i,u,!0)),d.clearLastError()}catch(z){return d.tryCatch.setError(z),d.setLastError(10)}}function Di(e,a,t,r,n){var i,o;if(!e)return 1;var u=s.envStore.get(e);if(u.checkGCAccess(),!u.tryCatch.isEmpty())return u.setLastError(10);if(!u.canCallIntoJs())return u.setLastError(u.moduleApiVersion>=10?23:10);u.clearLastError();try{if(!a||(t=t>>>0,t>0&&!r)||!n)return u.setLastError(1);var d=s.handleStore.get(a).value;if(typeof d!="function")return u.setLastError(1);var _=void 0,I=new DataView(f.buffer);if(s.feature.supportReflect){var A=Array(t);for(i=0;i<t;i++){var P=I.getInt32(r+i*4,!0);A[i]=s.handleStore.get(P).value}_=Reflect.construct(d,A,d)}else{var U=Array(t+1);for(U[0]=void 0,i=0;i<t;i++){var P=I.getInt32(r+i*4,!0);U[i+1]=s.handleStore.get(P).value}var W=d.bind.apply(d,U);_=new W}return n&&(o=u.ensureHandleId(_),I.setInt32(n,o,!0)),u.getReturnStatus()}catch(z){return u.tryCatch.setError(z),u.setLastError(10)}}function Bi(e,a,t){if(!e)return 1;var r=s.envStore.get(e);if(r.checkGCAccess(),!a||!t)return r.setLastError(1);var n=s.scopeStore.get(a).callbackInfo,i=n.thiz,o=n.fn,u=i==null||i.constructor==null?0:i instanceof o?r.ensureHandleId(i.constructor):0,d=new DataView(f.buffer);return d.setInt32(t,u,!0),r.clearLastError()}var Oi=Object.freeze({__proto__:null,napi_call_function:ki,napi_create_function:Ti,napi_get_cb_info:Ci,napi_get_new_target:Bi,napi_new_instance:Di});function Fi(e,a){if(!e)return 1;var t=s.envStore.get(e);if(t.checkGCAccess(),!a)return t.setLastError(1);var r=s.openScope(t),n=new DataView(f.buffer);return n.setInt32(a,r.id,!0),t.clearLastError()}function Pi(e,a){if(!e)return 1;var t=s.envStore.get(e);return t.checkGCAccess(),a?t.openHandleScopes===0?13:(s.closeScope(t),t.clearLastError()):t.setLastError(1)}function Ri(e,a){if(!e)return 1;var t=s.envStore.get(e);if(t.checkGCAccess(),!a)return t.setLastError(1);var r=s.openScope(t),n=new DataView(f.buffer);return n.setInt32(a,r.id,!0),t.clearLastError()}function Vi(e,a){if(!e)return 1;var t=s.envStore.get(e);return t.checkGCAccess(),a?t.openHandleScopes===0?13:(s.closeScope(t),t.clearLastError()):t.setLastError(1)}function Ni(e,a,t,r){if(!e)return 1;var n=s.envStore.get(e);if(n.checkGCAccess(),!a||!t||!r)return n.setLastError(1);var i=s.scopeStore.get(a);if(!i.escapeCalled()){var o=i.escape(t),u=o?o.id:0,d=new DataView(f.buffer);return d.setInt32(r,u,!0),n.clearLastError()}return n.setLastError(12)}function Ui(e,a,t,r){if(!e)return 1;var n=s.envStore.get(e);if(n.checkGCAccess(),!a||!r)return n.setLastError(1);var i=s.handleStore.get(a);if(n.moduleApiVersion<10&&!(i.isObject()||i.isFunction()||i.isSymbol()))return n.setLastError(1);var o=s.createReference(n,i.id,t>>>0,1),u=new DataView(f.buffer);return u.setInt32(r,o.id,!0),n.clearLastError()}function xi(e,a){if(!e)return 1;var t=s.envStore.get(e);return a?(s.refStore.get(a).dispose(),t.clearLastError()):t.setLastError(1)}function Mi(e,a,t){if(!e)return 1;var r=s.envStore.get(e);if(r.checkGCAccess(),!a)return r.setLastError(1);var n=s.refStore.get(a).ref();if(t){var i=new DataView(f.buffer);i.setUint32(t,n,!0)}return r.clearLastError()}function Wi(e,a,t){if(!e)return 1;var r=s.envStore.get(e);if(r.checkGCAccess(),!a)return r.setLastError(1);var n=s.refStore.get(a),i=n.refcount();if(i===0)return r.setLastError(9);var o=n.unref();if(t){var u=new DataView(f.buffer);u.setUint32(t,o,!0)}return r.clearLastError()}function ji(e,a,t){if(!e)return 1;var r=s.envStore.get(e);if(r.checkGCAccess(),!a||!t)return r.setLastError(1);var n=s.refStore.get(a),i=n.get(r),o=new DataView(f.buffer);return o.setInt32(t,i,!0),r.clearLastError()}function Hi(e,a,t){if(!e)return 1;var r=s.envStore.get(e);return a?(s.addCleanupHook(r,a,t),0):r.setLastError(1)}function Gi(e,a,t){if(!e)return 1;var r=s.envStore.get(e);return a?(s.removeCleanupHook(r,a,t),0):r.setLastError(1)}function zi(e){var a=s.envStore.get(e);a.ref()}function Ji(e){var a=s.envStore.get(e);a.unref()}var qi=Object.freeze({__proto__:null,_emnapi_env_ref:zi,_emnapi_env_unref:Ji,napi_add_env_cleanup_hook:Hi,napi_close_escapable_handle_scope:Vi,napi_close_handle_scope:Pi,napi_create_reference:Ui,napi_delete_reference:xi,napi_escape_handle:Ni,napi_get_reference_value:ji,napi_open_escapable_handle_scope:Ri,napi_open_handle_scope:Fi,napi_reference_ref:Mi,napi_reference_unref:Wi,napi_remove_env_cleanup_hook:Gi});function Ki(e,a,t){var r=s.envStore.get(e),n=r.filename;return a?X.stringToUTF8(n,a,t):X.lengthBytesUTF8(n)}var Yi=Object.freeze({__proto__:null,_emnapi_get_filename:Ki});function $i(e,a,t){var r,n;if(!e)return 1;var i=s.envStore.get(e);if(i.checkGCAccess(),!i.tryCatch.isEmpty())return i.setLastError(10);if(!i.canCallIntoJs())return i.setLastError(i.moduleApiVersion>=10?23:10);i.clearLastError();try{if(!a||!t)return i.setLastError(1);var o=new DataView(f.buffer),u=new Promise(function(d,_){var I=s.createDeferred({resolve:d,reject:_});r=I.id,o.setInt32(a,r,!0)});return n=s.addToCurrentScope(u).id,o.setInt32(t,n,!0),i.getReturnStatus()}catch(d){return i.tryCatch.setError(d),i.setLastError(10)}}function Qi(e,a,t){if(!e)return 1;var r=s.envStore.get(e);if(r.checkGCAccess(),!r.tryCatch.isEmpty())return r.setLastError(10);if(!r.canCallIntoJs())return r.setLastError(r.moduleApiVersion>=10?23:10);r.clearLastError();try{if(!a||!t)return r.setLastError(1);var n=s.deferredStore.get(a);return n.resolve(s.handleStore.get(t).value),r.getReturnStatus()}catch(i){return r.tryCatch.setError(i),r.setLastError(10)}}function Zi(e,a,t){if(!e)return 1;var r=s.envStore.get(e);if(r.checkGCAccess(),!r.tryCatch.isEmpty())return r.setLastError(10);if(!r.canCallIntoJs())return r.setLastError(r.moduleApiVersion>=10?23:10);r.clearLastError();try{if(!a||!t)return r.setLastError(1);var n=s.deferredStore.get(a);return n.reject(s.handleStore.get(t).value),r.getReturnStatus()}catch(i){return r.tryCatch.setError(i),r.setLastError(10)}}function Xi(e,a,t){if(!e)return 1;var r=s.envStore.get(e);if(r.checkGCAccess(),!a||!t)return r.setLastError(1);var n=s.handleStore.get(a),i=n.isPromise()?1:0,o=new DataView(f.buffer);return o.setInt8(t,i,!0),r.clearLastError()}var es=Object.freeze({__proto__:null,napi_create_promise:$i,napi_is_promise:Xi,napi_reject_deferred:Zi,napi_resolve_deferred:Qi});function Gr(e,a,t,r,n,i){var o;if(!e)return 1;var u=s.envStore.get(e);if(u.checkGCAccess(),!u.tryCatch.isEmpty())return u.setLastError(10);if(!u.canCallIntoJs())return u.setLastError(u.moduleApiVersion>=10?23:10);u.clearLastError();try{if(!i||!a)return u.setLastError(1);var d=s.handleStore.get(a);if(d.value==null)throw new TypeError("Cannot convert undefined or null to object");var _=void 0;try{_=d.isObject()||d.isFunction()?d.value:Object(d.value)}catch{return u.setLastError(2)}if(t!==0&&t!==1||n!==0&&n!==1)return u.setLastError(1);var I=[],A=void 0,P=void 0,U=void 0,W=!0,z=/^(0|[1-9][0-9]*)$/;do{for(A=Object.getOwnPropertyNames(_),P=Object.getOwnPropertySymbols(_),U=0;U<A.length;U++)I.push({name:z.test(A[U])?Number(A[U]):A[U],desc:Object.getOwnPropertyDescriptor(_,A[U]),own:W});for(U=0;U<P.length;U++)I.push({name:P[U],desc:Object.getOwnPropertyDescriptor(_,P[U]),own:W});if(t===1)break;_=Object.getPrototypeOf(_),W=!1}while(_);var $=[],ae=function(ye,Ie,ur,zr){if(ye.indexOf(Ie)===-1){if(zr===0)ye.push(Ie);else if(zr===1){var cr=typeof Ie=="number"?String(Ie):Ie;typeof cr=="string"&&ur&8||ye.push(cr)}}};for(U=0;U<I.length;U++){var ue=I[U],ee=ue.name,fe=ue.desc;if(r===0)ae($,ee,r,n);else{if(r&8&&typeof ee=="string"||r&16&&typeof ee=="symbol")continue;var he=!0;switch(r&7){case 1:{he=!!fe.writable;break}case 2:{he=!!fe.enumerable;break}case 3:{he=!!(fe.writable&&fe.enumerable);break}case 4:{he=!!fe.configurable;break}case 5:{he=!!(fe.configurable&&fe.writable);break}case 6:{he=!!(fe.configurable&&fe.enumerable);break}case 7:{he=!!(fe.configurable&&fe.enumerable&&fe.writable);break}}he&&ae($,ee,r,n)}}o=s.addToCurrentScope($).id;var _e=new DataView(f.buffer);return _e.setInt32(i,o,!0),u.getReturnStatus()}catch(ye){return u.tryCatch.setError(ye),u.setLastError(10)}}function rs(e,a,t){return Gr(e,a,0,18,1,t)}function ts(e,a,t,r){if(!e)return 1;var n=s.envStore.get(e);if(n.checkGCAccess(),!n.tryCatch.isEmpty())return n.setLastError(10);if(!n.canCallIntoJs())return n.setLastError(n.moduleApiVersion>=10?23:10);n.clearLastError();try{if(!t||!r||!a)return n.setLastError(1);var i=s.handleStore.get(a);return i.isObject()||i.isFunction()?(i.value[s.handleStore.get(t).value]=s.handleStore.get(r).value,n.getReturnStatus()):n.setLastError(2)}catch(o){return n.tryCatch.setError(o),n.setLastError(10)}}function ns(e,a,t,r){var n;if(!e)return 1;var i=s.envStore.get(e);if(i.checkGCAccess(),!i.tryCatch.isEmpty())return i.setLastError(10);if(!i.canCallIntoJs())return i.setLastError(i.moduleApiVersion>=10?23:10);i.clearLastError();try{if(!t||!r||!a)return i.setLastError(1);var o=s.handleStore.get(a);if(o.value==null)throw new TypeError("Cannot convert undefined or null to object");var u=void 0;try{u=o.isObject()||o.isFunction()?o.value:Object(o.value)}catch{return i.setLastError(2)}n=s.handleStore.get(t).value in u?1:0;var d=new DataView(f.buffer);return d.setInt8(r,n,!0),i.getReturnStatus()}catch(_){return i.tryCatch.setError(_),i.setLastError(10)}}function as(e,a,t,r){var n;if(!e)return 1;var i=s.envStore.get(e);if(i.checkGCAccess(),!i.tryCatch.isEmpty())return i.setLastError(10);if(!i.canCallIntoJs())return i.setLastError(i.moduleApiVersion>=10?23:10);i.clearLastError();try{if(!t||!r||!a)return i.setLastError(1);var o=s.handleStore.get(a);if(o.value==null)throw new TypeError("Cannot convert undefined or null to object");var u=void 0;try{u=o.isObject()||o.isFunction()?o.value:Object(o.value)}catch{return i.setLastError(2)}n=i.ensureHandleId(u[s.handleStore.get(t).value]);var d=new DataView(f.buffer);return d.setInt32(r,n,!0),i.getReturnStatus()}catch(_){return i.tryCatch.setError(_),i.setLastError(10)}}function is(e,a,t,r){var n;if(!e)return 1;var i=s.envStore.get(e);if(i.checkGCAccess(),!i.tryCatch.isEmpty())return i.setLastError(10);if(!i.canCallIntoJs())return i.setLastError(i.moduleApiVersion>=10?23:10);i.clearLastError();try{if(!t||!a)return i.setLastError(1);var o=s.handleStore.get(a);if(!(o.isObject()||o.isFunction()))return i.setLastError(2);var u=s.handleStore.get(t).value;if(s.feature.supportReflect)n=Reflect.deleteProperty(o.value,u);else try{n=delete o.value[u]}catch{n=!1}if(r){var d=new DataView(f.buffer);d.setInt8(r,n?1:0,!0)}return i.getReturnStatus()}catch(_){return i.tryCatch.setError(_),i.setLastError(10)}}function ss(e,a,t,r){var n;if(!e)return 1;var i=s.envStore.get(e);if(i.checkGCAccess(),!i.tryCatch.isEmpty())return i.setLastError(10);if(!i.canCallIntoJs())return i.setLastError(i.moduleApiVersion>=10?23:10);i.clearLastError();try{if(!t||!r||!a)return i.setLastError(1);var o=s.handleStore.get(a);if(o.value==null)throw new TypeError("Cannot convert undefined or null to object");var u=void 0;try{u=o.isObject()||o.isFunction()?o.value:Object(o.value)}catch{return i.setLastError(2)}var d=s.handleStore.get(t).value;if(typeof d!="string"&&typeof d!="symbol")return i.setLastError(4);n=Object.prototype.hasOwnProperty.call(u,s.handleStore.get(t).value);var _=new DataView(f.buffer);return _.setInt8(r,n?1:0,!0),i.getReturnStatus()}catch(I){return i.tryCatch.setError(I),i.setLastError(10)}}function os(e,a,t,r){if(!e)return 1;var n=s.envStore.get(e);if(n.checkGCAccess(),!n.tryCatch.isEmpty())return n.setLastError(10);if(!n.canCallIntoJs())return n.setLastError(n.moduleApiVersion>=10?23:10);n.clearLastError();try{if(!r||!a)return n.setLastError(1);var i=s.handleStore.get(a);return i.isObject()||i.isFunction()?t?(s.handleStore.get(a).value[X.UTF8ToString(t,-1)]=s.handleStore.get(r).value,n.getReturnStatus()):n.setLastError(1):n.setLastError(2)}catch(o){return n.tryCatch.setError(o),n.setLastError(10)}}function us(e,a,t,r){var n;if(!e)return 1;var i=s.envStore.get(e);if(i.checkGCAccess(),!i.tryCatch.isEmpty())return i.setLastError(10);if(!i.canCallIntoJs())return i.setLastError(i.moduleApiVersion>=10?23:10);i.clearLastError();try{if(!r||!a||!t)return i.setLastError(1);var o=s.handleStore.get(a);if(o.value==null)throw new TypeError("Cannot convert undefined or null to object");var u=void 0;try{u=o.isObject()||o.isFunction()?o.value:Object(o.value)}catch{return i.setLastError(2)}n=X.UTF8ToString(t,-1)in u;var d=new DataView(f.buffer);return d.setInt8(r,n?1:0,!0),i.getReturnStatus()}catch(_){return i.tryCatch.setError(_),i.setLastError(10)}}function cs(e,a,t,r){var n;if(!e)return 1;var i=s.envStore.get(e);if(i.checkGCAccess(),!i.tryCatch.isEmpty())return i.setLastError(10);if(!i.canCallIntoJs())return i.setLastError(i.moduleApiVersion>=10?23:10);i.clearLastError();try{if(!r||!a||!t)return i.setLastError(1);var o=s.handleStore.get(a);if(o.value==null)throw new TypeError("Cannot convert undefined or null to object");var u=void 0;try{u=o.isObject()||o.isFunction()?o.value:Object(o.value)}catch{return i.setLastError(2)}n=i.ensureHandleId(u[X.UTF8ToString(t,-1)]);var d=new DataView(f.buffer);return d.setInt32(r,n,!0),i.getReturnStatus()}catch(_){return i.tryCatch.setError(_),i.setLastError(10)}}function fs(e,a,t,r){if(!e)return 1;var n=s.envStore.get(e);if(n.checkGCAccess(),!n.tryCatch.isEmpty())return n.setLastError(10);if(!n.canCallIntoJs())return n.setLastError(n.moduleApiVersion>=10?23:10);n.clearLastError();try{if(!r||!a)return n.setLastError(1);var i=s.handleStore.get(a);return i.isObject()||i.isFunction()?(i.value[t>>>0]=s.handleStore.get(r).value,n.getReturnStatus()):n.setLastError(2)}catch(o){return n.tryCatch.setError(o),n.setLastError(10)}}function ls(e,a,t,r){var n;if(!e)return 1;var i=s.envStore.get(e);if(i.checkGCAccess(),!i.tryCatch.isEmpty())return i.setLastError(10);if(!i.canCallIntoJs())return i.setLastError(i.moduleApiVersion>=10?23:10);i.clearLastError();try{if(!r||!a)return i.setLastError(1);var o=s.handleStore.get(a);if(o.value==null)throw new TypeError("Cannot convert undefined or null to object");var u=void 0;try{u=o.isObject()||o.isFunction()?o.value:Object(o.value)}catch{return i.setLastError(2)}n=t>>>0 in u?1:0;var d=new DataView(f.buffer);return d.setInt8(r,n,!0),i.getReturnStatus()}catch(_){return i.tryCatch.setError(_),i.setLastError(10)}}function ds(e,a,t,r){var n;if(!e)return 1;var i=s.envStore.get(e);if(i.checkGCAccess(),!i.tryCatch.isEmpty())return i.setLastError(10);if(!i.canCallIntoJs())return i.setLastError(i.moduleApiVersion>=10?23:10);i.clearLastError();try{if(!r||!a)return i.setLastError(1);var o=s.handleStore.get(a);if(o.value==null)throw new TypeError("Cannot convert undefined or null to object");var u=void 0;try{u=o.isObject()||o.isFunction()?o.value:Object(o.value)}catch{return i.setLastError(2)}n=i.ensureHandleId(u[t>>>0]);var d=new DataView(f.buffer);return d.setInt32(r,n,!0),i.getReturnStatus()}catch(_){return i.tryCatch.setError(_),i.setLastError(10)}}function _s(e,a,t,r){var n;if(!e)return 1;var i=s.envStore.get(e);if(i.checkGCAccess(),!i.tryCatch.isEmpty())return i.setLastError(10);if(!i.canCallIntoJs())return i.setLastError(i.moduleApiVersion>=10?23:10);i.clearLastError();try{if(!a)return i.setLastError(1);var o=s.handleStore.get(a);if(!(o.isObject()||o.isFunction()))return i.setLastError(2);if(s.feature.supportReflect)n=Reflect.deleteProperty(o.value,t>>>0);else try{n=delete o.value[t>>>0]}catch{n=!1}if(r){var u=new DataView(f.buffer);u.setInt8(r,n?1:0,!0)}return i.getReturnStatus()}catch(d){return i.tryCatch.setError(d),i.setLastError(10)}}function vs(e,a,t,r){var n,i;if(!e)return 1;var o=s.envStore.get(e);if(o.checkGCAccess(),!o.tryCatch.isEmpty())return o.setLastError(10);if(!o.canCallIntoJs())return o.setLastError(o.moduleApiVersion>=10?23:10);o.clearLastError();try{if(t=t>>>0,t>0&&!r||!a)return o.setLastError(1);var u=s.handleStore.get(a),d=u.value;if(!(u.isObject()||u.isFunction()))return o.setLastError(2);for(var _=void 0,I=new DataView(f.buffer),A=0;A<t;A++){n=r+A*32;var P=I.getInt32(n,!0),U=I.getInt32(n+4,!0),W=I.getInt32(n+8,!0),z=I.getInt32(n+12,!0),$=I.getInt32(n+16,!0),ae=I.getInt32(n+20,!0);i=I.getInt32(n+24,!0);var ue=I.getInt32(n+28,!0);if(P)_=X.UTF8ToString(P,-1);else if(!U||(_=s.handleStore.get(U).value,typeof _!="string"&&typeof _!="symbol"))return o.setLastError(4);ar(o,d,_,W,z,$,ae,i,ue)}return o.getReturnStatus()}catch(ee){return o.tryCatch.setError(ee),o.setLastError(10)}}function gs(e,a){if(!e)return 1;var t=s.envStore.get(e);if(t.checkGCAccess(),!t.tryCatch.isEmpty())return t.setLastError(10);if(!t.canCallIntoJs())return t.setLastError(t.moduleApiVersion>=10?23:10);t.clearLastError();try{if(!a)return t.setLastError(1);var r=s.handleStore.get(a),n=r.value;return r.isObject()||r.isFunction()?(Object.freeze(n),t.getReturnStatus()):t.setLastError(2)}catch(i){return t.tryCatch.setError(i),t.setLastError(10)}}function hs(e,a){if(!e)return 1;var t=s.envStore.get(e);if(t.checkGCAccess(),!t.tryCatch.isEmpty())return t.setLastError(10);if(!t.canCallIntoJs())return t.setLastError(t.moduleApiVersion>=10?23:10);t.clearLastError();try{if(!a)return t.setLastError(1);var r=s.handleStore.get(a),n=r.value;return r.isObject()||r.isFunction()?(Object.seal(n),t.getReturnStatus()):t.setLastError(2)}catch(i){return t.tryCatch.setError(i),t.setLastError(10)}}var ps=Object.freeze({__proto__:null,napi_define_properties:vs,napi_delete_element:_s,napi_delete_property:is,napi_get_all_property_names:Gr,napi_get_element:ds,napi_get_named_property:cs,napi_get_property:as,napi_get_property_names:rs,napi_has_element:ls,napi_has_named_property:us,napi_has_own_property:ss,napi_has_property:ns,napi_object_freeze:gs,napi_object_seal:hs,napi_set_element:fs,napi_set_named_property:os,napi_set_property:ts});function Es(e,a,t){var r,n;if(!e)return 1;var i=s.envStore.get(e);if(i.checkGCAccess(),!i.tryCatch.isEmpty())return i.setLastError(10);if(!i.canCallIntoJs())return i.setLastError(i.moduleApiVersion>=10?23:10);i.clearLastError();try{if(!a||!t)return i.setLastError(1);var o=s.handleStore.get(a);if(!o.isString())return i.setLastError(3);var u=s.handleStore.get(5).value,d=u.eval(o.value);n=i.ensureHandleId(d);var _=new DataView(f.buffer);_.setInt32(t,n,!0),r=i.getReturnStatus()}catch(I){return i.tryCatch.setError(I),i.setLastError(10)}return r}var ys=Object.freeze({__proto__:null,napi_run_script:Es});function ms(e,a,t){if(!e)return 1;var r=s.envStore.get(e);if(r.checkGCAccess(),!a||!t)return r.setLastError(1);var n=s.handleStore.get(a),i;if(n.isNumber())i=3;else if(n.isBigInt())i=9;else if(n.isString())i=4;else if(n.isFunction())i=7;else if(n.isExternal())i=8;else if(n.isObject())i=6;else if(n.isBoolean())i=2;else if(n.isUndefined())i=0;else if(n.isSymbol())i=5;else if(n.isNull())i=1;else return r.setLastError(1);var o=new DataView(f.buffer);return o.setInt32(t,i,!0),r.clearLastError()}function ws(e,a,t){var r;if(!e)return 1;var n=s.envStore.get(e);if(n.checkGCAccess(),!n.tryCatch.isEmpty())return n.setLastError(10);if(!n.canCallIntoJs())return n.setLastError(n.moduleApiVersion>=10?23:10);n.clearLastError();try{if(!a||!t)return n.setLastError(1);var i=s.handleStore.get(a);r=i.value?4:3;var o=new DataView(f.buffer);return o.setInt32(t,r,!0),n.getReturnStatus()}catch(u){return n.tryCatch.setError(u),n.setLastError(10)}}function As(e,a,t){var r;if(!e)return 1;var n=s.envStore.get(e);if(n.checkGCAccess(),!n.tryCatch.isEmpty())return n.setLastError(10);if(!n.canCallIntoJs())return n.setLastError(n.moduleApiVersion>=10?23:10);n.clearLastError();try{if(!a||!t)return n.setLastError(1);var i=s.handleStore.get(a);if(i.isBigInt())throw new TypeError("Cannot convert a BigInt value to a number");r=s.addToCurrentScope(Number(i.value)).id;var o=new DataView(f.buffer);return o.setInt32(t,r,!0),n.getReturnStatus()}catch(u){return n.tryCatch.setError(u),n.setLastError(10)}}function bs(e,a,t){var r;if(!e)return 1;var n=s.envStore.get(e);if(n.checkGCAccess(),!n.tryCatch.isEmpty())return n.setLastError(10);if(!n.canCallIntoJs())return n.setLastError(n.moduleApiVersion>=10?23:10);n.clearLastError();try{if(!a||!t)return n.setLastError(1);var i=s.handleStore.get(a);if(i.value==null)throw new TypeError("Cannot convert undefined or null to object");r=n.ensureHandleId(Object(i.value));var o=new DataView(f.buffer);return o.setInt32(t,r,!0),n.getReturnStatus()}catch(u){return n.tryCatch.setError(u),n.setLastError(10)}}function Is(e,a,t){var r;if(!e)return 1;var n=s.envStore.get(e);if(n.checkGCAccess(),!n.tryCatch.isEmpty())return n.setLastError(10);if(!n.canCallIntoJs())return n.setLastError(n.moduleApiVersion>=10?23:10);n.clearLastError();try{if(!a||!t)return n.setLastError(1);var i=s.handleStore.get(a);if(i.isSymbol())throw new TypeError("Cannot convert a Symbol value to a string");r=s.addToCurrentScope(String(i.value)).id;var o=new DataView(f.buffer);return o.setInt32(t,r,!0),n.getReturnStatus()}catch(u){return n.tryCatch.setError(u),n.setLastError(10)}}function Ls(e,a,t,r){var n;if(!e)return 1;var i=s.envStore.get(e);if(i.checkGCAccess(),!i.tryCatch.isEmpty())return i.setLastError(10);if(!i.canCallIntoJs())return i.setLastError(i.moduleApiVersion>=10?23:10);i.clearLastError();try{if(!a||!r||!t)return i.setLastError(1);var o=new DataView(f.buffer);o.setInt8(r,0,!0);var u=s.handleStore.get(t);if(!u.isFunction())return i.setLastError(5);var d=s.handleStore.get(a).value,_=d instanceof u.value;return n=_?1:0,o.setInt8(r,n,!0),i.getReturnStatus()}catch(I){return i.tryCatch.setError(I),i.setLastError(10)}}function Ss(e,a,t){if(!e)return 1;var r=s.envStore.get(e);if(r.checkGCAccess(),!a||!t)return r.setLastError(1);var n=s.handleStore.get(a),i=n.isArray()?1:0,o=new DataView(f.buffer);return o.setInt8(t,i,!0),r.clearLastError()}function Ts(e,a,t){if(!e)return 1;var r=s.envStore.get(e);if(r.checkGCAccess(),!a||!t)return r.setLastError(1);var n=s.handleStore.get(a),i=n.isArrayBuffer()?1:0,o=new DataView(f.buffer);return o.setInt8(t,i,!0),r.clearLastError()}function Cs(e,a,t){if(!e)return 1;var r=s.envStore.get(e);if(r.checkGCAccess(),!a||!t)return r.setLastError(1);var n=s.handleStore.get(a),i=n.isDate()?1:0,o=new DataView(f.buffer);return o.setInt8(t,i,!0),r.clearLastError()}function ks(e,a,t){if(!e)return 1;var r=s.envStore.get(e);if(r.checkGCAccess(),!a||!t)return r.setLastError(1);var n=s.handleStore.get(a).value,i=n instanceof Error?1:0,o=new DataView(f.buffer);return o.setInt8(t,i,!0),r.clearLastError()}function Ds(e,a,t){if(!e)return 1;var r=s.envStore.get(e);if(r.checkGCAccess(),!a||!t)return r.setLastError(1);var n=s.handleStore.get(a),i=n.isTypedArray()?1:0,o=new DataView(f.buffer);return o.setInt8(t,i,!0),r.clearLastError()}function Bs(e,a,t){if(!e)return 1;var r=s.envStore.get(e);if(r.checkGCAccess(),!a||!t)return r.setLastError(1);var n=s.handleStore.get(a),i=n.isBuffer(s.feature.Buffer)?1:0,o=new DataView(f.buffer);return o.setInt8(t,i,!0),r.clearLastError()}function Os(e,a,t){if(!e)return 1;var r=s.envStore.get(e);if(r.checkGCAccess(),!a||!t)return r.setLastError(1);var n=s.handleStore.get(a),i=n.isDataView()?1:0,o=new DataView(f.buffer);return o.setInt8(t,i,!0),r.clearLastError()}function Fs(e,a,t,r){var n;if(!e)return 1;var i=s.envStore.get(e);if(i.checkGCAccess(),!i.tryCatch.isEmpty())return i.setLastError(10);if(!i.canCallIntoJs())return i.setLastError(i.moduleApiVersion>=10?23:10);i.clearLastError();try{if(!a||!t||!r)return i.setLastError(1);var o=s.handleStore.get(a).value,u=s.handleStore.get(t).value;n=o===u?1:0;var d=new DataView(f.buffer);return d.setInt8(r,n,!0),i.getReturnStatus()}catch(_){return i.tryCatch.setError(_),i.setLastError(10)}}function Ps(e,a){if(!e)return 1;var t=s.envStore.get(e);if(t.checkGCAccess(),!a)return t.setLastError(1);var r=s.handleStore.get(a).value;if(!(r instanceof ArrayBuffer))return typeof SharedArrayBuffer=="function"&&r instanceof SharedArrayBuffer?t.setLastError(20):t.setLastError(19);try{var n=s.feature.MessageChannel,i=new n;i.port1.postMessage(r,[r])}catch{return t.setLastError(9)}return t.clearLastError()}function Rs(e,a,t){if(!e)return 1;var r=s.envStore.get(e);if(r.checkGCAccess(),!r.tryCatch.isEmpty())return r.setLastError(10);if(!r.canCallIntoJs())return r.setLastError(r.moduleApiVersion>=10?23:10);r.clearLastError();try{if(!a||!t)return r.setLastError(1);var n=s.handleStore.get(a),i=new DataView(f.buffer);if(n.isArrayBuffer()&&n.value.byteLength===0)try{new Uint8Array(n.value)}catch{return i.setInt8(t,1,!0),r.getReturnStatus()}return i.setInt8(t,0,!0),r.getReturnStatus()}catch(o){return r.tryCatch.setError(o),r.setLastError(10)}}var Vs=Object.freeze({__proto__:null,napi_coerce_to_bool:ws,napi_coerce_to_number:As,napi_coerce_to_object:bs,napi_coerce_to_string:Is,napi_detach_arraybuffer:Ps,napi_instanceof:Ls,napi_is_array:Ss,napi_is_arraybuffer:Ts,napi_is_buffer:Bs,napi_is_dataview:Os,napi_is_date:Cs,napi_is_detached_arraybuffer:Rs,napi_is_error:ks,napi_is_typedarray:Ds,napi_strict_equals:Fs,napi_typeof:ms});function Ns(e,a){if(!e)return 1;var t=s.envStore.get(e);if(!a)return t.setLastError(1);var r=10,n=new DataView(f.buffer);return n.setUint32(a,r,!0),t.clearLastError()}var Us=Object.freeze({__proto__:null,napi_get_version:Ns});te.init(),K.init(),X.init(),L.init(),N.init(),k.emnapi.syncMemory=sr,k.emnapi.getMemoryAddress=or;function ce(e){for(var a=Object.keys(e),t=0;t<a.length;++t){var r=a[t];r.indexOf("$")!==0&&(r.indexOf("emnapi_")===0?k.imports.emnapi[r]=e[r]:r.indexOf("_emnapi_")===0||r==="napi_set_last_error"||r==="napi_clear_last_error"?k.imports.env[r]=e[r]:k.imports.napi[r]=e[r])}}return ce(In),ce(Sn),ce(Kn),ce(we),ce(da),ce(La),ce(ni),ce(ui),ce(Pa),ce(li),ce(Wa),ce(Si),ce(Oi),ce(qi),ce(Yi),ce(Pn),ce(es),ce(ps),ce(ys),ce(Vs),ce(Us),k.imports.napi.napi_create_threadsafe_function=Rn,k.imports.napi.napi_get_threadsafe_function_context=Vn,k.imports.napi.napi_call_threadsafe_function=Nn,k.imports.napi.napi_acquire_threadsafe_function=Un,k.imports.napi.napi_release_threadsafe_function=xn,k.imports.napi.napi_unref_threadsafe_function=Mn,k.imports.napi.napi_ref_threadsafe_function=Wn,k}();return c}function st(l,c,g,p){p=p??{};var E=p.getMemory,f=p.getTable,C=p.beforeInit;if(E!=null&&typeof E!="function")throw new TypeError("options.getMemory is not a function");if(f!=null&&typeof f!="function")throw new TypeError("options.getTable is not a function");if(C!=null&&typeof C!="function")throw new TypeError("options.beforeInit is not a function");var F;F=it(p);var D=p.wasi,V,k={env:F.imports.env,napi:F.imports.napi,emnapi:F.imports.emnapi};D&&(V=new Xr(F.childThread?{wasi:D,childThread:!0,postMessage:F.postMessage}:{wasi:D,threadManager:F.PThread,waitThreadStart:F.waitThreadStart}),Object.assign(k,typeof D.getImportObject=="function"?D.getImportObject():{wasi_snapshot_preview1:D.wasiImport}),Object.assign(k,V.getImportObject()));var s=p.overwriteImports;if(typeof s=="function"){var v=s(k);typeof v=="object"&&v!==null&&(k=v)}return l(g,k,function(h,y){if(h)throw h;var m=y.instance,w=m,b=m.exports,S="memory"in b,R="memory"in k.env,O=E?E(b):S?b.memory:R?k.env.memory:void 0;if(!O)throw new Error("memory is neither exported nor imported");var B=f?f(b):b.__indirect_function_table;if(D&&!S){var N=Object.create(null);Object.assign(N,b,{memory:O}),w={exports:N}}var x=y.module;D?w=V.initialize(w,x,O):F.PThread.setup(x,O);var M=function(){C&&C({instance:m,module:x}),F.init({instance:w,module:x,memory:O,table:B});var J={instance:m,module:x,usedInstance:w};return J.napiModule=F,J};if(F.PThread.shouldPreloadWorkers()){var j=F.PThread.loadWasmModuleToAllWorkers();if(l===ot)return j.then(M);throw new Error("Synchronous loading is not supported with worker pool (reuseWorker.size > 0)")}return M()})}function ot(l,c,g){return De(l,c).then(function(p){return g(null,p)},function(p){return g(p)})}function ut(l,c,g){var p;try{p=at(l,c)}catch(E){return g(E)}return g(null,p)}function ct(l,c){return st(ut,void 0,l,c)}var ft=function(l){nt(c,l);function c(g){var p=this;if(typeof g.onLoad!="function")throw new TypeError("options.onLoad is not a function");return p=l.call(this,g)||this,p.napiModule=void 0,p}return c.prototype.instantiate=function(g){var p=this,E=this.onLoad(g),f=E.then;return typeof f=="function"?E.then(function(C){return p.napiModule=C.napiModule,C}):(this.napiModule=E.napiModule,E)},c.prototype.handle=function(g){var p=this,E;if(l.prototype.handle.call(this,g),!((E=g?.data)===null||E===void 0)&&E.__emnapi__){var f=g.data.__emnapi__.type,C=g.data.__emnapi__.payload;f==="async-worker-init"?this.handleAfterLoad(g,function(){p.napiModule.initWorker(C.arg)}):f==="async-work-execute"&&this.handleAfterLoad(g,function(){p.napiModule.executeAsyncWork(C.work)})}},c}(tt),yr=function(){var l;return l=function(){return typeof require<"u"?require:void 0}(),l}(),mr=typeof MessageChannel=="function"?MessageChannel:function(){try{return yr("worker_threads").MessageChannel}catch{}}();typeof setImmediate=="function"&&setImmediate,typeof Buffer=="function"&&Buffer;var wr;(function(l){l[l.kRuntime=0]="kRuntime",l[l.kUserland=1]="kUserland"})(wr||(wr={}));const Be=typeof WebAssembly<"u"?WebAssembly:typeof WXWebAssembly<"u"?WXWebAssembly:void 0;if(!Be)throw new Error("WebAssembly is not supported in this environment");function Se(l,c){if(l===null||typeof l!="object")throw new TypeError(`${c} must be an object. Received ${l===null?"null":typeof l}`)}function lt(l,c){if(!Array.isArray(l))throw new TypeError(`${c} must be an array. Received ${l===null?"null":typeof l}`)}function dt(l,c){if(typeof l!="boolean")throw new TypeError(`${c} must be a boolean. Received ${l===null?"null":typeof l}`)}function Ar(l,c){if(typeof l!="string")throw new TypeError(`${c} must be a string. Received ${l===null?"null":typeof l}`)}function Ue(l,c){if(typeof l!="function")throw new TypeError(`${c} must be a function. Received ${l===null?"null":typeof l}`)}function br(l,c){if(l!==void 0)throw new TypeError(`${c} must be undefined. Received ${l===null?"null":typeof l}`)}function _t(l){return!!(l&&(typeof l=="object"||typeof l=="function")&&typeof l.then=="function")}function ie(l,c,g){return typeof SharedArrayBuffer=="function"&&l.buffer instanceof SharedArrayBuffer||Object.prototype.toString.call(l.buffer.constructor)==="[object SharedArrayBuffer]"?l.slice(c,g):l.subarray(c,g)}const qe=46,Ke=47;function vt(l){return l===Ke}function gt(l,c,g,p){let E="",f=0,C=-1,F=0,D=0;for(let V=0;V<=l.length;++V){if(V<l.length)D=l.charCodeAt(V);else{if(p(D))break;D=Ke}if(p(D)){if(!(C===V-1||F===1))if(F===2){if(E.length<2||f!==2||E.charCodeAt(E.length-1)!==qe||E.charCodeAt(E.length-2)!==qe){if(E.length>2){const k=E.indexOf(g);k===-1?(E="",f=0):(E=E.slice(0,k),f=E.length-1-E.indexOf(g)),C=V,F=0;continue}else if(E.length!==0){E="",f=0,C=V,F=0;continue}}c&&(E+=E.length>0?`${g}..`:"..",f=2)}else E.length>0?E+=`${g}${l.slice(C+1,V)}`:E=l.slice(C+1,V),f=V-C-1;C=V,F=0}else D===qe&&F!==-1?++F:F=-1}return E}function oe(...l){let c="",g=!1;for(let p=l.length-1;p>=-1&&!g;p--){const E=p>=0?l[p]:"/";Ar(E,"path"),E.length!==0&&(c=`${E}/${c}`,g=E.charCodeAt(0)===Ke)}return c=gt(c,!g,"/",vt),g?`/${c}`:c.length>0?c:"."}const ht=BigInt(1)<<BigInt(0),pt=BigInt(1)<<BigInt(1),Et=BigInt(1)<<BigInt(2),yt=BigInt(1)<<BigInt(3),mt=BigInt(1)<<BigInt(4),wt=BigInt(1)<<BigInt(5),At=BigInt(1)<<BigInt(6),bt=BigInt(1)<<BigInt(7),It=BigInt(1)<<BigInt(8),Lt=BigInt(1)<<BigInt(9),St=BigInt(1)<<BigInt(10),Tt=BigInt(1)<<BigInt(11),Ct=BigInt(1)<<BigInt(12),kt=BigInt(1)<<BigInt(13),Dt=BigInt(1)<<BigInt(14),Bt=BigInt(1)<<BigInt(15),Ot=BigInt(1)<<BigInt(16),Ft=BigInt(1)<<BigInt(17),Pt=BigInt(1)<<BigInt(18),Rt=BigInt(1)<<BigInt(19),Vt=BigInt(1)<<BigInt(20),Nt=BigInt(1)<<BigInt(21),Ut=BigInt(1)<<BigInt(22),xt=BigInt(1)<<BigInt(23),Mt=BigInt(1)<<BigInt(24),Wt=BigInt(1)<<BigInt(25),jt=BigInt(1)<<BigInt(26),Ht=BigInt(1)<<BigInt(27),Gt=BigInt(1)<<BigInt(28),zt=BigInt(1)<<BigInt(29),T={FD_DATASYNC:ht,FD_READ:pt,FD_SEEK:Et,FD_FDSTAT_SET_FLAGS:yt,FD_SYNC:mt,FD_TELL:wt,FD_WRITE:At,FD_ADVISE:bt,FD_ALLOCATE:It,PATH_CREATE_DIRECTORY:Lt,PATH_CREATE_FILE:St,PATH_LINK_SOURCE:Tt,PATH_LINK_TARGET:Ct,PATH_OPEN:kt,FD_READDIR:Dt,PATH_READLINK:Bt,PATH_RENAME_SOURCE:Ot,PATH_RENAME_TARGET:Ft,PATH_FILESTAT_GET:Pt,PATH_FILESTAT_SET_SIZE:Rt,PATH_FILESTAT_SET_TIMES:Vt,FD_FILESTAT_GET:Nt,FD_FILESTAT_SET_SIZE:Ut,FD_FILESTAT_SET_TIMES:xt,PATH_SYMLINK:Mt,PATH_REMOVE_DIRECTORY:Wt,PATH_UNLINK_FILE:jt,POLL_FD_READWRITE:Ht,SOCK_SHUTDOWN:Gt,SOCK_ACCEPT:zt};function Jt(l){switch(l){case 0:return"Success";case 1:return"Argument list too long";case 2:return"Permission denied";case 3:return"Address in use";case 4:return"Address not available";case 5:return"Address family not supported by protocol";case 6:return"Resource temporarily unavailable";case 7:return"Operation already in progress";case 8:return"Bad file descriptor";case 9:return"Bad message";case 10:return"Resource busy";case 11:return"Operation canceled";case 12:return"No child null";case 13:return"Connection aborted";case 14:return"Connection refused";case 15:return"Connection reset by peer";case 16:return"Resource deadlock would occur";case 17:return"Destination address required";case 18:return"Domain error";case 19:return"Quota exceeded";case 20:return"File exists";case 21:return"Bad address";case 22:return"File too large";case 23:return"Host is unreachable";case 24:return"Identifier removed";case 25:return"Illegal byte sequence";case 26:return"Operation in progress";case 27:return"Interrupted system call";case 28:return"Invalid argument";case 29:return"I/O error";case 30:return"Socket is connected";case 31:return"Is a directory";case 32:return"Symbolic link loop";case 33:return"No file descriptors available";case 34:return"Too many links";case 35:return"Message too large";case 36:return"Multihop attempted";case 37:return"Filename too long";case 38:return"Network is down";case 39:return"Connection reset by network";case 40:return"Network unreachable";case 41:return"Too many files open in system";case 42:return"No buffer space available";case 43:return"No such device";case 44:return"No such file or directory";case 45:return"Exec format error";case 46:return"No locks available";case 47:return"Link has been severed";case 48:return"Out of memory";case 49:return"No message of the desired type";case 50:return"Protocol not available";case 51:return"No space left on device";case 52:return"Function not implemented";case 53:return"Socket not connected";case 54:return"Not a directory";case 55:return"Directory not empty";case 56:return"State not recoverable";case 57:return"Not a socket";case 58:return"Not supported";case 59:return"Not a tty";case 60:return"No such device or address";case 61:return"Value too large for data type";case 62:return"Previous owner died";case 63:return"Operation not permitted";case 64:return"Broken pipe";case 65:return"Protocol error";case 66:return"Protocol not supported";case 67:return"Protocol wrong type for socket";case 68:return"Result not representable";case 69:return"Read-only file system";case 70:return"Invalid seek";case 71:return"No such null";case 72:return"Stale file handle";case 73:return"Operation timed out";case 74:return"Text file busy";case 75:return"Cross-device link";case 76:return"Capabilities insufficient";default:return"Unknown error"}}class de extends Error{constructor(c,g){super(c),this.errno=g}getErrorMessage(){return Jt(this.errno)}}Object.defineProperty(de.prototype,"name",{configurable:!0,writable:!0,value:"WasiError"});const Oe=T.FD_DATASYNC|T.FD_READ|T.FD_SEEK|T.FD_FDSTAT_SET_FLAGS|T.FD_SYNC|T.FD_TELL|T.FD_WRITE|T.FD_ADVISE|T.FD_ALLOCATE|T.PATH_CREATE_DIRECTORY|T.PATH_CREATE_FILE|T.PATH_LINK_SOURCE|T.PATH_LINK_TARGET|T.PATH_OPEN|T.FD_READDIR|T.PATH_READLINK|T.PATH_RENAME_SOURCE|T.PATH_RENAME_TARGET|T.PATH_FILESTAT_GET|T.PATH_FILESTAT_SET_SIZE|T.PATH_FILESTAT_SET_TIMES|T.FD_FILESTAT_GET|T.FD_FILESTAT_SET_TIMES|T.FD_FILESTAT_SET_SIZE|T.PATH_SYMLINK|T.PATH_UNLINK_FILE|T.PATH_REMOVE_DIRECTORY|T.POLL_FD_READWRITE|T.SOCK_SHUTDOWN|T.SOCK_ACCEPT,qt=Oe,Kt=Oe,Yt=Oe,$t=Oe,Ir=T.FD_DATASYNC|T.FD_READ|T.FD_SEEK|T.FD_FDSTAT_SET_FLAGS|T.FD_SYNC|T.FD_TELL|T.FD_WRITE|T.FD_ADVISE|T.FD_ALLOCATE|T.FD_FILESTAT_GET|T.FD_FILESTAT_SET_SIZE|T.FD_FILESTAT_SET_TIMES|T.POLL_FD_READWRITE,Qt=BigInt(0),Lr=T.FD_FDSTAT_SET_FLAGS|T.FD_SYNC|T.FD_ADVISE|T.PATH_CREATE_DIRECTORY|T.PATH_CREATE_FILE|T.PATH_LINK_SOURCE|T.PATH_LINK_TARGET|T.PATH_OPEN|T.FD_READDIR|T.PATH_READLINK|T.PATH_RENAME_SOURCE|T.PATH_RENAME_TARGET|T.PATH_FILESTAT_GET|T.PATH_FILESTAT_SET_SIZE|T.PATH_FILESTAT_SET_TIMES|T.FD_FILESTAT_GET|T.FD_FILESTAT_SET_TIMES|T.PATH_SYMLINK|T.PATH_UNLINK_FILE|T.PATH_REMOVE_DIRECTORY|T.POLL_FD_READWRITE,Zt=Lr|Ir,Xt=T.FD_READ|T.FD_FDSTAT_SET_FLAGS|T.FD_WRITE|T.FD_FILESTAT_GET|T.POLL_FD_READWRITE|T.SOCK_SHUTDOWN,en=Oe,rn=T.FD_READ|T.FD_FDSTAT_SET_FLAGS|T.FD_WRITE|T.FD_FILESTAT_GET|T.POLL_FD_READWRITE,tn=BigInt(0);function Fe(l,c,g,p){const E={base:BigInt(0),inheriting:BigInt(0)};if(p===0)throw new de("Unknown file type",28);switch(p){case 4:E.base=Ir,E.inheriting=Qt;break;case 3:E.base=Lr,E.inheriting=Zt;break;case 6:case 5:E.base=Xt,E.inheriting=en;break;case 2:l.indexOf(c)!==-1?(E.base=rn,E.inheriting=tn):(E.base=Yt,E.inheriting=$t);break;case 1:E.base=qt,E.inheriting=Kt;break;default:E.base=BigInt(0),E.inheriting=BigInt(0)}const f=g&3;return f===0?E.base&=~T.FD_WRITE:f===1&&(E.base&=~T.FD_READ),E}function Pe(l,c){let g=0;for(let f=0;f<l.length;f++){const C=l[f];g+=C.length}let p=0;const E=new Uint8Array(g);for(let f=0;f<l.length;f++){const C=l[f];E.set(C,p),p+=C.length}return E}class Sr{constructor(c,g,p,E,f,C,F,D){this.id=c,this.fd=g,this.path=p,this.realPath=E,this.type=f,this.rightsBase=C,this.rightsInheriting=F,this.preopen=D,this.pos=BigInt(0),this.size=BigInt(0)}seek(c,g){if(g===0)this.pos=BigInt(c);else if(g===1)this.pos+=BigInt(c);else if(g===2)this.pos=BigInt(this.size)-BigInt(c);else throw new de("Unknown whence",29);return this.pos}}class Tr extends Sr{constructor(c,g,p,E,f,C,F,D,V){super(g,p,E,f,C,F,D,V),this._log=c,this._buf=null}write(c){const g=c;if(this._buf&&(c=Pe([this._buf,c]),this._buf=null),c.indexOf(10)===-1)return this._buf=c,g.byteLength;let p=0,E=0,f;for(;(f=c.indexOf(10,p))!==-1;){const C=new TextDecoder().decode(c.subarray(E,f));this._log(C),p+=f-E+1,E=f+1}return p<c.length&&(this._buf=c.slice(p)),g.byteLength}}function Ye(l){return l.isBlockDevice()?1:l.isCharacterDevice()?2:l.isDirectory()?3:l.isSocket()?6:l.isFile()?4:l.isSymbolicLink()?7:0}function xe(l,c,g){l.setBigUint64(c,g.dev,!0),l.setBigUint64(c+8,g.ino,!0),l.setBigUint64(c+16,BigInt(Ye(g)),!0),l.setBigUint64(c+24,g.nlink,!0),l.setBigUint64(c+32,g.size,!0),l.setBigUint64(c+40,g.atimeMs*BigInt(1e6),!0),l.setBigUint64(c+48,g.mtimeMs*BigInt(1e6),!0),l.setBigUint64(c+56,g.ctimeMs*BigInt(1e6),!0)}class Cr{constructor(c){this.used=0,this.size=c.size,this.fds=Array(c.size),this.stdio=[c.in,c.out,c.err],this.print=c.print,this.printErr=c.printErr,this.insertStdio(c.in,0,"<stdin>"),this.insertStdio(c.out,1,"<stdout>"),this.insertStdio(c.err,2,"<stderr>")}insertStdio(c,g,p){const{base:f,inheriting:C}=Fe(this.stdio,c,2,2),F=this.insert(c,p,p,2,f,C,0);if(F.id!==g)throw new de(`id: ${F.id} !== expected: ${g}`,8);return F}insert(c,g,p,E,f,C,F){var D,V;let k=-1;if(this.used>=this.size){const v=this.size*2;this.fds.length=v,k=this.size,this.size=v}else for(let v=0;v<this.size;++v)if(this.fds[v]==null){k=v;break}let s;return g==="<stdout>"?s=new Tr((D=this.print)!==null&&D!==void 0?D:console.log,k,c,g,p,E,f,C,F):g==="<stderr>"?s=new Tr((V=this.printErr)!==null&&V!==void 0?V:console.error,k,c,g,p,E,f,C,F):s=new Sr(k,c,g,p,E,f,C,F),this.fds[k]=s,this.used++,s}get(c,g,p){if(c>=this.size)throw new de("Invalid fd",8);const E=this.fds[c];if(!E||E.id!==c)throw new de("Bad file descriptor",8);if((~E.rightsBase&g)!==BigInt(0)||(~E.rightsInheriting&p)!==BigInt(0))throw new de("Capabilities insufficient",76);return E}remove(c){if(c>=this.size)throw new de("Invalid fd",8);const g=this.fds[c];if(!g||g.id!==c)throw new de("Bad file descriptor",8);this.fds[c]=void 0,this.used--}}class nn extends Cr{constructor(c){super(c),this.fs=c.fs}getFileTypeByFd(c){const g=this.fs.fstatSync(c,{bigint:!0});return Ye(g)}insertPreopen(c,g,p){const E=this.getFileTypeByFd(c);if(E!==3)throw new de(`Preopen not dir: ["${g}", "${p}"]`,54);const f=Fe(this.stdio,c,0,E);return this.insert(c,g,p,E,f.base,f.inheriting,1)}renumber(c,g){if(c===g)return;if(c>=this.size||g>=this.size)throw new de("Invalid fd",8);const p=this.fds[c],E=this.fds[g];if(!p||!E||p.id!==c||E.id!==g)throw new de("Invalid fd",8);this.fs.closeSync(p.fd),this.fds[c]=this.fds[g],this.fds[c].id=c,this.fds[g]=void 0,this.used--}}class an extends Cr{constructor(c){super(c)}async getFileTypeByFd(c){const g=await c.stat({bigint:!0});return Ye(g)}async insertPreopen(c,g,p){const E=await this.getFileTypeByFd(c);if(E!==3)throw new de(`Preopen not dir: ["${g}", "${p}"]`,54);const f=Fe(this.stdio,c.fd,0,E);return this.insert(c,g,p,E,f.base,f.inheriting,1)}async renumber(c,g){if(c===g)return;if(c>=this.size||g>=this.size)throw new de("Invalid fd",8);const p=this.fds[c],E=this.fds[g];if(!p||!E||p.id!==c||E.id!==g)throw new de("Invalid fd",8);await p.fd.close(),this.fds[c]=this.fds[g],this.fds[c].id=c,this.fds[g]=void 0,this.used--}}const sn=function(){return Be.Memory}();class on extends sn{constructor(c){super(c)}get HEAP8(){return new Int8Array(super.buffer)}get HEAPU8(){return new Uint8Array(super.buffer)}get HEAP16(){return new Int16Array(super.buffer)}get HEAPU16(){return new Uint16Array(super.buffer)}get HEAP32(){return new Int32Array(super.buffer)}get HEAPU32(){return new Uint32Array(super.buffer)}get HEAP64(){return new BigInt64Array(super.buffer)}get HEAPU64(){return new BigUint64Array(super.buffer)}get HEAPF32(){return new Float32Array(super.buffer)}get HEAPF64(){return new Float64Array(super.buffer)}get view(){return new DataView(super.buffer)}}function un(l){return Object.getPrototypeOf(l)===Be.Memory.prototype&&Object.setPrototypeOf(l,on.prototype),l}function cn(){const l=Be.Function;if(typeof l!="function")throw new Error('WebAssembly.Function is not supported in this environment. If you are using V8 based browser like Chrome, try to specify --js-flags="--wasm-staging --experimental-wasm-stack-switching"');return l}function fn(l,c,g){const p=cn();if(typeof l!="function")throw new TypeError("Function required");const E=c.slice(0);return E.unshift("externref"),new p({parameters:E,results:g},l,{suspending:"first"})}function Te(l,c){if(l.length===0||c.length===0)return 0;let g=0,p=c.length-g;for(let E=0;E<l.length;++E){const f=l[E];if(p<f.length)return f.set(c.subarray(g,g+p),0),g+=p,p=0,g;f.set(c.subarray(g,g+f.length),0),g+=f.length,p-=f.length}return g}const kr=new WeakMap,G=new WeakMap,Dr=new WeakMap;function q(l){return kr.get(l)}function re(l){const c=Dr.get(l);if(!c)throw new Error("filesystem is unavailable");return c}function Br(l){if(l instanceof de)return l.errno;switch(l.code){case"ENOENT":return 44;case"EBADF":return 8;case"EINVAL":return 28;case"EPERM":return 63;case"EPROTO":return 65;case"EEXIST":return 20;case"ENOTDIR":return 54;case"EMFILE":return 33;case"EACCES":return 2;case"EISDIR":return 31;case"ENOTEMPTY":return 55;case"ENOSYS":return 52}throw l}function ln(l,c){return Object.defineProperty(c,"name",{value:l}),c}function ne(l,c,g){return ln(c,function(){let p;try{p=g.apply(l,arguments)}catch(E){return Br(E)}return _t(p)?p.then(E=>E,Br):p})}function $e(l,c,g,p){let E=oe(c.realPath,g);if((p&1)===1)try{E=l.readlinkSync(E)}catch(f){if(f.code!=="EINVAL"&&f.code!=="ENOENT")throw f}return E}async function Qe(l,c,g,p){let E=oe(c.realPath,g);if((p&1)===1)try{E=await l.promises.readlink(E)}catch(f){if(f.code!=="EINVAL"&&f.code!=="ENOENT")throw f}return E}const pe=new TextEncoder,se=new TextDecoder,Me=(BigInt(1)<<BigInt(63))-BigInt(1);function Or(){const l=window.prompt();return l===null?new Uint8Array:new TextEncoder().encode(l+`
`)}function We(l){return!!(l&-16)||(l&3)===3||(l&12)===12}class Ce{constructor(c,g,p,E,f,C){this.args_get=ne(this,"args_get",function(s,v){if(s=Number(s),v=Number(v),s===0||v===0)return 28;const{HEAPU8:h,view:y}=q(this),w=G.get(this).args;for(let b=0;b<w.length;++b){const S=w[b];y.setInt32(s,v,!0),s+=4;const R=pe.encode(S+"\0");h.set(R,v),v+=R.length}return 0}),this.args_sizes_get=ne(this,"args_sizes_get",function(s,v){if(s=Number(s),v=Number(v),s===0||v===0)return 28;const{view:h}=q(this),m=G.get(this).args;return h.setUint32(s,m.length,!0),h.setUint32(v,pe.encode(m.join("\0")+"\0").length,!0),0}),this.environ_get=ne(this,"environ_get",function(s,v){if(s=Number(s),v=Number(v),s===0||v===0)return 28;const{HEAPU8:h,view:y}=q(this),w=G.get(this).env;for(let b=0;b<w.length;++b){const S=w[b];y.setInt32(s,v,!0),s+=4;const R=pe.encode(S+"\0");h.set(R,v),v+=R.length}return 0}),this.environ_sizes_get=ne(this,"environ_sizes_get",function(s,v){if(s=Number(s),v=Number(v),s===0||v===0)return 28;const{view:h}=q(this),y=G.get(this);return h.setUint32(s,y.env.length,!0),h.setUint32(v,pe.encode(y.env.join("\0")+"\0").length,!0),0}),this.clock_res_get=ne(this,"clock_res_get",function(s,v){if(v=Number(v),v===0)return 28;const{view:h}=q(this);switch(s){case 0:return h.setBigUint64(v,BigInt(1e6),!0),0;case 1:case 2:case 3:return h.setBigUint64(v,BigInt(1e3),!0),0;default:return 28}}),this.clock_time_get=ne(this,"clock_time_get",function(s,v,h){if(h=Number(h),h===0)return 28;const{view:y}=q(this);switch(s){case 0:return y.setBigUint64(h,BigInt(Date.now())*BigInt(1e6),!0),0;case 1:case 2:case 3:{const m=performance.now()/1e3,w=Math.trunc(m),b=Math.floor((m-w)*1e3),S=BigInt(w)*BigInt(1e9)+BigInt(b)*BigInt(1e6);return y.setBigUint64(h,S,!0),0}default:return 28}}),this.fd_advise=ne(this,"fd_advise",function(s,v,h,y){return 52}),this.fd_fdstat_get=ne(this,"fd_fdstat_get",function(s,v){if(v=Number(v),v===0)return 28;const y=G.get(this).fds.get(s,BigInt(0),BigInt(0)),{view:m}=q(this);return m.setUint16(v,y.type,!0),m.setUint16(v+2,0,!0),m.setBigUint64(v+8,y.rightsBase,!0),m.setBigUint64(v+16,y.rightsInheriting,!0),0}),this.fd_fdstat_set_flags=ne(this,"fd_fdstat_set_flags",function(s,v){return 52}),this.fd_fdstat_set_rights=ne(this,"fd_fdstat_set_rights",function(s,v,h){const m=G.get(this).fds.get(s,BigInt(0),BigInt(0));return(v|m.rightsBase)>m.rightsBase||(h|m.rightsInheriting)>m.rightsInheriting?76:(m.rightsBase=v,m.rightsInheriting=h,0)}),this.fd_prestat_get=ne(this,"fd_prestat_get",function(s,v){if(v=Number(v),v===0)return 28;const h=G.get(this);let y;try{y=h.fds.get(s,BigInt(0),BigInt(0))}catch(w){if(w instanceof de)return w.errno;throw w}if(y.preopen!==1)return 28;const{view:m}=q(this);return m.setUint32(v,0,!0),m.setUint32(v+4,pe.encode(y.path).length,!0),0}),this.fd_prestat_dir_name=ne(this,"fd_prestat_dir_name",function(s,v,h){if(v=Number(v),h=Number(h),v===0)return 28;const m=G.get(this).fds.get(s,BigInt(0),BigInt(0));if(m.preopen!==1)return 8;const w=pe.encode(m.path);if(w.length>h)return 42;const{HEAPU8:S}=q(this);return S.set(w,v),0}),this.fd_seek=ne(this,"fd_seek",function(s,v,h,y){if(y=Number(y),y===0)return 28;if(s===0||s===1||s===2)return 0;const b=G.get(this).fds.get(s,T.FD_SEEK,BigInt(0)).seek(v,h),{view:S}=q(this);return S.setBigUint64(y,b,!0),0}),this.fd_tell=ne(this,"fd_tell",function(s,v){const y=G.get(this).fds.get(s,T.FD_TELL,BigInt(0)),m=BigInt(y.pos),{view:w}=q(this);return w.setBigUint64(Number(v),m,!0),0}),this.poll_oneoff=ne(this,"poll_oneoff",function(s,v,h,y){if(s=Number(s),v=Number(v),y=Number(y),h=Number(h),h=h>>>0,s===0||v===0||h===0||y===0)return 28;const{view:m}=q(this);m.setUint32(y,0,!0);let w=0,b=BigInt(0),S=BigInt(0),R=0,O=BigInt(0),B;const N=Array(h);for(w=0;w<h;w++){B=s+w*48;const M=m.getBigUint64(B,!0),j=m.getUint8(B+8),J=m.getUint32(B+16,!0),Q=m.getBigUint64(B+24,!0),Y=m.getBigUint64(B+32,!0),Z=m.getUint16(B+40,!0);N[w]={userdata:M,type:j,u:{clock:{clock_id:J,timeout:Q,precision:Y,flags:Z},fd_readwrite:{fd:J}}}}const x=[];for(w=0;w<h;w++)switch(B=N[w],B.type){case 0:{if(B.u.clock.flags===1){const M=BigInt(Date.now())*BigInt(1e6);S=B.u.clock.timeout-M}else S=B.u.clock.timeout;(R===0||S<O)&&(O=S,b=B.userdata,R=1);break}case 1:case 2:x.push(B);break;default:return 28}if(x.length>0){for(w=0;w<x.length;w++){const M=x[w],j=v+32*w;m.setBigUint64(j,M.userdata,!0),m.setUint32(j+8,52,!0),m.setUint32(j+12,M.type,!0),m.setBigUint64(j+16,BigInt(0),!0),m.setUint16(j+24,0,!0),m.setUint32(y,1,!0)}return m.setUint32(y,x.length,!0),0}if(R){Number(O/BigInt(1e6));const M=v;m.setBigUint64(M,b,!0),m.setUint32(M+8,0,!0),m.setUint32(M+12,0,!0),m.setUint32(y,1,!0)}return 0}),this.proc_exit=ne(this,"proc_exit",function(s){return 0}),this.proc_raise=ne(this,"proc_raise",function(s){return 52}),this.sched_yield=ne(this,"sched_yield",function(){return 0}),this.random_get=typeof crypto<"u"&&typeof crypto.getRandomValues=="function"?ne(this,"random_get",function(s,v){if(s=Number(s),s===0)return 28;v=Number(v);const{HEAPU8:h,view:y}=q(this);if(typeof SharedArrayBuffer=="function"&&h.buffer instanceof SharedArrayBuffer||Object.prototype.toString.call(h.buffer)==="[object SharedArrayBuffer]"){for(let b=s;b<s+v;++b)y.setUint8(b,Math.floor(Math.random()*256));return 0}let m;const w=65536;for(m=0;m+w<v;m+=w)crypto.getRandomValues(h.subarray(s+m,s+m+w));return crypto.getRandomValues(h.subarray(s+m,s+v)),0}):ne(this,"random_get",function(s,v){if(s=Number(s),s===0)return 28;v=Number(v);const{view:h}=q(this);for(let y=s;y<s+v;++y)h.setUint8(y,Math.floor(Math.random()*256));return 0}),this.sock_recv=ne(this,"sock_recv",function(){return 58}),this.sock_send=ne(this,"sock_send",function(){return 58}),this.sock_shutdown=ne(this,"sock_shutdown",function(){return 58}),this.sock_accept=ne(this,"sock_accept",function(){return 58}),G.set(this,{fds:p,args:c,env:g}),f&&Dr.set(this,f);const F=this;function D(s,v,h,y,m){E?C?F[s]=C.wrapImportFunction(ne(F,s,h)):F[s]=fn(ne(F,s,h),y,m):F[s]=ne(F,s,v)}D("fd_allocate",function(v,h,y){const m=G.get(this),w=re(this),b=m.fds.get(v,T.FD_ALLOCATE,BigInt(0));return w.fstatSync(b.fd,{bigint:!0}).size<h+y&&w.ftruncateSync(b.fd,Number(h+y)),0},async function(v,h,y){const b=G.get(this).fds.get(v,T.FD_ALLOCATE,BigInt(0)).fd;return(await b.stat({bigint:!0})).size<h+y&&await b.truncate(Number(h+y)),0},["i32","i64","f64"],["i32"]),D("fd_close",function(v){const h=G.get(this),y=h.fds.get(v,BigInt(0),BigInt(0));return re(this).closeSync(y.fd),h.fds.remove(v),0},async function(v){const h=G.get(this);return await h.fds.get(v,BigInt(0),BigInt(0)).fd.close(),h.fds.remove(v),0},["i32"],["i32"]),D("fd_datasync",function(v){const y=G.get(this).fds.get(v,T.FD_DATASYNC,BigInt(0));return re(this).fdatasyncSync(y.fd),0},async function(v){return await G.get(this).fds.get(v,T.FD_DATASYNC,BigInt(0)).fd.datasync(),0},["i32"],["i32"]),D("fd_filestat_get",function(v,h){if(h=Number(h),h===0)return 28;const m=G.get(this).fds.get(v,T.FD_FILESTAT_GET,BigInt(0)),b=re(this).fstatSync(m.fd,{bigint:!0}),{view:S}=q(this);return xe(S,h,b),0},async function(v,h){if(h=Number(h),h===0)return 28;const b=await G.get(this).fds.get(v,T.FD_FILESTAT_GET,BigInt(0)).fd.stat({bigint:!0}),{view:S}=q(this);return xe(S,h,b),0},["i32","i32"],["i32"]),D("fd_filestat_set_size",function(v,h){const m=G.get(this).fds.get(v,T.FD_FILESTAT_SET_SIZE,BigInt(0));return re(this).ftruncateSync(m.fd,Number(h)),0},async function(v,h){return await G.get(this).fds.get(v,T.FD_FILESTAT_SET_SIZE,BigInt(0)).fd.truncate(Number(h)),0},["i32","i64"],["i32"]);function V(s,v,h,y){const w=G.get(this).fds.get(s,T.FD_FILESTAT_SET_TIMES,BigInt(0));return(y&2)===2&&(v=BigInt(Date.now()*1e6)),(y&8)===8&&(h=BigInt(Date.now()*1e6)),{fileDescriptor:w,atim:v,mtim:h}}D("fd_filestat_set_times",function(v,h,y,m){if(We(m))return 28;const{fileDescriptor:w,atim:b,mtim:S}=V.call(this,v,h,y,m);return re(this).futimesSync(w.fd,Number(b),Number(S)),0},async function(v,h,y,m){if(We(m))return 28;const{fileDescriptor:w,atim:b,mtim:S}=V.call(this,v,h,y,m);return await w.fd.utimes(Number(b),Number(S)),0},["i32","i64","i64","i32"],["i32"]),D("fd_pread",function(v,h,y,m,w){if(h=Number(h),w=Number(w),h===0&&y||w===0||m>Me)return 28;const{HEAPU8:b,view:S}=q(this),O=G.get(this).fds.get(v,T.FD_READ|T.FD_SEEK,BigInt(0));if(!y)return S.setUint32(w,0,!0),0;let B=0;const N=Array.from({length:Number(y)},(Q,Y)=>{const Z=h+Y*8,le=S.getInt32(Z,!0),ge=S.getUint32(Z+4,!0);return B+=ge,b.subarray(le,le+ge)});let x=0;const M=(()=>{try{return new Uint8Array(new SharedArrayBuffer(B))}catch{return new Uint8Array(B)}})();M._isBuffer=!0;const J=re(this).readSync(O.fd,M,0,M.length,Number(m));return x=M?Te(N,M.subarray(0,J)):0,S.setUint32(w,x,!0),0},async function(s,v,h,y,m){if(v=Number(v),m=Number(m),v===0&&h||m===0||y>Me)return 28;const{HEAPU8:w,view:b}=q(this),R=G.get(this).fds.get(s,T.FD_READ|T.FD_SEEK,BigInt(0));if(!h)return b.setUint32(m,0,!0),0;let O=0;const B=Array.from({length:Number(h)},(j,J)=>{const Q=v+J*8,Y=b.getInt32(Q,!0),Z=b.getUint32(Q+4,!0);return O+=Z,w.subarray(Y,Y+Z)});let N=0;const x=new Uint8Array(O);x._isBuffer=!0;const{bytesRead:M}=await R.fd.read(x,0,x.length,Number(y));return N=x?Te(B,x.subarray(0,M)):0,b.setUint32(m,N,!0),0},["i32","i32","i32","i64","i32"],["i32"]),D("fd_pwrite",function(v,h,y,m,w){if(h=Number(h),w=Number(w),h===0&&y||w===0||m>Me)return 28;const{HEAPU8:b,view:S}=q(this),O=G.get(this).fds.get(v,T.FD_WRITE|T.FD_SEEK,BigInt(0));if(!y)return S.setUint32(w,0,!0),0;const B=Pe(Array.from({length:Number(y)},(M,j)=>{const J=h+j*8,Q=S.getInt32(J,!0),Y=S.getUint32(J+4,!0);return b.subarray(Q,Q+Y)})),x=re(this).writeSync(O.fd,B,0,B.length,Number(m));return S.setUint32(w,x,!0),0},async function(v,h,y,m,w){if(h=Number(h),w=Number(w),h===0&&y||w===0||m>Me)return 28;const{HEAPU8:b,view:S}=q(this),O=G.get(this).fds.get(v,T.FD_WRITE|T.FD_SEEK,BigInt(0));if(!y)return S.setUint32(w,0,!0),0;const B=Pe(Array.from({length:Number(y)},(x,M)=>{const j=h+M*8,J=S.getInt32(j,!0),Q=S.getUint32(j+4,!0);return b.subarray(J,J+Q)})),{bytesWritten:N}=await O.fd.write(B,0,B.length,Number(m));return S.setUint32(w,N,!0),0},["i32","i32","i32","i64","i32"],["i32"]),D("fd_read",function(v,h,y,m){if(h=Number(h),m=Number(m),h===0&&y||m===0)return 28;const{HEAPU8:w,view:b}=q(this),R=G.get(this).fds.get(v,T.FD_READ,BigInt(0));if(!y)return b.setUint32(m,0,!0),0;let O=0;const B=Array.from({length:Number(y)},(M,j)=>{const J=h+j*8,Q=b.getInt32(J,!0),Y=b.getUint32(J+4,!0);return O+=Y,w.subarray(Q,Q+Y)});let N,x=0;if(v===0){if(typeof window>"u"||typeof window.prompt!="function")return 58;N=Or(),x=N?Te(B,N):0}else{N=(()=>{try{return new Uint8Array(new SharedArrayBuffer(O))}catch{return new Uint8Array(O)}})(),N._isBuffer=!0;const j=re(this).readSync(R.fd,N,0,N.length,Number(R.pos));x=N?Te(B,N.subarray(0,j)):0,R.pos+=BigInt(x)}return b.setUint32(m,x,!0),0},async function(v,h,y,m){if(h=Number(h),m=Number(m),h===0&&y||m===0)return 28;const{HEAPU8:w,view:b}=q(this),R=G.get(this).fds.get(v,T.FD_READ,BigInt(0));if(!y)return b.setUint32(m,0,!0),0;let O=0;const B=Array.from({length:Number(y)},(M,j)=>{const J=h+j*8,Q=b.getInt32(J,!0),Y=b.getUint32(J+4,!0);return O+=Y,w.subarray(Q,Q+Y)});let N,x=0;if(v===0){if(typeof window>"u"||typeof window.prompt!="function")return 58;N=Or(),x=N?Te(B,N):0}else{N=new Uint8Array(O),N._isBuffer=!0;const{bytesRead:M}=await R.fd.read(N,0,N.length,Number(R.pos));x=N?Te(B,N.subarray(0,M)):0,R.pos+=BigInt(x)}return b.setUint32(m,x,!0),0},["i32","i32","i32","i32"],["i32"]),D("fd_readdir",function(v,h,y,m,w){if(h=Number(h),y=Number(y),w=Number(w),h===0||w===0)return 0;const S=G.get(this).fds.get(v,T.FD_READDIR,BigInt(0)),R=re(this),O=R.readdirSync(S.realPath,{withFileTypes:!0}),{HEAPU8:B,view:N}=q(this);let x=0;for(let M=Number(m);M<O.length;M++){const j=pe.encode(O[M].name),J=R.statSync(oe(S.realPath,O[M].name),{bigint:!0}),Q=new Uint8Array(24+j.byteLength),Y=new DataView(Q.buffer);Y.setBigUint64(0,BigInt(M+1),!0),Y.setBigUint64(8,BigInt(J.ino?J.ino:0),!0),Y.setUint32(16,j.byteLength,!0);let Z;O[M].isFile()?Z=4:O[M].isDirectory()?Z=3:O[M].isSymbolicLink()?Z=7:O[M].isCharacterDevice()?Z=2:O[M].isBlockDevice()?Z=1:O[M].isSocket()?Z=6:Z=0,Y.setUint8(20,Z),Q.set(j,24);const le=Q.slice(0,Math.min(Q.length,y-x));B.set(le,h+x),x+=le.byteLength}return N.setUint32(w,x,!0),0},async function(v,h,y,m,w){if(h=Number(h),y=Number(y),w=Number(w),h===0||w===0)return 0;const S=G.get(this).fds.get(v,T.FD_READDIR,BigInt(0)),R=re(this),O=await R.promises.readdir(S.realPath,{withFileTypes:!0}),{HEAPU8:B,view:N}=q(this);let x=0;for(let M=Number(m);M<O.length;M++){const j=pe.encode(O[M].name),J=await R.promises.stat(oe(S.realPath,O[M].name),{bigint:!0}),Q=new Uint8Array(24+j.byteLength),Y=new DataView(Q.buffer);Y.setBigUint64(0,BigInt(M+1),!0),Y.setBigUint64(8,BigInt(J.ino?J.ino:0),!0),Y.setUint32(16,j.byteLength,!0);let Z;O[M].isFile()?Z=4:O[M].isDirectory()?Z=3:O[M].isSymbolicLink()?Z=7:O[M].isCharacterDevice()?Z=2:O[M].isBlockDevice()?Z=1:O[M].isSocket()?Z=6:Z=0,Y.setUint8(20,Z),Q.set(j,24);const le=Q.slice(0,Math.min(Q.length,y-x));B.set(le,h+x),x+=le.byteLength}return N.setUint32(w,x,!0),0},["i32","i32","i32","i64","i32"],["i32"]),D("fd_renumber",function(v,h){return G.get(this).fds.renumber(h,v),0},async function(v,h){return await G.get(this).fds.renumber(h,v),0},["i32","i32"],["i32"]),D("fd_sync",function(v){const y=G.get(this).fds.get(v,T.FD_SYNC,BigInt(0));return re(this).fsyncSync(y.fd),0},async function(v){return await G.get(this).fds.get(v,T.FD_SYNC,BigInt(0)).fd.sync(),0},["i32"],["i32"]),D("fd_write",function(v,h,y,m){if(h=Number(h),m=Number(m),h===0&&y||m===0)return 28;const{HEAPU8:w,view:b}=q(this),R=G.get(this).fds.get(v,T.FD_WRITE,BigInt(0));if(!y)return b.setUint32(m,0,!0),0;const O=Pe(Array.from({length:Number(y)},(N,x)=>{const M=h+x*8,j=b.getInt32(M,!0),J=b.getUint32(M+4,!0);return w.subarray(j,j+J)}));let B;return v===1||v===2?B=R.write(O):(B=re(this).writeSync(R.fd,O,0,O.length,Number(R.pos)),R.pos+=BigInt(B)),b.setUint32(m,B,!0),0},async function(v,h,y,m){if(h=Number(h),m=Number(m),h===0&&y||m===0)return 28;const{HEAPU8:w,view:b}=q(this),R=G.get(this).fds.get(v,T.FD_WRITE,BigInt(0));if(!y)return b.setUint32(m,0,!0),0;const O=Pe(Array.from({length:Number(y)},(N,x)=>{const M=h+x*8,j=b.getInt32(M,!0),J=b.getUint32(M+4,!0);return w.subarray(j,j+J)}));let B;return v===1||v===2?B=R.write(O):(B=await(await R.fd.write(O,0,O.length,Number(R.pos))).bytesWritten,R.pos+=BigInt(B)),b.setUint32(m,B,!0),0},["i32","i32","i32","i32"],["i32"]),D("path_create_directory",function(v,h,y){if(h=Number(h),y=Number(y),h===0)return 28;const{HEAPU8:m}=q(this),b=G.get(this).fds.get(v,T.PATH_CREATE_DIRECTORY,BigInt(0));let S=se.decode(ie(m,h,h+y));return S=oe(b.realPath,S),re(this).mkdirSync(S),0},async function(v,h,y){if(h=Number(h),y=Number(y),h===0)return 28;const{HEAPU8:m}=q(this),b=G.get(this).fds.get(v,T.PATH_CREATE_DIRECTORY,BigInt(0));let S=se.decode(ie(m,h,h+y));return S=oe(b.realPath,S),await re(this).promises.mkdir(S),0},["i32","i32","i32"],["i32"]),D("path_filestat_get",function(v,h,y,m,w){if(y=Number(y),m=Number(m),w=Number(w),y===0||w===0)return 28;const{HEAPU8:b,view:S}=q(this),O=G.get(this).fds.get(v,T.PATH_FILESTAT_GET,BigInt(0));let B=se.decode(ie(b,y,y+m));const N=re(this);B=oe(O.realPath,B);let x;return(h&1)===1?x=N.statSync(B,{bigint:!0}):x=N.lstatSync(B,{bigint:!0}),xe(S,w,x),0},async function(v,h,y,m,w){if(y=Number(y),m=Number(m),w=Number(w),y===0||w===0)return 28;const{HEAPU8:b,view:S}=q(this),O=G.get(this).fds.get(v,T.PATH_FILESTAT_GET,BigInt(0));let B=se.decode(ie(b,y,y+m));const N=re(this);B=oe(O.realPath,B);let x;return(h&1)===1?x=await N.promises.stat(B,{bigint:!0}):x=await N.promises.lstat(B,{bigint:!0}),xe(S,w,x),0},["i32","i32","i32","i32","i32"],["i32"]),D("path_filestat_set_times",function(v,h,y,m,w,b,S){if(y=Number(y),m=Number(m),y===0)return 28;const{HEAPU8:R}=q(this),B=G.get(this).fds.get(v,T.PATH_FILESTAT_SET_TIMES,BigInt(0));if(We(S))return 28;const N=re(this),x=$e(N,B,se.decode(ie(R,y,y+m)),h);return(S&2)===2&&(w=BigInt(Date.now()*1e6)),(S&8)===8&&(b=BigInt(Date.now()*1e6)),N.utimesSync(x,Number(w),Number(b)),0},async function(v,h,y,m,w,b,S){if(y=Number(y),m=Number(m),y===0)return 28;const{HEAPU8:R}=q(this),B=G.get(this).fds.get(v,T.PATH_FILESTAT_SET_TIMES,BigInt(0));if(We(S))return 28;const N=re(this),x=await Qe(N,B,se.decode(ie(R,y,y+m)),h);return(S&2)===2&&(w=BigInt(Date.now()*1e6)),(S&8)===8&&(b=BigInt(Date.now()*1e6)),await N.promises.utimes(x,Number(w),Number(b)),0},["i32","i32","i32","i32","i64","i64","i32"],["i32"]),D("path_link",function(v,h,y,m,w,b,S){if(y=Number(y),m=Number(m),b=Number(b),S=Number(S),y===0||b===0)return 28;const R=G.get(this);let O,B;v===w?O=B=R.fds.get(v,T.PATH_LINK_SOURCE|T.PATH_LINK_TARGET,BigInt(0)):(O=R.fds.get(v,T.PATH_LINK_SOURCE,BigInt(0)),B=R.fds.get(w,T.PATH_LINK_TARGET,BigInt(0)));const{HEAPU8:N}=q(this),x=re(this),M=$e(x,O,se.decode(ie(N,y,y+m)),h),j=oe(B.realPath,se.decode(ie(N,b,b+S)));return x.linkSync(M,j),0},async function(v,h,y,m,w,b,S){if(y=Number(y),m=Number(m),b=Number(b),S=Number(S),y===0||b===0)return 28;const R=G.get(this);let O,B;v===w?O=B=R.fds.get(v,T.PATH_LINK_SOURCE|T.PATH_LINK_TARGET,BigInt(0)):(O=R.fds.get(v,T.PATH_LINK_SOURCE,BigInt(0)),B=R.fds.get(w,T.PATH_LINK_TARGET,BigInt(0)));const{HEAPU8:N}=q(this),x=re(this),M=await Qe(x,O,se.decode(ie(N,y,y+m)),h),j=oe(B.realPath,se.decode(ie(N,b,b+S)));return await x.promises.link(M,j),0},["i32","i32","i32","i32","i32","i32","i32"],["i32"]);function k(s,v,h,y){const m=(v&(T.FD_READ|T.FD_READDIR))!==BigInt(0),w=(v&(T.FD_DATASYNC|T.FD_WRITE|T.FD_ALLOCATE|T.FD_FILESTAT_SET_SIZE))!==BigInt(0);let b=w?m?2:1:0,S=T.PATH_OPEN,R=v|h;return(s&1)!==0&&(b|=64,S|=T.PATH_CREATE_FILE),(s&2)!==0&&(b|=65536),(s&4)!==0&&(b|=128),(s&8)!==0&&(b|=512,S|=T.PATH_FILESTAT_SET_SIZE),(y&1)!==0&&(b|=1024),(y&2)!==0&&(R|=T.FD_DATASYNC),(y&4)!==0&&(b|=2048),(y&8)!==0&&(b|=1052672,R|=T.FD_SYNC),(y&16)!==0&&(b|=1052672,R|=T.FD_SYNC),w&&(b&1536)===0&&(R|=T.FD_SEEK),{flags:b,needed_base:S,needed_inheriting:R}}D("path_open",function(v,h,y,m,w,b,S,R,O){if(y=Number(y),O=Number(O),y===0||O===0)return 28;m=Number(m),b=BigInt(b),S=BigInt(S);const{flags:B,needed_base:N,needed_inheriting:x}=k(w,b,S,R),M=G.get(this),j=M.fds.get(v,N,x),J=q(this),Q=J.HEAPU8,Y=se.decode(ie(Q,y,y+m)),Z=re(this),le=$e(Z,j,Y,h),ge=Z.openSync(le,B,438),me=M.fds.getFileTypeByFd(ge);if(me!==3&&((w&2)!==0||le.endsWith("/")))return 54;const{base:Re,inheriting:be}=Fe(M.fds.stdio,ge,B,me),we=M.fds.insert(ge,le,le,me,b&Re,S&be,0),Ee=Z.fstatSync(ge,{bigint:!0});return Ee.isFile()&&(we.size=Ee.size,(B&1024)!==0&&(we.pos=Ee.size)),J.view.setInt32(O,we.id,!0),0},async function(v,h,y,m,w,b,S,R,O){if(y=Number(y),O=Number(O),y===0||O===0)return 28;m=Number(m),b=BigInt(b),S=BigInt(S);const{flags:B,needed_base:N,needed_inheriting:x}=k(w,b,S,R),M=G.get(this),j=M.fds.get(v,N,x),J=q(this),Q=J.HEAPU8,Y=se.decode(ie(Q,y,y+m)),Z=re(this),le=await Qe(Z,j,Y,h),ge=await Z.promises.open(le,B,438),me=await M.fds.getFileTypeByFd(ge);if((w&2)!==0&&me!==3)return 54;const{base:Re,inheriting:be}=Fe(M.fds.stdio,ge.fd,B,me),we=M.fds.insert(ge,le,le,me,b&Re,S&be,0),Ee=await ge.stat({bigint:!0});return Ee.isFile()&&(we.size=Ee.size,(B&1024)!==0&&(we.pos=Ee.size)),J.view.setInt32(O,we.id,!0),0},["i32","i32","i32","i32","i32","i64","i64","i32","i32"],["i32"]),D("path_readlink",function(v,h,y,m,w,b){if(h=Number(h),y=Number(y),m=Number(m),w=Number(w),b=Number(b),h===0||m===0||b===0)return 28;const{HEAPU8:S,view:R}=q(this),B=G.get(this).fds.get(v,T.PATH_READLINK,BigInt(0));let N=se.decode(ie(S,h,h+y));N=oe(B.realPath,N);const M=re(this).readlinkSync(N),j=pe.encode(M),J=Math.min(j.length,w);return J>=w?42:(S.set(j.subarray(0,J),m),S[m+J]=0,R.setUint32(b,J,!0),0)},async function(v,h,y,m,w,b){if(h=Number(h),y=Number(y),m=Number(m),w=Number(w),b=Number(b),h===0||m===0||b===0)return 28;const{HEAPU8:S,view:R}=q(this),B=G.get(this).fds.get(v,T.PATH_READLINK,BigInt(0));let N=se.decode(ie(S,h,h+y));N=oe(B.realPath,N);const M=await re(this).promises.readlink(N),j=pe.encode(M),J=Math.min(j.length,w);return J>=w?42:(S.set(j.subarray(0,J),m),S[m+J]=0,R.setUint32(b,J,!0),0)},["i32","i32","i32","i32","i32","i32"],["i32"]),D("path_remove_directory",function(v,h,y){if(h=Number(h),y=Number(y),h===0)return 28;const{HEAPU8:m}=q(this),b=G.get(this).fds.get(v,T.PATH_REMOVE_DIRECTORY,BigInt(0));let S=se.decode(ie(m,h,h+y));return S=oe(b.realPath,S),re(this).rmdirSync(S),0},async function(v,h,y){if(h=Number(h),y=Number(y),h===0)return 28;const{HEAPU8:m}=q(this),b=G.get(this).fds.get(v,T.PATH_REMOVE_DIRECTORY,BigInt(0));let S=se.decode(ie(m,h,h+y));return S=oe(b.realPath,S),await re(this).promises.rmdir(S),0},["i32","i32","i32"],["i32"]),D("path_rename",function(v,h,y,m,w,b){if(h=Number(h),y=Number(y),w=Number(w),b=Number(b),h===0||w===0)return 28;const S=G.get(this);let R,O;v===m?R=O=S.fds.get(v,T.PATH_RENAME_SOURCE|T.PATH_RENAME_TARGET,BigInt(0)):(R=S.fds.get(v,T.PATH_RENAME_SOURCE,BigInt(0)),O=S.fds.get(m,T.PATH_RENAME_TARGET,BigInt(0)));const{HEAPU8:B}=q(this),N=oe(R.realPath,se.decode(ie(B,h,h+y))),x=oe(O.realPath,se.decode(ie(B,w,w+b)));return re(this).renameSync(N,x),0},async function(v,h,y,m,w,b){if(h=Number(h),y=Number(y),w=Number(w),b=Number(b),h===0||w===0)return 28;const S=G.get(this);let R,O;v===m?R=O=S.fds.get(v,T.PATH_RENAME_SOURCE|T.PATH_RENAME_TARGET,BigInt(0)):(R=S.fds.get(v,T.PATH_RENAME_SOURCE,BigInt(0)),O=S.fds.get(m,T.PATH_RENAME_TARGET,BigInt(0)));const{HEAPU8:B}=q(this),N=oe(R.realPath,se.decode(ie(B,h,h+y))),x=oe(O.realPath,se.decode(ie(B,w,w+b)));return await re(this).promises.rename(N,x),0},["i32","i32","i32","i32","i32","i32"],["i32"]),D("path_symlink",function(v,h,y,m,w){if(v=Number(v),h=Number(h),m=Number(m),w=Number(w),v===0||m===0)return 28;const{HEAPU8:b}=q(this),R=G.get(this).fds.get(y,T.PATH_SYMLINK,BigInt(0)),O=se.decode(ie(b,v,v+h));if(O.length>0&&O[0]==="/")return 63;let B=se.decode(ie(b,m,m+w));return B=oe(R.realPath,B),re(this).symlinkSync(O,B),0},async function(v,h,y,m,w){if(v=Number(v),h=Number(h),m=Number(m),w=Number(w),v===0||m===0)return 28;const{HEAPU8:b}=q(this),R=G.get(this).fds.get(y,T.PATH_SYMLINK,BigInt(0)),O=se.decode(ie(b,v,v+h));let B=se.decode(ie(b,m,m+w));return B=oe(R.realPath,B),await re(this).promises.symlink(O,B),0},["i32","i32","i32","i32","i32"],["i32"]),D("path_unlink_file",function(v,h,y){if(h=Number(h),y=Number(y),h===0)return 28;const{HEAPU8:m}=q(this),b=G.get(this).fds.get(v,T.PATH_UNLINK_FILE,BigInt(0));let S=se.decode(ie(m,h,h+y));return S=oe(b.realPath,S),re(this).unlinkSync(S),0},async function(v,h,y){if(h=Number(h),y=Number(y),h===0)return 28;const{HEAPU8:m}=q(this),b=G.get(this).fds.get(v,T.PATH_UNLINK_FILE,BigInt(0));let S=se.decode(ie(m,h,h+y));return S=oe(b.realPath,S),await re(this).promises.unlink(S),0},["i32","i32","i32"],["i32"]),this._setMemory=function(v){if(!(v instanceof Be.Memory))throw new TypeError('"instance.exports.memory" property must be a WebAssembly.Memory');kr.set(F,un(v))}}static createSync(c,g,p,E,f,C,F){const D=new nn({size:3,in:E[0],out:E[1],err:E[2],fs:f,print:C,printErr:F}),V=new Ce(c,g,D,!1,f);if(p.length>0)for(let k=0;k<p.length;++k){const s=f.realpathSync(p[k].realPath,"utf8"),v=f.openSync(s,"r",438);D.insertPreopen(v,p[k].mappedPath,s)}return V}static async createAsync(c,g,p,E,f,C,F,D){const V=new an({size:3,in:E[0],out:E[1],err:E[2],print:C,printErr:F}),k=new Ce(c,g,V,!0,f,D);if(p.length>0)for(let s=0;s<p.length;++s){const v=p[s],h=await f.promises.realpath(v.realPath),y=await f.promises.open(h,"r",438);await V.insertPreopen(y,v.mappedPath,h)}return k}}const dn=Object.freeze(Object.create(null)),Ae=Symbol("kExitCode"),Fr=Symbol("kSetMemory"),Ze=Symbol("kStarted"),je=Symbol("kInstance"),He=Symbol("kBindingName");function _n(l){var c;Se(l,"options");let g;if(l.version!==void 0)switch(Ar(l.version,"options.version"),l.version){case"unstable":g=Ce,this[He]="wasi_unstable";break;case"preview1":g=Ce,this[He]="wasi_snapshot_preview1";break;default:throw new TypeError(`unsupported WASI version "${l.version}"`)}else g=Ce,this[He]="wasi_snapshot_preview1";l.args!==void 0&&lt(l.args,"options.args");const p=((c=l.args)!==null&&c!==void 0?c:[]).map(String),E=[];l.env!==void 0&&(Se(l.env,"options.env"),Object.entries(l.env).forEach(({0:F,1:D})=>{D!==void 0&&E.push(`${F}=${D}`)}));const f=[];if(l.preopens!==void 0&&(Se(l.preopens,"options.preopens"),Object.entries(l.preopens).forEach(({0:F,1:D})=>f.push({mappedPath:String(F),realPath:String(D)}))),f.length>0){if(l.fs===void 0)throw new Error("filesystem is disabled, can not preopen directory");try{Se(l.fs,"options.fs")}catch{throw new TypeError("Node.js fs like implementation is not provided")}}return l.print!==void 0&&Ue(l.print,"options.print"),l.printErr!==void 0&&Ue(l.printErr,"options.printErr"),l.returnOnExit!==void 0&&dt(l.returnOnExit,"options.returnOnExit"),{args:p,env:E,preopens:f,stdio:[0,1,2],_WASI:g}}function vn(l,c){this[Fr]=l,this.wasiImport=c,this[Ze]=!1,this[Ae]=0,this[je]=void 0}class gn{constructor(c=dn){const{args:g,env:p,preopens:E,stdio:f,_WASI:C}=_n.call(this,c),F=C.createSync(g,p,E,f,c.fs,c.print,c.printErr),D=F._setMemory;delete F._setMemory,vn.call(this,D,F),c.returnOnExit&&(F.proc_exit=hn.bind(this))}finalizeBindings(c,g){var p,{memory:E=(p=c?.exports)===null||p===void 0?void 0:p.memory}=g===void 0?{}:g;if(this[Ze])throw new Error("WASI instance has already started");Se(c,"instance"),Se(c.exports,"instance.exports"),this[Fr](E),this[je]=c,this[Ze]=!0}start(c){this.finalizeBindings(c);const{_start:g,_initialize:p}=this[je].exports;Ue(g,"instance.exports._start"),br(p,"instance.exports._initialize");let E;try{E=g()}catch(f){if(f!==Ae)throw f}return E instanceof Promise?E.then(()=>this[Ae],f=>{if(f!==Ae)throw f;return this[Ae]}):this[Ae]}initialize(c){this.finalizeBindings(c);const{_start:g,_initialize:p}=this[je].exports;if(br(g,"instance.exports._start"),p!==void 0)return Ue(p,"instance.exports._initialize"),p()}getImportObject(){return{[this[He]]:this.wasiImport}}}function hn(l){throw this[Ae]=l,Ae}var Ge={},Pr;function pn(){if(Pr)return Ge;Pr=1;const l=p=>{if(p===void 0)return 0;if(p===null)return 1;const E=typeof p;return E==="boolean"?2:E==="number"?3:E==="string"?4:E==="object"?6:E==="bigint"?9:-1},c=(p,E,f)=>{switch(f){case 0:case 1:return new Uint8Array(0);case 2:{const C=new Int32Array(1);return C[0]=E?1:0,new Uint8Array(C.buffer)}case 3:{const C=new Float64Array(1);return C[0]=E,new Uint8Array(C.buffer)}case 4:return new TextEncoder().encode(E);case 6:{const[C]=Object.entries(p).filter(([V,k])=>k===E.constructor)[0]??[];C&&Object.defineProperty(E,"__constructor__",{configurable:!0,writable:!0,enumerable:!0,value:C});const F=JSON.stringify(E,(V,k)=>typeof k=="bigint"?`BigInt(${String(k)})`:k instanceof Error?{...k,message:k.message,stack:k.stack,__error__:k.constructor.name}:k);return new TextEncoder().encode(F)}case 9:{const C=new BigInt64Array(1);return C[0]=E,new Uint8Array(C.buffer)}case-1:default:throw new Error("unsupported data")}},g=(p,E,f)=>{if(f!==0){if(f===1)return null;if(f===2)return!!new Int32Array(E.buffer,E.byteOffset,1)[0];if(f===3)return new Float64Array(E.buffer,E.byteOffset,1)[0];if(f===4)return new TextDecoder().decode(E.slice());if(f===6){const C=JSON.parse(new TextDecoder().decode(E.slice()),(F,D)=>{if(typeof D=="string"){const V=D.match(/^BigInt\((-?\d+)\)$/);if(V&&V[1])return BigInt(V[1])}return D});if(C.__constructor__){const F=C.__constructor__;delete C.__constructor__,Object.setPrototypeOf(C,p[F].prototype)}if(C.__error__){const F=C.__error__,D=globalThis[F]||Error;delete C.__error__;const V=new D(C.message);Object.defineProperty(V,"stack",{configurable:!0,enumerable:!1,writable:!0,value:V.stack}),Object.defineProperty(V,Symbol.toStringTag,{configurable:!0,enumerable:!1,writable:!0,value:F});for(const[k,s]of Object.entries(C))k==="message"||k==="stack"||(V[k]=s);return V}return C}if(f===9)return new BigInt64Array(E.buffer,E.byteOffset,1)[0];throw new Error("unsupported data")}};return Ge.createOnMessage=p=>function(f){if(f.data.__fs__){const{sab:C,type:F,payload:D}=f.data.__fs__,V=p[F];try{const k=V.apply(p,D),s=l(k);Atomics.store(C,1,s);const v=c(p,k,s);Atomics.store(C,2,v.length),new Uint8Array(C.buffer).set(v,16),Atomics.store(C,0,0)}catch(k){const s=l(k);Atomics.store(C,1,s);const v=c(p,k,s);Atomics.store(C,2,v.length),new Uint8Array(C.buffer).set(v,16),Atomics.store(C,0,1)}finally{Atomics.notify(C,0)}}},Ge.createFsProxy=p=>new Proxy({},{get(E,f,C){return function(...F){const D=new SharedArrayBuffer(10256),V=new Int32Array(D);Atomics.store(V,0,21),postMessage({__fs__:{sab:V,type:f,payload:F}}),Atomics.wait(V,0,21);const k=Atomics.load(V,0),s=Atomics.load(V,1),v=Atomics.load(V,2),h=new Uint8Array(D,16,v),y=g(p,h,s);if(k===1)throw y;return y}}}),Ge}var Rr=pn();Rr.createFsProxy,Rr.createOnMessage;const En=new ft({onLoad({wasmModule:l,wasmMemory:c}){const g=new gn({print:function(){console.log.apply(console,arguments)},printErr:function(){console.error.apply(console,arguments)}});return ct(l,{childThread:!0,wasi:g,overwriteImports(p){p.env={...p.env,...p.napi,...p.emnapi,memory:c}}})}});globalThis.onmessage=function(l){En.handle(l)}})();
