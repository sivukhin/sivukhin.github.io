(function(){"use strict";var fr=typeof WebAssembly<"u"?WebAssembly:typeof WXWebAssembly<"u"?WXWebAssembly:void 0,me=typeof process=="object"&&process!==null&&typeof process.versions=="object"&&process.versions!==null&&typeof process.versions.node=="string";function lr(f){return typeof f?.postMessage=="function"?f.postMessage:typeof postMessage=="function"?postMessage:void 0}function Wr(f,c,v){var p=new Int32Array(f);if(Atomics.store(p,0,c),c>1&&v){var m=v.name,S=v.message,g=v.stack,O=new TextEncoder().encode(m),P=new TextEncoder().encode(S),x=new TextEncoder().encode(g);Atomics.store(p,1,O.length),Atomics.store(p,2,P.length),Atomics.store(p,3,x.length);var W=new Uint8Array(f);W.set(O,16),W.set(P,16+O.length),W.set(x,16+O.length+P.length)}}function jr(f){var c,v,p=new Int32Array(f),m=Atomics.load(p,0);if(m<=1)return null;var S=Atomics.load(p,1),g=Atomics.load(p,2),O=Atomics.load(p,3),P=new Uint8Array(f),x=P.slice(16,16+S),W=P.slice(16+S,16+S+g),E=P.slice(16+S+g,16+S+g+O),s=new TextDecoder().decode(x),_=new TextDecoder().decode(W),h=new TextDecoder().decode(E),y=(c=globalThis[s])!==null&&c!==void 0?c:s==="RuntimeError"&&(v=fr.RuntimeError)!==null&&v!==void 0?v:Error,w=new y(_);return Object.defineProperty(w,"stack",{value:h,writable:!0,enumerable:!1,configurable:!0}),w}function Hr(f){return typeof SharedArrayBuffer=="function"&&f instanceof SharedArrayBuffer||Object.prototype.toString.call(f)==="[object SharedArrayBuffer]"}function Gr(f){try{return f instanceof fr.RuntimeError}catch{return!1}}function Le(f,c){return{__emnapi__:{type:f,payload:c}}}var zr=536870911;function dr(f){if(f){if(!Hr(f.buffer))throw new Error("Multithread features require shared wasm memory. Try to compile with `-matomics -mbulk-memory` and use `--import-memory --shared-memory` during linking, then create WebAssembly.Memory with `shared: true` option")}else if(typeof SharedArrayBuffer>"u")throw new Error("Current environment does not support SharedArrayBuffer, threads are not available!")}function Jr(f){var c;if(typeof f=="boolean")return f?{size:0,strict:!1}:!1;if(typeof f=="number"){if(!(f>=0))throw new RangeError("reuseWorker: size must be a non-negative integer");return{size:f,strict:!1}}if(!f)return!1;var v=(c=Number(f.size))!==null&&c!==void 0?c:0,p=!!f.strict;if(!(v>0)&&p)throw new RangeError("reuseWorker: size must be set to positive integer if strict is set to true");return{size:v,strict:p}}var Ue=0,_r=function(){function f(c){var v;if(this.unusedWorkers=[],this.runningWorkers=[],this.pthreads=Object.create(null),this.wasmModule=null,this.wasmMemory=null,this.messageEvents=new WeakMap,!c)throw new TypeError("ThreadManager(): options is not provided");"childThread"in c?this._childThread=!!c.childThread:this._childThread=!1,this._childThread?(this._onCreateWorker=void 0,this._reuseWorker=!1,this._beforeLoad=void 0):(this._onCreateWorker=c.onCreateWorker,this._reuseWorker=Jr(c.reuseWorker),this._beforeLoad=c.beforeLoad),this.printErr=(v=c.printErr)!==null&&v!==void 0?v:console.error.bind(console)}return Object.defineProperty(f.prototype,"nextWorkerID",{get:function(){return Ue},enumerable:!1,configurable:!0}),f.prototype.init=function(){this._childThread||this.initMainThread()},f.prototype.initMainThread=function(){this.preparePool()},f.prototype.preparePool=function(){if(this._reuseWorker&&this._reuseWorker.size)for(var c=this._reuseWorker.size;c--;){var v=this.allocateUnusedWorker();me&&(v.once("message",function(){}),v.unref())}},f.prototype.shouldPreloadWorkers=function(){return!this._childThread&&this._reuseWorker&&this._reuseWorker.size>0},f.prototype.loadWasmModuleToAllWorkers=function(){for(var c=this,v=Array(this.unusedWorkers.length),p=function(g){var O=m.unusedWorkers[g];me&&O.ref(),v[g]=m.loadWasmModuleToWorker(O).then(function(P){return me&&O.unref(),P},function(P){throw me&&O.unref(),P})},m=this,S=0;S<this.unusedWorkers.length;++S)p(S);return Promise.all(v).catch(function(g){throw c.terminateAllThreads(),g})},f.prototype.preloadWorkers=function(){return this.shouldPreloadWorkers()?this.loadWasmModuleToAllWorkers():Promise.resolve([])},f.prototype.setup=function(c,v){this.wasmModule=c,this.wasmMemory=v},f.prototype.markId=function(c){if(c.__emnapi_tid)return c.__emnapi_tid;var v=Ue+43;return Ue=(Ue+1)%(zr-42),this.pthreads[v]=c,c.__emnapi_tid=v,v},f.prototype.returnWorkerToPool=function(c){var v=c.__emnapi_tid;v!==void 0&&delete this.pthreads[v],this.unusedWorkers.push(c),this.runningWorkers.splice(this.runningWorkers.indexOf(c),1),delete c.__emnapi_tid,me&&c.unref()},f.prototype.loadWasmModuleToWorker=function(c,v){var p=this;if(c.whenLoaded)return c.whenLoaded;var m=this.printErr,S=this._beforeLoad,g=this;return c.whenLoaded=new Promise(function(O,P){var x=function(E){var s="worker sent an error!";if(c.__emnapi_tid!==void 0&&(s="worker (tid = "+c.__emnapi_tid+") sent an error!"),"message"in E){if(m(s+" "+E.message),E.message.indexOf("RuntimeError")!==-1||E.message.indexOf("unreachable")!==-1)try{g.terminateAllThreads()}catch{}}else m(s);throw P(E),E},W=function(E){if(E.__emnapi__){var s=E.__emnapi__.type,_=E.__emnapi__.payload;s==="loaded"?(c.loaded=!0,me&&!c.__emnapi_tid&&c.unref(),O(c)):s==="cleanup-thread"&&_.tid in p.pthreads&&p.cleanThread(c,_.tid)}};c.onmessage=function(E){W(E.data),p.fireMessageEvent(c,E)},c.onerror=x,me&&(c.on("message",function(E){var s,_;(_=(s=c).onmessage)===null||_===void 0||_.call(s,{data:E})}),c.on("error",function(E){var s,_;(_=(s=c).onerror)===null||_===void 0||_.call(s,E)}),c.on("detachedExit",function(){})),typeof S=="function"&&S(c);try{c.postMessage(Le("load",{wasmModule:p.wasmModule,wasmMemory:p.wasmMemory,sab:v}))}catch(E){throw dr(p.wasmMemory),E}}),c.whenLoaded},f.prototype.allocateUnusedWorker=function(){var c=this._onCreateWorker;if(typeof c!="function")throw new TypeError("`options.onCreateWorker` is not provided");var v=c({type:"thread",name:"emnapi-pthread"});return this.unusedWorkers.push(v),v},f.prototype.getNewWorker=function(c){if(this._reuseWorker){if(this.unusedWorkers.length===0){if(this._reuseWorker.strict&&!me){var v=this.printErr;v(`Tried to spawn a new thread, but the thread pool is exhausted.
This might result in a deadlock unless some threads eventually exit or the code explicitly breaks out to the event loop.`);return}var p=this.allocateUnusedWorker();this.loadWasmModuleToWorker(p,c)}return this.unusedWorkers.pop()}var m=this.allocateUnusedWorker();return this.loadWasmModuleToWorker(m,c),this.unusedWorkers.pop()},f.prototype.cleanThread=function(c,v,p){if(!p&&this._reuseWorker)this.returnWorkerToPool(c);else{delete this.pthreads[v];var m=this.runningWorkers.indexOf(c);m!==-1&&this.runningWorkers.splice(m,1),this.terminateWorker(c),delete c.__emnapi_tid}},f.prototype.terminateWorker=function(c){var v=this,p,m=c.__emnapi_tid;c.terminate(),(p=this.messageEvents.get(c))===null||p===void 0||p.clear(),this.messageEvents.delete(c),c.onmessage=function(S){if(S.data.__emnapi__){var g=v.printErr;g('received "'+S.data.__emnapi__.type+'" command from terminated worker: '+m)}}},f.prototype.terminateAllThreads=function(){for(var c=0;c<this.runningWorkers.length;++c)this.terminateWorker(this.runningWorkers[c]);for(var c=0;c<this.unusedWorkers.length;++c)this.terminateWorker(this.unusedWorkers[c]);this.unusedWorkers=[],this.runningWorkers=[],this.pthreads=Object.create(null),this.preparePool()},f.prototype.addMessageEventListener=function(c,v){var p=this.messageEvents.get(c);return p||(p=new Set,this.messageEvents.set(c,p)),p.add(v),function(){p?.delete(v)}},f.prototype.fireMessageEvent=function(c,v){var p=this.messageEvents.get(c);if(p){var m=this.printErr;p.forEach(function(S){try{S(v)}catch(g){m(g.stack)}})}},f}(),vr=Symbol("kIsProxy");function gr(f,c){if(f[vr])return f;var v=f.exports,p=function(P){for(var x=["apply","construct","defineProperty","deleteProperty","get","getOwnPropertyDescriptor","getPrototypeOf","has","isExtensible","ownKeys","preventExtensions","set","setPrototypeOf"],W={},E=function(_){var h=x[_];W[h]=function(){var y=Array.prototype.slice.call(arguments,1);return y.unshift(P),Reflect[h].apply(Reflect,y)}},s=0;s<x.length;s++)E(s);return W},m=p(v),S=function(){},g=function(){return 0};m.get=function(P,x,W){var E;return x==="memory"?(E=typeof c=="function"?c():c)!==null&&E!==void 0?E:Reflect.get(v,x,W):x==="_initialize"?x in v?S:void 0:x==="_start"?x in v?g:void 0:Reflect.get(v,x,W)},m.has=function(P,x){return x==="memory"?!0:Reflect.has(v,x)};var O=new Proxy(Object.create(null),m);return new Proxy(f,{get:function(P,x,W){return x==="exports"?O:x===vr?!0:Reflect.get(P,x,W)}})}var pr=new WeakMap,qr=function(){function f(c){var v=this;if(!c)throw new TypeError("WASIThreads(): options is not provided");if(!c.wasi)throw new TypeError("WASIThreads(): options.wasi is not provided");pr.set(this,new WeakSet);var p=c.wasi;Kr(this,p),this.wasi=p,"childThread"in c?this.childThread=!!c.childThread:this.childThread=!1,this.PThread=void 0,"threadManager"in c?typeof c.threadManager=="function"?this.PThread=c.threadManager():this.PThread=c.threadManager:this.childThread||(this.PThread=new _r(c),this.PThread.init());var m=!1;"waitThreadStart"in c&&(m=typeof c.waitThreadStart=="number"?c.waitThreadStart:!!c.waitThreadStart);var S=lr(c);if(this.childThread&&typeof S!="function")throw new TypeError("options.postMessage is not a function");this.postMessage=S;var g=!!c.wasm64,O=function(x){if(x.data.__emnapi__){var W=x.data.__emnapi__.type,E=x.data.__emnapi__.payload;W==="spawn-thread"?P(E.startArg,E.errorOrTid):W==="terminate-all-threads"&&v.terminateAllThreads()}},P=function(x,W){var E,s=6,_=W!==void 0;try{dr(v.wasmMemory)}catch(Y){if((E=v.PThread)===null||E===void 0||E.printErr(Y.stack),_){var h=new Int32Array(v.wasmMemory.buffer,W,2);return Atomics.store(h,0,1),Atomics.store(h,1,s),Atomics.notify(h,1),1}else return-s}if(!_){var y=v.wasmInstance.exports.malloc;if(W=g?Number(y(BigInt(8))):y(8),!W)return-48}var w=v.wasmInstance.exports.free,I=g?function(Y){w(BigInt(Y))}:w,C=new Int32Array(v.wasmMemory.buffer,W,2);if(Atomics.store(C,0,0),Atomics.store(C,1,0),v.childThread){S(Le("spawn-thread",{startArg:x,errorOrTid:W})),Atomics.wait(C,1,0);var B=Atomics.load(C,0),k=Atomics.load(C,1);return _?B:(I(W),B?-k:k)}var D=m||m===0,U;D&&(U=new Int32Array(new SharedArrayBuffer(8208)),Atomics.store(U,0,0));var R,V,j=v.PThread;try{if(R=j.getNewWorker(U),!R)throw new Error("failed to get new worker");if(j.addMessageEventListener(R,O),V=j.markId(R),me&&R.ref(),R.postMessage(Le("start",{tid:V,arg:x,sab:U})),D){if(typeof m=="number"){var J=Atomics.wait(U,0,0,m);if(J==="timed-out"){try{j.cleanThread(R,V,!0)}catch{}throw new Error("Spawning thread timed out. Please check if the worker is created successfully and if message is handled properly in the worker.")}}else Atomics.wait(U,0,0);var Q=Atomics.load(U,0);if(Q>1){try{j.cleanThread(R,V,!0)}catch{}throw jr(U.buffer)}}}catch(Y){return Atomics.store(C,0,1),Atomics.store(C,1,s),Atomics.notify(C,1),j?.printErr(Y.stack),_?1:(I(W),-s)}return Atomics.store(C,0,0),Atomics.store(C,1,V),Atomics.notify(C,1),j.runningWorkers.push(R),D||R.whenLoaded.catch(function(Y){throw delete R.whenLoaded,j.cleanThread(R,V,!0),Y}),_?0:(I(W),V)};this.threadSpawn=P}return f.prototype.getImportObject=function(){return{wasi:{"thread-spawn":this.threadSpawn}}},f.prototype.setup=function(c,v,p){p??(p=c.exports.memory),this.wasmInstance=c,this.wasmMemory=p,this.PThread&&this.PThread.setup(v,p)},f.prototype.preloadWorkers=function(){return this.PThread?this.PThread.preloadWorkers():Promise.resolve([])},f.prototype.initialize=function(c,v,p){var m=c.exports;p??(p=m.memory),this.childThread&&(c=gr(c,p)),this.setup(c,v,p);var S=this.wasi;if("_start"in m&&typeof m._start=="function")if(this.childThread){S.start(c);try{var g=hr(S,"kStarted");S[g]=!1}catch{}}else Yr(S,c);else S.initialize(c);return c},f.prototype.start=function(c,v,p){var m=c.exports;p??(p=m.memory),this.childThread&&(c=gr(c,p)),this.setup(c,v,p);var S=this.wasi.start(c);return{exitCode:S,instance:c}},f.prototype.terminateAllThreads=function(){var c;this.childThread?this.postMessage(Le("terminate-all-threads",{})):(c=this.PThread)===null||c===void 0||c.terminateAllThreads()},f}();function Kr(f,c){var v=pr.get(f);if(!v.has(c)){var p=f,m=c.wasiImport;if(m){var S=m.proc_exit;m.proc_exit=function(O){return p.terminateAllThreads(),S.call(this,O)}}if(!p.childThread){var g=c.start;typeof g=="function"&&(c.start=function(O){try{return g.call(this,O)}catch(P){throw Gr(P)&&p.terminateAllThreads(),P}})}v.add(c)}}function hr(f,c){var v=Object.getOwnPropertySymbols(f),p=function(m){return function(S){return S.description?S.description===m:S.toString()==="Symbol(".concat(m,")")}};return Array.isArray(c)?c.map(function(m){return v.filter(p(m))[0]}):v.filter(p(c))[0]}function Yr(f,c){var v=hr(f,["kInstance","kSetMemory"]),p=v[0],m=v[1];f[p]=c,f[m](c.exports.memory)}var $r=function(){function f(c){var v=lr(c);if(typeof v!="function")throw new TypeError("options.postMessage is not a function");this.postMessage=v,this.onLoad=c?.onLoad,this.instance=void 0,this.messagesBeforeLoad=[]}return f.prototype.instantiate=function(c){if(typeof this.onLoad=="function")return this.onLoad(c);throw new Error("ThreadMessageHandler.prototype.instantiate is not implemented")},f.prototype.handle=function(c){var v=this,p;if(!((p=c?.data)===null||p===void 0)&&p.__emnapi__){var m=c.data.__emnapi__.type,S=c.data.__emnapi__.payload;m==="load"?this._load(S):m==="start"&&this.handleAfterLoad(c,function(){v._start(S)})}},f.prototype._load=function(c){var v=this;if(this.instance===void 0){var p;try{p=this.instantiate(c)}catch(S){this._loaded(S,null,c);return}var m=p&&"then"in p?p.then:void 0;typeof m=="function"?m.call(p,function(S){v._loaded(null,S,c)},function(S){v._loaded(S,null,c)}):this._loaded(null,p,c)}},f.prototype._start=function(c){var v=this.instance.exports.wasi_thread_start;if(typeof v!="function"){var p=new TypeError("wasi_thread_start is not exported");throw De(c.sab,2,p),p}var m=this.postMessage,S=c.tid,g=c.arg;De(c.sab,1),v(S,g),m(Le("cleanup-thread",{tid:S}))},f.prototype._loaded=function(c,v,p){if(c)throw De(p.sab,2,c),c;if(v==null){var m=new TypeError("onLoad should return an object");throw De(p.sab,2,m),m}var S=v.instance;if(!S){var g=new TypeError('onLoad should return an object which includes "instance"');throw De(p.sab,2,g),g}this.instance=S;var O=this.postMessage;O(Le("loaded",{}));var P=this.messagesBeforeLoad;this.messagesBeforeLoad=[];for(var x=0;x<P.length;x++){var W=P[x];this.handle({data:W})}},f.prototype.handleAfterLoad=function(c,v){this.instance!==void 0?v.call(this,c):this.messagesBeforeLoad.push(c.data)},f}();function De(f,c,v){f&&(Wr(f.buffer,c,v),Atomics.notify(f,0))}var qe=function(f,c){return qe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,p){v.__proto__=p}||function(v,p){for(var m in p)Object.prototype.hasOwnProperty.call(p,m)&&(v[m]=p[m])},qe(f,c)};function Qr(f,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");qe(f,c);function v(){this.constructor=f}f.prototype=c===null?Object.create(c):(v.prototype=c.prototype,new v)}typeof SuppressedError=="function"&&SuppressedError;var ve=typeof WebAssembly<"u"?WebAssembly:typeof WXWebAssembly<"u"?WXWebAssembly:void 0;function Er(f){if(f&&typeof f!="object")throw new TypeError("imports must be an object or undefined");return!0}function ke(f,c){if(!f)throw new TypeError("Invalid wasm source");Er(c),c=c??{};try{var v=typeof f=="object"&&f!==null&&"then"in f?f.then:void 0;if(typeof v=="function")return v.call(f,function(m){return ke(m,c)})}catch{}if(f instanceof ArrayBuffer||ArrayBuffer.isView(f))return ve.instantiate(f,c);if(f instanceof ve.Module)return ve.instantiate(f,c).then(function(m){return{instance:m,module:f}});if(typeof Response<"u"&&f instanceof Response)return f.arrayBuffer().then(function(m){return ve.instantiate(m,c)});var p=typeof f=="string";if(p||typeof URL<"u"&&f instanceof URL){if(p&&typeof wx<"u"&&typeof __wxConfig<"u")return ve.instantiate(f,c);if(typeof fetch!="function")throw new TypeError("wasm source can not be a string or URL in this environment");if(typeof ve.instantiateStreaming=="function")try{return ve.instantiateStreaming(fetch(f),c).catch(function(){return ke(fetch(f),c)})}catch{return ke(fetch(f),c)}else return ke(fetch(f),c)}throw new TypeError("Invalid wasm source")}function Zr(f,c){if(!f)throw new TypeError("Invalid wasm source");Er(c),c=c??{};var v;if(f instanceof ArrayBuffer||ArrayBuffer.isView(f))v=new ve.Module(f);else if(f instanceof WebAssembly.Module)v=f;else throw new TypeError("Invalid wasm source");var p=new ve.Instance(v,c),m={instance:p,module:v};return m}function Xr(f){var c=function(){var v=typeof process=="object"&&process!==null&&typeof process.versions=="object"&&process.versions!==null&&typeof process.versions.node=="string",p=!!f.childThread,m=typeof f.waitThreadStart=="number"?f.waitThreadStart:!!f.waitThreadStart,S,g,O,P,x;function W(e){throw typeof ve.RuntimeError=="function"?new ve.RuntimeError(e):Error(e)}var E={imports:{env:{},napi:{},emnapi:{}},exports:{},emnapi:{},loaded:!1,filename:"",childThread:p,initWorker:void 0,executeAsyncWork:void 0,waitThreadStart:m,PThread:void 0,init:function(e){if(E.loaded)return E.exports;if(!e)throw new TypeError("Invalid napi init options");var a=e.instance;if(!a?.exports)throw new TypeError("Invalid wasm instance");S=a;var t=a.exports,r=e.module,n=e.memory||t.memory,i=e.table||t.__indirect_function_table;if(!(r instanceof ve.Module))throw new TypeError("Invalid wasm module");if(!(n instanceof ve.Memory))throw new TypeError("Invalid wasm memory");if(!(i instanceof ve.Table))throw new TypeError("Invalid wasm table");if(g=n,O=i,typeof t.malloc!="function")throw new TypeError("malloc is not exported");if(typeof t.free!="function")throw new TypeError("free is not exported");if(P=t.malloc,x=t.free,!E.childThread){var o=8,u=a.exports.node_api_module_get_api_version_v1;typeof u=="function"&&(o=u());var l=E.envObject||(E.envObject=s.createEnv(E.filename,o,function(b){return O.get(b)},function(b){return O.get(b)},W,_)),d=s.openScope(l);try{l.callIntoModule(function(b){var A=E.exports,F=d.add(A),N=a.exports.napi_register_wasm_v1,M=N(b.id,F.id);E.exports=M?s.handleStore.get(M).value:A})}finally{s.closeScope(l,d)}return E.loaded=!0,delete E.envObject,E.exports}}},s,_,h=void 0,y;if(p){s=f?.context;var I=typeof f.postMessage=="function"?f.postMessage:typeof postMessage=="function"?postMessage:void 0;if(typeof I!="function")throw new TypeError("No postMessage found");E.postMessage=I}else{var w=f.context;if(typeof w!="object"||w===null)throw new TypeError("Invalid `options.context`. Use `import { getDefaultContext } from '@emnapi/runtime'`");s=w}if(typeof f.filename=="string"&&(E.filename=f.filename),typeof f.onCreateWorker=="function"&&(h=f.onCreateWorker),typeof f.print=="function"?f.print:console.log.bind(console),typeof f.printErr=="function"?y=f.printErr:y=console.warn.bind(console),"nodeBinding"in f){var C=f.nodeBinding;if(typeof C!="object"||C===null)throw new TypeError("Invalid `options.nodeBinding`. Use @emnapi/node-binding package");_=C}var B=0;if("asyncWorkPoolSize"in f){if(typeof f.asyncWorkPoolSize!="number")throw new TypeError("options.asyncWorkPoolSize must be a integer");B=f.asyncWorkPoolSize>>0,B>1024?B=1024:B<-1024&&(B=-1024)}var k=p?!1:B<=0;function D(){return Math.abs(B)}E.imports.env._emnapi_async_work_pool_size=D;function U(e){if(!e)return!1;if(e._emnapiSendListener)return!0;var a=function(r){var n=v?r:r.data,i=n.__emnapi__;if(i&&i.type==="async-send")if(p){var o=E.postMessage;o({__emnapi__:i})}else{var u=i.payload.callback;O.get(u)(i.payload.data)}},t=function(){v?e.off("message",a):e.removeEventListener("message",a,!1),delete e._emnapiSendListener};return e._emnapiSendListener={handler:a,dispose:t},v?e.on("message",a):e.addEventListener("message",a,!1),!0}E.emnapi.addSendListener=U;var R=new _r(p?{printErr:y,childThread:!0}:{printErr:y,beforeLoad:function(e){U(e)},reuseWorker:f.reuseWorker,onCreateWorker:h});E.PThread=R;function V(e,a,t,r){var n=s.envStore.get(e);return n.setLastError(a,t,r)}function j(e){var a=s.envStore.get(e);return a.clearLastError()}function J(e,a,t){var r=typeof process=="object"&&process!==null&&typeof process.versions=="object"&&process.versions!==null&&typeof process.versions.node=="string"?process.versions.node.split(".").map(function(i){return Number(i)}):[0,0,0],n=new DataView(g.buffer);n.setUint32(e,r[0],!0),n.setUint32(a,r[1],!0),n.setUint32(t,r[2],!0)}function Q(){}function Y(){}function Z(e,a){s.feature.setImmediate(function(){O.get(e)(a)})}function fe(e,a){Promise.resolve().then(function(){O.get(e)(a)})}function ge(e,a,t,r,n){var i=s.envStore.get(a),o=s.openScope(i);try{i.callbackIntoModule(!!e,function(){O.get(t)(a,r)})}catch(u){throw s.closeScope(i,o),n&&s.closeScope(i),u}s.closeScope(i,o)}function we(e,a,t,r,n){var i=s.envStore.get(a);i.callFinalizerInternal(e,t,r,n)}function Pe(){s.increaseWaitingRequestCounter()}function Ne(){s.decreaseWaitingRequestCounter()}function he(e,a){var t,r=[a>>>0,(t=a,+Math.abs(t)>=1?t>0?(Math.min(+Math.floor(t/4294967296),4294967295)|0)>>>0:~~+Math.ceil((t-+(~~t>>>0))/4294967296)>>>0:0)],n=new DataView(g.buffer);n.setInt32(e,r[0],!0),n.setInt32(e+4,r[1],!0)}var Ae=Object.freeze({__proto__:null,$emnapiSetValueI64:he,_emnapi_call_finalizer:we,_emnapi_callback_into_module:ge,_emnapi_ctx_decrease_waiting_request_counter:Ne,_emnapi_ctx_increase_waiting_request_counter:Pe,_emnapi_get_node_version:J,_emnapi_next_tick:fe,_emnapi_runtime_keepalive_pop:Y,_emnapi_runtime_keepalive_push:Q,_emnapi_set_immediate:Z,napi_clear_last_error:j,napi_set_last_error:V});function ze(e){var a=new DataView(g.buffer),t=20,r=a.getInt32(e+t,!0),n=R.pthreads[r];return n}function _n(e){if(!p){var a=ze(e);a&&typeof a.unref=="function"&&a.unref()}}function vn(e,a,t){if(p){var r=E.postMessage;r({__emnapi__:{type:"async-send",payload:{callback:a,data:t}}})}else switch(e){case 0:Z(a,t);break;case 1:fe(a,t);break}}var Br,Je=new Promise(function(e){Br=function(){Je.ready=!0,e()}});Je.ready=!1;function gn(){return typeof window<"u"&&typeof document<"u"&&!v?1:0}function pn(e,a,t){Je.ready?O.get(e)(a,t):Je.then(function(){O.get(e)(a,t)})}function hn(e,a){for(var t=[],r=new DataView(g.buffer),n=function(o){var u=r.getInt32(e+o*4,!0),l=ze(u);t.push(new Promise(function(d){var b=function(A){var F=v?A:A.data,N=F.__emnapi__;N&&N.type==="async-thread-ready"&&(d(),l&&typeof l.unref=="function"&&l.unref(),v?l.off("message",b):l.removeEventListener("message",b))};v?l.on("message",b):l.addEventListener("message",b)}))},i=0;i<a;i++)n(i);Promise.all(t).then(Br)}function En(){if(p){var e=E.postMessage;e({__emnapi__:{type:"async-thread-ready",payload:{}}})}}var yn=Object.freeze({__proto__:null,_emnapi_after_uvthreadpool_ready:pn,_emnapi_async_send_js:vn,_emnapi_emit_async_thread_ready:En,_emnapi_is_main_browser_thread:gn,_emnapi_tell_js_uvthreadpool:hn,_emnapi_worker_unref:_n});function mn(e,a,t){if(!e)return 1;var r=s.envStore.get(e);if(!t)return r.setLastError(1);var n=Number(a);if(n<0)return r.setLastError(1);var i=g.buffer.byteLength,o=i+n;if(o=o+(65536-o%65536)%65536,g.grow(o-i+65535>>16)===-1)return r.setLastError(9);if(s.feature.supportBigInt){var u=new DataView(g.buffer);u.setBigInt64(t,BigInt(g.buffer.byteLength),!0)}else he(t,g.buffer.byteLength);return r.clearLastError()}var wn=Object.freeze({__proto__:null,napi_adjust_external_memory:mn}),te={idGen:{},values:[void 0],queued:new Set,pending:[],init:function(){var e={nextId:1,list:[],generate:function(){var a;return e.list.length?a=e.list.shift():(a=e.nextId,e.nextId++),a},reuse:function(a){e.list.push(a)}};te.idGen=e,te.values=[void 0],te.queued=new Set,te.pending=[]},create:function(e,a,t,r,n,i){var o=0,u=0;if(_){var l=_.node.emitAsyncInit(a,t,-1);o=l.asyncId,u=l.triggerAsyncId}var d=te.idGen.generate();return te.values[d]={env:e,id:d,resource:a,asyncId:o,triggerAsyncId:u,status:0,execute:r,complete:n,data:i},d},callComplete:function(e,a){var t=e.complete,r=e.env,n=e.data,i=function(){if(t){var o=s.envStore.get(r),u=s.openScope(o);try{o.callbackIntoModule(!0,function(){O.get(t)(r,a,n)})}finally{s.closeScope(o,u)}}};_?_.node.makeCallback(e.resource,i,[],{asyncId:e.asyncId,triggerAsyncId:e.triggerAsyncId}):i()},queue:function(e){var a=te.values[e];if(a&&a.status===0){if(a.status=1,te.queued.size>=(Math.abs(B)||4)){te.pending.push(e);return}te.queued.add(e);var t=a.env,r=a.data,n=a.execute;a.status=2,s.feature.setImmediate(function(){if(O.get(n)(t,r),te.queued.delete(e),a.status=3,s.feature.setImmediate(function(){te.callComplete(a,0)}),te.pending.length>0){var i=te.pending.shift();te.values[i].status=0,te.queue(i)}})}},cancel:function(e){var a=te.pending.indexOf(e);if(a!==-1){var t=te.values[e];return t&&t.status===1?(t.status=4,te.pending.splice(a,1),s.feature.setImmediate(function(){te.callComplete(t,11)}),0):9}return 9},remove:function(e){var a=te.values[e];a&&(_&&_.node.emitAsyncDestroy({asyncId:a.asyncId,triggerAsyncId:a.triggerAsyncId}),te.values[e]=void 0,te.idGen.reuse(e))}};function er(e,a,t,r){if(_){var n=s.handleStore.get(e).value,i=s.handleStore.get(a).value,o=_.node.emitAsyncInit(n,i,t),u=o.asyncId,l=o.triggerAsyncId;if(r){var d=new DataView(g.buffer);d.setFloat64(r,u,!0),d.setFloat64(r+8,l,!0)}}}function rr(e,a){_&&_.node.emitAsyncDestroy({asyncId:e,triggerAsyncId:a})}function An(e,a,t,r,n,i,o,u){var l=0,d;if(_){var b=s.handleStore.get(a).value,A=s.handleStore.get(t).value;n=n>>>0;for(var F=Array(n),N=new DataView(g.buffer);l<n;l++){var M=N.getInt32(r+l*4,!0);F[l]=s.handleStore.get(M).value}var z=_.node.makeCallback(b,A,F,{asyncId:i,triggerAsyncId:o});if(u){var $=s.envStore.get(e);d=$.ensureHandleId(z),N.setInt32(u,d,!0)}}}function bn(e,a,t){if(!_)return 9;var r;e&&(r=Object(s.handleStore.get(e).value));var n=s.handleStore.get(a).value,i=_.napi.asyncInit(r,n);if(i.status!==0)return i.status;var o=i.value;o>=BigInt(-1)*(BigInt(1)<<BigInt(63))&&o<BigInt(1)<<BigInt(63)||(o=o&(BigInt(1)<<BigInt(64))-BigInt(1),o>=BigInt(1)<<BigInt(63)&&(o=o-(BigInt(1)<<BigInt(64))));var u=Number(o&BigInt(4294967295)),l=Number(o>>BigInt(32)),d=new DataView(g.buffer);return d.setInt32(t,u,!0),d.setInt32(t+4,l,!0),0}function In(e){if(!_)return 9;var a=new DataView(g.buffer),t=a.getInt32(e,!0),r=a.getInt32(e+4,!0),n=BigInt(t>>>0)|BigInt(r)<<BigInt(32),i=_.napi.asyncDestroy(n);return i.status!==0?i.status:0}function Ln(e,a,t,r){throw new Error("napi_open_callback_scope has not been implemented yet")}function Sn(e,a){throw new Error("napi_close_callback_scope has not been implemented yet")}function Tn(e,a,t,r,n,i,o){var u=0,l;if(!e)return 1;var d=s.envStore.get(e);if(d.checkGCAccess(),!d.tryCatch.isEmpty())return d.setLastError(10);if(!d.canCallIntoJs())return d.setLastError(d.moduleApiVersion>=10?23:10);d.clearLastError();try{if(!_)return d.setLastError(9);if(!t||n>0&&!i)return d.setLastError(1);var b=Object(s.handleStore.get(t).value),A=s.handleStore.get(r).value;if(typeof A!="function")return d.setLastError(1);var F=new DataView(g.buffer),N=F.getInt32(a,!0),M=F.getInt32(a+4,!0),z=BigInt(N>>>0)|BigInt(M)<<BigInt(32);n=n>>>0;for(var $=Array(n);u<n;u++){var ae=F.getInt32(i+u*4,!0);$[u]=s.handleStore.get(ae).value}var ue=_.napi.makeCallback(z,b,A,$);if(ue.error)throw ue.error;return ue.status!==0?d.setLastError(ue.status):(o&&(l=d.ensureHandleId(ue.value),F.setInt32(o,l,!0)),d.getReturnStatus())}catch(ee){return d.tryCatch.setError(ee),d.setLastError(10)}}function Cn(e){var a=s.envStore.get(e);a.checkGCAccess()}var Dn=Object.freeze({__proto__:null,_emnapi_async_destroy_js:In,_emnapi_async_init_js:bn,_emnapi_env_check_gc_access:Cn,_emnapi_node_emit_async_destroy:rr,_emnapi_node_emit_async_init:er,_emnapi_node_make_callback:An,napi_close_callback_scope:Sn,napi_make_callback:Tn,napi_open_callback_scope:Ln}),L={offset:{resource:0,async_id:8,trigger_async_id:16,queue_size:24,queue:28,thread_count:32,is_closing:36,dispatch_state:40,context:44,max_queue_size:48,ref:52,env:56,finalize_data:60,finalize_cb:64,call_js_cb:68,handles_closing:72,async_ref:76,mutex:80,cond:84,end:88},init:function(){if(typeof R<"u"){R.unusedWorkers.forEach(L.addListener),R.runningWorkers.forEach(L.addListener);var e=R.getNewWorker;R.getNewWorker=function(){var a=e.apply(this,arguments);return L.addListener(a),a}}},addListener:function(e){if(!e)return!1;if(e._emnapiTSFNListener)return!0;var a=function(r){var n=v?r:r.data,i=n.__emnapi__;if(i){var o=i.type,u=i.payload;o==="tsfn-send"&&L.dispatch(u.tsfn)}},t=function(){v?e.off("message",a):e.removeEventListener("message",a,!1),delete e._emnapiTSFNListener};return e._emnapiTSFNListener={handler:a,dispose:t},v?e.on("message",a):e.addEventListener("message",a,!1),!0},initQueue:function(e){var a=8,t=P(a);return t?(new Uint8Array(g.buffer,t,a).fill(0),L.storeSizeTypeValue(e+L.offset.queue,t,!1),!0):!1},destroyQueue:function(e){var a=L.loadSizeTypeValue(e+L.offset.queue,!1);a&&x(a)},pushQueue:function(e,a){var t=L.loadSizeTypeValue(e+L.offset.queue,!1),r=L.loadSizeTypeValue(t,!1),n=L.loadSizeTypeValue(t+4,!1),i=8,o=P(i);if(!o)throw new Error("OOM");L.storeSizeTypeValue(o,a,!1),L.storeSizeTypeValue(o+4,0,!1),r===0&&n===0?(L.storeSizeTypeValue(t,o,!1),L.storeSizeTypeValue(t+4,o,!1)):(L.storeSizeTypeValue(n+4,o,!1),L.storeSizeTypeValue(t+4,o,!1)),L.addQueueSize(e)},shiftQueue:function(e){var a=L.loadSizeTypeValue(e+L.offset.queue,!1),t=L.loadSizeTypeValue(a,!1);if(t===0)return 0;var r=t,n=L.loadSizeTypeValue(t+4,!1);L.storeSizeTypeValue(a,n,!1),n===0&&L.storeSizeTypeValue(a+4,0,!1),L.storeSizeTypeValue(r+4,0,!1);var i=L.loadSizeTypeValue(r,!1);return x(r),L.subQueueSize(e),i},push:function(e,a,t){var r=L.getMutex(e),n=L.getCond(e),i=function(){var u=L.getQueueSize(e),l=L.getMaxQueueSize(e),d=L.getIsClosing(e);return u>=l&&l>0&&!d},o=typeof window<"u"&&typeof document<"u"&&!v;return r.execute(function(){for(;i();){if(t===0)return 15;if(o)return 21;n.wait()}return L.getIsClosing(e)?L.getThreadCount(e)===0?1:(L.subThreadCount(e),16):(L.pushQueue(e,a),L.send(e),0)})},getMutex:function(e){var a=e+L.offset.mutex,t={lock:function(){var r=typeof window<"u"&&typeof document<"u"&&!v,n=new Int32Array(g.buffer,a,1);if(r)for(;;){var i=Atomics.compareExchange(n,0,0,1);if(i===0)return}else for(;;){var i=Atomics.compareExchange(n,0,0,1);if(i===0)return;Atomics.wait(n,0,1)}},unlock:function(){var r=new Int32Array(g.buffer,a,1),n=Atomics.compareExchange(r,0,1,0);if(n!==1)throw new Error("Tried to unlock while not holding the mutex");Atomics.notify(r,0,1)},execute:function(r){t.lock();try{return r()}finally{t.unlock()}}};return t},getCond:function(e){var a=e+L.offset.cond,t=L.getMutex(e),r={wait:function(){var n=new Int32Array(g.buffer,a,1),i=Atomics.load(n,0);t.unlock(),Atomics.wait(n,0,i),t.lock()},signal:function(){var n=new Int32Array(g.buffer,a,1);Atomics.add(n,0,1),Atomics.notify(n,0,1)}};return r},getQueueSize:function(e){return L.loadSizeTypeValue(e+L.offset.queue_size,!0)},addQueueSize:function(e){var a=L.offset.queue_size,t,r;t=new Uint32Array(g.buffer),r=e+a>>2,Atomics.add(t,r,1)},subQueueSize:function(e){var a=L.offset.queue_size,t,r;t=new Uint32Array(g.buffer),r=e+a>>2,Atomics.sub(t,r,1)},getThreadCount:function(e){return L.loadSizeTypeValue(e+L.offset.thread_count,!0)},addThreadCount:function(e){var a=L.offset.thread_count,t,r;t=new Uint32Array(g.buffer),r=e+a>>2,Atomics.add(t,r,1)},subThreadCount:function(e){var a=L.offset.thread_count,t,r;t=new Uint32Array(g.buffer),r=e+a>>2,Atomics.sub(t,r,1)},getIsClosing:function(e){return Atomics.load(new Int32Array(g.buffer),e+L.offset.is_closing>>2)},setIsClosing:function(e,a){Atomics.store(new Int32Array(g.buffer),e+L.offset.is_closing>>2,a)},getHandlesClosing:function(e){return Atomics.load(new Int32Array(g.buffer),e+L.offset.handles_closing>>2)},setHandlesClosing:function(e,a){Atomics.store(new Int32Array(g.buffer),e+L.offset.handles_closing>>2,a)},getDispatchState:function(e){return Atomics.load(new Uint32Array(g.buffer),e+L.offset.dispatch_state>>2)},getContext:function(e){return L.loadSizeTypeValue(e+L.offset.context,!1)},getMaxQueueSize:function(e){return L.loadSizeTypeValue(e+L.offset.max_queue_size,!0)},getEnv:function(e){return L.loadSizeTypeValue(e+L.offset.env,!1)},getCallJSCb:function(e){return L.loadSizeTypeValue(e+L.offset.call_js_cb,!1)},getRef:function(e){return L.loadSizeTypeValue(e+L.offset.ref,!1)},getResource:function(e){return L.loadSizeTypeValue(e+L.offset.resource,!1)},getFinalizeCb:function(e){return L.loadSizeTypeValue(e+L.offset.finalize_cb,!1)},getFinalizeData:function(e){return L.loadSizeTypeValue(e+L.offset.finalize_data,!1)},loadSizeTypeValue:function(e,a){var t,r;return a?(r=new Uint32Array(g.buffer),t=Atomics.load(r,e>>2),t):(r=new Int32Array(g.buffer),t=Atomics.load(r,e>>2),t)},storeSizeTypeValue:function(e,a,t){var r;if(t){r=new Uint32Array(g.buffer),Atomics.store(r,e>>2,a);return}else{r=new Int32Array(g.buffer),Atomics.store(r,e>>2,a>>>0);return}},destroy:function(e){L.destroyQueue(e);var a=L.getEnv(e),t=s.envStore.get(a),r=L.getRef(e);r&&s.refStore.get(r).dispose(),s.removeCleanupHook(t,L.cleanup,e),t.unref();var n=e+L.offset.async_ref>>2,i=new Int32Array(g.buffer);Atomics.load(i,n)&&(Atomics.store(i,n,0),s.decreaseWaitingRequestCounter());var o=L.getResource(e);if(s.refStore.get(o).dispose(),_){var u=new DataView(g.buffer),l=u.getFloat64(e+L.offset.async_id,!0),d=u.getFloat64(e+L.offset.trigger_async_id,!0);rr(l,d)}x(e)},emptyQueueAndDelete:function(e){for(var a=L.getCallJSCb(e),t=L.getContext(e),r;L.getQueueSize(e)>0;)r=L.shiftQueue(e),a&&O.get(a)(0,0,t,r);L.destroy(e)},finalize:function(e){var a=L.getEnv(e),t=s.envStore.get(a);s.openScope(t);var r=L.getFinalizeCb(e),n=L.getFinalizeData(e),i=L.getContext(e),o=function(){t.callFinalizerInternal(0,r,n,i)};try{if(r)if(_){var u=L.getResource(e),l=s.refStore.get(u).get(),d=s.handleStore.get(l).value,b=new DataView(g.buffer),A=b.getFloat64(e+L.offset.async_id,!0),F=b.getFloat64(e+L.offset.trigger_async_id,!0);_.node.makeCallback(d,o,[],{asyncId:A,triggerAsyncId:F})}else o();L.emptyQueueAndDelete(e)}finally{s.closeScope(t)}},cleanup:function(e){L.closeHandlesAndMaybeDelete(e,1)},closeHandlesAndMaybeDelete:function(e,a){var t=L.getEnv(e),r=s.envStore.get(t);s.openScope(r);try{if(a&&L.getMutex(e).execute(function(){L.setIsClosing(e,1),L.getMaxQueueSize(e)>0&&L.getCond(e).signal()}),L.getHandlesClosing(e))return;L.setHandlesClosing(e,1),s.feature.setImmediate(function(){L.finalize(e)})}finally{s.closeScope(r)}},dispatchOne:function(e){var a=0,t=!1,r=!1,n=L.getMutex(e),i=L.getCond(e);if(n.execute(function(){if(L.getIsClosing(e))L.closeHandlesAndMaybeDelete(e,0);else{var N=L.getQueueSize(e);if(N>0){a=L.shiftQueue(e),t=!0;var M=L.getMaxQueueSize(e);N===M&&M>0&&i.signal(),N--}N===0?L.getThreadCount(e)===0&&(L.setIsClosing(e,1),L.getMaxQueueSize(e)>0&&i.signal(),L.closeHandlesAndMaybeDelete(e,0)):r=!0}}),t){var o=L.getEnv(e),u=s.envStore.get(o);s.openScope(u);var l=function(){u.callbackIntoModule(!1,function(){var N=L.getCallJSCb(e),M=L.getRef(e),z=M?s.refStore.get(M).get():0;if(N){var $=L.getContext(e);O.get(N)(o,z,$,a)}else{var ae=z?s.handleStore.get(z).value:null;typeof ae=="function"&&ae()}})};try{if(_){var d=L.getResource(e),b=s.refStore.get(d).get(),A=s.handleStore.get(b).value,F=new DataView(g.buffer);_.node.makeCallback(A,l,[],{asyncId:F.getFloat64(e+L.offset.async_id,!0),triggerAsyncId:F.getFloat64(e+L.offset.trigger_async_id,!0)})}else l()}finally{s.closeScope(u)}}return r},dispatch:function(e){for(var a=!0,t=1e3,r=new Uint32Array(g.buffer),n=e+L.offset.dispatch_state>>2;a&&--t!==0;)Atomics.store(r,n,1),a=L.dispatchOne(e),Atomics.exchange(r,n,0)!==1&&(a=!0);a&&L.send(e)},send:function(e){var a=Atomics.or(new Uint32Array(g.buffer),e+L.offset.dispatch_state>>2,2);(a&1)!==1&&(typeof p<"u"&&p?postMessage({__emnapi__:{type:"tsfn-send",payload:{tsfn:e}}}):s.feature.setImmediate(function(){L.dispatch(e)}))}};function kn(e,a,t,r,n,i,o,u,l,d,b){if(!e)return 1;var A=s.envStore.get(e);if(A.checkGCAccess(),!r||(n=n>>>0,i=i>>>0,i===0)||!b)return A.setLastError(1);var F=0;if(a){var N=s.handleStore.get(a).value;if(typeof N!="function")return A.setLastError(1);F=s.createReference(A,a,1,1).id}else if(!d)return A.setLastError(1);var M;if(t){if(M=s.handleStore.get(t).value,M==null)return A.setLastError(2);M=Object(M)}else M={};var z=A.ensureHandleId(M),$=s.handleStore.get(r).value;if(typeof $=="symbol")return A.setLastError(3);$=String($);var ae=A.ensureHandleId($),ue=L.offset.end,ee=P(ue);if(!ee)return A.setLastError(9);new Uint8Array(g.buffer).subarray(ee,ee+ue).fill(0);var le=s.createReference(A,z,1,1),pe=le.id,_e=new DataView(g.buffer);return _e.setInt32(ee,pe,!0),L.initQueue(ee)?(er(z,ae,-1,ee+L.offset.async_id),_e.setUint32(ee+L.offset.thread_count,i,!0),_e.setInt32(ee+L.offset.context,l,!0),_e.setUint32(ee+L.offset.max_queue_size,n,!0),_e.setInt32(ee+L.offset.ref,F,!0),_e.setInt32(ee+L.offset.env,e,!0),_e.setInt32(ee+L.offset.finalize_data,o,!0),_e.setInt32(ee+L.offset.finalize_cb,u,!0),_e.setInt32(ee+L.offset.call_js_cb,d,!0),s.addCleanupHook(A,L.cleanup,ee),A.ref(),s.increaseWaitingRequestCounter(),_e.setInt32(ee+L.offset.async_ref,1,!0),_e.setInt32(b,ee,!0),A.clearLastError()):(x(ee),le.dispose(),A.setLastError(9))}function Bn(e,a){if(!e||!a)return W(),1;var t=L.getContext(e),r=new DataView(g.buffer);return r.setInt32(a,t,!0),0}function On(e,a,t){return e?L.push(e,a,t):(W(),1)}function Rn(e){if(!e)return W(),1;var a=L.getMutex(e);return a.execute(function(){return L.getIsClosing(e)?16:(L.addThreadCount(e),0)})}function Fn(e,a){if(!e)return W(),1;var t=L.getMutex(e),r=L.getCond(e);return t.execute(function(){if(L.getThreadCount(e)===0)return 1;if(L.subThreadCount(e),L.getThreadCount(e)===0||a===1){var n=L.getIsClosing(e);if(!n){var i=a===1?1:0;L.setIsClosing(e,i),i&&L.getMaxQueueSize(e)>0&&r.signal(),L.send(e)}}return 0})}function Pn(e,a){if(!a)return W(),1;var t=a+L.offset.async_ref>>2,r=new Int32Array(g.buffer);return Atomics.load(r,t)&&(Atomics.store(r,t,0),s.decreaseWaitingRequestCounter()),0}function Nn(e,a){if(!a)return W(),1;var t=a+L.offset.async_ref>>2,r=new Int32Array(g.buffer);return Atomics.load(r,t)||(Atomics.store(r,t,1),s.increaseWaitingRequestCounter()),0}var H={unusedWorkers:[],runningWorkers:[],workQueue:[],workerReady:null,offset:{resource:0,async_id:8,trigger_async_id:16,env:24,data:28,execute:32,complete:36,end:40},init:function(){H.unusedWorkers=[],H.runningWorkers=[],H.workQueue=[],H.workerReady=null},addListener:function(e){if(!e)return!1;if(e._emnapiAWMTListener)return!0;var a=function(r){var n=v?r:r.data,i=n.__emnapi__;if(i){var o=i.type,u=i.payload;o==="async-work-complete"?(s.decreaseWaitingRequestCounter(),H.runningWorkers.splice(H.runningWorkers.indexOf(e),1),H.unusedWorkers.push(e),H.checkIdleWorker(),H.callComplete(u.work,0)):o==="async-work-queue"?H.scheduleWork(u.work):o==="async-work-cancel"&&H.cancelWork(u.work)}},t=function(){v?e.off("message",a):e.removeEventListener("message",a,!1),delete e._emnapiAWMTListener};return e._emnapiAWMTListener={handler:a,dispose:t},v?e.on("message",a):e.addEventListener("message",a,!1),!0},initWorkers:function(e){if(p)return H.workerReady||(H.workerReady=Promise.resolve());if(H.workerReady)return H.workerReady;if(typeof h!="function")throw new TypeError("`options.onCreateWorker` is not a function");var a=[],t=[];if(!("emnapi_async_worker_create"in S.exports))throw new TypeError("`emnapi_async_worker_create` is not exported, please try to add `--export=emnapi_async_worker_create` to linker flags");for(var r=0;r<e;++r)t.push(S.exports.emnapi_async_worker_create());try{for(var n=function(o){var u=h({type:"async-work",name:"emnapi-async-worker"}),l=R.loadWasmModuleToWorker(u);H.addListener(u),a.push(l.then(function(){typeof u.unref=="function"&&u.unref()})),H.unusedWorkers.push(u);var d=t[o];u.threadBlockBase=d,u.postMessage({__emnapi__:{type:"async-worker-init",payload:{arg:d}}})},r=0;r<e;++r)n(r)}catch(o){for(var r=0;r<e;++r){var i=t[r];x(i)}throw o}return H.workerReady=Promise.all(a),H.workerReady},checkIdleWorker:function(){if(H.unusedWorkers.length>0&&H.workQueue.length>0){var e=H.unusedWorkers.shift(),a=H.workQueue.shift();H.runningWorkers.push(e),e.postMessage({__emnapi__:{type:"async-work-execute",payload:{work:a}}})}},getResource:function(e){return L.loadSizeTypeValue(e+H.offset.resource,!1)},getExecute:function(e){return L.loadSizeTypeValue(e+H.offset.execute,!1)},getComplete:function(e){return L.loadSizeTypeValue(e+H.offset.complete,!1)},getEnv:function(e){return L.loadSizeTypeValue(e+H.offset.env,!1)},getData:function(e){return L.loadSizeTypeValue(e+H.offset.data,!1)},scheduleWork:function(e){var a;if(p){var t=E.postMessage;t({__emnapi__:{type:"async-work-queue",payload:{work:e}}});return}if(s.increaseWaitingRequestCounter(),H.workQueue.push(e),!((a=H.workerReady)===null||a===void 0)&&a.ready)H.checkIdleWorker();else{var r=function(n){throw s.decreaseWaitingRequestCounter(),n};try{H.initWorkers(D()).then(function(){H.workerReady.ready=!0,H.checkIdleWorker()},r)}catch(n){r(n)}}},cancelWork:function(e){if(p){var a=E.postMessage;return a({__emnapi__:{type:"async-work-cancel",payload:{work:e}}}),0}var t=H.workQueue.indexOf(e);return t!==-1?(H.workQueue.splice(t,1),s.feature.setImmediate(function(){s.decreaseWaitingRequestCounter(),H.checkIdleWorker(),H.callComplete(e,11)}),0):9},callComplete:function(e,a){var t=H.getComplete(e),r=H.getEnv(e),n=H.getData(e),i=s.envStore.get(r),o=s.openScope(i),u=function(){t&&i.callbackIntoModule(!0,function(){O.get(t)(r,a,n)})};try{if(_){var l=H.getResource(e),d=s.refStore.get(l).get(),b=s.handleStore.get(d).value,A=new DataView(g.buffer),F=A.getFloat64(e+H.offset.async_id,!0),N=A.getFloat64(e+H.offset.trigger_async_id,!0);_.node.makeCallback(b,u,[],{asyncId:F,triggerAsyncId:N})}else u()}finally{s.closeScope(i,o)}}},Vn=k?function(e,a,t,r,n,i,o){if(!e)return 1;var u=s.envStore.get(e);if(u.checkGCAccess(),!r||!o)return u.setLastError(1);var l;if(a?l=Object(s.handleStore.get(a).value):l={},!t)return u.setLastError(1);var d=String(s.handleStore.get(t).value),b=te.create(e,l,d,r,n,i),A=new DataView(g.buffer);return A.setInt32(o,b,!0),u.clearLastError()}:function(e,a,t,r,n,i,o){if(!e)return 1;var u=s.envStore.get(e);if(u.checkGCAccess(),!r||!o)return u.setLastError(1);var l;if(a?l=Object(s.handleStore.get(a).value):l={},!t)return u.setLastError(1);var d=H.offset.end,b=P(d);if(!b)return u.setLastError(9);new Uint8Array(g.buffer).subarray(b,b+d).fill(0);var A=u.ensureHandleId(l),F=s.createReference(u,A,1,1),N=F.id,M=new DataView(g.buffer);return M.setInt32(b,N,!0),er(A,t,-1,b+H.offset.async_id),M.setInt32(b+H.offset.env,e,!0),M.setInt32(b+H.offset.execute,r,!0),M.setInt32(b+H.offset.complete,n,!0),M.setInt32(b+H.offset.data,i,!0),M.setInt32(o,b,!0),u.clearLastError()},Un=k?function(e,a){if(!e)return 1;var t=s.envStore.get(e);return t.checkGCAccess(),a?(te.remove(a),t.clearLastError()):t.setLastError(1)}:function(e,a){if(!e)return 1;var t=s.envStore.get(e);if(t.checkGCAccess(),!a)return t.setLastError(1);var r=H.getResource(a);if(s.refStore.get(r).dispose(),_){var n=new DataView(g.buffer),i=n.getFloat64(a+H.offset.async_id,!0),o=n.getFloat64(a+H.offset.trigger_async_id,!0);rr(i,o)}return x(a),t.clearLastError()},xn=k?function(e,a){if(!e)return 1;var t=s.envStore.get(e);return a?(te.queue(a),t.clearLastError()):t.setLastError(1)}:function(e,a){if(!e)return 1;var t=s.envStore.get(e);return a?(H.scheduleWork(a),t.clearLastError()):t.setLastError(1)},Mn=k?function(e,a){if(!e)return 1;var t=s.envStore.get(e);if(!a)return t.setLastError(1);var r=te.cancel(a);return r===0?t.clearLastError():t.setLastError(r)}:function(e,a){if(!e)return 1;var t=s.envStore.get(e);if(!a)return t.setLastError(1);var r=H.cancelWork(a);return r===0?t.clearLastError():t.setLastError(r)};function Wn(e){if(E.childThread){if(typeof S.exports.emnapi_async_worker_init!="function")throw new TypeError("`emnapi_async_worker_init` is not exported, please try to add `--export=emnapi_async_worker_init` to linker flags");S.exports.emnapi_async_worker_init(e)}else throw new Error("startThread is only available in child threads")}function jn(e){if(p){var a=H.getExecute(e),t=H.getEnv(e),r=H.getData(e);O.get(a)(t,r);var n=E.postMessage;n({__emnapi__:{type:"async-work-complete",payload:{work:e}}})}}E.initWorker=Wn,E.executeAsyncWork=jn;var Hn=Object.freeze({__proto__:null,napi_cancel_async_work:Mn,napi_create_async_work:Vn,napi_delete_async_work:Un,napi_queue_async_work:xn}),K={registry:typeof FinalizationRegistry=="function"?new FinalizationRegistry(function(e){x(e)}):void 0,table:new WeakMap,wasmMemoryViewTable:new WeakMap,init:function(){K.registry=typeof FinalizationRegistry=="function"?new FinalizationRegistry(function(e){x(e)}):void 0,K.table=new WeakMap,K.wasmMemoryViewTable=new WeakMap},isDetachedArrayBuffer:function(e){if(e.byteLength===0)try{new Uint8Array(e)}catch{return!0}return!1},getArrayBufferPointer:function(e,a){var t,r={address:0,ownership:0,runtimeAllocated:0};if(e===g.buffer)return r;var n=K.isDetachedArrayBuffer(e);if(K.table.has(e)){var i=K.table.get(e);return n?(i.address=0,i):(a&&i.ownership===0&&i.runtimeAllocated===1&&new Uint8Array(g.buffer).set(new Uint8Array(e),i.address),i)}if(n||e.byteLength===0||!a)return r;var o=P(e.byteLength);if(!o)throw new Error("Out of memory");return new Uint8Array(g.buffer).set(new Uint8Array(e),o),r.address=o,r.ownership=K.registry?0:1,r.runtimeAllocated=1,K.table.set(e,r),(t=K.registry)===null||t===void 0||t.register(e,o),r},getOrUpdateMemoryView:function(e){if(e.buffer===g.buffer)return K.wasmMemoryViewTable.has(e)||K.wasmMemoryViewTable.set(e,{Ctor:e.constructor,address:e.byteOffset,length:e instanceof DataView?e.byteLength:e.length,ownership:1,runtimeAllocated:0}),e;var a=K.isDetachedArrayBuffer(e.buffer)||typeof SharedArrayBuffer=="function"&&e.buffer instanceof SharedArrayBuffer;if(a&&K.wasmMemoryViewTable.has(e)){var t=K.wasmMemoryViewTable.get(e),r=t.Ctor,n=void 0,i=s.feature.Buffer;return typeof i=="function"&&r===i?n=i.from(g.buffer,t.address,t.length):n=new r(g.buffer,t.address,t.length),K.wasmMemoryViewTable.set(n,t),n}return e},getViewPointer:function(e,a){if(e=K.getOrUpdateMemoryView(e),e.buffer===g.buffer){if(K.wasmMemoryViewTable.has(e)){var t=K.wasmMemoryViewTable.get(e),r=t.address,n=t.ownership,i=t.runtimeAllocated;return{address:r,ownership:n,runtimeAllocated:i,view:e}}return{address:e.byteOffset,ownership:1,runtimeAllocated:0,view:e}}var o=K.getArrayBufferPointer(e.buffer,a),u=o.address,l=o.ownership,d=o.runtimeAllocated;return{address:u===0?0:u+e.byteOffset,ownership:l,runtimeAllocated:d,view:e}}},X={utf8Decoder:void 0,utf16Decoder:void 0,init:function(){var e={decode:function(n){for(var i=0,o=Math.min(4096,n.length+1),u=new Uint16Array(o),l=[],d=0;;){var b=i<n.length;if(!b||d>=o-1){var A=u.subarray(0,d),F=A;if(l.push(String.fromCharCode.apply(null,F)),!b)return l.join("");n=n.subarray(i),i=0,d=0}var N=n[i++];if((N&128)===0)u[d++]=N;else if((N&224)===192){var M=n[i++]&63;u[d++]=(N&31)<<6|M}else if((N&240)===224){var M=n[i++]&63,z=n[i++]&63;u[d++]=(N&31)<<12|M<<6|z}else if((N&248)===240){var M=n[i++]&63,z=n[i++]&63,$=n[i++]&63,ae=(N&7)<<18|M<<12|z<<6|$;ae>65535&&(ae-=65536,u[d++]=ae>>>10&1023|55296,ae=56320|ae&1023),u[d++]=ae}}}},a;a=typeof TextDecoder=="function"?new TextDecoder:e,X.utf8Decoder=a;var t={decode:function(n){var i=new Uint16Array(n.buffer,n.byteOffset,n.byteLength/2);if(i.length<=4096)return String.fromCharCode.apply(null,i);for(var o=[],u=0,l=0;u<i.length;u+=l)l=Math.min(4096,i.length-u),o.push(String.fromCharCode.apply(null,i.subarray(u,u+l)));return o.join("")}},r;r=typeof TextDecoder=="function"?new TextDecoder("utf-16le"):t,X.utf16Decoder=r},lengthBytesUTF8:function(e){for(var a,t=0,r=0;r<e.length;++r)a=e.charCodeAt(r),a<=127?t++:a<=2047?t+=2:a>=55296&&a<=57343?(t+=4,++r):t+=3;return t},UTF8ToString:function(e,a){if(!e||!a)return"";e>>>=0;var t=new Uint8Array(g.buffer),r=e;if(a===-1)for(;t[r];)++r;else r=e+(a>>>0);if(a=r-e,a<=16){for(var n=e,i="";n<r;){var o=t[n++];if(!(o&128)){i+=String.fromCharCode(o);continue}var u=t[n++]&63;if((o&224)===192){i+=String.fromCharCode((o&31)<<6|u);continue}var l=t[n++]&63;if((o&240)===224?o=(o&15)<<12|u<<6|l:o=(o&7)<<18|u<<12|l<<6|t[n++]&63,o<65536)i+=String.fromCharCode(o);else{var d=o-65536;i+=String.fromCharCode(55296|d>>10,56320|d&1023)}}return i}return X.utf8Decoder.decode(typeof SharedArrayBuffer=="function"&&t.buffer instanceof SharedArrayBuffer||Object.prototype.toString.call(t.buffer)==="[object SharedArrayBuffer]"?t.slice(e,r):t.subarray(e,r))},stringToUTF8:function(e,a,t){var r=new Uint8Array(g.buffer),n=a;if(n>>>=0,!(t>0))return 0;for(var i=n,o=n+t-1,u=0;u<e.length;++u){var l=e.charCodeAt(u);if(l>=55296&&l<=57343){var d=e.charCodeAt(++u);l=65536+((l&1023)<<10)|d&1023}if(l<=127){if(n>=o)break;r[n++]=l}else if(l<=2047){if(n+1>=o)break;r[n++]=192|l>>6,r[n++]=128|l&63}else if(l<=65535){if(n+2>=o)break;r[n++]=224|l>>12,r[n++]=128|l>>6&63,r[n++]=128|l&63}else{if(n+3>=o)break;r[n++]=240|l>>18,r[n++]=128|l>>12&63,r[n++]=128|l>>6&63,r[n++]=128|l&63}}return r[n]=0,n-i},UTF16ToString:function(e,a){if(!e||!a)return"";e>>>=0;var t=e;if(a===-1){for(var r=t>>1,n=new Uint16Array(g.buffer);n[r];)++r;t=r<<1}else t=e+(a>>>0)*2;if(a=t-e,a<=32)return String.fromCharCode.apply(null,new Uint16Array(g.buffer,e,a/2));var i=new Uint8Array(g.buffer);return X.utf16Decoder.decode(typeof SharedArrayBuffer=="function"&&i.buffer instanceof SharedArrayBuffer||Object.prototype.toString.call(i.buffer)==="[object SharedArrayBuffer]"?i.slice(e,t):i.subarray(e,t))},stringToUTF16:function(e,a,t){if(t===void 0&&(t=2147483647),t<2)return 0;t-=2;for(var r=a,n=t<e.length*2?t/2:e.length,i=new DataView(g.buffer),o=0;o<n;++o){var u=e.charCodeAt(o);i.setInt16(a,u,!0),a+=2}return i.setInt16(a,0,!0),a-r},newString:function(e,a,t,r,n){if(!e)return 1;var i=s.envStore.get(e);i.checkGCAccess();var o=t===-1,u=t>>>0;if(t!==0&&!a||!r||!(o||u<=2147483647))return i.setLastError(1);var l=n(a,o,u),d=s.addToCurrentScope(l).id,b=new DataView(g.buffer);return b.setInt32(r,d,!0),i.clearLastError()},newExternalString:function(e,a,t,r,n,i,o,u,l){if(!e)return 1;var d=s.envStore.get(e);d.checkGCAccess();var b=t===-1,A=t>>>0;if(t!==0&&!a||!i||!(b||A<=2147483647))return d.setLastError(1);var F=u(e,a,t,i);if(F===0){if(o){var N=new DataView(g.buffer);N.setInt8(o,1,!0)}r&&d.callFinalizer(r,a,n)}return F}};function Gn(e,a,t){if(!e)return 1;var r=s.envStore.get(e);if(r.checkGCAccess(),!r.tryCatch.isEmpty())return r.setLastError(10);if(!r.canCallIntoJs())return r.setLastError(r.moduleApiVersion>=10?23:10);r.clearLastError();try{if(!a||!t)return r.setLastError(1);var n=s.handleStore.get(a);if(!n.isArray())return r.setLastError(8);var i=n.value.length>>>0,o=new DataView(g.buffer);return o.setUint32(t,i,!0),r.getReturnStatus()}catch(u){return r.tryCatch.setError(u),r.setLastError(10)}}function zn(e,a,t,r){if(!e)return 1;var n=s.envStore.get(e);if(n.checkGCAccess(),!a)return n.setLastError(1);var i=s.handleStore.get(a);if(!i.isArrayBuffer())return n.setLastError(1);var o=new DataView(g.buffer);if(t){var u=K.getArrayBufferPointer(i.value,!0).address;o.setInt32(t,u,!0)}return r&&o.setUint32(r,i.value.byteLength,!0),n.clearLastError()}function Jn(e,a,t){if(!e)return 1;var r=s.envStore.get(e);if(r.checkGCAccess(),!r.tryCatch.isEmpty())return r.setLastError(10);if(!r.canCallIntoJs())return r.setLastError(r.moduleApiVersion>=10?23:10);r.clearLastError();try{if(!a||!t)return r.setLastError(1);var n=s.handleStore.get(a);if(n.value==null)throw new TypeError("Cannot convert undefined or null to object");var i=void 0;try{i=n.isObject()||n.isFunction()?n.value:Object(n.value)}catch{return r.setLastError(2)}var o=r.ensureHandleId(Object.getPrototypeOf(i)),u=new DataView(g.buffer);return u.setInt32(t,o,!0),r.getReturnStatus()}catch(l){return r.tryCatch.setError(l),r.setLastError(10)}}function Or(e,a,t,r,n,i,o){if(!e)return 1;var u=s.envStore.get(e);if(u.checkGCAccess(),!a)return u.setLastError(1);var l=s.handleStore.get(a);if(!l.isTypedArray())return u.setLastError(1);var d=l.value,b=new DataView(g.buffer);if(t){var A=void 0;if(d instanceof Int8Array)A=0;else if(d instanceof Uint8Array)A=1;else if(d instanceof Uint8ClampedArray)A=2;else if(d instanceof Int16Array)A=3;else if(d instanceof Uint16Array)A=4;else if(d instanceof Int32Array)A=5;else if(d instanceof Uint32Array)A=6;else if(d instanceof Float32Array)A=7;else if(d instanceof Float64Array)A=8;else if(d instanceof BigInt64Array)A=9;else if(d instanceof BigUint64Array)A=10;else return u.setLastError(9);b.setInt32(t,A,!0)}r&&b.setUint32(r,d.length,!0);var F;if(n||i){if(F=d.buffer,n){var N=K.getViewPointer(d,!0).address;b.setInt32(n,N,!0)}if(i){var M=u.ensureHandleId(F);b.setInt32(i,M,!0)}}return o&&b.setUint32(o,d.byteOffset,!0),u.clearLastError()}function qn(e,a,t,r){if(!e)return 1;var n=s.envStore.get(e);if(n.checkGCAccess(),!a)return n.setLastError(1);var i=s.handleStore.get(a);return i.isBuffer(s.feature.Buffer)?i.isDataView()?Rr(e,a,r,t,0,0):Or(e,a,0,r,t,0,0):n.setLastError(1)}function Rr(e,a,t,r,n,i){if(!e)return 1;var o=s.envStore.get(e);if(o.checkGCAccess(),!a)return o.setLastError(1);var u=s.handleStore.get(a);if(!u.isDataView())return o.setLastError(1);var l=u.value,d=new DataView(g.buffer);t&&d.setUint32(t,l.byteLength,!0);var b;if(r||n){if(b=l.buffer,r){var A=K.getViewPointer(l,!0).address;d.setInt32(r,A,!0)}if(n){var F=o.ensureHandleId(b);d.setInt32(n,F,!0)}}return i&&d.setUint32(i,l.byteOffset,!0),o.clearLastError()}function Kn(e,a,t){var r;if(!e)return 1;var n=s.envStore.get(e);if(n.checkGCAccess(),!n.tryCatch.isEmpty())return n.setLastError(10);if(!n.canCallIntoJs())return n.setLastError(n.moduleApiVersion>=10?23:10);n.clearLastError();try{if(!a||!t)return n.setLastError(1);var i=s.handleStore.get(a);if(!i.isDate())return n.setLastError(1);r=i.value.valueOf();var o=new DataView(g.buffer);return o.setFloat64(t,r,!0),n.getReturnStatus()}catch(u){return n.tryCatch.setError(u),n.setLastError(10)}}function Yn(e,a,t){if(!e)return 1;var r=s.envStore.get(e);if(r.checkGCAccess(),!a||!t)return r.setLastError(1);var n=s.handleStore.get(a);if(typeof n.value!="boolean")return r.setLastError(7);var i=n.value?1:0,o=new DataView(g.buffer);return o.setInt8(t,i,!0),r.clearLastError()}function $n(e,a,t){if(!e)return 1;var r=s.envStore.get(e);if(r.checkGCAccess(),!a||!t)return r.setLastError(1);var n=s.handleStore.get(a);if(typeof n.value!="number")return r.setLastError(6);var i=n.value,o=new DataView(g.buffer);return o.setFloat64(t,i,!0),r.clearLastError()}function Qn(e,a,t,r){if(!e)return 1;var n=s.envStore.get(e);if(n.checkGCAccess(),!s.feature.supportBigInt)return n.setLastError(9);if(!a||!t||!r)return n.setLastError(1);var i=s.handleStore.get(a),o=i.value;if(typeof o!="bigint")return n.setLastError(6);var u=new DataView(g.buffer);o>=BigInt(-1)*(BigInt(1)<<BigInt(63))&&o<BigInt(1)<<BigInt(63)?u.setInt8(r,1,!0):(u.setInt8(r,0,!0),o=o&(BigInt(1)<<BigInt(64))-BigInt(1),o>=BigInt(1)<<BigInt(63)&&(o=o-(BigInt(1)<<BigInt(64))));var l=Number(o&BigInt(4294967295)),d=Number(o>>BigInt(32));return u.setInt32(t,l,!0),u.setInt32(t+4,d,!0),n.clearLastError()}function Zn(e,a,t,r){if(!e)return 1;var n=s.envStore.get(e);if(n.checkGCAccess(),!s.feature.supportBigInt)return n.setLastError(9);if(!a||!t||!r)return n.setLastError(1);var i=s.handleStore.get(a),o=i.value;if(typeof o!="bigint")return n.setLastError(6);var u=new DataView(g.buffer);o>=BigInt(0)&&o<BigInt(1)<<BigInt(64)?u.setInt8(r,1,!0):(u.setInt8(r,0,!0),o=o&(BigInt(1)<<BigInt(64))-BigInt(1));var l=Number(o&BigInt(4294967295)),d=Number(o>>BigInt(32));return u.setUint32(t,l,!0),u.setUint32(t+4,d,!0),n.clearLastError()}function Xn(e,a,t,r,n){if(!e)return 1;var i=s.envStore.get(e);if(i.checkGCAccess(),!s.feature.supportBigInt)return i.setLastError(9);if(!a||!r)return i.setLastError(1);var o=s.handleStore.get(a);if(!o.isBigInt())return i.setLastError(17);for(var u=o.value<BigInt(0),l=new DataView(g.buffer),d=l.getUint32(r,!0),b=0,A=u?o.value*BigInt(-1):o.value;A!==BigInt(0);)b++,A=A>>BigInt(64);if(A=u?o.value*BigInt(-1):o.value,!t&&!n)d=b,l.setUint32(r,d,!0);else{if(!t||!n)return i.setLastError(1);for(var F=[];A!==BigInt(0);){var N=A&(BigInt(1)<<BigInt(64))-BigInt(1);F.push(N),A=A>>BigInt(64)}for(var M=Math.min(d,F.length),z=0;z<M;z++){var $=Number(F[z]&BigInt(4294967295)),ae=Number(F[z]>>BigInt(32));l.setUint32(n+z*8,$,!0),l.setUint32(n+(z*8+4),ae,!0)}l.setInt32(t,u?1:0,!0),l.setUint32(r,M,!0)}return i.clearLastError()}function ea(e,a,t){if(!e)return 1;var r=s.envStore.get(e);if(r.checkGCAccess(),!a||!t)return r.setLastError(1);var n=s.handleStore.get(a);if(!n.isExternal())return r.setLastError(1);var i=n.data(),o=new DataView(g.buffer);return o.setInt32(t,i,!0),r.clearLastError()}function ra(e,a,t){if(!e)return 1;var r=s.envStore.get(e);if(r.checkGCAccess(),!a||!t)return r.setLastError(1);var n=s.handleStore.get(a);if(typeof n.value!="number")return r.setLastError(6);var i=new Int32Array([n.value])[0],o=new DataView(g.buffer);return o.setInt32(t,i,!0),r.clearLastError()}function ta(e,a,t){if(!e)return 1;var r=s.envStore.get(e);if(r.checkGCAccess(),!a||!t)return r.setLastError(1);var n=s.handleStore.get(a);if(typeof n.value!="number")return r.setLastError(6);var i=n.value,o=new DataView(g.buffer);return i===Number.POSITIVE_INFINITY||i===Number.NEGATIVE_INFINITY||isNaN(i)?(o.setInt32(t,0,!0),o.setInt32(t+4,0,!0)):i<-9223372036854776e3?(o.setInt32(t,0,!0),o.setInt32(t+4,2147483648,!0)):i>=9223372036854776e3?(o.setUint32(t,4294967295,!0),o.setUint32(t+4,2147483647,!0)):he(t,Math.trunc(i)),r.clearLastError()}function na(e,a,t,r,n){if(!e)return 1;var i=s.envStore.get(e);if(i.checkGCAccess(),!a)return i.setLastError(1);r=r>>>0;var o=s.handleStore.get(a);if(typeof o.value!="string")return i.setLastError(3);var u=new DataView(g.buffer);if(t)if(r!==0){for(var l=0,d=void 0,b=0;b<r-1;++b)d=o.value.charCodeAt(b)&255,u.setUint8(t+b,d,!0),l++;u.setUint8(t+l,0,!0),n&&u.setUint32(n,l,!0)}else n&&u.setUint32(n,0,!0);else{if(!n)return i.setLastError(1);u.setUint32(n,o.value.length,!0)}return i.clearLastError()}function aa(e,a,t,r,n){if(!e)return 1;var i=s.envStore.get(e);if(i.checkGCAccess(),!a)return i.setLastError(1);r=r>>>0;var o=s.handleStore.get(a);if(typeof o.value!="string")return i.setLastError(3);var u=new DataView(g.buffer);if(t)if(r!==0){var d=X.stringToUTF8(o.value,t,r);n&&u.setUint32(n,d,!0)}else n&&u.setUint32(n,0,!0);else{if(!n)return i.setLastError(1);var l=X.lengthBytesUTF8(o.value);u.setUint32(n,l,!0)}return i.clearLastError()}function ia(e,a,t,r,n){if(!e)return 1;var i=s.envStore.get(e);if(i.checkGCAccess(),!a)return i.setLastError(1);r=r>>>0;var o=s.handleStore.get(a);if(typeof o.value!="string")return i.setLastError(3);var u=new DataView(g.buffer);if(t)if(r!==0){var l=X.stringToUTF16(o.value,t,r*2);n&&u.setUint32(n,l/2,!0)}else n&&u.setUint32(n,0,!0);else{if(!n)return i.setLastError(1);u.setUint32(n,o.value.length,!0)}return i.clearLastError()}function sa(e,a,t){if(!e)return 1;var r=s.envStore.get(e);if(r.checkGCAccess(),!a||!t)return r.setLastError(1);var n=s.handleStore.get(a);if(typeof n.value!="number")return r.setLastError(6);var i=new Uint32Array([n.value])[0],o=new DataView(g.buffer);return o.setUint32(t,i,!0),r.clearLastError()}var oa=Object.freeze({__proto__:null,napi_get_array_length:Gn,napi_get_arraybuffer_info:zn,napi_get_buffer_info:qn,napi_get_dataview_info:Rr,napi_get_date_value:Kn,napi_get_prototype:Jn,napi_get_typedarray_info:Or,napi_get_value_bigint_int64:Qn,napi_get_value_bigint_uint64:Zn,napi_get_value_bigint_words:Xn,napi_get_value_bool:Yn,napi_get_value_double:$n,napi_get_value_external:ea,napi_get_value_int32:ra,napi_get_value_int64:ta,napi_get_value_string_latin1:na,napi_get_value_string_utf16:ia,napi_get_value_string_utf8:aa,napi_get_value_uint32:sa});function ua(e,a,t){if(!e)return 1;var r=s.envStore.get(e);if(r.checkGCAccess(),!t)return r.setLastError(1);var n=s.addToCurrentScope(a).id,i=new DataView(g.buffer);return i.setInt32(t,n,!0),r.clearLastError()}function ca(e,a,t){if(!e)return 1;var r=s.envStore.get(e);if(r.checkGCAccess(),!t)return r.setLastError(1);var n=s.addToCurrentScope(a>>>0).id,i=new DataView(g.buffer);return i.setInt32(t,n,!0),r.clearLastError()}function fa(e,a,t,r){if(!e)return 1;var n=s.envStore.get(e);n.checkGCAccess();var i;if(!t)return n.setLastError(1);i=Number(a);var o=s.addToCurrentScope(i).id,u=new DataView(g.buffer);return u.setInt32(t,o,!0),n.clearLastError()}function la(e,a,t){if(!e)return 1;var r=s.envStore.get(e);if(r.checkGCAccess(),!t)return r.setLastError(1);var n=s.addToCurrentScope(a).id,i=new DataView(g.buffer);return i.setInt32(t,n,!0),r.clearLastError()}function tr(e,a,t,r){return X.newString(e,a,t,r,function(n,i,o){var u="",l=0,d=new DataView(g.buffer);if(i)for(;;){var b=d.getUint8(n,!0);if(!b)break;u+=String.fromCharCode(b),n++}else for(;l<o;){var b=d.getUint8(n,!0);if(!b)break;u+=String.fromCharCode(b),l++,n++}return u})}function nr(e,a,t,r){return X.newString(e,a,t,r,function(n){return X.UTF16ToString(n,t)})}function Fr(e,a,t,r){return X.newString(e,a,t,r,function(n){return X.UTF8ToString(n,t)})}function da(e,a,t,r,n,i,o){return X.newExternalString(e,a,t,r,n,i,o,tr,void 0)}function _a(e,a,t,r,n,i,o){return X.newExternalString(e,a,t,r,n,i,o,nr,void 0)}function va(e,a,t,r){return tr(e,a,t,r)}function ga(e,a,t,r){return Fr(e,a,t,r)}function pa(e,a,t,r){return nr(e,a,t,r)}function ha(e,a,t,r){if(!e)return 1;var n=s.envStore.get(e);if(n.checkGCAccess(),!s.feature.supportBigInt)return n.setLastError(9);var i;if(!t)return n.setLastError(1);i=a;var o=s.addToCurrentScope(i).id,u=new DataView(g.buffer);return u.setInt32(t,o,!0),n.clearLastError()}function Ea(e,a,t,r){if(!e)return 1;var n=s.envStore.get(e);if(n.checkGCAccess(),!s.feature.supportBigInt)return n.setLastError(9);var i;if(!t)return n.setLastError(1);i=a&(BigInt(1)<<BigInt(64))-BigInt(1);var o=s.addToCurrentScope(i).id,u=new DataView(g.buffer);return u.setInt32(t,o,!0),n.clearLastError()}function ya(e,a,t,r,n){var i,o;if(!e)return 1;var u=s.envStore.get(e);if(u.checkGCAccess(),!u.tryCatch.isEmpty())return u.setLastError(10);if(!u.canCallIntoJs())return u.setLastError(u.moduleApiVersion>=10?23:10);u.clearLastError();try{if(!s.feature.supportBigInt)return u.setLastError(9);if(!n||(t=t>>>0,t>2147483647))return u.setLastError(1);if(t>16384)throw new RangeError("Maximum BigInt size exceeded");var l=BigInt(0),d=new DataView(g.buffer);for(o=0;o<t;o++){var b=d.getUint32(r+o*8,!0),A=d.getUint32(r+(o*8+4),!0),F=BigInt(b)|BigInt(A)<<BigInt(32);l+=F<<BigInt(64*o)}return l*=BigInt(a)%BigInt(2)===BigInt(0)?BigInt(1):BigInt(-1),i=s.addToCurrentScope(l).id,d.setInt32(n,i,!0),u.getReturnStatus()}catch(N){return u.tryCatch.setError(N),u.setLastError(10)}}var ma=Object.freeze({__proto__:null,napi_create_bigint_int64:ha,napi_create_bigint_uint64:Ea,napi_create_bigint_words:ya,napi_create_double:la,napi_create_int32:ua,napi_create_int64:fa,napi_create_string_latin1:tr,napi_create_string_utf16:nr,napi_create_string_utf8:Fr,napi_create_uint32:ca,node_api_create_external_string_latin1:da,node_api_create_external_string_utf16:_a,node_api_create_property_key_latin1:va,node_api_create_property_key_utf16:pa,node_api_create_property_key_utf8:ga});function Ve(e,a,t,r,n){var i=!a||!t?"":X.UTF8ToString(a,t),o,u=O.get(r),l=function(A){return u(A.id,A.ctx.scopeStore.currentScope.id)},d=function(A,F){return function(){var N=A.ctx.openScope(A),M=N.callbackInfo;M.data=n,M.args=arguments,M.thiz=this,M.fn=o;try{var z=A.callIntoModule(F);return z?A.ctx.handleStore.get(z).value:void 0}finally{M.data=0,M.args=void 0,M.thiz=void 0,M.fn=void 0,A.ctx.closeScope(A,N)}}};if(i==="")return o=d(e,l),{status:0,f:o};if(!/^[_$a-zA-Z][_$a-zA-Z0-9]*$/.test(i))return{status:1,f:void 0};if(s.feature.supportNewFunction){var b=d(e,l);try{o=new Function("_","return function "+i+'(){"use strict";return _.apply(this,arguments);};')(b)}catch{o=d(e,l),s.feature.canSetFunctionName&&Object.defineProperty(o,"name",{value:i})}}else o=d(e,l),s.feature.canSetFunctionName&&Object.defineProperty(o,"name",{value:i});return{status:0,f:o}}function ar(e,a,t,r,n,i,o,u,l){if(n||i){var d=void 0,b=void 0;n&&(d=Ve(e,0,0,n,l).f),i&&(b=Ve(e,0,0,i,l).f);var A={configurable:(u&4)!==0,enumerable:(u&2)!==0,get:d,set:b};Object.defineProperty(a,t,A)}else if(r){var F=Ve(e,0,0,r,l).f,A={configurable:(u&4)!==0,enumerable:(u&2)!==0,writable:(u&1)!==0,value:F};Object.defineProperty(a,t,A)}else{var A={configurable:(u&4)!==0,enumerable:(u&2)!==0,writable:(u&1)!==0,value:s.handleStore.get(o).value};Object.defineProperty(a,t,A)}}function Pr(e){var a=s.handleStore.get(e);return a.isObject()||a.isFunction()?(typeof K<"u"&&ArrayBuffer.isView(a.value)&&K.wasmMemoryViewTable.has(a.value)&&(a=s.addToCurrentScope(K.wasmMemoryViewTable.get(a.value))),{status:0,handle:a}):{status:1}}function wa(e,a,t,r,n,i){var o;if(!e)return 1;var u=s.envStore.get(e);if(u.checkGCAccess(),!u.tryCatch.isEmpty())return u.setLastError(10);if(!u.canCallIntoJs())return u.setLastError(u.moduleApiVersion>=10?23:10);u.clearLastError();try{if(!s.feature.supportFinalizer){if(r)throw s.createNotSupportWeakRefError("napi_wrap",'Parameter "finalize_cb" must be 0(NULL)');if(i)throw s.createNotSupportWeakRefError("napi_wrap",'Parameter "result" must be 0(NULL)')}if(!a)return u.setLastError(1);var l=Pr(a);if(l.status!==0)return u.setLastError(l.status);var d=l.handle;if(u.getObjectBinding(d.value).wrapped!==0)return u.setLastError(1);var b=void 0;if(i){if(!r)return u.setLastError(1);b=s.createReferenceWithFinalizer(u,d.id,0,1,r,t,n),o=b.id;var A=new DataView(g.buffer);A.setInt32(i,o,!0)}else r?b=s.createReferenceWithFinalizer(u,d.id,0,0,r,t,n):b=s.createReferenceWithData(u,d.id,0,0,t);return u.getObjectBinding(d.value).wrapped=b.id,u.getReturnStatus()}catch(F){return u.tryCatch.setError(F),u.setLastError(10)}}function Nr(e,a,t,r){var n;if(!e)return 1;var i=s.envStore.get(e);if(i.checkGCAccess(),!i.tryCatch.isEmpty())return i.setLastError(10);if(!i.canCallIntoJs())return i.setLastError(i.moduleApiVersion>=10?23:10);i.clearLastError();try{if(!a||r===0&&!t)return i.setLastError(1);var o=s.handleStore.get(a);if(!(o.isObject()||o.isFunction()))return i.setLastError(1);var u=i.getObjectBinding(o.value),l=u.wrapped,d=s.refStore.get(l);if(!d)return i.setLastError(1);if(t){n=d.data();var b=new DataView(g.buffer);b.setInt32(t,n,!0)}return r===1&&(u.wrapped=0,d.ownership()===1?d.resetFinalizer():d.dispose()),i.getReturnStatus()}catch(A){return i.tryCatch.setError(A),i.setLastError(10)}}function Aa(e,a,t,r,n,i,o,u){var l,d,b;if(!e)return 1;var A=s.envStore.get(e);if(A.checkGCAccess(),!A.tryCatch.isEmpty())return A.setLastError(10);if(!A.canCallIntoJs())return A.setLastError(A.moduleApiVersion>=10?23:10);A.clearLastError();try{if(!u||!r||(i=i>>>0,i>0&&!o)||t<-1||t>2147483647||!a)return A.setLastError(1);var F=Ve(A,a,t,r,n);if(F.status!==0)return A.setLastError(F.status);for(var N=F.f,M=void 0,z=new DataView(g.buffer),$=0;$<i;$++){l=o+$*32;var ae=z.getInt32(l,!0),ue=z.getInt32(l+4,!0),ee=z.getInt32(l+8,!0),le=z.getInt32(l+12,!0),pe=z.getInt32(l+16,!0),_e=z.getInt32(l+20,!0);b=z.getInt32(l+24,!0);var ye=z.getInt32(l+28,!0);if(ae)M=X.UTF8ToString(ae,-1);else if(!ue||(M=s.handleStore.get(ue).value,typeof M!="string"&&typeof M!="symbol"))return A.setLastError(4);if((b&1024)!==0){ar(A,N,M,ee,le,pe,_e,b,ye);continue}ar(A,N.prototype,M,ee,le,pe,_e,b,ye)}var Ie=s.addToCurrentScope(N);return d=Ie.id,z.setInt32(u,d,!0),A.getReturnStatus()}catch(ur){return A.tryCatch.setError(ur),A.setLastError(10)}}function ba(e,a,t,r,n,i){return wa(e,a,t,r,n,i)}function Ia(e,a,t){return Nr(e,a,t,0)}function La(e,a,t){return Nr(e,a,t,1)}function Sa(e,a,t){if(!e)return 1;var r=s.envStore.get(e);if(r.checkGCAccess(),!r.tryCatch.isEmpty())return r.setLastError(10);if(!r.canCallIntoJs())return r.setLastError(r.moduleApiVersion>=10?23:10);r.clearLastError();try{if(!a)return r.setLastError(r.tryCatch.hasCaught()?10:1);var n=s.handleStore.get(a);if(!(n.isObject()||n.isFunction()))return r.setLastError(r.tryCatch.hasCaught()?10:2);if(!t)return r.setLastError(r.tryCatch.hasCaught()?10:1);var i=r.getObjectBinding(n.value);if(i.tag!==null)return r.setLastError(r.tryCatch.hasCaught()?10:1);var o=new Uint8Array(16);return o.set(new Uint8Array(g.buffer,t,16)),i.tag=new Uint32Array(o.buffer),r.getReturnStatus()}catch(u){return r.tryCatch.setError(u),r.setLastError(10)}}function Ta(e,a,t,r){var n=!0;if(!e)return 1;var i=s.envStore.get(e);if(i.checkGCAccess(),!i.tryCatch.isEmpty())return i.setLastError(10);if(!i.canCallIntoJs())return i.setLastError(i.moduleApiVersion>=10?23:10);i.clearLastError();try{if(!a)return i.setLastError(i.tryCatch.hasCaught()?10:1);var o=s.handleStore.get(a);if(!(o.isObject()||o.isFunction()))return i.setLastError(i.tryCatch.hasCaught()?10:2);if(!t||!r)return i.setLastError(i.tryCatch.hasCaught()?10:1);var u=i.getObjectBinding(o.value);if(u.tag!==null){var l=u.tag,d=new Uint32Array(g.buffer,t,4);n=l[0]===d[0]&&l[1]===d[1]&&l[2]===d[2]&&l[3]===d[3]}else n=!1;var b=new DataView(g.buffer);return b.setInt8(r,n?1:0,!0),i.getReturnStatus()}catch(A){return i.tryCatch.setError(A),i.setLastError(10)}}function ir(e,a,t,r,n,i){if(!e)return 1;var o=s.envStore.get(e);if(o.checkGCAccess(),!s.feature.supportFinalizer)return o.setLastError(9);if(!a||!r)return o.setLastError(1);var u=Pr(a);if(u.status!==0)return o.setLastError(u.status);var l=u.handle,d=i?1:0,b=s.createReferenceWithFinalizer(o,l.id,0,d,r,t,n);if(i){var A=b.id,F=new DataView(g.buffer);F.setInt32(i,A,!0)}return o.clearLastError()}function Ca(e,a,t,r){if(!e)return 1;var n=s.envStore.get(e);return n.enqueueFinalizer(s.createTrackedFinalizer(n,a,t,r)),n.clearLastError()}var Da=Object.freeze({__proto__:null,napi_add_finalizer:ir,napi_check_object_type_tag:Ta,napi_define_class:Aa,napi_remove_wrap:La,napi_type_tag_object:Sa,napi_unwrap:Ia,napi_wrap:ba,node_api_post_finalizer:Ca});function Vr(e,a,t,r,n,i,o){var u;if(!e)return 1;var l=s.envStore.get(e);if(l.checkGCAccess(),!l.tryCatch.isEmpty())return l.setLastError(10);if(!l.canCallIntoJs())return l.setLastError(l.moduleApiVersion>=10?23:10);l.clearLastError();try{if(!o)return l.setLastError(1);if(r=r>>>0,t||(r=0),r>2147483647)throw new RangeError("Cannot create a memory view larger than 2147483647 bytes");if(t+r>g.buffer.byteLength)throw new RangeError("Memory out of range");if(!s.feature.supportFinalizer&&n)throw s.createNotSupportWeakRefError("emnapi_create_memory_view",'Parameter "finalize_cb" must be 0(NULL)');var d=void 0;switch(a){case 0:d={Ctor:Int8Array,address:t,length:r,ownership:1,runtimeAllocated:0};break;case 1:d={Ctor:Uint8Array,address:t,length:r,ownership:1,runtimeAllocated:0};break;case 2:d={Ctor:Uint8ClampedArray,address:t,length:r,ownership:1,runtimeAllocated:0};break;case 3:d={Ctor:Int16Array,address:t,length:r>>1,ownership:1,runtimeAllocated:0};break;case 4:d={Ctor:Uint16Array,address:t,length:r>>1,ownership:1,runtimeAllocated:0};break;case 5:d={Ctor:Int32Array,address:t,length:r>>2,ownership:1,runtimeAllocated:0};break;case 6:d={Ctor:Uint32Array,address:t,length:r>>2,ownership:1,runtimeAllocated:0};break;case 7:d={Ctor:Float32Array,address:t,length:r>>2,ownership:1,runtimeAllocated:0};break;case 8:d={Ctor:Float64Array,address:t,length:r>>3,ownership:1,runtimeAllocated:0};break;case 9:d={Ctor:BigInt64Array,address:t,length:r>>3,ownership:1,runtimeAllocated:0};break;case 10:d={Ctor:BigUint64Array,address:t,length:r>>3,ownership:1,runtimeAllocated:0};break;case-1:d={Ctor:DataView,address:t,length:r,ownership:1,runtimeAllocated:0};break;case-2:{if(!s.feature.Buffer)throw s.createNotSupportBufferError("emnapi_create_memory_view","");d={Ctor:s.feature.Buffer,address:t,length:r,ownership:1,runtimeAllocated:0};break}default:return l.setLastError(1)}var b=d.Ctor,A=a===-2?s.feature.Buffer.from(g.buffer,d.address,d.length):new b(g.buffer,d.address,d.length),F=s.addToCurrentScope(A);if(K.wasmMemoryViewTable.set(A,d),n){var N=ir(e,F.id,t,n,i,0);if(N===10){var M=l.tryCatch.extractException();throw l.clearLastError(),M}else if(N!==0)return l.setLastError(N)}u=F.id;var z=new DataView(g.buffer);return z.setInt32(o,u,!0),l.getReturnStatus()}catch($){return l.tryCatch.setError($),l.setLastError(10)}}function ka(){return s.feature.supportFinalizer?1:0}function Ba(){return s.feature.supportBigInt?1:0}function Oa(){return _?1:0}function sr(e,a,t,r){t=t??0,t=t>>>0;var n;if(a instanceof ArrayBuffer){var i=K.getArrayBufferPointer(a,!1).address;if(!i)throw new Error("Unknown ArrayBuffer address");if((typeof r!="number"||r===-1)&&(r=a.byteLength-t),r=r>>>0,r===0)return a;n=new Uint8Array(a,t,r);var o=new Uint8Array(g.buffer);return e?o.set(n,i):n.set(o.subarray(i,i+r)),a}if(ArrayBuffer.isView(a)){var u=K.getViewPointer(a,!1),l=u.view,i=u.address;if(!i)throw new Error("Unknown ArrayBuffer address");if((typeof r!="number"||r===-1)&&(r=l.byteLength-t),r=r>>>0,r===0)return l;n=new Uint8Array(l.buffer,l.byteOffset+t,r);var o=new Uint8Array(g.buffer);return e?o.set(n,i):n.set(o.subarray(i,i+r)),l}throw new TypeError("emnapiSyncMemory expect ArrayBuffer or ArrayBufferView as first parameter")}function Ra(e,a,t,r,n){var i;if(!e)return 1;var o=s.envStore.get(e);if(o.checkGCAccess(),!o.tryCatch.isEmpty())return o.setLastError(10);if(!o.canCallIntoJs())return o.setLastError(o.moduleApiVersion>=10?23:10);o.clearLastError();try{if(!t)return o.setLastError(1);var u=new DataView(g.buffer),l=u.getInt32(t,!0),d=o.ctx.handleStore.get(l);if(!d.isArrayBuffer()&&!d.isTypedArray()&&!d.isDataView())return o.setLastError(1);var b=sr(!!a,d.value,r,n);return d.value!==b&&(i=o.ensureHandleId(b),u.setInt32(t,i,!0)),o.getReturnStatus()}catch(A){return o.tryCatch.setError(A),o.setLastError(10)}}function or(e){var a=e instanceof ArrayBuffer,t=e instanceof DataView,r=ArrayBuffer.isView(e)&&!t;if(!a&&!r&&!t)throw new TypeError("emnapiGetMemoryAddress expect ArrayBuffer or ArrayBufferView as first parameter");var n;return a?n=K.getArrayBufferPointer(e,!1):n=K.getViewPointer(e,!1),{address:n.address,ownership:n.ownership,runtimeAllocated:n.runtimeAllocated}}function Fa(e,a,t,r,n){var i,o,u,l;if(!e)return 1;var d=s.envStore.get(e);if(d.checkGCAccess(),!d.tryCatch.isEmpty())return d.setLastError(10);if(!d.canCallIntoJs())return d.setLastError(d.moduleApiVersion>=10?23:10);d.clearLastError();try{if(!a||!t&&!r&&!n)return d.setLastError(1);var b=d.ctx.handleStore.get(a);l=or(b.value),i=l.address;var A=new DataView(g.buffer);return t&&A.setInt32(t,i,!0),r&&(u=l.ownership,A.setInt32(r,u,!0)),n&&(o=l.runtimeAllocated,A.setInt8(n,o,!0)),d.getReturnStatus()}catch(F){return d.tryCatch.setError(F),d.setLastError(10)}}function Pa(e,a){if(!e)return 1;var t=s.envStore.get(e);if(!a)return t.setLastError(1);var r;try{r=s.getRuntimeVersions().version}catch{return t.setLastError(9)}var n=r.split(".").map(function(o){return Number(o)}),i=new DataView(g.buffer);return i.setUint32(a,n[0],!0),i.setUint32(a+4,n[1],!0),i.setUint32(a+8,n[2],!0),t.clearLastError()}var Na=Object.freeze({__proto__:null,$emnapiGetMemoryAddress:or,$emnapiSyncMemory:sr,emnapi_create_memory_view:Vr,emnapi_get_memory_address:Fa,emnapi_get_runtime_version:Pa,emnapi_is_node_binding_available:Oa,emnapi_is_support_bigint:Ba,emnapi_is_support_weakref:ka,emnapi_sync_memory:Ra});function Va(e,a){if(!e)return 1;var t=s.envStore.get(e);if(t.checkGCAccess(),!a)return t.setLastError(1);var r=s.addToCurrentScope([]).id,n=new DataView(g.buffer);return n.setInt32(a,r,!0),t.clearLastError()}function Ua(e,a,t){if(!e)return 1;var r=s.envStore.get(e);if(r.checkGCAccess(),!t)return r.setLastError(1);a=a>>>0;var n=s.addToCurrentScope(new Array(a)).id,i=new DataView(g.buffer);return i.setInt32(t,n,!0),r.clearLastError()}function Ur(e,a){e=e>>>0;var t=new ArrayBuffer(e);if(a){var r=K.getArrayBufferPointer(t,!0).address,n=new DataView(g.buffer);n.setInt32(a,r,!0)}return t}function xa(e,a,t,r){var n;if(!e)return 1;var i=s.envStore.get(e);if(i.checkGCAccess(),!i.tryCatch.isEmpty())return i.setLastError(10);if(!i.canCallIntoJs())return i.setLastError(i.moduleApiVersion>=10?23:10);i.clearLastError();try{if(!r)return i.setLastError(1);var o=Ur(a,t);n=s.addToCurrentScope(o).id;var u=new DataView(g.buffer);return u.setInt32(r,n,!0),i.getReturnStatus()}catch(l){return i.tryCatch.setError(l),i.setLastError(10)}}function Ma(e,a,t){var r;if(!e)return 1;var n=s.envStore.get(e);if(n.checkGCAccess(),!n.tryCatch.isEmpty())return n.setLastError(10);if(!n.canCallIntoJs())return n.setLastError(n.moduleApiVersion>=10?23:10);n.clearLastError();try{if(!t)return n.setLastError(1);r=s.addToCurrentScope(new Date(a)).id;var i=new DataView(g.buffer);return i.setInt32(t,r,!0),n.getReturnStatus()}catch(o){return n.tryCatch.setError(o),n.setLastError(10)}}function Wa(e,a,t,r,n){var i;if(!e)return 1;var o=s.envStore.get(e);if(o.checkGCAccess(),!o.tryCatch.isEmpty())return o.setLastError(10);if(!o.canCallIntoJs())return o.setLastError(o.moduleApiVersion>=10?23:10);o.clearLastError();try{if(!n)return o.setLastError(1);if(!s.feature.supportFinalizer&&t)throw s.createNotSupportWeakRefError("napi_create_external",'Parameter "finalize_cb" must be 0(NULL)');var u=s.getCurrentScope().addExternal(a);t&&s.createReferenceWithFinalizer(o,u.id,0,0,t,a,r),i=u.id;var l=new DataView(g.buffer);return l.setInt32(n,i,!0),o.clearLastError()}catch(d){return o.tryCatch.setError(d),o.setLastError(10)}}function ja(e,a,t,r,n,i){var o;if(!e)return 1;var u=s.envStore.get(e);if(u.checkGCAccess(),!u.tryCatch.isEmpty())return u.setLastError(10);if(!u.canCallIntoJs())return u.setLastError(u.moduleApiVersion>=10?23:10);u.clearLastError();try{if(!i)return u.setLastError(1);if(t=t>>>0,a||(t=0),a+t>g.buffer.byteLength)throw new RangeError("Memory out of range");if(!s.feature.supportFinalizer&&r)throw s.createNotSupportWeakRefError("napi_create_external_arraybuffer",'Parameter "finalize_cb" must be 0(NULL)');var l=new ArrayBuffer(t);if(t===0)try{var d=s.feature.MessageChannel,b=new d;b.port1.postMessage(l,[l])}catch{}else{var A=new Uint8Array(l);A.set(new Uint8Array(g.buffer).subarray(a,a+t)),K.table.set(l,{address:a,ownership:1,runtimeAllocated:0})}var F=s.addToCurrentScope(l);if(r){var N=ir(e,F.id,a,r,n,0);if(N===10){var M=u.tryCatch.extractException();throw u.clearLastError(),M}else if(N!==0)return u.setLastError(N)}o=F.id;var z=new DataView(g.buffer);return z.setInt32(i,o,!0),u.getReturnStatus()}catch($){return u.tryCatch.setError($),u.setLastError(10)}}function Ha(e,a){if(!e)return 1;var t=s.envStore.get(e);if(t.checkGCAccess(),!a)return t.setLastError(1);var r=s.addToCurrentScope({}).id,n=new DataView(g.buffer);return n.setInt32(a,r,!0),t.clearLastError()}function Ga(e,a,t){if(!e)return 1;var r=s.envStore.get(e);if(r.checkGCAccess(),!t)return r.setLastError(1);var n=new DataView(g.buffer);if(a){var o=s.handleStore.get(a),u=o.value;if(typeof u!="string")return r.setLastError(3);var l=s.addToCurrentScope(Symbol(u)).id;n.setInt32(t,l,!0)}else{var i=s.addToCurrentScope(Symbol()).id;n.setInt32(t,i,!0)}return r.clearLastError()}function za(e,a,t,r,n,i){var o;if(!e)return 1;var u=s.envStore.get(e);if(u.checkGCAccess(),!u.tryCatch.isEmpty())return u.setLastError(10);if(!u.canCallIntoJs())return u.setLastError(u.moduleApiVersion>=10?23:10);u.clearLastError();try{if(!r||!i)return u.setLastError(1);var l=s.handleStore.get(r);if(!l.isArrayBuffer())return u.setLastError(1);var d=l.value,b=function(A,F,N,M,z,$){var ae;if(z=z>>>0,$=$>>>0,N>1&&z%N!==0){var ue=new RangeError("start offset of ".concat((ae=F.name)!==null&&ae!==void 0?ae:""," should be a multiple of ").concat(N));return ue.code="ERR_NAPI_INVALID_TYPEDARRAY_ALIGNMENT",A.tryCatch.setError(ue),A.setLastError(9)}if($*N+z>M.byteLength){var ue=new RangeError("Invalid typed array length");return ue.code="ERR_NAPI_INVALID_TYPEDARRAY_LENGTH",A.tryCatch.setError(ue),A.setLastError(9)}var ee=new F(M,z,$);M===g.buffer&&(K.wasmMemoryViewTable.has(ee)||K.wasmMemoryViewTable.set(ee,{Ctor:F,address:z,length:$,ownership:1,runtimeAllocated:0})),o=s.addToCurrentScope(ee).id;var le=new DataView(g.buffer);return le.setInt32(i,o,!0),A.getReturnStatus()};switch(a){case 0:return b(u,Int8Array,1,d,n,t);case 1:return b(u,Uint8Array,1,d,n,t);case 2:return b(u,Uint8ClampedArray,1,d,n,t);case 3:return b(u,Int16Array,2,d,n,t);case 4:return b(u,Uint16Array,2,d,n,t);case 5:return b(u,Int32Array,4,d,n,t);case 6:return b(u,Uint32Array,4,d,n,t);case 7:return b(u,Float32Array,4,d,n,t);case 8:return b(u,Float64Array,8,d,n,t);case 9:return b(u,BigInt64Array,8,d,n,t);case 10:return b(u,BigUint64Array,8,d,n,t);default:return u.setLastError(1)}}catch(A){return u.tryCatch.setError(A),u.setLastError(10)}}function Ja(e,a,t,r){var n,i,o;if(!e)return 1;var u=s.envStore.get(e);if(u.checkGCAccess(),!u.tryCatch.isEmpty())return u.setLastError(10);if(!u.canCallIntoJs())return u.setLastError(u.moduleApiVersion>=10?23:10);u.clearLastError();try{if(!r)return u.setLastError(1);var l=s.feature.Buffer;if(!l)throw s.createNotSupportBufferError("napi_create_buffer","");var d=void 0;a=a>>>0;var b=new DataView(g.buffer);if(!t||a===0)d=l.alloc(a),i=s.addToCurrentScope(d).id,b.setInt32(r,i,!0);else{if(o=P(a),!o)throw new Error("Out of memory");new Uint8Array(g.buffer).subarray(o,o+a).fill(0);var A=l.from(g.buffer,o,a),F={Ctor:l,address:o,length:a,ownership:K.registry?0:1,runtimeAllocated:1};K.wasmMemoryViewTable.set(A,F),(n=K.registry)===null||n===void 0||n.register(F,o),i=s.addToCurrentScope(A).id,b.setInt32(r,i,!0),b.setInt32(t,o,!0)}return u.getReturnStatus()}catch(N){return u.tryCatch.setError(N),u.setLastError(10)}}function qa(e,a,t,r,n){var i;if(!e)return 1;var o=s.envStore.get(e);if(o.checkGCAccess(),!o.tryCatch.isEmpty())return o.setLastError(10);if(!o.canCallIntoJs())return o.setLastError(o.moduleApiVersion>=10?23:10);o.clearLastError();try{if(!n)return o.setLastError(1);var u=s.feature.Buffer;if(!u)throw s.createNotSupportBufferError("napi_create_buffer_copy","");var l=Ur(a,r),d=u.from(l);d.set(new Uint8Array(g.buffer).subarray(t,t+a)),i=s.addToCurrentScope(d).id;var b=new DataView(g.buffer);return b.setInt32(n,i,!0),o.getReturnStatus()}catch(A){return o.tryCatch.setError(A),o.setLastError(10)}}function Ka(e,a,t,r,n,i){return Vr(e,-2,t,a,r,n,i)}function Ya(e,a,t,r,n){var i;if(!e)return 1;var o=s.envStore.get(e);if(o.checkGCAccess(),!o.tryCatch.isEmpty())return o.setLastError(10);if(!o.canCallIntoJs())return o.setLastError(o.moduleApiVersion>=10?23:10);o.clearLastError();try{if(!a||!n)return o.setLastError(1);t=t>>>0,r=r>>>0;var u=s.handleStore.get(a);if(!u.isArrayBuffer())return o.setLastError(1);var l=u.value;if(r+t>l.byteLength){var d=new RangeError("The byte offset + length is out of range");throw d.code="ERR_OUT_OF_RANGE",d}var b=s.feature.Buffer;if(!b)throw s.createNotSupportBufferError("node_api_create_buffer_from_arraybuffer","");var A=b.from(l,t,r);l===g.buffer&&(K.wasmMemoryViewTable.has(A)||K.wasmMemoryViewTable.set(A,{Ctor:b,address:t,length:r,ownership:1,runtimeAllocated:0})),i=s.addToCurrentScope(A).id;var F=new DataView(g.buffer);return F.setInt32(n,i,!0),o.getReturnStatus()}catch(N){return o.tryCatch.setError(N),o.setLastError(10)}}function $a(e,a,t,r,n){var i;if(!e)return 1;var o=s.envStore.get(e);if(o.checkGCAccess(),!o.tryCatch.isEmpty())return o.setLastError(10);if(!o.canCallIntoJs())return o.setLastError(o.moduleApiVersion>=10?23:10);o.clearLastError();try{if(!t||!n)return o.setLastError(1);a=a>>>0,r=r>>>0;var u=s.handleStore.get(t);if(!u.isArrayBuffer())return o.setLastError(1);var l=u.value;if(a+r>l.byteLength){var d=new RangeError("byte_offset + byte_length should be less than or equal to the size in bytes of the array passed in");throw d.code="ERR_NAPI_INVALID_DATAVIEW_ARGS",d}var b=new DataView(l,r,a);l===g.buffer&&(K.wasmMemoryViewTable.has(b)||K.wasmMemoryViewTable.set(b,{Ctor:DataView,address:r,length:a,ownership:1,runtimeAllocated:0})),i=s.addToCurrentScope(b).id;var A=new DataView(g.buffer);return A.setInt32(n,i,!0),o.getReturnStatus()}catch(F){return o.tryCatch.setError(F),o.setLastError(10)}}function Qa(e,a,t,r){if(!e)return 1;var n=s.envStore.get(e);if(n.checkGCAccess(),!r)return n.setLastError(1);var i=t===-1,o=t>>>0;if(t!==0&&!a||!(i||o<=2147483647))return n.setLastError(1);var u=X.UTF8ToString(a,t),l=s.addToCurrentScope(Symbol.for(u)).id,d=new DataView(g.buffer);return d.setInt32(r,l,!0),n.clearLastError()}var Za=Object.freeze({__proto__:null,napi_create_array:Va,napi_create_array_with_length:Ua,napi_create_arraybuffer:xa,napi_create_buffer:Ja,napi_create_buffer_copy:qa,napi_create_dataview:$a,napi_create_date:Ma,napi_create_external:Wa,napi_create_external_arraybuffer:ja,napi_create_external_buffer:Ka,napi_create_object:Ha,napi_create_symbol:Ga,napi_create_typedarray:za,node_api_create_buffer_from_arraybuffer:Ya,node_api_symbol_for:Qa});function Xa(e,a,t){if(!e)return 1;var r=s.envStore.get(e);if(r.checkGCAccess(),!t)return r.setLastError(1);var n=a===0?3:4,i=new DataView(g.buffer);return i.setInt32(t,n,!0),r.clearLastError()}function ei(e,a){if(!e)return 1;var t=s.envStore.get(e);if(t.checkGCAccess(),!a)return t.setLastError(1);var r=5,n=new DataView(g.buffer);return n.setInt32(a,r,!0),t.clearLastError()}function ri(e,a){if(!e)return 1;var t=s.envStore.get(e);if(t.checkGCAccess(),!a)return t.setLastError(1);var r=2,n=new DataView(g.buffer);return n.setInt32(a,r,!0),t.clearLastError()}function ti(e,a){if(!e)return 1;var t=s.envStore.get(e);if(t.checkGCAccess(),!a)return t.setLastError(1);var r=1,n=new DataView(g.buffer);return n.setInt32(a,r,!0),t.clearLastError()}var ni=Object.freeze({__proto__:null,napi_get_boolean:Xa,napi_get_global:ei,napi_get_null:ri,napi_get_undefined:ti});function ai(e,a,t,r){if(!e)return 1;var n=s.envStore.get(e);return n.setInstanceData(a,t,r),n.clearLastError()}function ii(e,a){if(!e)return 1;var t=s.envStore.get(e);if(!a)return t.setLastError(1);var r=t.getInstanceData(),n=new DataView(g.buffer);return n.setInt32(a,r,!0),t.clearLastError()}var si=Object.freeze({__proto__:null,napi_get_instance_data:ii,napi_set_instance_data:ai});function oi(e,a,t,r){var n=s.envStore.get(e),i=n.lastError,o=i.errorCode,u=i.engineErrorCode>>>0,l=i.engineReserved,d=new DataView(g.buffer);d.setInt32(a,o,!0),d.setUint32(t,u,!0),d.setInt32(r,l,!0)}function ui(e,a){if(!e)return 1;var t=s.envStore.get(e);if(t.checkGCAccess(),!t.tryCatch.isEmpty())return t.setLastError(10);if(!t.canCallIntoJs())return t.setLastError(t.moduleApiVersion>=10?23:10);t.clearLastError();try{return a?(t.tryCatch.setError(s.handleStore.get(a).value),t.clearLastError()):t.setLastError(1)}catch(r){return t.tryCatch.setError(r),t.setLastError(10)}}function ci(e,a,t){if(!e)return 1;var r=s.envStore.get(e);if(r.checkGCAccess(),!r.tryCatch.isEmpty())return r.setLastError(10);if(!r.canCallIntoJs())return r.setLastError(r.moduleApiVersion>=10?23:10);r.clearLastError();try{if(!t)return r.setLastError(1);var n=new Error(X.UTF8ToString(t,-1));return a&&(n.code=X.UTF8ToString(a,-1)),r.tryCatch.setError(n),r.clearLastError()}catch(i){return r.tryCatch.setError(i),r.setLastError(10)}}function fi(e,a,t){if(!e)return 1;var r=s.envStore.get(e);if(r.checkGCAccess(),!r.tryCatch.isEmpty())return r.setLastError(10);if(!r.canCallIntoJs())return r.setLastError(r.moduleApiVersion>=10?23:10);r.clearLastError();try{if(!t)return r.setLastError(1);var n=new TypeError(X.UTF8ToString(t,-1));return a&&(n.code=X.UTF8ToString(a,-1)),r.tryCatch.setError(n),r.clearLastError()}catch(i){return r.tryCatch.setError(i),r.setLastError(10)}}function li(e,a,t){if(!e)return 1;var r=s.envStore.get(e);if(r.checkGCAccess(),!r.tryCatch.isEmpty())return r.setLastError(10);if(!r.canCallIntoJs())return r.setLastError(r.moduleApiVersion>=10?23:10);r.clearLastError();try{if(!t)return r.setLastError(1);var n=new RangeError(X.UTF8ToString(t,-1));return a&&(n.code=X.UTF8ToString(a,-1)),r.tryCatch.setError(n),r.clearLastError()}catch(i){return r.tryCatch.setError(i),r.setLastError(10)}}function di(e,a,t){if(!e)return 1;var r=s.envStore.get(e);if(r.checkGCAccess(),!r.tryCatch.isEmpty())return r.setLastError(10);if(!r.canCallIntoJs())return r.setLastError(r.moduleApiVersion>=10?23:10);r.clearLastError();try{if(!t)return r.setLastError(1);var n=new SyntaxError(X.UTF8ToString(t,-1));return a&&(n.code=X.UTF8ToString(a,-1)),r.tryCatch.setError(n),r.clearLastError()}catch(i){return r.tryCatch.setError(i),r.setLastError(10)}}function _i(e,a){if(!e)return 1;var t=s.envStore.get(e);if(t.checkGCAccess(),!a)return t.setLastError(1);var r=t.tryCatch.hasCaught(),n=new DataView(g.buffer);return n.setInt8(a,r?1:0,!0),t.clearLastError()}function vi(e,a,t,r){if(!e)return 1;var n=s.envStore.get(e);if(n.checkGCAccess(),!t||!r)return n.setLastError(1);var i=s.handleStore.get(t).value;if(typeof i!="string")return n.setLastError(3);var o=new Error(i);if(a){var u=s.handleStore.get(a).value;if(typeof u!="string")return n.setLastError(3);o.code=u}var l=s.addToCurrentScope(o).id,d=new DataView(g.buffer);return d.setInt32(r,l,!0),n.clearLastError()}function gi(e,a,t,r){if(!e)return 1;var n=s.envStore.get(e);if(n.checkGCAccess(),!t||!r)return n.setLastError(1);var i=s.handleStore.get(t).value;if(typeof i!="string")return n.setLastError(3);var o=new TypeError(i);if(a){var u=s.handleStore.get(a).value;if(typeof u!="string")return n.setLastError(3);o.code=u}var l=s.addToCurrentScope(o).id,d=new DataView(g.buffer);return d.setInt32(r,l,!0),n.clearLastError()}function pi(e,a,t,r){if(!e)return 1;var n=s.envStore.get(e);if(n.checkGCAccess(),!t||!r)return n.setLastError(1);var i=s.handleStore.get(t).value;if(typeof i!="string")return n.setLastError(3);var o=new RangeError(i);if(a){var u=s.handleStore.get(a).value;if(typeof u!="string")return n.setLastError(3);o.code=u}var l=s.addToCurrentScope(o).id,d=new DataView(g.buffer);return d.setInt32(r,l,!0),n.clearLastError()}function hi(e,a,t,r){if(!e)return 1;var n=s.envStore.get(e);if(n.checkGCAccess(),!t||!r)return n.setLastError(1);var i=s.handleStore.get(t).value;if(typeof i!="string")return n.setLastError(3);var o=new SyntaxError(i);if(a){var u=s.handleStore.get(a).value;if(typeof u!="string")return n.setLastError(3);o.code=u}var l=s.addToCurrentScope(o).id,d=new DataView(g.buffer);return d.setInt32(r,l,!0),n.clearLastError()}function Ei(e,a){if(!e)return 1;var t=s.envStore.get(e);if(t.checkGCAccess(),!a)return t.setLastError(1);var r=new DataView(g.buffer);if(t.tryCatch.hasCaught()){var n=t.tryCatch.exception(),i=t.ensureHandleId(n);r.setInt32(a,i,!0),t.tryCatch.reset()}else return r.setInt32(a,1,!0),t.clearLastError();return t.clearLastError()}function yi(e,a,t,r){var n=X.UTF8ToString(e,a),i=X.UTF8ToString(t,r);_?_.napi.fatalError(n,i):W("FATAL ERROR: "+n+" "+i)}function mi(e,a){if(!e)return 1;var t=s.envStore.get(e);if(t.checkGCAccess(),!t.tryCatch.isEmpty())return t.setLastError(10);if(!t.canCallIntoJs())return t.setLastError(t.moduleApiVersion>=10?23:10);t.clearLastError();try{if(!a)return t.setLastError(1);var r=t.ctx.handleStore.get(a);try{t.triggerFatalException(r.value)}catch{return t.setLastError(9)}return t.clearLastError()}catch(n){return t.tryCatch.setError(n),t.setLastError(10)}}var wi=Object.freeze({__proto__:null,_emnapi_get_last_error_info:oi,napi_create_error:vi,napi_create_range_error:pi,napi_create_type_error:gi,napi_fatal_error:yi,napi_fatal_exception:mi,napi_get_and_clear_last_exception:Ei,napi_is_exception_pending:_i,napi_throw:ui,napi_throw_error:ci,napi_throw_range_error:li,napi_throw_type_error:fi,node_api_create_syntax_error:hi,node_api_throw_syntax_error:di});function Ai(e,a,t,r,n,i){var o;if(!e)return 1;var u=s.envStore.get(e);if(u.checkGCAccess(),!u.tryCatch.isEmpty())return u.setLastError(10);if(!u.canCallIntoJs())return u.setLastError(u.moduleApiVersion>=10?23:10);u.clearLastError();try{if(!i||!r)return u.setLastError(1);var l=Ve(u,a,t,r,n);if(l.status!==0)return u.setLastError(l.status);var d=l.f,b=s.addToCurrentScope(d);o=b.id;var A=new DataView(g.buffer);return A.setInt32(i,o,!0),u.getReturnStatus()}catch(F){return u.tryCatch.setError(F),u.setLastError(10)}}function bi(e,a,t,r,n,i){if(!e)return 1;var o=s.envStore.get(e);if(!a)return o.setLastError(1);var u=s.scopeStore.get(a).callbackInfo,l=new DataView(g.buffer);if(r){if(!t)return o.setLastError(1);for(var d=l.getUint32(t,!0),b=u.args.length,A=d<b?d:b,F=0;F<A;F++){var N=o.ensureHandleId(u.args[F]);l.setInt32(r+F*4,N,!0)}if(F<d)for(;F<d;F++)l.setInt32(r+F*4,1,!0)}if(t&&l.setUint32(t,u.args.length,!0),n){var M=o.ensureHandleId(u.thiz);l.setInt32(n,M,!0)}return i&&l.setInt32(i,u.data,!0),o.clearLastError()}function Ii(e,a,t,r,n,i){var o=0,u;if(!e)return 1;var l=s.envStore.get(e);if(l.checkGCAccess(),!l.tryCatch.isEmpty())return l.setLastError(10);if(!l.canCallIntoJs())return l.setLastError(l.moduleApiVersion>=10?23:10);l.clearLastError();try{if(!a||(r=r>>>0,r>0&&!n))return l.setLastError(1);var d=s.handleStore.get(a).value;if(!t)return l.setLastError(1);var b=s.handleStore.get(t).value;if(typeof b!="function")return l.setLastError(1);for(var A=[],F=new DataView(g.buffer);o<r;o++){var N=F.getInt32(n+o*4,!0);A.push(s.handleStore.get(N).value)}var M=b.apply(d,A);return i&&(u=l.ensureHandleId(M),F.setInt32(i,u,!0)),l.clearLastError()}catch(z){return l.tryCatch.setError(z),l.setLastError(10)}}function Li(e,a,t,r,n){var i,o;if(!e)return 1;var u=s.envStore.get(e);if(u.checkGCAccess(),!u.tryCatch.isEmpty())return u.setLastError(10);if(!u.canCallIntoJs())return u.setLastError(u.moduleApiVersion>=10?23:10);u.clearLastError();try{if(!a||(t=t>>>0,t>0&&!r)||!n)return u.setLastError(1);var l=s.handleStore.get(a).value;if(typeof l!="function")return u.setLastError(1);var d=void 0,b=new DataView(g.buffer);if(s.feature.supportReflect){var A=Array(t);for(i=0;i<t;i++){var F=b.getInt32(r+i*4,!0);A[i]=s.handleStore.get(F).value}d=Reflect.construct(l,A,l)}else{var N=Array(t+1);for(N[0]=void 0,i=0;i<t;i++){var F=b.getInt32(r+i*4,!0);N[i+1]=s.handleStore.get(F).value}var M=l.bind.apply(l,N);d=new M}return n&&(o=u.ensureHandleId(d),b.setInt32(n,o,!0)),u.getReturnStatus()}catch(z){return u.tryCatch.setError(z),u.setLastError(10)}}function Si(e,a,t){if(!e)return 1;var r=s.envStore.get(e);if(r.checkGCAccess(),!a||!t)return r.setLastError(1);var n=s.scopeStore.get(a).callbackInfo,i=n.thiz,o=n.fn,u=i==null||i.constructor==null?0:i instanceof o?r.ensureHandleId(i.constructor):0,l=new DataView(g.buffer);return l.setInt32(t,u,!0),r.clearLastError()}var Ti=Object.freeze({__proto__:null,napi_call_function:Ii,napi_create_function:Ai,napi_get_cb_info:bi,napi_get_new_target:Si,napi_new_instance:Li});function Ci(e,a){if(!e)return 1;var t=s.envStore.get(e);if(t.checkGCAccess(),!a)return t.setLastError(1);var r=s.openScope(t),n=new DataView(g.buffer);return n.setInt32(a,r.id,!0),t.clearLastError()}function Di(e,a){if(!e)return 1;var t=s.envStore.get(e);return t.checkGCAccess(),a?t.openHandleScopes===0?13:(s.closeScope(t),t.clearLastError()):t.setLastError(1)}function ki(e,a){if(!e)return 1;var t=s.envStore.get(e);if(t.checkGCAccess(),!a)return t.setLastError(1);var r=s.openScope(t),n=new DataView(g.buffer);return n.setInt32(a,r.id,!0),t.clearLastError()}function Bi(e,a){if(!e)return 1;var t=s.envStore.get(e);return t.checkGCAccess(),a?t.openHandleScopes===0?13:(s.closeScope(t),t.clearLastError()):t.setLastError(1)}function Oi(e,a,t,r){if(!e)return 1;var n=s.envStore.get(e);if(n.checkGCAccess(),!a||!t||!r)return n.setLastError(1);var i=s.scopeStore.get(a);if(!i.escapeCalled()){var o=i.escape(t),u=o?o.id:0,l=new DataView(g.buffer);return l.setInt32(r,u,!0),n.clearLastError()}return n.setLastError(12)}function Ri(e,a,t,r){if(!e)return 1;var n=s.envStore.get(e);if(n.checkGCAccess(),!a||!r)return n.setLastError(1);var i=s.handleStore.get(a);if(n.moduleApiVersion<10&&!(i.isObject()||i.isFunction()||i.isSymbol()))return n.setLastError(1);var o=s.createReference(n,i.id,t>>>0,1),u=new DataView(g.buffer);return u.setInt32(r,o.id,!0),n.clearLastError()}function Fi(e,a){if(!e)return 1;var t=s.envStore.get(e);return a?(s.refStore.get(a).dispose(),t.clearLastError()):t.setLastError(1)}function Pi(e,a,t){if(!e)return 1;var r=s.envStore.get(e);if(r.checkGCAccess(),!a)return r.setLastError(1);var n=s.refStore.get(a).ref();if(t){var i=new DataView(g.buffer);i.setUint32(t,n,!0)}return r.clearLastError()}function Ni(e,a,t){if(!e)return 1;var r=s.envStore.get(e);if(r.checkGCAccess(),!a)return r.setLastError(1);var n=s.refStore.get(a),i=n.refcount();if(i===0)return r.setLastError(9);var o=n.unref();if(t){var u=new DataView(g.buffer);u.setUint32(t,o,!0)}return r.clearLastError()}function Vi(e,a,t){if(!e)return 1;var r=s.envStore.get(e);if(r.checkGCAccess(),!a||!t)return r.setLastError(1);var n=s.refStore.get(a),i=n.get(r),o=new DataView(g.buffer);return o.setInt32(t,i,!0),r.clearLastError()}function Ui(e,a,t){if(!e)return 1;var r=s.envStore.get(e);return a?(s.addCleanupHook(r,a,t),0):r.setLastError(1)}function xi(e,a,t){if(!e)return 1;var r=s.envStore.get(e);return a?(s.removeCleanupHook(r,a,t),0):r.setLastError(1)}function Mi(e){var a=s.envStore.get(e);a.ref()}function Wi(e){var a=s.envStore.get(e);a.unref()}var ji=Object.freeze({__proto__:null,_emnapi_env_ref:Mi,_emnapi_env_unref:Wi,napi_add_env_cleanup_hook:Ui,napi_close_escapable_handle_scope:Bi,napi_close_handle_scope:Di,napi_create_reference:Ri,napi_delete_reference:Fi,napi_escape_handle:Oi,napi_get_reference_value:Vi,napi_open_escapable_handle_scope:ki,napi_open_handle_scope:Ci,napi_reference_ref:Pi,napi_reference_unref:Ni,napi_remove_env_cleanup_hook:xi});function Hi(e,a,t){var r=s.envStore.get(e),n=r.filename;return a?X.stringToUTF8(n,a,t):X.lengthBytesUTF8(n)}var Gi=Object.freeze({__proto__:null,_emnapi_get_filename:Hi});function zi(e,a,t){var r,n;if(!e)return 1;var i=s.envStore.get(e);if(i.checkGCAccess(),!i.tryCatch.isEmpty())return i.setLastError(10);if(!i.canCallIntoJs())return i.setLastError(i.moduleApiVersion>=10?23:10);i.clearLastError();try{if(!a||!t)return i.setLastError(1);var o=new DataView(g.buffer),u=new Promise(function(l,d){var b=s.createDeferred({resolve:l,reject:d});r=b.id,o.setInt32(a,r,!0)});return n=s.addToCurrentScope(u).id,o.setInt32(t,n,!0),i.getReturnStatus()}catch(l){return i.tryCatch.setError(l),i.setLastError(10)}}function Ji(e,a,t){if(!e)return 1;var r=s.envStore.get(e);if(r.checkGCAccess(),!r.tryCatch.isEmpty())return r.setLastError(10);if(!r.canCallIntoJs())return r.setLastError(r.moduleApiVersion>=10?23:10);r.clearLastError();try{if(!a||!t)return r.setLastError(1);var n=s.deferredStore.get(a);return n.resolve(s.handleStore.get(t).value),r.getReturnStatus()}catch(i){return r.tryCatch.setError(i),r.setLastError(10)}}function qi(e,a,t){if(!e)return 1;var r=s.envStore.get(e);if(r.checkGCAccess(),!r.tryCatch.isEmpty())return r.setLastError(10);if(!r.canCallIntoJs())return r.setLastError(r.moduleApiVersion>=10?23:10);r.clearLastError();try{if(!a||!t)return r.setLastError(1);var n=s.deferredStore.get(a);return n.reject(s.handleStore.get(t).value),r.getReturnStatus()}catch(i){return r.tryCatch.setError(i),r.setLastError(10)}}function Ki(e,a,t){if(!e)return 1;var r=s.envStore.get(e);if(r.checkGCAccess(),!a||!t)return r.setLastError(1);var n=s.handleStore.get(a),i=n.isPromise()?1:0,o=new DataView(g.buffer);return o.setInt8(t,i,!0),r.clearLastError()}var Yi=Object.freeze({__proto__:null,napi_create_promise:zi,napi_is_promise:Ki,napi_reject_deferred:qi,napi_resolve_deferred:Ji});function xr(e,a,t,r,n,i){var o;if(!e)return 1;var u=s.envStore.get(e);if(u.checkGCAccess(),!u.tryCatch.isEmpty())return u.setLastError(10);if(!u.canCallIntoJs())return u.setLastError(u.moduleApiVersion>=10?23:10);u.clearLastError();try{if(!i||!a)return u.setLastError(1);var l=s.handleStore.get(a);if(l.value==null)throw new TypeError("Cannot convert undefined or null to object");var d=void 0;try{d=l.isObject()||l.isFunction()?l.value:Object(l.value)}catch{return u.setLastError(2)}if(t!==0&&t!==1||n!==0&&n!==1)return u.setLastError(1);var b=[],A=void 0,F=void 0,N=void 0,M=!0,z=/^(0|[1-9][0-9]*)$/;do{for(A=Object.getOwnPropertyNames(d),F=Object.getOwnPropertySymbols(d),N=0;N<A.length;N++)b.push({name:z.test(A[N])?Number(A[N]):A[N],desc:Object.getOwnPropertyDescriptor(d,A[N]),own:M});for(N=0;N<F.length;N++)b.push({name:F[N],desc:Object.getOwnPropertyDescriptor(d,F[N]),own:M});if(t===1)break;d=Object.getPrototypeOf(d),M=!1}while(d);var $=[],ae=function(ye,Ie,ur,Mr){if(ye.indexOf(Ie)===-1){if(Mr===0)ye.push(Ie);else if(Mr===1){var cr=typeof Ie=="number"?String(Ie):Ie;typeof cr=="string"&&ur&8||ye.push(cr)}}};for(N=0;N<b.length;N++){var ue=b[N],ee=ue.name,le=ue.desc;if(r===0)ae($,ee,r,n);else{if(r&8&&typeof ee=="string"||r&16&&typeof ee=="symbol")continue;var pe=!0;switch(r&7){case 1:{pe=!!le.writable;break}case 2:{pe=!!le.enumerable;break}case 3:{pe=!!(le.writable&&le.enumerable);break}case 4:{pe=!!le.configurable;break}case 5:{pe=!!(le.configurable&&le.writable);break}case 6:{pe=!!(le.configurable&&le.enumerable);break}case 7:{pe=!!(le.configurable&&le.enumerable&&le.writable);break}}pe&&ae($,ee,r,n)}}o=s.addToCurrentScope($).id;var _e=new DataView(g.buffer);return _e.setInt32(i,o,!0),u.getReturnStatus()}catch(ye){return u.tryCatch.setError(ye),u.setLastError(10)}}function $i(e,a,t){return xr(e,a,0,18,1,t)}function Qi(e,a,t,r){if(!e)return 1;var n=s.envStore.get(e);if(n.checkGCAccess(),!n.tryCatch.isEmpty())return n.setLastError(10);if(!n.canCallIntoJs())return n.setLastError(n.moduleApiVersion>=10?23:10);n.clearLastError();try{if(!t||!r||!a)return n.setLastError(1);var i=s.handleStore.get(a);return i.isObject()||i.isFunction()?(i.value[s.handleStore.get(t).value]=s.handleStore.get(r).value,n.getReturnStatus()):n.setLastError(2)}catch(o){return n.tryCatch.setError(o),n.setLastError(10)}}function Zi(e,a,t,r){var n;if(!e)return 1;var i=s.envStore.get(e);if(i.checkGCAccess(),!i.tryCatch.isEmpty())return i.setLastError(10);if(!i.canCallIntoJs())return i.setLastError(i.moduleApiVersion>=10?23:10);i.clearLastError();try{if(!t||!r||!a)return i.setLastError(1);var o=s.handleStore.get(a);if(o.value==null)throw new TypeError("Cannot convert undefined or null to object");var u=void 0;try{u=o.isObject()||o.isFunction()?o.value:Object(o.value)}catch{return i.setLastError(2)}n=s.handleStore.get(t).value in u?1:0;var l=new DataView(g.buffer);return l.setInt8(r,n,!0),i.getReturnStatus()}catch(d){return i.tryCatch.setError(d),i.setLastError(10)}}function Xi(e,a,t,r){var n;if(!e)return 1;var i=s.envStore.get(e);if(i.checkGCAccess(),!i.tryCatch.isEmpty())return i.setLastError(10);if(!i.canCallIntoJs())return i.setLastError(i.moduleApiVersion>=10?23:10);i.clearLastError();try{if(!t||!r||!a)return i.setLastError(1);var o=s.handleStore.get(a);if(o.value==null)throw new TypeError("Cannot convert undefined or null to object");var u=void 0;try{u=o.isObject()||o.isFunction()?o.value:Object(o.value)}catch{return i.setLastError(2)}n=i.ensureHandleId(u[s.handleStore.get(t).value]);var l=new DataView(g.buffer);return l.setInt32(r,n,!0),i.getReturnStatus()}catch(d){return i.tryCatch.setError(d),i.setLastError(10)}}function es(e,a,t,r){var n;if(!e)return 1;var i=s.envStore.get(e);if(i.checkGCAccess(),!i.tryCatch.isEmpty())return i.setLastError(10);if(!i.canCallIntoJs())return i.setLastError(i.moduleApiVersion>=10?23:10);i.clearLastError();try{if(!t||!a)return i.setLastError(1);var o=s.handleStore.get(a);if(!(o.isObject()||o.isFunction()))return i.setLastError(2);var u=s.handleStore.get(t).value;if(s.feature.supportReflect)n=Reflect.deleteProperty(o.value,u);else try{n=delete o.value[u]}catch{n=!1}if(r){var l=new DataView(g.buffer);l.setInt8(r,n?1:0,!0)}return i.getReturnStatus()}catch(d){return i.tryCatch.setError(d),i.setLastError(10)}}function rs(e,a,t,r){var n;if(!e)return 1;var i=s.envStore.get(e);if(i.checkGCAccess(),!i.tryCatch.isEmpty())return i.setLastError(10);if(!i.canCallIntoJs())return i.setLastError(i.moduleApiVersion>=10?23:10);i.clearLastError();try{if(!t||!r||!a)return i.setLastError(1);var o=s.handleStore.get(a);if(o.value==null)throw new TypeError("Cannot convert undefined or null to object");var u=void 0;try{u=o.isObject()||o.isFunction()?o.value:Object(o.value)}catch{return i.setLastError(2)}var l=s.handleStore.get(t).value;if(typeof l!="string"&&typeof l!="symbol")return i.setLastError(4);n=Object.prototype.hasOwnProperty.call(u,s.handleStore.get(t).value);var d=new DataView(g.buffer);return d.setInt8(r,n?1:0,!0),i.getReturnStatus()}catch(b){return i.tryCatch.setError(b),i.setLastError(10)}}function ts(e,a,t,r){if(!e)return 1;var n=s.envStore.get(e);if(n.checkGCAccess(),!n.tryCatch.isEmpty())return n.setLastError(10);if(!n.canCallIntoJs())return n.setLastError(n.moduleApiVersion>=10?23:10);n.clearLastError();try{if(!r||!a)return n.setLastError(1);var i=s.handleStore.get(a);return i.isObject()||i.isFunction()?t?(s.handleStore.get(a).value[X.UTF8ToString(t,-1)]=s.handleStore.get(r).value,n.getReturnStatus()):n.setLastError(1):n.setLastError(2)}catch(o){return n.tryCatch.setError(o),n.setLastError(10)}}function ns(e,a,t,r){var n;if(!e)return 1;var i=s.envStore.get(e);if(i.checkGCAccess(),!i.tryCatch.isEmpty())return i.setLastError(10);if(!i.canCallIntoJs())return i.setLastError(i.moduleApiVersion>=10?23:10);i.clearLastError();try{if(!r||!a||!t)return i.setLastError(1);var o=s.handleStore.get(a);if(o.value==null)throw new TypeError("Cannot convert undefined or null to object");var u=void 0;try{u=o.isObject()||o.isFunction()?o.value:Object(o.value)}catch{return i.setLastError(2)}n=X.UTF8ToString(t,-1)in u;var l=new DataView(g.buffer);return l.setInt8(r,n?1:0,!0),i.getReturnStatus()}catch(d){return i.tryCatch.setError(d),i.setLastError(10)}}function as(e,a,t,r){var n;if(!e)return 1;var i=s.envStore.get(e);if(i.checkGCAccess(),!i.tryCatch.isEmpty())return i.setLastError(10);if(!i.canCallIntoJs())return i.setLastError(i.moduleApiVersion>=10?23:10);i.clearLastError();try{if(!r||!a||!t)return i.setLastError(1);var o=s.handleStore.get(a);if(o.value==null)throw new TypeError("Cannot convert undefined or null to object");var u=void 0;try{u=o.isObject()||o.isFunction()?o.value:Object(o.value)}catch{return i.setLastError(2)}n=i.ensureHandleId(u[X.UTF8ToString(t,-1)]);var l=new DataView(g.buffer);return l.setInt32(r,n,!0),i.getReturnStatus()}catch(d){return i.tryCatch.setError(d),i.setLastError(10)}}function is(e,a,t,r){if(!e)return 1;var n=s.envStore.get(e);if(n.checkGCAccess(),!n.tryCatch.isEmpty())return n.setLastError(10);if(!n.canCallIntoJs())return n.setLastError(n.moduleApiVersion>=10?23:10);n.clearLastError();try{if(!r||!a)return n.setLastError(1);var i=s.handleStore.get(a);return i.isObject()||i.isFunction()?(i.value[t>>>0]=s.handleStore.get(r).value,n.getReturnStatus()):n.setLastError(2)}catch(o){return n.tryCatch.setError(o),n.setLastError(10)}}function ss(e,a,t,r){var n;if(!e)return 1;var i=s.envStore.get(e);if(i.checkGCAccess(),!i.tryCatch.isEmpty())return i.setLastError(10);if(!i.canCallIntoJs())return i.setLastError(i.moduleApiVersion>=10?23:10);i.clearLastError();try{if(!r||!a)return i.setLastError(1);var o=s.handleStore.get(a);if(o.value==null)throw new TypeError("Cannot convert undefined or null to object");var u=void 0;try{u=o.isObject()||o.isFunction()?o.value:Object(o.value)}catch{return i.setLastError(2)}n=t>>>0 in u?1:0;var l=new DataView(g.buffer);return l.setInt8(r,n,!0),i.getReturnStatus()}catch(d){return i.tryCatch.setError(d),i.setLastError(10)}}function os(e,a,t,r){var n;if(!e)return 1;var i=s.envStore.get(e);if(i.checkGCAccess(),!i.tryCatch.isEmpty())return i.setLastError(10);if(!i.canCallIntoJs())return i.setLastError(i.moduleApiVersion>=10?23:10);i.clearLastError();try{if(!r||!a)return i.setLastError(1);var o=s.handleStore.get(a);if(o.value==null)throw new TypeError("Cannot convert undefined or null to object");var u=void 0;try{u=o.isObject()||o.isFunction()?o.value:Object(o.value)}catch{return i.setLastError(2)}n=i.ensureHandleId(u[t>>>0]);var l=new DataView(g.buffer);return l.setInt32(r,n,!0),i.getReturnStatus()}catch(d){return i.tryCatch.setError(d),i.setLastError(10)}}function us(e,a,t,r){var n;if(!e)return 1;var i=s.envStore.get(e);if(i.checkGCAccess(),!i.tryCatch.isEmpty())return i.setLastError(10);if(!i.canCallIntoJs())return i.setLastError(i.moduleApiVersion>=10?23:10);i.clearLastError();try{if(!a)return i.setLastError(1);var o=s.handleStore.get(a);if(!(o.isObject()||o.isFunction()))return i.setLastError(2);if(s.feature.supportReflect)n=Reflect.deleteProperty(o.value,t>>>0);else try{n=delete o.value[t>>>0]}catch{n=!1}if(r){var u=new DataView(g.buffer);u.setInt8(r,n?1:0,!0)}return i.getReturnStatus()}catch(l){return i.tryCatch.setError(l),i.setLastError(10)}}function cs(e,a,t,r){var n,i;if(!e)return 1;var o=s.envStore.get(e);if(o.checkGCAccess(),!o.tryCatch.isEmpty())return o.setLastError(10);if(!o.canCallIntoJs())return o.setLastError(o.moduleApiVersion>=10?23:10);o.clearLastError();try{if(t=t>>>0,t>0&&!r||!a)return o.setLastError(1);var u=s.handleStore.get(a),l=u.value;if(!(u.isObject()||u.isFunction()))return o.setLastError(2);for(var d=void 0,b=new DataView(g.buffer),A=0;A<t;A++){n=r+A*32;var F=b.getInt32(n,!0),N=b.getInt32(n+4,!0),M=b.getInt32(n+8,!0),z=b.getInt32(n+12,!0),$=b.getInt32(n+16,!0),ae=b.getInt32(n+20,!0);i=b.getInt32(n+24,!0);var ue=b.getInt32(n+28,!0);if(F)d=X.UTF8ToString(F,-1);else if(!N||(d=s.handleStore.get(N).value,typeof d!="string"&&typeof d!="symbol"))return o.setLastError(4);ar(o,l,d,M,z,$,ae,i,ue)}return o.getReturnStatus()}catch(ee){return o.tryCatch.setError(ee),o.setLastError(10)}}function fs(e,a){if(!e)return 1;var t=s.envStore.get(e);if(t.checkGCAccess(),!t.tryCatch.isEmpty())return t.setLastError(10);if(!t.canCallIntoJs())return t.setLastError(t.moduleApiVersion>=10?23:10);t.clearLastError();try{if(!a)return t.setLastError(1);var r=s.handleStore.get(a),n=r.value;return r.isObject()||r.isFunction()?(Object.freeze(n),t.getReturnStatus()):t.setLastError(2)}catch(i){return t.tryCatch.setError(i),t.setLastError(10)}}function ls(e,a){if(!e)return 1;var t=s.envStore.get(e);if(t.checkGCAccess(),!t.tryCatch.isEmpty())return t.setLastError(10);if(!t.canCallIntoJs())return t.setLastError(t.moduleApiVersion>=10?23:10);t.clearLastError();try{if(!a)return t.setLastError(1);var r=s.handleStore.get(a),n=r.value;return r.isObject()||r.isFunction()?(Object.seal(n),t.getReturnStatus()):t.setLastError(2)}catch(i){return t.tryCatch.setError(i),t.setLastError(10)}}var ds=Object.freeze({__proto__:null,napi_define_properties:cs,napi_delete_element:us,napi_delete_property:es,napi_get_all_property_names:xr,napi_get_element:os,napi_get_named_property:as,napi_get_property:Xi,napi_get_property_names:$i,napi_has_element:ss,napi_has_named_property:ns,napi_has_own_property:rs,napi_has_property:Zi,napi_object_freeze:fs,napi_object_seal:ls,napi_set_element:is,napi_set_named_property:ts,napi_set_property:Qi});function _s(e,a,t){var r,n;if(!e)return 1;var i=s.envStore.get(e);if(i.checkGCAccess(),!i.tryCatch.isEmpty())return i.setLastError(10);if(!i.canCallIntoJs())return i.setLastError(i.moduleApiVersion>=10?23:10);i.clearLastError();try{if(!a||!t)return i.setLastError(1);var o=s.handleStore.get(a);if(!o.isString())return i.setLastError(3);var u=s.handleStore.get(5).value,l=u.eval(o.value);n=i.ensureHandleId(l);var d=new DataView(g.buffer);d.setInt32(t,n,!0),r=i.getReturnStatus()}catch(b){return i.tryCatch.setError(b),i.setLastError(10)}return r}var vs=Object.freeze({__proto__:null,napi_run_script:_s});function gs(e,a,t){if(!e)return 1;var r=s.envStore.get(e);if(r.checkGCAccess(),!a||!t)return r.setLastError(1);var n=s.handleStore.get(a),i;if(n.isNumber())i=3;else if(n.isBigInt())i=9;else if(n.isString())i=4;else if(n.isFunction())i=7;else if(n.isExternal())i=8;else if(n.isObject())i=6;else if(n.isBoolean())i=2;else if(n.isUndefined())i=0;else if(n.isSymbol())i=5;else if(n.isNull())i=1;else return r.setLastError(1);var o=new DataView(g.buffer);return o.setInt32(t,i,!0),r.clearLastError()}function ps(e,a,t){var r;if(!e)return 1;var n=s.envStore.get(e);if(n.checkGCAccess(),!n.tryCatch.isEmpty())return n.setLastError(10);if(!n.canCallIntoJs())return n.setLastError(n.moduleApiVersion>=10?23:10);n.clearLastError();try{if(!a||!t)return n.setLastError(1);var i=s.handleStore.get(a);r=i.value?4:3;var o=new DataView(g.buffer);return o.setInt32(t,r,!0),n.getReturnStatus()}catch(u){return n.tryCatch.setError(u),n.setLastError(10)}}function hs(e,a,t){var r;if(!e)return 1;var n=s.envStore.get(e);if(n.checkGCAccess(),!n.tryCatch.isEmpty())return n.setLastError(10);if(!n.canCallIntoJs())return n.setLastError(n.moduleApiVersion>=10?23:10);n.clearLastError();try{if(!a||!t)return n.setLastError(1);var i=s.handleStore.get(a);if(i.isBigInt())throw new TypeError("Cannot convert a BigInt value to a number");r=s.addToCurrentScope(Number(i.value)).id;var o=new DataView(g.buffer);return o.setInt32(t,r,!0),n.getReturnStatus()}catch(u){return n.tryCatch.setError(u),n.setLastError(10)}}function Es(e,a,t){var r;if(!e)return 1;var n=s.envStore.get(e);if(n.checkGCAccess(),!n.tryCatch.isEmpty())return n.setLastError(10);if(!n.canCallIntoJs())return n.setLastError(n.moduleApiVersion>=10?23:10);n.clearLastError();try{if(!a||!t)return n.setLastError(1);var i=s.handleStore.get(a);if(i.value==null)throw new TypeError("Cannot convert undefined or null to object");r=n.ensureHandleId(Object(i.value));var o=new DataView(g.buffer);return o.setInt32(t,r,!0),n.getReturnStatus()}catch(u){return n.tryCatch.setError(u),n.setLastError(10)}}function ys(e,a,t){var r;if(!e)return 1;var n=s.envStore.get(e);if(n.checkGCAccess(),!n.tryCatch.isEmpty())return n.setLastError(10);if(!n.canCallIntoJs())return n.setLastError(n.moduleApiVersion>=10?23:10);n.clearLastError();try{if(!a||!t)return n.setLastError(1);var i=s.handleStore.get(a);if(i.isSymbol())throw new TypeError("Cannot convert a Symbol value to a string");r=s.addToCurrentScope(String(i.value)).id;var o=new DataView(g.buffer);return o.setInt32(t,r,!0),n.getReturnStatus()}catch(u){return n.tryCatch.setError(u),n.setLastError(10)}}function ms(e,a,t,r){var n;if(!e)return 1;var i=s.envStore.get(e);if(i.checkGCAccess(),!i.tryCatch.isEmpty())return i.setLastError(10);if(!i.canCallIntoJs())return i.setLastError(i.moduleApiVersion>=10?23:10);i.clearLastError();try{if(!a||!r||!t)return i.setLastError(1);var o=new DataView(g.buffer);o.setInt8(r,0,!0);var u=s.handleStore.get(t);if(!u.isFunction())return i.setLastError(5);var l=s.handleStore.get(a).value,d=l instanceof u.value;return n=d?1:0,o.setInt8(r,n,!0),i.getReturnStatus()}catch(b){return i.tryCatch.setError(b),i.setLastError(10)}}function ws(e,a,t){if(!e)return 1;var r=s.envStore.get(e);if(r.checkGCAccess(),!a||!t)return r.setLastError(1);var n=s.handleStore.get(a),i=n.isArray()?1:0,o=new DataView(g.buffer);return o.setInt8(t,i,!0),r.clearLastError()}function As(e,a,t){if(!e)return 1;var r=s.envStore.get(e);if(r.checkGCAccess(),!a||!t)return r.setLastError(1);var n=s.handleStore.get(a),i=n.isArrayBuffer()?1:0,o=new DataView(g.buffer);return o.setInt8(t,i,!0),r.clearLastError()}function bs(e,a,t){if(!e)return 1;var r=s.envStore.get(e);if(r.checkGCAccess(),!a||!t)return r.setLastError(1);var n=s.handleStore.get(a),i=n.isDate()?1:0,o=new DataView(g.buffer);return o.setInt8(t,i,!0),r.clearLastError()}function Is(e,a,t){if(!e)return 1;var r=s.envStore.get(e);if(r.checkGCAccess(),!a||!t)return r.setLastError(1);var n=s.handleStore.get(a).value,i=n instanceof Error?1:0,o=new DataView(g.buffer);return o.setInt8(t,i,!0),r.clearLastError()}function Ls(e,a,t){if(!e)return 1;var r=s.envStore.get(e);if(r.checkGCAccess(),!a||!t)return r.setLastError(1);var n=s.handleStore.get(a),i=n.isTypedArray()?1:0,o=new DataView(g.buffer);return o.setInt8(t,i,!0),r.clearLastError()}function Ss(e,a,t){if(!e)return 1;var r=s.envStore.get(e);if(r.checkGCAccess(),!a||!t)return r.setLastError(1);var n=s.handleStore.get(a),i=n.isBuffer(s.feature.Buffer)?1:0,o=new DataView(g.buffer);return o.setInt8(t,i,!0),r.clearLastError()}function Ts(e,a,t){if(!e)return 1;var r=s.envStore.get(e);if(r.checkGCAccess(),!a||!t)return r.setLastError(1);var n=s.handleStore.get(a),i=n.isDataView()?1:0,o=new DataView(g.buffer);return o.setInt8(t,i,!0),r.clearLastError()}function Cs(e,a,t,r){var n;if(!e)return 1;var i=s.envStore.get(e);if(i.checkGCAccess(),!i.tryCatch.isEmpty())return i.setLastError(10);if(!i.canCallIntoJs())return i.setLastError(i.moduleApiVersion>=10?23:10);i.clearLastError();try{if(!a||!t||!r)return i.setLastError(1);var o=s.handleStore.get(a).value,u=s.handleStore.get(t).value;n=o===u?1:0;var l=new DataView(g.buffer);return l.setInt8(r,n,!0),i.getReturnStatus()}catch(d){return i.tryCatch.setError(d),i.setLastError(10)}}function Ds(e,a){if(!e)return 1;var t=s.envStore.get(e);if(t.checkGCAccess(),!a)return t.setLastError(1);var r=s.handleStore.get(a).value;if(!(r instanceof ArrayBuffer))return typeof SharedArrayBuffer=="function"&&r instanceof SharedArrayBuffer?t.setLastError(20):t.setLastError(19);try{var n=s.feature.MessageChannel,i=new n;i.port1.postMessage(r,[r])}catch{return t.setLastError(9)}return t.clearLastError()}function ks(e,a,t){if(!e)return 1;var r=s.envStore.get(e);if(r.checkGCAccess(),!r.tryCatch.isEmpty())return r.setLastError(10);if(!r.canCallIntoJs())return r.setLastError(r.moduleApiVersion>=10?23:10);r.clearLastError();try{if(!a||!t)return r.setLastError(1);var n=s.handleStore.get(a),i=new DataView(g.buffer);if(n.isArrayBuffer()&&n.value.byteLength===0)try{new Uint8Array(n.value)}catch{return i.setInt8(t,1,!0),r.getReturnStatus()}return i.setInt8(t,0,!0),r.getReturnStatus()}catch(o){return r.tryCatch.setError(o),r.setLastError(10)}}var Bs=Object.freeze({__proto__:null,napi_coerce_to_bool:ps,napi_coerce_to_number:hs,napi_coerce_to_object:Es,napi_coerce_to_string:ys,napi_detach_arraybuffer:Ds,napi_instanceof:ms,napi_is_array:ws,napi_is_arraybuffer:As,napi_is_buffer:Ss,napi_is_dataview:Ts,napi_is_date:bs,napi_is_detached_arraybuffer:ks,napi_is_error:Is,napi_is_typedarray:Ls,napi_strict_equals:Cs,napi_typeof:gs});function Os(e,a){if(!e)return 1;var t=s.envStore.get(e);if(!a)return t.setLastError(1);var r=10,n=new DataView(g.buffer);return n.setUint32(a,r,!0),t.clearLastError()}var Rs=Object.freeze({__proto__:null,napi_get_version:Os});te.init(),K.init(),X.init(),L.init(),R.init(),E.emnapi.syncMemory=sr,E.emnapi.getMemoryAddress=or;function ce(e){for(var a=Object.keys(e),t=0;t<a.length;++t){var r=a[t];r.indexOf("$")!==0&&(r.indexOf("emnapi_")===0?E.imports.emnapi[r]=e[r]:r.indexOf("_emnapi_")===0||r==="napi_set_last_error"||r==="napi_clear_last_error"?E.imports.env[r]=e[r]:E.imports.napi[r]=e[r])}}return ce(yn),ce(wn),ce(Hn),ce(Ae),ce(oa),ce(ma),ce(Za),ce(ni),ce(Da),ce(si),ce(Na),ce(wi),ce(Ti),ce(ji),ce(Gi),ce(Dn),ce(Yi),ce(ds),ce(vs),ce(Bs),ce(Rs),E.imports.napi.napi_create_threadsafe_function=kn,E.imports.napi.napi_get_threadsafe_function_context=Bn,E.imports.napi.napi_call_threadsafe_function=On,E.imports.napi.napi_acquire_threadsafe_function=Rn,E.imports.napi.napi_release_threadsafe_function=Fn,E.imports.napi.napi_unref_threadsafe_function=Pn,E.imports.napi.napi_ref_threadsafe_function=Nn,E}();return c}function et(f,c,v,p){p=p??{};var m=p.getMemory,S=p.getTable,g=p.beforeInit;if(m!=null&&typeof m!="function")throw new TypeError("options.getMemory is not a function");if(S!=null&&typeof S!="function")throw new TypeError("options.getTable is not a function");if(g!=null&&typeof g!="function")throw new TypeError("options.beforeInit is not a function");var O;O=Xr(p);var P=p.wasi,x,W={env:O.imports.env,napi:O.imports.napi,emnapi:O.imports.emnapi};P&&(x=new qr(O.childThread?{wasi:P,childThread:!0,postMessage:O.postMessage}:{wasi:P,threadManager:O.PThread,waitThreadStart:O.waitThreadStart}),Object.assign(W,typeof P.getImportObject=="function"?P.getImportObject():{wasi_snapshot_preview1:P.wasiImport}),Object.assign(W,x.getImportObject()));var E=p.overwriteImports;if(typeof E=="function"){var s=E(W);typeof s=="object"&&s!==null&&(W=s)}return f(v,W,function(_,h){if(_)throw _;var y=h.instance,w=y,I=y.exports,C="memory"in I,B="memory"in W.env,k=m?m(I):C?I.memory:B?W.env.memory:void 0;if(!k)throw new Error("memory is neither exported nor imported");var D=S?S(I):I.__indirect_function_table;if(P&&!C){var U=Object.create(null);Object.assign(U,I,{memory:k}),w={exports:U}}var R=h.module;P?w=x.initialize(w,R,k):O.PThread.setup(R,k);var V=function(){g&&g({instance:y,module:R}),O.init({instance:w,module:R,memory:k,table:D});var J={instance:y,module:R,usedInstance:w};return J.napiModule=O,J};if(O.PThread.shouldPreloadWorkers()){var j=O.PThread.loadWasmModuleToAllWorkers();if(f===rt)return j.then(V);throw new Error("Synchronous loading is not supported with worker pool (reuseWorker.size > 0)")}return V()})}function rt(f,c,v){return ke(f,c).then(function(p){return v(null,p)},function(p){return v(p)})}function tt(f,c,v){var p;try{p=Zr(f,c)}catch(m){return v(m)}return v(null,p)}function nt(f,c){return et(tt,void 0,f,c)}var at=function(f){Qr(c,f);function c(v){var p=this;if(typeof v.onLoad!="function")throw new TypeError("options.onLoad is not a function");return p=f.call(this,v)||this,p.napiModule=void 0,p}return c.prototype.instantiate=function(v){var p=this,m=this.onLoad(v),S=m.then;return typeof S=="function"?m.then(function(g){return p.napiModule=g.napiModule,g}):(this.napiModule=m.napiModule,m)},c.prototype.handle=function(v){var p=this,m;if(f.prototype.handle.call(this,v),!((m=v?.data)===null||m===void 0)&&m.__emnapi__){var S=v.data.__emnapi__.type,g=v.data.__emnapi__.payload;S==="async-worker-init"?this.handleAfterLoad(v,function(){p.napiModule.initWorker(g.arg)}):S==="async-work-execute"&&this.handleAfterLoad(v,function(){p.napiModule.executeAsyncWork(g.work)})}},c}($r),it={};const Be=typeof WebAssembly<"u"?WebAssembly:typeof WXWebAssembly<"u"?WXWebAssembly:void 0;if(!Be)throw new Error("WebAssembly is not supported in this environment");function Se(f,c){if(f===null||typeof f!="object")throw new TypeError(`${c} must be an object. Received ${f===null?"null":typeof f}`)}function st(f,c){if(!Array.isArray(f))throw new TypeError(`${c} must be an array. Received ${f===null?"null":typeof f}`)}function ot(f,c){if(typeof f!="boolean")throw new TypeError(`${c} must be a boolean. Received ${f===null?"null":typeof f}`)}function yr(f,c){if(typeof f!="string")throw new TypeError(`${c} must be a string. Received ${f===null?"null":typeof f}`)}function xe(f,c){if(typeof f!="function")throw new TypeError(`${c} must be a function. Received ${f===null?"null":typeof f}`)}function mr(f,c){if(f!==void 0)throw new TypeError(`${c} must be undefined. Received ${f===null?"null":typeof f}`)}function ut(f){return!!(f&&(typeof f=="object"||typeof f=="function")&&typeof f.then=="function")}function ie(f,c,v){return typeof SharedArrayBuffer=="function"&&f.buffer instanceof SharedArrayBuffer||Object.prototype.toString.call(f.buffer.constructor)==="[object SharedArrayBuffer]"?f.slice(c,v):f.subarray(c,v)}const Ke=46,Ye=47;function ct(f){return f===Ye}function ft(f,c,v,p){let m="",S=0,g=-1,O=0,P=0;for(let x=0;x<=f.length;++x){if(x<f.length)P=f.charCodeAt(x);else{if(p(P))break;P=Ye}if(p(P)){if(!(g===x-1||O===1))if(O===2){if(m.length<2||S!==2||m.charCodeAt(m.length-1)!==Ke||m.charCodeAt(m.length-2)!==Ke){if(m.length>2){const W=m.indexOf(v);W===-1?(m="",S=0):(m=m.slice(0,W),S=m.length-1-m.indexOf(v)),g=x,O=0;continue}else if(m.length!==0){m="",S=0,g=x,O=0;continue}}c&&(m+=m.length>0?`${v}..`:"..",S=2)}else m.length>0?m+=`${v}${f.slice(g+1,x)}`:m=f.slice(g+1,x),S=x-g-1;g=x,O=0}else P===Ke&&O!==-1?++O:O=-1}return m}function oe(...f){let c="",v=!1;for(let p=f.length-1;p>=-1&&!v;p--){const m=p>=0?f[p]:"/";yr(m,"path"),m.length!==0&&(c=`${m}/${c}`,v=m.charCodeAt(0)===Ye)}return c=ft(c,!v,"/",ct),v?`/${c}`:c.length>0?c:"."}const lt=BigInt(1)<<BigInt(0),dt=BigInt(1)<<BigInt(1),_t=BigInt(1)<<BigInt(2),vt=BigInt(1)<<BigInt(3),gt=BigInt(1)<<BigInt(4),pt=BigInt(1)<<BigInt(5),ht=BigInt(1)<<BigInt(6),Et=BigInt(1)<<BigInt(7),yt=BigInt(1)<<BigInt(8),mt=BigInt(1)<<BigInt(9),wt=BigInt(1)<<BigInt(10),At=BigInt(1)<<BigInt(11),bt=BigInt(1)<<BigInt(12),It=BigInt(1)<<BigInt(13),Lt=BigInt(1)<<BigInt(14),St=BigInt(1)<<BigInt(15),Tt=BigInt(1)<<BigInt(16),Ct=BigInt(1)<<BigInt(17),Dt=BigInt(1)<<BigInt(18),kt=BigInt(1)<<BigInt(19),Bt=BigInt(1)<<BigInt(20),Ot=BigInt(1)<<BigInt(21),Rt=BigInt(1)<<BigInt(22),Ft=BigInt(1)<<BigInt(23),Pt=BigInt(1)<<BigInt(24),Nt=BigInt(1)<<BigInt(25),Vt=BigInt(1)<<BigInt(26),Ut=BigInt(1)<<BigInt(27),xt=BigInt(1)<<BigInt(28),Mt=BigInt(1)<<BigInt(29),T={FD_DATASYNC:lt,FD_READ:dt,FD_SEEK:_t,FD_FDSTAT_SET_FLAGS:vt,FD_SYNC:gt,FD_TELL:pt,FD_WRITE:ht,FD_ADVISE:Et,FD_ALLOCATE:yt,PATH_CREATE_DIRECTORY:mt,PATH_CREATE_FILE:wt,PATH_LINK_SOURCE:At,PATH_LINK_TARGET:bt,PATH_OPEN:It,FD_READDIR:Lt,PATH_READLINK:St,PATH_RENAME_SOURCE:Tt,PATH_RENAME_TARGET:Ct,PATH_FILESTAT_GET:Dt,PATH_FILESTAT_SET_SIZE:kt,PATH_FILESTAT_SET_TIMES:Bt,FD_FILESTAT_GET:Ot,FD_FILESTAT_SET_SIZE:Rt,FD_FILESTAT_SET_TIMES:Ft,PATH_SYMLINK:Pt,PATH_REMOVE_DIRECTORY:Nt,PATH_UNLINK_FILE:Vt,POLL_FD_READWRITE:Ut,SOCK_SHUTDOWN:xt,SOCK_ACCEPT:Mt};function Wt(f){switch(f){case 0:return"Success";case 1:return"Argument list too long";case 2:return"Permission denied";case 3:return"Address in use";case 4:return"Address not available";case 5:return"Address family not supported by protocol";case 6:return"Resource temporarily unavailable";case 7:return"Operation already in progress";case 8:return"Bad file descriptor";case 9:return"Bad message";case 10:return"Resource busy";case 11:return"Operation canceled";case 12:return"No child process";case 13:return"Connection aborted";case 14:return"Connection refused";case 15:return"Connection reset by peer";case 16:return"Resource deadlock would occur";case 17:return"Destination address required";case 18:return"Domain error";case 19:return"Quota exceeded";case 20:return"File exists";case 21:return"Bad address";case 22:return"File too large";case 23:return"Host is unreachable";case 24:return"Identifier removed";case 25:return"Illegal byte sequence";case 26:return"Operation in progress";case 27:return"Interrupted system call";case 28:return"Invalid argument";case 29:return"I/O error";case 30:return"Socket is connected";case 31:return"Is a directory";case 32:return"Symbolic link loop";case 33:return"No file descriptors available";case 34:return"Too many links";case 35:return"Message too large";case 36:return"Multihop attempted";case 37:return"Filename too long";case 38:return"Network is down";case 39:return"Connection reset by network";case 40:return"Network unreachable";case 41:return"Too many files open in system";case 42:return"No buffer space available";case 43:return"No such device";case 44:return"No such file or directory";case 45:return"Exec format error";case 46:return"No locks available";case 47:return"Link has been severed";case 48:return"Out of memory";case 49:return"No message of the desired type";case 50:return"Protocol not available";case 51:return"No space left on device";case 52:return"Function not implemented";case 53:return"Socket not connected";case 54:return"Not a directory";case 55:return"Directory not empty";case 56:return"State not recoverable";case 57:return"Not a socket";case 58:return"Not supported";case 59:return"Not a tty";case 60:return"No such device or address";case 61:return"Value too large for data type";case 62:return"Previous owner died";case 63:return"Operation not permitted";case 64:return"Broken pipe";case 65:return"Protocol error";case 66:return"Protocol not supported";case 67:return"Protocol wrong type for socket";case 68:return"Result not representable";case 69:return"Read-only file system";case 70:return"Invalid seek";case 71:return"No such process";case 72:return"Stale file handle";case 73:return"Operation timed out";case 74:return"Text file busy";case 75:return"Cross-device link";case 76:return"Capabilities insufficient";default:return"Unknown error"}}class de extends Error{constructor(c,v){super(c),this.errno=v}getErrorMessage(){return Wt(this.errno)}}Object.defineProperty(de.prototype,"name",{configurable:!0,writable:!0,value:"WasiError"});const Oe=T.FD_DATASYNC|T.FD_READ|T.FD_SEEK|T.FD_FDSTAT_SET_FLAGS|T.FD_SYNC|T.FD_TELL|T.FD_WRITE|T.FD_ADVISE|T.FD_ALLOCATE|T.PATH_CREATE_DIRECTORY|T.PATH_CREATE_FILE|T.PATH_LINK_SOURCE|T.PATH_LINK_TARGET|T.PATH_OPEN|T.FD_READDIR|T.PATH_READLINK|T.PATH_RENAME_SOURCE|T.PATH_RENAME_TARGET|T.PATH_FILESTAT_GET|T.PATH_FILESTAT_SET_SIZE|T.PATH_FILESTAT_SET_TIMES|T.FD_FILESTAT_GET|T.FD_FILESTAT_SET_TIMES|T.FD_FILESTAT_SET_SIZE|T.PATH_SYMLINK|T.PATH_UNLINK_FILE|T.PATH_REMOVE_DIRECTORY|T.POLL_FD_READWRITE|T.SOCK_SHUTDOWN|T.SOCK_ACCEPT,jt=Oe,Ht=Oe,Gt=Oe,zt=Oe,wr=T.FD_DATASYNC|T.FD_READ|T.FD_SEEK|T.FD_FDSTAT_SET_FLAGS|T.FD_SYNC|T.FD_TELL|T.FD_WRITE|T.FD_ADVISE|T.FD_ALLOCATE|T.FD_FILESTAT_GET|T.FD_FILESTAT_SET_SIZE|T.FD_FILESTAT_SET_TIMES|T.POLL_FD_READWRITE,Jt=BigInt(0),Ar=T.FD_FDSTAT_SET_FLAGS|T.FD_SYNC|T.FD_ADVISE|T.PATH_CREATE_DIRECTORY|T.PATH_CREATE_FILE|T.PATH_LINK_SOURCE|T.PATH_LINK_TARGET|T.PATH_OPEN|T.FD_READDIR|T.PATH_READLINK|T.PATH_RENAME_SOURCE|T.PATH_RENAME_TARGET|T.PATH_FILESTAT_GET|T.PATH_FILESTAT_SET_SIZE|T.PATH_FILESTAT_SET_TIMES|T.FD_FILESTAT_GET|T.FD_FILESTAT_SET_TIMES|T.PATH_SYMLINK|T.PATH_UNLINK_FILE|T.PATH_REMOVE_DIRECTORY|T.POLL_FD_READWRITE,qt=Ar|wr,Kt=T.FD_READ|T.FD_FDSTAT_SET_FLAGS|T.FD_WRITE|T.FD_FILESTAT_GET|T.POLL_FD_READWRITE|T.SOCK_SHUTDOWN,Yt=Oe,$t=T.FD_READ|T.FD_FDSTAT_SET_FLAGS|T.FD_WRITE|T.FD_FILESTAT_GET|T.POLL_FD_READWRITE,Qt=BigInt(0);function Re(f,c,v,p){const m={base:BigInt(0),inheriting:BigInt(0)};if(p===0)throw new de("Unknown file type",28);switch(p){case 4:m.base=wr,m.inheriting=Jt;break;case 3:m.base=Ar,m.inheriting=qt;break;case 6:case 5:m.base=Kt,m.inheriting=Yt;break;case 2:f.indexOf(c)!==-1?(m.base=$t,m.inheriting=Qt):(m.base=Gt,m.inheriting=zt);break;case 1:m.base=jt,m.inheriting=Ht;break;default:m.base=BigInt(0),m.inheriting=BigInt(0)}const S=v&3;return S===0?m.base&=~T.FD_WRITE:S===1&&(m.base&=~T.FD_READ),m}function Fe(f,c){let v=0;for(let S=0;S<f.length;S++){const g=f[S];v+=g.length}let p=0;const m=new Uint8Array(v);for(let S=0;S<f.length;S++){const g=f[S];m.set(g,p),p+=g.length}return m}class br{constructor(c,v,p,m,S,g,O,P){this.id=c,this.fd=v,this.path=p,this.realPath=m,this.type=S,this.rightsBase=g,this.rightsInheriting=O,this.preopen=P,this.pos=BigInt(0),this.size=BigInt(0)}seek(c,v){if(v===0)this.pos=BigInt(c);else if(v===1)this.pos+=BigInt(c);else if(v===2)this.pos=BigInt(this.size)-BigInt(c);else throw new de("Unknown whence",29);return this.pos}}class Ir extends br{constructor(c,v,p,m,S,g,O,P,x){super(v,p,m,S,g,O,P,x),this._log=c,this._buf=null}write(c){const v=c;if(this._buf&&(c=Fe([this._buf,c]),this._buf=null),c.indexOf(10)===-1)return this._buf=c,v.byteLength;let p=0,m=0,S;for(;(S=c.indexOf(10,p))!==-1;){const g=new TextDecoder().decode(c.subarray(m,S));this._log(g),p+=S-m+1,m=S+1}return p<c.length&&(this._buf=c.slice(p)),v.byteLength}}function $e(f){return f.isBlockDevice()?1:f.isCharacterDevice()?2:f.isDirectory()?3:f.isSocket()?6:f.isFile()?4:f.isSymbolicLink()?7:0}function Me(f,c,v){f.setBigUint64(c,v.dev,!0),f.setBigUint64(c+8,v.ino,!0),f.setBigUint64(c+16,BigInt($e(v)),!0),f.setBigUint64(c+24,v.nlink,!0),f.setBigUint64(c+32,v.size,!0),f.setBigUint64(c+40,v.atimeMs*BigInt(1e6),!0),f.setBigUint64(c+48,v.mtimeMs*BigInt(1e6),!0),f.setBigUint64(c+56,v.ctimeMs*BigInt(1e6),!0)}class Lr{constructor(c){this.used=0,this.size=c.size,this.fds=Array(c.size),this.stdio=[c.in,c.out,c.err],this.print=c.print,this.printErr=c.printErr,this.insertStdio(c.in,0,"<stdin>"),this.insertStdio(c.out,1,"<stdout>"),this.insertStdio(c.err,2,"<stderr>")}insertStdio(c,v,p){const{base:S,inheriting:g}=Re(this.stdio,c,2,2),O=this.insert(c,p,p,2,S,g,0);if(O.id!==v)throw new de(`id: ${O.id} !== expected: ${v}`,8);return O}insert(c,v,p,m,S,g,O){var P,x;let W=-1;if(this.used>=this.size){const s=this.size*2;this.fds.length=s,W=this.size,this.size=s}else for(let s=0;s<this.size;++s)if(this.fds[s]==null){W=s;break}let E;return v==="<stdout>"?E=new Ir((P=this.print)!==null&&P!==void 0?P:console.log,W,c,v,p,m,S,g,O):v==="<stderr>"?E=new Ir((x=this.printErr)!==null&&x!==void 0?x:console.error,W,c,v,p,m,S,g,O):E=new br(W,c,v,p,m,S,g,O),this.fds[W]=E,this.used++,E}get(c,v,p){if(c>=this.size)throw new de("Invalid fd",8);const m=this.fds[c];if(!m||m.id!==c)throw new de("Bad file descriptor",8);if((~m.rightsBase&v)!==BigInt(0)||(~m.rightsInheriting&p)!==BigInt(0))throw new de("Capabilities insufficient",76);return m}remove(c){if(c>=this.size)throw new de("Invalid fd",8);const v=this.fds[c];if(!v||v.id!==c)throw new de("Bad file descriptor",8);this.fds[c]=void 0,this.used--}}class Zt extends Lr{constructor(c){super(c),this.fs=c.fs}getFileTypeByFd(c){const v=this.fs.fstatSync(c,{bigint:!0});return $e(v)}insertPreopen(c,v,p){const m=this.getFileTypeByFd(c);if(m!==3)throw new de(`Preopen not dir: ["${v}", "${p}"]`,54);const S=Re(this.stdio,c,0,m);return this.insert(c,v,p,m,S.base,S.inheriting,1)}renumber(c,v){if(c===v)return;if(c>=this.size||v>=this.size)throw new de("Invalid fd",8);const p=this.fds[c],m=this.fds[v];if(!p||!m||p.id!==c||m.id!==v)throw new de("Invalid fd",8);this.fs.closeSync(p.fd),this.fds[c]=this.fds[v],this.fds[c].id=c,this.fds[v]=void 0,this.used--}}class Xt extends Lr{constructor(c){super(c)}async getFileTypeByFd(c){const v=await c.stat({bigint:!0});return $e(v)}async insertPreopen(c,v,p){const m=await this.getFileTypeByFd(c);if(m!==3)throw new de(`Preopen not dir: ["${v}", "${p}"]`,54);const S=Re(this.stdio,c.fd,0,m);return this.insert(c,v,p,m,S.base,S.inheriting,1)}async renumber(c,v){if(c===v)return;if(c>=this.size||v>=this.size)throw new de("Invalid fd",8);const p=this.fds[c],m=this.fds[v];if(!p||!m||p.id!==c||m.id!==v)throw new de("Invalid fd",8);await p.fd.close(),this.fds[c]=this.fds[v],this.fds[c].id=c,this.fds[v]=void 0,this.used--}}const en=function(){return Be.Memory}();class rn extends en{constructor(c){super(c)}get HEAP8(){return new Int8Array(super.buffer)}get HEAPU8(){return new Uint8Array(super.buffer)}get HEAP16(){return new Int16Array(super.buffer)}get HEAPU16(){return new Uint16Array(super.buffer)}get HEAP32(){return new Int32Array(super.buffer)}get HEAPU32(){return new Uint32Array(super.buffer)}get HEAP64(){return new BigInt64Array(super.buffer)}get HEAPU64(){return new BigUint64Array(super.buffer)}get HEAPF32(){return new Float32Array(super.buffer)}get HEAPF64(){return new Float64Array(super.buffer)}get view(){return new DataView(super.buffer)}}function tn(f){return Object.getPrototypeOf(f)===Be.Memory.prototype&&Object.setPrototypeOf(f,rn.prototype),f}function nn(){const f=Be.Function;if(typeof f!="function")throw new Error('WebAssembly.Function is not supported in this environment. If you are using V8 based browser like Chrome, try to specify --js-flags="--wasm-staging --experimental-wasm-stack-switching"');return f}function an(f,c,v){const p=nn();if(typeof f!="function")throw new TypeError("Function required");const m=c.slice(0);return m.unshift("externref"),new p({parameters:m,results:v},f,{suspending:"first"})}function Te(f,c){if(f.length===0||c.length===0)return 0;let v=0,p=c.length-v;for(let m=0;m<f.length;++m){const S=f[m];if(p<S.length)return S.set(c.subarray(v,v+p),0),v+=p,p=0,v;S.set(c.subarray(v,v+S.length),0),v+=S.length,p-=S.length}return v}const Sr=new WeakMap,G=new WeakMap,Tr=new WeakMap;function q(f){return Sr.get(f)}function re(f){const c=Tr.get(f);if(!c)throw new Error("filesystem is unavailable");return c}function Cr(f){if(f instanceof de)return f.errno;switch(f.code){case"ENOENT":return 44;case"EBADF":return 8;case"EINVAL":return 28;case"EPERM":return 63;case"EPROTO":return 65;case"EEXIST":return 20;case"ENOTDIR":return 54;case"EMFILE":return 33;case"EACCES":return 2;case"EISDIR":return 31;case"ENOTEMPTY":return 55;case"ENOSYS":return 52}throw f}function sn(f,c){return Object.defineProperty(c,"name",{value:f}),c}function ne(f,c,v){return sn(c,function(){if(it.NODE_DEBUG_NATIVE==="wasi"){const m=Array.prototype.slice.call(arguments);let S=[`${c}(${Array.from({length:arguments.length}).map(()=>"%d").join(", ")})`];S=S.concat(m),console.debug.apply(console,S)}let p;try{p=v.apply(f,arguments)}catch(m){return Cr(m)}return ut(p)?p.then(m=>m,Cr):p})}function Qe(f,c,v,p){let m=oe(c.realPath,v);if((p&1)===1)try{m=f.readlinkSync(m)}catch(S){if(S.code!=="EINVAL"&&S.code!=="ENOENT")throw S}return m}async function Ze(f,c,v,p){let m=oe(c.realPath,v);if((p&1)===1)try{m=await f.promises.readlink(m)}catch(S){if(S.code!=="EINVAL"&&S.code!=="ENOENT")throw S}return m}const Ee=new TextEncoder,se=new TextDecoder,We=(BigInt(1)<<BigInt(63))-BigInt(1);function Dr(){const f=window.prompt();return f===null?new Uint8Array:new TextEncoder().encode(f+`
`)}function je(f){return!!(f&-16)||(f&3)===3||(f&12)===12}class Ce{constructor(c,v,p,m,S,g){this.args_get=ne(this,"args_get",function(E,s){if(E=Number(E),s=Number(s),E===0||s===0)return 28;const{HEAPU8:_,view:h}=q(this),w=G.get(this).args;for(let I=0;I<w.length;++I){const C=w[I];h.setInt32(E,s,!0),E+=4;const B=Ee.encode(C+"\0");_.set(B,s),s+=B.length}return 0}),this.args_sizes_get=ne(this,"args_sizes_get",function(E,s){if(E=Number(E),s=Number(s),E===0||s===0)return 28;const{view:_}=q(this),y=G.get(this).args;return _.setUint32(E,y.length,!0),_.setUint32(s,Ee.encode(y.join("\0")+"\0").length,!0),0}),this.environ_get=ne(this,"environ_get",function(E,s){if(E=Number(E),s=Number(s),E===0||s===0)return 28;const{HEAPU8:_,view:h}=q(this),w=G.get(this).env;for(let I=0;I<w.length;++I){const C=w[I];h.setInt32(E,s,!0),E+=4;const B=Ee.encode(C+"\0");_.set(B,s),s+=B.length}return 0}),this.environ_sizes_get=ne(this,"environ_sizes_get",function(E,s){if(E=Number(E),s=Number(s),E===0||s===0)return 28;const{view:_}=q(this),h=G.get(this);return _.setUint32(E,h.env.length,!0),_.setUint32(s,Ee.encode(h.env.join("\0")+"\0").length,!0),0}),this.clock_res_get=ne(this,"clock_res_get",function(E,s){if(s=Number(s),s===0)return 28;const{view:_}=q(this);switch(E){case 0:return _.setBigUint64(s,BigInt(1e6),!0),0;case 1:case 2:case 3:return _.setBigUint64(s,BigInt(1e3),!0),0;default:return 28}}),this.clock_time_get=ne(this,"clock_time_get",function(E,s,_){if(_=Number(_),_===0)return 28;const{view:h}=q(this);switch(E){case 0:return h.setBigUint64(_,BigInt(Date.now())*BigInt(1e6),!0),0;case 1:case 2:case 3:{const y=performance.now()/1e3,w=Math.trunc(y),I=Math.floor((y-w)*1e3),C=BigInt(w)*BigInt(1e9)+BigInt(I)*BigInt(1e6);return h.setBigUint64(_,C,!0),0}default:return 28}}),this.fd_advise=ne(this,"fd_advise",function(E,s,_,h){return 52}),this.fd_fdstat_get=ne(this,"fd_fdstat_get",function(E,s){if(s=Number(s),s===0)return 28;const h=G.get(this).fds.get(E,BigInt(0),BigInt(0)),{view:y}=q(this);return y.setUint16(s,h.type,!0),y.setUint16(s+2,0,!0),y.setBigUint64(s+8,h.rightsBase,!0),y.setBigUint64(s+16,h.rightsInheriting,!0),0}),this.fd_fdstat_set_flags=ne(this,"fd_fdstat_set_flags",function(E,s){return 52}),this.fd_fdstat_set_rights=ne(this,"fd_fdstat_set_rights",function(E,s,_){const y=G.get(this).fds.get(E,BigInt(0),BigInt(0));return(s|y.rightsBase)>y.rightsBase||(_|y.rightsInheriting)>y.rightsInheriting?76:(y.rightsBase=s,y.rightsInheriting=_,0)}),this.fd_prestat_get=ne(this,"fd_prestat_get",function(E,s){if(s=Number(s),s===0)return 28;const _=G.get(this);let h;try{h=_.fds.get(E,BigInt(0),BigInt(0))}catch(w){if(w instanceof de)return w.errno;throw w}if(h.preopen!==1)return 28;const{view:y}=q(this);return y.setUint32(s,0,!0),y.setUint32(s+4,Ee.encode(h.path).length,!0),0}),this.fd_prestat_dir_name=ne(this,"fd_prestat_dir_name",function(E,s,_){if(s=Number(s),_=Number(_),s===0)return 28;const y=G.get(this).fds.get(E,BigInt(0),BigInt(0));if(y.preopen!==1)return 8;const w=Ee.encode(y.path);if(w.length>_)return 42;const{HEAPU8:C}=q(this);return C.set(w,s),0}),this.fd_seek=ne(this,"fd_seek",function(E,s,_,h){if(h=Number(h),h===0)return 28;if(E===0||E===1||E===2)return 0;const I=G.get(this).fds.get(E,T.FD_SEEK,BigInt(0)).seek(s,_),{view:C}=q(this);return C.setBigUint64(h,I,!0),0}),this.fd_tell=ne(this,"fd_tell",function(E,s){const h=G.get(this).fds.get(E,T.FD_TELL,BigInt(0)),y=BigInt(h.pos),{view:w}=q(this);return w.setBigUint64(Number(s),y,!0),0}),this.poll_oneoff=ne(this,"poll_oneoff",function(E,s,_,h){if(E=Number(E),s=Number(s),h=Number(h),_=Number(_),_=_>>>0,E===0||s===0||_===0||h===0)return 28;const{view:y}=q(this);y.setUint32(h,0,!0);let w=0,I=BigInt(0),C=BigInt(0),B=0,k=BigInt(0),D;const U=Array(_);for(w=0;w<_;w++){D=E+w*48;const V=y.getBigUint64(D,!0),j=y.getUint8(D+8),J=y.getUint32(D+16,!0),Q=y.getBigUint64(D+24,!0),Y=y.getBigUint64(D+32,!0),Z=y.getUint16(D+40,!0);U[w]={userdata:V,type:j,u:{clock:{clock_id:J,timeout:Q,precision:Y,flags:Z},fd_readwrite:{fd:J}}}}const R=[];for(w=0;w<_;w++)switch(D=U[w],D.type){case 0:{if(D.u.clock.flags===1){const V=BigInt(Date.now())*BigInt(1e6);C=D.u.clock.timeout-V}else C=D.u.clock.timeout;(B===0||C<k)&&(k=C,I=D.userdata,B=1);break}case 1:case 2:R.push(D);break;default:return 28}if(R.length>0){for(w=0;w<R.length;w++){const V=R[w],j=s+32*w;y.setBigUint64(j,V.userdata,!0),y.setUint32(j+8,52,!0),y.setUint32(j+12,V.type,!0),y.setBigUint64(j+16,BigInt(0),!0),y.setUint16(j+24,0,!0),y.setUint32(h,1,!0)}return y.setUint32(h,R.length,!0),0}if(B){Number(k/BigInt(1e6));const V=s;y.setBigUint64(V,I,!0),y.setUint32(V+8,0,!0),y.setUint32(V+12,0,!0),y.setUint32(h,1,!0)}return 0}),this.proc_exit=ne(this,"proc_exit",function(E){return typeof process=="object"&&process!==null&&typeof process.exit=="function"&&process.exit(E),0}),this.proc_raise=ne(this,"proc_raise",function(E){return 52}),this.sched_yield=ne(this,"sched_yield",function(){return 0}),this.random_get=typeof crypto<"u"&&typeof crypto.getRandomValues=="function"?ne(this,"random_get",function(E,s){if(E=Number(E),E===0)return 28;s=Number(s);const{HEAPU8:_,view:h}=q(this);if(typeof SharedArrayBuffer=="function"&&_.buffer instanceof SharedArrayBuffer||Object.prototype.toString.call(_.buffer)==="[object SharedArrayBuffer]"){for(let I=E;I<E+s;++I)h.setUint8(I,Math.floor(Math.random()*256));return 0}let y;const w=65536;for(y=0;y+w<s;y+=w)crypto.getRandomValues(_.subarray(E+y,E+y+w));return crypto.getRandomValues(_.subarray(E+y,E+s)),0}):ne(this,"random_get",function(E,s){if(E=Number(E),E===0)return 28;s=Number(s);const{view:_}=q(this);for(let h=E;h<E+s;++h)_.setUint8(h,Math.floor(Math.random()*256));return 0}),this.sock_recv=ne(this,"sock_recv",function(){return 58}),this.sock_send=ne(this,"sock_send",function(){return 58}),this.sock_shutdown=ne(this,"sock_shutdown",function(){return 58}),this.sock_accept=ne(this,"sock_accept",function(){return 58}),G.set(this,{fds:p,args:c,env:v}),S&&Tr.set(this,S);const O=this;function P(E,s,_,h,y){m?g?O[E]=g.wrapImportFunction(ne(O,E,_)):O[E]=an(ne(O,E,_),h,y):O[E]=ne(O,E,s)}P("fd_allocate",function(s,_,h){const y=G.get(this),w=re(this),I=y.fds.get(s,T.FD_ALLOCATE,BigInt(0));return w.fstatSync(I.fd,{bigint:!0}).size<_+h&&w.ftruncateSync(I.fd,Number(_+h)),0},async function(s,_,h){const I=G.get(this).fds.get(s,T.FD_ALLOCATE,BigInt(0)).fd;return(await I.stat({bigint:!0})).size<_+h&&await I.truncate(Number(_+h)),0},["i32","i64","f64"],["i32"]),P("fd_close",function(s){const _=G.get(this),h=_.fds.get(s,BigInt(0),BigInt(0));return re(this).closeSync(h.fd),_.fds.remove(s),0},async function(s){const _=G.get(this);return await _.fds.get(s,BigInt(0),BigInt(0)).fd.close(),_.fds.remove(s),0},["i32"],["i32"]),P("fd_datasync",function(s){const h=G.get(this).fds.get(s,T.FD_DATASYNC,BigInt(0));return re(this).fdatasyncSync(h.fd),0},async function(s){return await G.get(this).fds.get(s,T.FD_DATASYNC,BigInt(0)).fd.datasync(),0},["i32"],["i32"]),P("fd_filestat_get",function(s,_){if(_=Number(_),_===0)return 28;const y=G.get(this).fds.get(s,T.FD_FILESTAT_GET,BigInt(0)),I=re(this).fstatSync(y.fd,{bigint:!0}),{view:C}=q(this);return Me(C,_,I),0},async function(s,_){if(_=Number(_),_===0)return 28;const I=await G.get(this).fds.get(s,T.FD_FILESTAT_GET,BigInt(0)).fd.stat({bigint:!0}),{view:C}=q(this);return Me(C,_,I),0},["i32","i32"],["i32"]),P("fd_filestat_set_size",function(s,_){const y=G.get(this).fds.get(s,T.FD_FILESTAT_SET_SIZE,BigInt(0));return re(this).ftruncateSync(y.fd,Number(_)),0},async function(s,_){return await G.get(this).fds.get(s,T.FD_FILESTAT_SET_SIZE,BigInt(0)).fd.truncate(Number(_)),0},["i32","i64"],["i32"]);function x(E,s,_,h){const w=G.get(this).fds.get(E,T.FD_FILESTAT_SET_TIMES,BigInt(0));return(h&2)===2&&(s=BigInt(Date.now()*1e6)),(h&8)===8&&(_=BigInt(Date.now()*1e6)),{fileDescriptor:w,atim:s,mtim:_}}P("fd_filestat_set_times",function(s,_,h,y){if(je(y))return 28;const{fileDescriptor:w,atim:I,mtim:C}=x.call(this,s,_,h,y);return re(this).futimesSync(w.fd,Number(I),Number(C)),0},async function(s,_,h,y){if(je(y))return 28;const{fileDescriptor:w,atim:I,mtim:C}=x.call(this,s,_,h,y);return await w.fd.utimes(Number(I),Number(C)),0},["i32","i64","i64","i32"],["i32"]),P("fd_pread",function(s,_,h,y,w){if(_=Number(_),w=Number(w),_===0&&h||w===0||y>We)return 28;const{HEAPU8:I,view:C}=q(this),k=G.get(this).fds.get(s,T.FD_READ|T.FD_SEEK,BigInt(0));if(!h)return C.setUint32(w,0,!0),0;let D=0;const U=Array.from({length:Number(h)},(Q,Y)=>{const Z=_+Y*8,fe=C.getInt32(Z,!0),ge=C.getUint32(Z+4,!0);return D+=ge,I.subarray(fe,fe+ge)});let R=0;const V=(()=>{try{return new Uint8Array(new SharedArrayBuffer(D))}catch{return new Uint8Array(D)}})();V._isBuffer=!0;const J=re(this).readSync(k.fd,V,0,V.length,Number(y));return R=V?Te(U,V.subarray(0,J)):0,C.setUint32(w,R,!0),0},async function(E,s,_,h,y){if(s=Number(s),y=Number(y),s===0&&_||y===0||h>We)return 28;const{HEAPU8:w,view:I}=q(this),B=G.get(this).fds.get(E,T.FD_READ|T.FD_SEEK,BigInt(0));if(!_)return I.setUint32(y,0,!0),0;let k=0;const D=Array.from({length:Number(_)},(j,J)=>{const Q=s+J*8,Y=I.getInt32(Q,!0),Z=I.getUint32(Q+4,!0);return k+=Z,w.subarray(Y,Y+Z)});let U=0;const R=new Uint8Array(k);R._isBuffer=!0;const{bytesRead:V}=await B.fd.read(R,0,R.length,Number(h));return U=R?Te(D,R.subarray(0,V)):0,I.setUint32(y,U,!0),0},["i32","i32","i32","i64","i32"],["i32"]),P("fd_pwrite",function(s,_,h,y,w){if(_=Number(_),w=Number(w),_===0&&h||w===0||y>We)return 28;const{HEAPU8:I,view:C}=q(this),k=G.get(this).fds.get(s,T.FD_WRITE|T.FD_SEEK,BigInt(0));if(!h)return C.setUint32(w,0,!0),0;const D=Fe(Array.from({length:Number(h)},(V,j)=>{const J=_+j*8,Q=C.getInt32(J,!0),Y=C.getUint32(J+4,!0);return I.subarray(Q,Q+Y)})),R=re(this).writeSync(k.fd,D,0,D.length,Number(y));return C.setUint32(w,R,!0),0},async function(s,_,h,y,w){if(_=Number(_),w=Number(w),_===0&&h||w===0||y>We)return 28;const{HEAPU8:I,view:C}=q(this),k=G.get(this).fds.get(s,T.FD_WRITE|T.FD_SEEK,BigInt(0));if(!h)return C.setUint32(w,0,!0),0;const D=Fe(Array.from({length:Number(h)},(R,V)=>{const j=_+V*8,J=C.getInt32(j,!0),Q=C.getUint32(j+4,!0);return I.subarray(J,J+Q)})),{bytesWritten:U}=await k.fd.write(D,0,D.length,Number(y));return C.setUint32(w,U,!0),0},["i32","i32","i32","i64","i32"],["i32"]),P("fd_read",function(s,_,h,y){if(_=Number(_),y=Number(y),_===0&&h||y===0)return 28;const{HEAPU8:w,view:I}=q(this),B=G.get(this).fds.get(s,T.FD_READ,BigInt(0));if(!h)return I.setUint32(y,0,!0),0;let k=0;const D=Array.from({length:Number(h)},(V,j)=>{const J=_+j*8,Q=I.getInt32(J,!0),Y=I.getUint32(J+4,!0);return k+=Y,w.subarray(Q,Q+Y)});let U,R=0;if(s===0){if(typeof window>"u"||typeof window.prompt!="function")return 58;U=Dr(),R=U?Te(D,U):0}else{U=(()=>{try{return new Uint8Array(new SharedArrayBuffer(k))}catch{return new Uint8Array(k)}})(),U._isBuffer=!0;const j=re(this).readSync(B.fd,U,0,U.length,Number(B.pos));R=U?Te(D,U.subarray(0,j)):0,B.pos+=BigInt(R)}return I.setUint32(y,R,!0),0},async function(s,_,h,y){if(_=Number(_),y=Number(y),_===0&&h||y===0)return 28;const{HEAPU8:w,view:I}=q(this),B=G.get(this).fds.get(s,T.FD_READ,BigInt(0));if(!h)return I.setUint32(y,0,!0),0;let k=0;const D=Array.from({length:Number(h)},(V,j)=>{const J=_+j*8,Q=I.getInt32(J,!0),Y=I.getUint32(J+4,!0);return k+=Y,w.subarray(Q,Q+Y)});let U,R=0;if(s===0){if(typeof window>"u"||typeof window.prompt!="function")return 58;U=Dr(),R=U?Te(D,U):0}else{U=new Uint8Array(k),U._isBuffer=!0;const{bytesRead:V}=await B.fd.read(U,0,U.length,Number(B.pos));R=U?Te(D,U.subarray(0,V)):0,B.pos+=BigInt(R)}return I.setUint32(y,R,!0),0},["i32","i32","i32","i32"],["i32"]),P("fd_readdir",function(s,_,h,y,w){if(_=Number(_),h=Number(h),w=Number(w),_===0||w===0)return 0;const C=G.get(this).fds.get(s,T.FD_READDIR,BigInt(0)),B=re(this),k=B.readdirSync(C.realPath,{withFileTypes:!0}),{HEAPU8:D,view:U}=q(this);let R=0;for(let V=Number(y);V<k.length;V++){const j=Ee.encode(k[V].name),J=B.statSync(oe(C.realPath,k[V].name),{bigint:!0}),Q=new Uint8Array(24+j.byteLength),Y=new DataView(Q.buffer);Y.setBigUint64(0,BigInt(V+1),!0),Y.setBigUint64(8,BigInt(J.ino?J.ino:0),!0),Y.setUint32(16,j.byteLength,!0);let Z;k[V].isFile()?Z=4:k[V].isDirectory()?Z=3:k[V].isSymbolicLink()?Z=7:k[V].isCharacterDevice()?Z=2:k[V].isBlockDevice()?Z=1:k[V].isSocket()?Z=6:Z=0,Y.setUint8(20,Z),Q.set(j,24);const fe=Q.slice(0,Math.min(Q.length,h-R));D.set(fe,_+R),R+=fe.byteLength}return U.setUint32(w,R,!0),0},async function(s,_,h,y,w){if(_=Number(_),h=Number(h),w=Number(w),_===0||w===0)return 0;const C=G.get(this).fds.get(s,T.FD_READDIR,BigInt(0)),B=re(this),k=await B.promises.readdir(C.realPath,{withFileTypes:!0}),{HEAPU8:D,view:U}=q(this);let R=0;for(let V=Number(y);V<k.length;V++){const j=Ee.encode(k[V].name),J=await B.promises.stat(oe(C.realPath,k[V].name),{bigint:!0}),Q=new Uint8Array(24+j.byteLength),Y=new DataView(Q.buffer);Y.setBigUint64(0,BigInt(V+1),!0),Y.setBigUint64(8,BigInt(J.ino?J.ino:0),!0),Y.setUint32(16,j.byteLength,!0);let Z;k[V].isFile()?Z=4:k[V].isDirectory()?Z=3:k[V].isSymbolicLink()?Z=7:k[V].isCharacterDevice()?Z=2:k[V].isBlockDevice()?Z=1:k[V].isSocket()?Z=6:Z=0,Y.setUint8(20,Z),Q.set(j,24);const fe=Q.slice(0,Math.min(Q.length,h-R));D.set(fe,_+R),R+=fe.byteLength}return U.setUint32(w,R,!0),0},["i32","i32","i32","i64","i32"],["i32"]),P("fd_renumber",function(s,_){return G.get(this).fds.renumber(_,s),0},async function(s,_){return await G.get(this).fds.renumber(_,s),0},["i32","i32"],["i32"]),P("fd_sync",function(s){const h=G.get(this).fds.get(s,T.FD_SYNC,BigInt(0));return re(this).fsyncSync(h.fd),0},async function(s){return await G.get(this).fds.get(s,T.FD_SYNC,BigInt(0)).fd.sync(),0},["i32"],["i32"]),P("fd_write",function(s,_,h,y){if(_=Number(_),y=Number(y),_===0&&h||y===0)return 28;const{HEAPU8:w,view:I}=q(this),B=G.get(this).fds.get(s,T.FD_WRITE,BigInt(0));if(!h)return I.setUint32(y,0,!0),0;const k=Fe(Array.from({length:Number(h)},(U,R)=>{const V=_+R*8,j=I.getInt32(V,!0),J=I.getUint32(V+4,!0);return w.subarray(j,j+J)}));let D;return s===1||s===2?D=B.write(k):(D=re(this).writeSync(B.fd,k,0,k.length,Number(B.pos)),B.pos+=BigInt(D)),I.setUint32(y,D,!0),0},async function(s,_,h,y){if(_=Number(_),y=Number(y),_===0&&h||y===0)return 28;const{HEAPU8:w,view:I}=q(this),B=G.get(this).fds.get(s,T.FD_WRITE,BigInt(0));if(!h)return I.setUint32(y,0,!0),0;const k=Fe(Array.from({length:Number(h)},(U,R)=>{const V=_+R*8,j=I.getInt32(V,!0),J=I.getUint32(V+4,!0);return w.subarray(j,j+J)}));let D;return s===1||s===2?D=B.write(k):(D=await(await B.fd.write(k,0,k.length,Number(B.pos))).bytesWritten,B.pos+=BigInt(D)),I.setUint32(y,D,!0),0},["i32","i32","i32","i32"],["i32"]),P("path_create_directory",function(s,_,h){if(_=Number(_),h=Number(h),_===0)return 28;const{HEAPU8:y}=q(this),I=G.get(this).fds.get(s,T.PATH_CREATE_DIRECTORY,BigInt(0));let C=se.decode(ie(y,_,_+h));return C=oe(I.realPath,C),re(this).mkdirSync(C),0},async function(s,_,h){if(_=Number(_),h=Number(h),_===0)return 28;const{HEAPU8:y}=q(this),I=G.get(this).fds.get(s,T.PATH_CREATE_DIRECTORY,BigInt(0));let C=se.decode(ie(y,_,_+h));return C=oe(I.realPath,C),await re(this).promises.mkdir(C),0},["i32","i32","i32"],["i32"]),P("path_filestat_get",function(s,_,h,y,w){if(h=Number(h),y=Number(y),w=Number(w),h===0||w===0)return 28;const{HEAPU8:I,view:C}=q(this),k=G.get(this).fds.get(s,T.PATH_FILESTAT_GET,BigInt(0));let D=se.decode(ie(I,h,h+y));const U=re(this);D=oe(k.realPath,D);let R;return(_&1)===1?R=U.statSync(D,{bigint:!0}):R=U.lstatSync(D,{bigint:!0}),Me(C,w,R),0},async function(s,_,h,y,w){if(h=Number(h),y=Number(y),w=Number(w),h===0||w===0)return 28;const{HEAPU8:I,view:C}=q(this),k=G.get(this).fds.get(s,T.PATH_FILESTAT_GET,BigInt(0));let D=se.decode(ie(I,h,h+y));const U=re(this);D=oe(k.realPath,D);let R;return(_&1)===1?R=await U.promises.stat(D,{bigint:!0}):R=await U.promises.lstat(D,{bigint:!0}),Me(C,w,R),0},["i32","i32","i32","i32","i32"],["i32"]),P("path_filestat_set_times",function(s,_,h,y,w,I,C){if(h=Number(h),y=Number(y),h===0)return 28;const{HEAPU8:B}=q(this),D=G.get(this).fds.get(s,T.PATH_FILESTAT_SET_TIMES,BigInt(0));if(je(C))return 28;const U=re(this),R=Qe(U,D,se.decode(ie(B,h,h+y)),_);return(C&2)===2&&(w=BigInt(Date.now()*1e6)),(C&8)===8&&(I=BigInt(Date.now()*1e6)),U.utimesSync(R,Number(w),Number(I)),0},async function(s,_,h,y,w,I,C){if(h=Number(h),y=Number(y),h===0)return 28;const{HEAPU8:B}=q(this),D=G.get(this).fds.get(s,T.PATH_FILESTAT_SET_TIMES,BigInt(0));if(je(C))return 28;const U=re(this),R=await Ze(U,D,se.decode(ie(B,h,h+y)),_);return(C&2)===2&&(w=BigInt(Date.now()*1e6)),(C&8)===8&&(I=BigInt(Date.now()*1e6)),await U.promises.utimes(R,Number(w),Number(I)),0},["i32","i32","i32","i32","i64","i64","i32"],["i32"]),P("path_link",function(s,_,h,y,w,I,C){if(h=Number(h),y=Number(y),I=Number(I),C=Number(C),h===0||I===0)return 28;const B=G.get(this);let k,D;s===w?k=D=B.fds.get(s,T.PATH_LINK_SOURCE|T.PATH_LINK_TARGET,BigInt(0)):(k=B.fds.get(s,T.PATH_LINK_SOURCE,BigInt(0)),D=B.fds.get(w,T.PATH_LINK_TARGET,BigInt(0)));const{HEAPU8:U}=q(this),R=re(this),V=Qe(R,k,se.decode(ie(U,h,h+y)),_),j=oe(D.realPath,se.decode(ie(U,I,I+C)));return R.linkSync(V,j),0},async function(s,_,h,y,w,I,C){if(h=Number(h),y=Number(y),I=Number(I),C=Number(C),h===0||I===0)return 28;const B=G.get(this);let k,D;s===w?k=D=B.fds.get(s,T.PATH_LINK_SOURCE|T.PATH_LINK_TARGET,BigInt(0)):(k=B.fds.get(s,T.PATH_LINK_SOURCE,BigInt(0)),D=B.fds.get(w,T.PATH_LINK_TARGET,BigInt(0)));const{HEAPU8:U}=q(this),R=re(this),V=await Ze(R,k,se.decode(ie(U,h,h+y)),_),j=oe(D.realPath,se.decode(ie(U,I,I+C)));return await R.promises.link(V,j),0},["i32","i32","i32","i32","i32","i32","i32"],["i32"]);function W(E,s,_,h){const y=(s&(T.FD_READ|T.FD_READDIR))!==BigInt(0),w=(s&(T.FD_DATASYNC|T.FD_WRITE|T.FD_ALLOCATE|T.FD_FILESTAT_SET_SIZE))!==BigInt(0);let I=w?y?2:1:0,C=T.PATH_OPEN,B=s|_;return(E&1)!==0&&(I|=64,C|=T.PATH_CREATE_FILE),(E&2)!==0&&(I|=65536),(E&4)!==0&&(I|=128),(E&8)!==0&&(I|=512,C|=T.PATH_FILESTAT_SET_SIZE),(h&1)!==0&&(I|=1024),(h&2)!==0&&(B|=T.FD_DATASYNC),(h&4)!==0&&(I|=2048),(h&8)!==0&&(I|=1052672,B|=T.FD_SYNC),(h&16)!==0&&(I|=1052672,B|=T.FD_SYNC),w&&(I&1536)===0&&(B|=T.FD_SEEK),{flags:I,needed_base:C,needed_inheriting:B}}P("path_open",function(s,_,h,y,w,I,C,B,k){if(h=Number(h),k=Number(k),h===0||k===0)return 28;y=Number(y),I=BigInt(I),C=BigInt(C);const{flags:D,needed_base:U,needed_inheriting:R}=W(w,I,C,B),V=G.get(this),j=V.fds.get(s,U,R),J=q(this),Q=J.HEAPU8,Y=se.decode(ie(Q,h,h+y)),Z=re(this),fe=Qe(Z,j,Y,_),ge=Z.openSync(fe,D,438),we=V.fds.getFileTypeByFd(ge);if(we!==3&&((w&2)!==0||fe.endsWith("/")))return 54;const{base:Pe,inheriting:Ne}=Re(V.fds.stdio,ge,D,we),he=V.fds.insert(ge,fe,fe,we,I&Pe,C&Ne,0),Ae=Z.fstatSync(ge,{bigint:!0});return Ae.isFile()&&(he.size=Ae.size,(D&1024)!==0&&(he.pos=Ae.size)),J.view.setInt32(k,he.id,!0),0},async function(s,_,h,y,w,I,C,B,k){if(h=Number(h),k=Number(k),h===0||k===0)return 28;y=Number(y),I=BigInt(I),C=BigInt(C);const{flags:D,needed_base:U,needed_inheriting:R}=W(w,I,C,B),V=G.get(this),j=V.fds.get(s,U,R),J=q(this),Q=J.HEAPU8,Y=se.decode(ie(Q,h,h+y)),Z=re(this),fe=await Ze(Z,j,Y,_),ge=await Z.promises.open(fe,D,438),we=await V.fds.getFileTypeByFd(ge);if((w&2)!==0&&we!==3)return 54;const{base:Pe,inheriting:Ne}=Re(V.fds.stdio,ge.fd,D,we),he=V.fds.insert(ge,fe,fe,we,I&Pe,C&Ne,0),Ae=await ge.stat({bigint:!0});return Ae.isFile()&&(he.size=Ae.size,(D&1024)!==0&&(he.pos=Ae.size)),J.view.setInt32(k,he.id,!0),0},["i32","i32","i32","i32","i32","i64","i64","i32","i32"],["i32"]),P("path_readlink",function(s,_,h,y,w,I){if(_=Number(_),h=Number(h),y=Number(y),w=Number(w),I=Number(I),_===0||y===0||I===0)return 28;const{HEAPU8:C,view:B}=q(this),D=G.get(this).fds.get(s,T.PATH_READLINK,BigInt(0));let U=se.decode(ie(C,_,_+h));U=oe(D.realPath,U);const V=re(this).readlinkSync(U),j=Ee.encode(V),J=Math.min(j.length,w);return J>=w?42:(C.set(j.subarray(0,J),y),C[y+J]=0,B.setUint32(I,J,!0),0)},async function(s,_,h,y,w,I){if(_=Number(_),h=Number(h),y=Number(y),w=Number(w),I=Number(I),_===0||y===0||I===0)return 28;const{HEAPU8:C,view:B}=q(this),D=G.get(this).fds.get(s,T.PATH_READLINK,BigInt(0));let U=se.decode(ie(C,_,_+h));U=oe(D.realPath,U);const V=await re(this).promises.readlink(U),j=Ee.encode(V),J=Math.min(j.length,w);return J>=w?42:(C.set(j.subarray(0,J),y),C[y+J]=0,B.setUint32(I,J,!0),0)},["i32","i32","i32","i32","i32","i32"],["i32"]),P("path_remove_directory",function(s,_,h){if(_=Number(_),h=Number(h),_===0)return 28;const{HEAPU8:y}=q(this),I=G.get(this).fds.get(s,T.PATH_REMOVE_DIRECTORY,BigInt(0));let C=se.decode(ie(y,_,_+h));return C=oe(I.realPath,C),re(this).rmdirSync(C),0},async function(s,_,h){if(_=Number(_),h=Number(h),_===0)return 28;const{HEAPU8:y}=q(this),I=G.get(this).fds.get(s,T.PATH_REMOVE_DIRECTORY,BigInt(0));let C=se.decode(ie(y,_,_+h));return C=oe(I.realPath,C),await re(this).promises.rmdir(C),0},["i32","i32","i32"],["i32"]),P("path_rename",function(s,_,h,y,w,I){if(_=Number(_),h=Number(h),w=Number(w),I=Number(I),_===0||w===0)return 28;const C=G.get(this);let B,k;s===y?B=k=C.fds.get(s,T.PATH_RENAME_SOURCE|T.PATH_RENAME_TARGET,BigInt(0)):(B=C.fds.get(s,T.PATH_RENAME_SOURCE,BigInt(0)),k=C.fds.get(y,T.PATH_RENAME_TARGET,BigInt(0)));const{HEAPU8:D}=q(this),U=oe(B.realPath,se.decode(ie(D,_,_+h))),R=oe(k.realPath,se.decode(ie(D,w,w+I)));return re(this).renameSync(U,R),0},async function(s,_,h,y,w,I){if(_=Number(_),h=Number(h),w=Number(w),I=Number(I),_===0||w===0)return 28;const C=G.get(this);let B,k;s===y?B=k=C.fds.get(s,T.PATH_RENAME_SOURCE|T.PATH_RENAME_TARGET,BigInt(0)):(B=C.fds.get(s,T.PATH_RENAME_SOURCE,BigInt(0)),k=C.fds.get(y,T.PATH_RENAME_TARGET,BigInt(0)));const{HEAPU8:D}=q(this),U=oe(B.realPath,se.decode(ie(D,_,_+h))),R=oe(k.realPath,se.decode(ie(D,w,w+I)));return await re(this).promises.rename(U,R),0},["i32","i32","i32","i32","i32","i32"],["i32"]),P("path_symlink",function(s,_,h,y,w){if(s=Number(s),_=Number(_),y=Number(y),w=Number(w),s===0||y===0)return 28;const{HEAPU8:I}=q(this),B=G.get(this).fds.get(h,T.PATH_SYMLINK,BigInt(0)),k=se.decode(ie(I,s,s+_));if(k.length>0&&k[0]==="/")return 63;let D=se.decode(ie(I,y,y+w));return D=oe(B.realPath,D),re(this).symlinkSync(k,D),0},async function(s,_,h,y,w){if(s=Number(s),_=Number(_),y=Number(y),w=Number(w),s===0||y===0)return 28;const{HEAPU8:I}=q(this),B=G.get(this).fds.get(h,T.PATH_SYMLINK,BigInt(0)),k=se.decode(ie(I,s,s+_));let D=se.decode(ie(I,y,y+w));return D=oe(B.realPath,D),await re(this).promises.symlink(k,D),0},["i32","i32","i32","i32","i32"],["i32"]),P("path_unlink_file",function(s,_,h){if(_=Number(_),h=Number(h),_===0)return 28;const{HEAPU8:y}=q(this),I=G.get(this).fds.get(s,T.PATH_UNLINK_FILE,BigInt(0));let C=se.decode(ie(y,_,_+h));return C=oe(I.realPath,C),re(this).unlinkSync(C),0},async function(s,_,h){if(_=Number(_),h=Number(h),_===0)return 28;const{HEAPU8:y}=q(this),I=G.get(this).fds.get(s,T.PATH_UNLINK_FILE,BigInt(0));let C=se.decode(ie(y,_,_+h));return C=oe(I.realPath,C),await re(this).promises.unlink(C),0},["i32","i32","i32"],["i32"]),this._setMemory=function(s){if(!(s instanceof Be.Memory))throw new TypeError('"instance.exports.memory" property must be a WebAssembly.Memory');Sr.set(O,tn(s))}}static createSync(c,v,p,m,S,g,O){const P=new Zt({size:3,in:m[0],out:m[1],err:m[2],fs:S,print:g,printErr:O}),x=new Ce(c,v,P,!1,S);if(p.length>0)for(let W=0;W<p.length;++W){const E=S.realpathSync(p[W].realPath,"utf8"),s=S.openSync(E,"r",438);P.insertPreopen(s,p[W].mappedPath,E)}return x}static async createAsync(c,v,p,m,S,g,O,P){const x=new Xt({size:3,in:m[0],out:m[1],err:m[2],print:g,printErr:O}),W=new Ce(c,v,x,!0,S,P);if(p.length>0)for(let E=0;E<p.length;++E){const s=p[E],_=await S.promises.realpath(s.realPath),h=await S.promises.open(_,"r",438);await x.insertPreopen(h,s.mappedPath,_)}return W}}const on=Object.freeze(Object.create(null)),be=Symbol("kExitCode"),kr=Symbol("kSetMemory"),Xe=Symbol("kStarted"),He=Symbol("kInstance"),Ge=Symbol("kBindingName");function un(f){var c;Se(f,"options");let v;if(f.version!==void 0)switch(yr(f.version,"options.version"),f.version){case"unstable":v=Ce,this[Ge]="wasi_unstable";break;case"preview1":v=Ce,this[Ge]="wasi_snapshot_preview1";break;default:throw new TypeError(`unsupported WASI version "${f.version}"`)}else v=Ce,this[Ge]="wasi_snapshot_preview1";f.args!==void 0&&st(f.args,"options.args");const p=((c=f.args)!==null&&c!==void 0?c:[]).map(String),m=[];f.env!==void 0&&(Se(f.env,"options.env"),Object.entries(f.env).forEach(({0:O,1:P})=>{P!==void 0&&m.push(`${O}=${P}`)}));const S=[];if(f.preopens!==void 0&&(Se(f.preopens,"options.preopens"),Object.entries(f.preopens).forEach(({0:O,1:P})=>S.push({mappedPath:String(O),realPath:String(P)}))),S.length>0){if(f.fs===void 0)throw new Error("filesystem is disabled, can not preopen directory");try{Se(f.fs,"options.fs")}catch{throw new TypeError("Node.js fs like implementation is not provided")}}return f.print!==void 0&&xe(f.print,"options.print"),f.printErr!==void 0&&xe(f.printErr,"options.printErr"),f.returnOnExit!==void 0&&ot(f.returnOnExit,"options.returnOnExit"),{args:p,env:m,preopens:S,stdio:[0,1,2],_WASI:v}}function cn(f,c){this[kr]=f,this.wasiImport=c,this[Xe]=!1,this[be]=0,this[He]=void 0}class fn{constructor(c=on){const{args:v,env:p,preopens:m,stdio:S,_WASI:g}=un.call(this,c),O=g.createSync(v,p,m,S,c.fs,c.print,c.printErr),P=O._setMemory;delete O._setMemory,cn.call(this,P,O),c.returnOnExit&&(O.proc_exit=ln.bind(this))}finalizeBindings(c,v){var p,{memory:m=(p=c?.exports)===null||p===void 0?void 0:p.memory}=v===void 0?{}:v;if(this[Xe])throw new Error("WASI instance has already started");Se(c,"instance"),Se(c.exports,"instance.exports"),this[kr](m),this[He]=c,this[Xe]=!0}start(c){this.finalizeBindings(c);const{_start:v,_initialize:p}=this[He].exports;xe(v,"instance.exports._start"),mr(p,"instance.exports._initialize");let m;try{m=v()}catch(S){if(S!==be)throw S}return m instanceof Promise?m.then(()=>this[be],S=>{if(S!==be)throw S;return this[be]}):this[be]}initialize(c){this.finalizeBindings(c);const{_start:v,_initialize:p}=this[He].exports;if(mr(v,"instance.exports._start"),p!==void 0)return xe(p,"instance.exports._initialize"),p()}getImportObject(){return{[this[Ge]]:this.wasiImport}}}function ln(f){throw this[be]=f,be}const dn=new at({onLoad({wasmModule:f,wasmMemory:c}){const v=new fn({print:function(){console.log.apply(console,arguments)},printErr:function(){console.error.apply(console,arguments)}});return nt(f,{childThread:!0,wasi:v,overwriteImports(p){p.env={...p.env,...p.napi,...p.emnapi,memory:c}}})}});globalThis.onmessage=function(f){dn.handle(f)}})();
